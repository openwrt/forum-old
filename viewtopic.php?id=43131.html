<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WDR3600 LAN and WLAN problem ( clients can&#039;t access internet unless..)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p196112">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">paradoxman</div>
					<div class="post-datetime">
						25 Mar 2013, 19:49					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I bought this router and I have a strange problem with gargoyle 1.5.9&nbsp; which is based on the popular OPENWRT;<br />used as AP, it connects perfectly to the WAN, gets it&#039;s IP , but the LAN and Wireless clients don&#039;t have access to the internet (yellow exclamation mark) unless I go to the CONNECTION menu in the webinterface and hit APPLY CHANGES button once again without changing anything after the reboot ; after each reboot, I have to do this so the LAN and WLAN clients have access to the internet; I thought is was a DNSmasq problem but from the router itself (using putty) I can ping any adress on the internet and it works well, only from the client side is the problem.<br />I wonder if anyone knows the UCI command line syntax that is equivalent to the APPLY CHANGES button from the webinterface so that I add it in rc.local to execute at each startup? what exactly does the gargoyle firmware during an APPLY CHANGES command? does it re-load it&#039;s all settings? initiates some scripts?<br />I paste here the log before and after I issue the APPLY CHANGES command using the &quot;logread&quot; syntax in console :<br />(Notice the last lines on which I used bold characters which differ from the first output - this is after APLY CHANGES comand was issued from the webinterface &quot;connection&quot; menu) </p><p>BEFORE :</p><div class="quotebox"><blockquote><p>root@Gargoyle:~# logread<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.320000] pci_bus 0000:00: root bus resource [io 0x0000]<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 0.330000] pci 0000:00:00.0: [168c:0033] type 0 class 0x000280<br />Jan 1 02:00:17 Gargoyle kern.err kernel: [ 0.330000] pci 0000:00:00.0: invalid calibration data<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 0.330000] pci 0000:00:00.0: reg 10: [mem 0x00000000-0x0001ffff 64bit]<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 0.330000] pci 0000:00:00.0: reg 30: [mem 0x00000000-0x0000ffff pref]<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 0.330000] pci 0000:00:00.0: supports D1<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 0.330000] pci 0000:00:00.0: PME# supported from D0 D1 D3hot<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.330000] pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x1001ffff 64bit]<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.340000] pci 0000:00:00.0: BAR 6: assigned [mem 0x10020000-0x1002ffff pref]<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.340000] pci 0000:00:00.0: using irq 40 for pin 1<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.350000] Switching to clocksource MIPS<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.350000] NET: Registered protocol family 2<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.360000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.360000] TCP established hash table entries: 4096 (order: 3, 32768 bytes)<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.370000] TCP bind hash table entries: 4096 (order: 2, 16384 bytes)<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.370000] TCP: Hash tables configured (established 4096 bind 4096)<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.380000] TCP reno registered<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.380000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.390000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.390000] NET: Registered protocol family 1<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 0.400000] PCI: CLS 0 bytes, default 32<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.410000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.420000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.430000] msgmni has been set to 247<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.430000] io scheduler noop registered<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.440000] io scheduler deadline registered (default)<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.440000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.470000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.470000] console [ttyS0] enabled, bootconsole disabled<br />Jan 1 02:00:17 Gargoyle kern.warn kernel: [ 0.490000] m25p80 spi0.0: found s25fl064k, expected m25p80<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.490000] m25p80 spi0.0: s25fl064k (8192 Kbytes)<br />Jan 1 02:00:17 Gargoyle kern.notice kernel: [ 0.500000] 5 tp-link partitions found on MTD device spi0.0<br />Jan 1 02:00:17 Gargoyle kern.notice kernel: [ 0.500000] Creating 5 MTD partitions on &quot;spi0.0&quot;:<br />Jan 1 02:00:17 Gargoyle kern.notice kernel: [ 0.510000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;<br />Jan 1 02:00:17 Gargoyle kern.notice kernel: [ 0.520000] 0x000000020000-0x000000103318 : &quot;kernel&quot;<br />Jan 1 02:00:17 Gargoyle kern.warn kernel: [ 0.520000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />Jan 1 02:00:17 Gargoyle kern.notice kernel: [ 0.540000] 0x000000103318-0x0000007f0000 : &quot;rootfs&quot;<br />Jan 1 02:00:17 Gargoyle kern.warn kernel: [ 0.540000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />Jan 1 02:00:17 Gargoyle kern.notice kernel: [ 0.550000] mtd: partition &quot;rootfs&quot; set to be root filesystem<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.560000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=6A0000, len=150000<br />Jan 1 02:00:17 Gargoyle kern.notice kernel: [ 0.570000] 0x0000006a0000-0x0000007f0000 : &quot;rootfs_data&quot;<br />Jan 1 02:00:17 Gargoyle kern.notice kernel: [ 0.580000] 0x0000007f0000-0x000000800000 : &quot;art&quot;<br />Jan 1 02:00:17 Gargoyle kern.notice kernel: [ 0.580000] 0x000000020000-0x0000007f0000 : &quot;firmware&quot;<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.720000] ag71xx_mdio: probed<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 0.720000] eth0: Atheros AG71xx at 0xb9000000, irq 4<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 1.300000] eth0: Atheros AR8327 switch driver attached.<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 2.460000] ag71xx ag71xx.0: eth0: connected to PHY at ag71xx-mdio.0:00 [uid=004dd033, driver=Atheros AR8216/AR8236/AR8316]<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 2.480000] TCP cubic registered<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 2.480000] NET: Registered protocol family 17<br />Jan 1 02:00:17 Gargoyle kern.notice kernel: [ 2.480000] Bridge firewalling registered<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 2.490000] Ebtables v2.0 registered<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 2.490000] 8021q: 802.1Q VLAN Support v1.8<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 2.500000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 2.510000] Freeing unused kernel memory: 212k freed<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 4.510000] Registered led device: tp-link:blue:qss<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 4.510000] Registered led device: tp-link:blue:system<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 4.510000] Registered led device: tp-link:green:usb1<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 4.510000] Registered led device: tp-link:green:usb2<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 4.510000] Registered led device: tp-link:blue:wlan2g<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 5.470000] eth0: link up (1000Mbps/Full duplex)<br />Jan 1 02:00:17 Gargoyle kern.notice kernel: [ 7.800000] JFFS2 notice: (450) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (1 unchecked, 0 orphan) and 194 of xref (0 dead, 175 orphan) found.<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 7.980000] eth0: link down<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.040000] Compat-drivers backport release: compat-drivers-2012-09-04-2-gddac993<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.050000] Backport based on wireless-testing.git master-2012-09-07<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.060000] compat.git: wireless-testing.git<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.180000] cfg80211: Calling CRDA to update world regulatory domain<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.180000] cfg80211: World regulatory domain updated:<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.190000] cfg80211: (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.200000] cfg80211: (2400000 KHz - 2483000 KHz @ 40000 KHz), (N/A, 3000 mBm)<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.200000] cfg80211: (5140000 KHz - 5860000 KHz @ 40000 KHz), (N/A, 3000 mBm)<br />Jan 1 02:00:17 Gargoyle kern.notice kernel: [ 9.650000] SCSI subsystem initialized<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.860000] usbcore: registered new interface driver usbfs<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.870000] usbcore: registered new interface driver hub<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.870000] usbcore: registered new device driver usb<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 10.570000] ath: EEPROM regdomain: 0x0<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 10.570000] ath: EEPROM indicates default country code should be used<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 10.570000] ath: doing EEPROM country-&gt;regdmn map search<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 10.570000] ath: country maps to regdmn code: 0x3a<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 10.570000] ath: Country alpha2 being used: US<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 10.570000] ath: Regpair used: 0x3a<br />Jan 1 02:00:19 Gargoyle kern.info kernel: [ 19.300000] eth0: link up (1000Mbps/Full duplex)<br />Jan 1 02:00:20 Gargoyle kern.info kernel: [ 20.270000] eth0: link down<br />Jan 1 02:00:20 Gargoyle kern.info kernel: [ 20.280000] device eth0.1 entered promiscuous mode<br />Jan 1 02:00:20 Gargoyle kern.info kernel: [ 20.280000] device eth0 entered promiscuous mode<br />Jan 1 02:00:20 Gargoyle daemon.notice netifd: Interface &#039;lan&#039; is now up<br />Jan 1 02:00:20 Gargoyle daemon.notice netifd: Interface &#039;loopback&#039; is now up<br />Jan 1 02:00:20 Gargoyle kern.info kernel: [ 20.310000] eth0: link up (1000Mbps/Full duplex)<br />Jan 1 02:00:20 Gargoyle kern.info kernel: [ 20.360000] br-lan: port 1(eth0.1) entered forwarding state<br />Jan 1 02:00:20 Gargoyle kern.info kernel: [ 20.360000] br-lan: port 1(eth0.1) entered forwarding state<br />Jan 1 02:00:20 Gargoyle daemon.notice netifd: wan (793): udhcpc (v1.19.4) started<br />Jan 1 02:00:21 Gargoyle daemon.notice netifd: wan (793): Sending discover...<br />Jan 1 02:00:21 Gargoyle daemon.notice netifd: wan (793): Sending select for 78.87.23.148...<br />Jan 1 02:00:21 Gargoyle daemon.notice netifd: wan (793): Lease of 78.87.23.148 obtained, lease time 602054<br />Jan 1 02:00:21 Gargoyle daemon.notice netifd: Interface &#039;wan&#039; is now up<br />Jan 1 02:00:22 Gargoyle user.notice ifup: Enabling Router Solicitations on lan (br-lan)<br />Jan 1 02:00:22 Gargoyle kern.info kernel: [ 22.360000] br-lan: port 1(eth0.1) entered forwarding state<br />Jan 1 02:00:24 Gargoyle kern.info kernel: [ 24.600000] device wlan0 entered promiscuous mode<br />Jan 1 02:00:25 Gargoyle user.notice usb-modeswitch: 1-0:1.0: Manufacturer=Linux_3.3.8_ehci_hcd Product=Generic_Platform_EHCI_Controller Serial=ehci-platform<br />Jan 1 02:00:25 Gargoyle kern.info kernel: [ 25.240000] br-lan: port 2(wlan0) entered forwarding state<br />Jan 1 02:00:25 Gargoyle kern.info kernel: [ 25.250000] br-lan: port 2(wlan0) entered forwarding state<br />Jan 1 02:00:26 Gargoyle daemon.info hostapd: wlan0: STA 00:23:69:c7:e9:dd IEEE 802.11: authenticated<br />Jan 1 02:00:26 Gargoyle daemon.info hostapd: wlan0: STA 00:23:69:c7:e9:dd IEEE 802.11: associated (aid 1)<br />Jan 1 02:00:27 Gargoyle daemon.info hostapd: wlan0: STA 00:23:69:c7:e9:dd RADIUS: starting accounting session 00000019-00000000<br />Jan 1 02:00:27 Gargoyle daemon.info hostapd: wlan0: STA 00:23:69:c7:e9:dd WPA: pairwise key handshake completed (RSN)<br />Jan 1 02:00:27 Gargoyle kern.info kernel: [ 27.250000] br-lan: port 2(wlan0) entered forwarding state<br />Mar 25 08:32:56 Gargoyle authpriv.info dropbear[1229]: Running in background<br />Mar 25 08:32:57 Gargoyle user.notice usb-modeswitch: 1-1:1.0: Manufacturer=? Product=USB2.0_Hub Serial=?<br />Mar 25 08:32:57 Gargoyle daemon.warn httpd_gargoyle[1296]: started as root without requesting chroot(), warning only<br />Mar 25 08:32:57 Gargoyle daemon.notice httpd_gargoyle[1296]: httpd_gargoyle/1.0 14mar2008 starting on Gargoyle, port 80<br />Mar 25 08:32:57 Gargoyle daemon.info hostapd: wlan0: STA 00:23:69:c7:e9:dd WPA: group key handshake completed (RSN)<br />Mar 25 08:32:59 Gargoyle user.notice dnsmasq: DNS rebinding protection is active, will discard upstream RFC1918 responses!<br />Mar 25 08:32:59 Gargoyle user.notice dnsmasq: Allowing 127.0.0.0/8 responses<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq[1624]: started, version 2.62 cachesize 150<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq[1624]: compile time options: IPv6 GNU-getopt no-DBus no-i18n no-IDN DHCP no-DHCPv6 no-Lua TFTP no-conntrack<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq-dhcp[1624]: DHCP, IP range 192.168.1.100 -- 192.168.1.249, lease time 12h<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq[1624]: using local addresses only for domain lan<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq[1624]: reading /etc/resolv.conf.auto<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq[1624]: using nameserver 208.67.220.220#53<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq[1624]: using nameserver 208.67.222.222#53<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq[1624]: using nameserver 208.67.222.222#53<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq[1624]: using local addresses only for domain lan<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq[1624]: cleared cache<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq-dhcp[1624]: read /etc/ethers - 0 addresses<br />Mar 25 08:33:02 Gargoyle user.err syslog: error starting threads: errno 89 (Function not implemented)<br />Mar 25 08:33:02 Gargoyle user.info sysinit: exportfs: could not open /var/lib/nfs/.etab.lock for locking: errno 2 (No such file or directory)<br />Mar 25 08:33:02 Gargoyle user.info sysinit: exportfs: can&#039;t lock /var/lib/nfs/etab for writing<br />Mar 25 08:33:02 Gargoyle user.info sysinit: exportfs: could not open /var/lib/nfs/.xtab.lock for locking: errno 2 (No such file or directory)<br />Mar 25 08:33:02 Gargoyle user.info sysinit: exportfs: can&#039;t lock /var/lib/nfs/xtab for writing<br />Mar 25 08:33:40 Gargoyle daemon.info hostapd: wlan0: STA 00:14:bf:3c:48:f9 IEEE 802.11: authenticated<br />Mar 25 08:33:40 Gargoyle daemon.info hostapd: wlan0: STA 00:14:bf:3c:48:f9 IEEE 802.11: associated (aid 2)<br />Mar 25 08:33:40 Gargoyle daemon.info hostapd: wlan0: STA 00:14:bf:3c:48:f9 RADIUS: starting accounting session 00000019-00000001<br />Mar 25 08:33:40 Gargoyle daemon.info hostapd: wlan0: STA 00:14:bf:3c:48:f9 WPA: pairwise key handshake completed (RSN)<br />Mar 25 08:33:40 Gargoyle user.info sysinit: ERROR: No valid dynamic DNS service configurations defined<br />Mar 25 08:33:40 Gargoyle user.info sysinit: (Did you specify correct configuration file path?)<br />Mar 25 08:33:52 Gargoyle authpriv.info dropbear[1907]: Child connection from 192.168.1.6:3586<br />Mar 25 08:33:57 Gargoyle authpriv.notice dropbear[1907]: Password auth succeeded for &#039;root&#039; from 192.168.1.6:3586<br />Mar 25 08:33:58 Gargoyle user.notice ifup: Allowing Router Advertisements on wan (eth0.2)<br />Mar 25 08:34:00 Gargoyle authpriv.info dropbear[1907]: Exit (root): Exited normally<br />Mar 25 08:34:05 Gargoyle user.notice root: vsftpd init: mounted = 0<br />Mar 25 08:34:05 Gargoyle user.info sysinit: ERROR: No drives attached, no directories to share!<br />Mar 25 08:34:06 Gargoyle kern.info kernel: [ 63.440000] cfg80211: Calling CRDA to update world regulatory domain<br />Mar 25 08:34:06 Gargoyle user.info sysinit: command failed: Operation not supported (-122)<br />Mar 25 08:34:06 Gargoyle kern.info kernel: [ 63.440000] cfg80211: World regulatory domain updated:<br />Mar 25 08:34:06 Gargoyle kern.info kernel: [ 63.450000] cfg80211: (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />Mar 25 08:34:06 Gargoyle kern.info kernel: [ 63.460000] cfg80211: (2400000 KHz - 2483000 KHz @ 40000 KHz), (N/A, 3000 mBm)<br />Mar 25 08:34:06 Gargoyle kern.info kernel: [ 63.470000] cfg80211: (5140000 KHz - 5860000 KHz @ 40000 KHz), (N/A, 3000 mBm)<br />Mar 25 08:34:06 Gargoyle user.info sysinit: setting up led USB1<br />Mar 25 08:34:06 Gargoyle user.info sysinit: setting up led USB2<br />Mar 25 08:34:06 Gargoyle user.info sysinit: setting up led WLAN2G<br />Mar 25 08:34:08 Gargoyle authpriv.info dropbear[2072]: Child connection from 192.168.1.6:3587<br />Mar 25 08:34:14 Gargoyle authpriv.notice dropbear[2072]: Password auth succeeded for &#039;root&#039; from 192.168.1.6:3587<br />Mar 25 08:34:36 Gargoyle authpriv.info dropbear[2072]: Exit (root): Exited normally<br />Mar 25 08:34:43 Gargoyle authpriv.info dropbear[2147]: Child connection from 192.168.1.6:3588<br />Mar 25 08:34:48 Gargoyle authpriv.notice dropbear[2147]: Password auth succeeded for &#039;root&#039; from 192.168.1.6:3588<br />Mar 25 08:35:00 Gargoyle user.notice ifup: Enabling Router Solicitations on loopback (lo)<br />root@Gargoyle:~#</p></blockquote></div><p>===============================================</p><p>AFTER I issued APPLY CHANGES in Connection Menu</p><p>================================================</p><br /><div class="quotebox"><blockquote><p>root@Gargoyle:~# logread<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 2.490000] Ebtables v2.0 registered<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 2.490000] 8021q: 802.1Q VLAN Support v1.8<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 2.500000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 2.510000] Freeing unused kernel memory: 212k freed<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 4.510000] Registered led device: tp-link:blue:qss<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 4.510000] Registered led device: tp-link:blue:system<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 4.510000] Registered led device: tp-link:green:usb1<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 4.510000] Registered led device: tp-link:green:usb2<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 4.510000] Registered led device: tp-link:blue:wlan2g<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 5.470000] eth0: link up (1000Mbps/Full duplex)<br />Jan 1 02:00:17 Gargoyle kern.notice kernel: [ 7.800000] JFFS2 notice: (450) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (1 unchecked, 0 orphan) and 194 of xref (0 dead, 175 orphan) found.<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 7.980000] eth0: link down<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.040000] Compat-drivers backport release: compat-drivers-2012-09-04-2-gddac993<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.050000] Backport based on wireless-testing.git master-2012-09-07<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.060000] compat.git: wireless-testing.git<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.180000] cfg80211: Calling CRDA to update world regulatory domain<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.180000] cfg80211: World regulatory domain updated:<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.190000] cfg80211: (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.200000] cfg80211: (2400000 KHz - 2483000 KHz @ 40000 KHz), (N/A, 3000 mBm)<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.200000] cfg80211: (5140000 KHz - 5860000 KHz @ 40000 KHz), (N/A, 3000 mBm)<br />Jan 1 02:00:17 Gargoyle kern.notice kernel: [ 9.650000] SCSI subsystem initialized<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.860000] usbcore: registered new interface driver usbfs<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.870000] usbcore: registered new interface driver hub<br />Jan 1 02:00:17 Gargoyle kern.info kernel: [ 9.870000] usbcore: registered new device driver usb<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 10.570000] ath: EEPROM regdomain: 0x0<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 10.570000] ath: EEPROM indicates default country code should be used<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 10.570000] ath: doing EEPROM country-&gt;regdmn map search<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 10.570000] ath: country maps to regdmn code: 0x3a<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 10.570000] ath: Country alpha2 being used: US<br />Jan 1 02:00:17 Gargoyle kern.debug kernel: [ 10.570000] ath: Regpair used: 0x3a<br />Jan 1 02:00:19 Gargoyle kern.info kernel: [ 19.300000] eth0: link up (1000Mbps/Full duplex)<br />Jan 1 02:00:20 Gargoyle kern.info kernel: [ 20.270000] eth0: link down<br />Jan 1 02:00:20 Gargoyle kern.info kernel: [ 20.280000] device eth0.1 entered promiscuous mode<br />Jan 1 02:00:20 Gargoyle kern.info kernel: [ 20.280000] device eth0 entered promiscuous mode<br />Jan 1 02:00:20 Gargoyle daemon.notice netifd: Interface &#039;lan&#039; is now up<br />Jan 1 02:00:20 Gargoyle daemon.notice netifd: Interface &#039;loopback&#039; is now up<br />Jan 1 02:00:20 Gargoyle kern.info kernel: [ 20.310000] eth0: link up (1000Mbps/Full duplex)<br />Jan 1 02:00:20 Gargoyle kern.info kernel: [ 20.360000] br-lan: port 1(eth0.1) entered forwarding state<br />Jan 1 02:00:20 Gargoyle kern.info kernel: [ 20.360000] br-lan: port 1(eth0.1) entered forwarding state<br />Jan 1 02:00:20 Gargoyle daemon.notice netifd: wan (793): udhcpc (v1.19.4) started<br />Jan 1 02:00:21 Gargoyle daemon.notice netifd: wan (793): Sending discover...<br />Jan 1 02:00:21 Gargoyle daemon.notice netifd: wan (793): Sending select for 78.87.23.148...<br />Jan 1 02:00:21 Gargoyle daemon.notice netifd: wan (793): Lease of 78.87.23.148 obtained, lease time 602054<br />Jan 1 02:00:21 Gargoyle daemon.notice netifd: Interface &#039;wan&#039; is now up<br />Jan 1 02:00:22 Gargoyle user.notice ifup: Enabling Router Solicitations on lan (br-lan)<br />Jan 1 02:00:22 Gargoyle kern.info kernel: [ 22.360000] br-lan: port 1(eth0.1) entered forwarding state<br />Jan 1 02:00:24 Gargoyle kern.info kernel: [ 24.600000] device wlan0 entered promiscuous mode<br />Jan 1 02:00:25 Gargoyle user.notice usb-modeswitch: 1-0:1.0: Manufacturer=Linux_3.3.8_ehci_hcd Product=Generic_Platform_EHCI_Controller Serial=ehci-platform<br />Jan 1 02:00:25 Gargoyle kern.info kernel: [ 25.240000] br-lan: port 2(wlan0) entered forwarding state<br />Jan 1 02:00:25 Gargoyle kern.info kernel: [ 25.250000] br-lan: port 2(wlan0) entered forwarding state<br />Jan 1 02:00:26 Gargoyle daemon.info hostapd: wlan0: STA 00:23:69:c7:e9:dd IEEE 802.11: authenticated<br />Jan 1 02:00:26 Gargoyle daemon.info hostapd: wlan0: STA 00:23:69:c7:e9:dd IEEE 802.11: associated (aid 1)<br />Jan 1 02:00:27 Gargoyle daemon.info hostapd: wlan0: STA 00:23:69:c7:e9:dd RADIUS: starting accounting session 00000019-00000000<br />Jan 1 02:00:27 Gargoyle daemon.info hostapd: wlan0: STA 00:23:69:c7:e9:dd WPA: pairwise key handshake completed (RSN)<br />Jan 1 02:00:27 Gargoyle kern.info kernel: [ 27.250000] br-lan: port 2(wlan0) entered forwarding state<br />Mar 25 08:32:56 Gargoyle authpriv.info dropbear[1229]: Running in background<br />Mar 25 08:32:57 Gargoyle user.notice usb-modeswitch: 1-1:1.0: Manufacturer=? Product=USB2.0_Hub Serial=?<br />Mar 25 08:32:57 Gargoyle daemon.warn httpd_gargoyle[1296]: started as root without requesting chroot(), warning only<br />Mar 25 08:32:57 Gargoyle daemon.notice httpd_gargoyle[1296]: httpd_gargoyle/1.0 14mar2008 starting on Gargoyle, port 80<br />Mar 25 08:32:57 Gargoyle daemon.info hostapd: wlan0: STA 00:23:69:c7:e9:dd WPA: group key handshake completed (RSN)<br />Mar 25 08:32:59 Gargoyle user.notice dnsmasq: DNS rebinding protection is active, will discard upstream RFC1918 responses!<br />Mar 25 08:32:59 Gargoyle user.notice dnsmasq: Allowing 127.0.0.0/8 responses<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq[1624]: started, version 2.62 cachesize 150<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq[1624]: compile time options: IPv6 GNU-getopt no-DBus no-i18n no-IDN DHCP no-DHCPv6 no-Lua TFTP no-conntrack<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq-dhcp[1624]: DHCP, IP range 192.168.1.100 -- 192.168.1.249, lease time 12h<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq[1624]: using local addresses only for domain lan<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq[1624]: reading /etc/resolv.conf.auto<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq[1624]: using nameserver 208.67.220.220#53<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq[1624]: using nameserver 208.67.222.222#53<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq[1624]: using nameserver 208.67.222.222#53<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq[1624]: using local addresses only for domain lan<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq[1624]: cleared cache<br />Mar 25 08:33:02 Gargoyle daemon.info dnsmasq-dhcp[1624]: read /etc/ethers - 0 addresses<br />Mar 25 08:33:02 Gargoyle user.err syslog: error starting threads: errno 89 (Function not implemented)<br />Mar 25 08:33:02 Gargoyle user.info sysinit: exportfs: could not open /var/lib/nfs/.etab.lock for locking: errno 2 (No such file or directory)<br />Mar 25 08:33:02 Gargoyle user.info sysinit: exportfs: can&#039;t lock /var/lib/nfs/etab for writing<br />Mar 25 08:33:02 Gargoyle user.info sysinit: exportfs: could not open /var/lib/nfs/.xtab.lock for locking: errno 2 (No such file or directory)<br />Mar 25 08:33:02 Gargoyle user.info sysinit: exportfs: can&#039;t lock /var/lib/nfs/xtab for writing<br />Mar 25 08:33:40 Gargoyle daemon.info hostapd: wlan0: STA 00:14:bf:3c:48:f9 IEEE 802.11: authenticated<br />Mar 25 08:33:40 Gargoyle daemon.info hostapd: wlan0: STA 00:14:bf:3c:48:f9 IEEE 802.11: associated (aid 2)<br />Mar 25 08:33:40 Gargoyle daemon.info hostapd: wlan0: STA 00:14:bf:3c:48:f9 RADIUS: starting accounting session 00000019-00000001<br />Mar 25 08:33:40 Gargoyle daemon.info hostapd: wlan0: STA 00:14:bf:3c:48:f9 WPA: pairwise key handshake completed (RSN)<br />Mar 25 08:33:40 Gargoyle user.info sysinit: ERROR: No valid dynamic DNS service configurations defined<br />Mar 25 08:33:40 Gargoyle user.info sysinit: (Did you specify correct configuration file path?)<br />Mar 25 08:33:52 Gargoyle authpriv.info dropbear[1907]: Child connection from 192.168.1.6:3586<br />Mar 25 08:33:57 Gargoyle authpriv.notice dropbear[1907]: Password auth succeeded for &#039;root&#039; from 192.168.1.6:3586<br />Mar 25 08:33:58 Gargoyle user.notice ifup: Allowing Router Advertisements on wan (eth0.2)<br />Mar 25 08:34:00 Gargoyle authpriv.info dropbear[1907]: Exit (root): Exited normally<br />Mar 25 08:34:05 Gargoyle user.notice root: vsftpd init: mounted = 0<br />Mar 25 08:34:05 Gargoyle user.info sysinit: ERROR: No drives attached, no directories to share!<br />Mar 25 08:34:06 Gargoyle kern.info kernel: [ 63.440000] cfg80211: Calling CRDA to update world regulatory domain<br />Mar 25 08:34:06 Gargoyle user.info sysinit: command failed: Operation not supported (-122)<br />Mar 25 08:34:06 Gargoyle kern.info kernel: [ 63.440000] cfg80211: World regulatory domain updated:<br />Mar 25 08:34:06 Gargoyle kern.info kernel: [ 63.450000] cfg80211: (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />Mar 25 08:34:06 Gargoyle kern.info kernel: [ 63.460000] cfg80211: (2400000 KHz - 2483000 KHz @ 40000 KHz), (N/A, 3000 mBm)<br />Mar 25 08:34:06 Gargoyle kern.info kernel: [ 63.470000] cfg80211: (5140000 KHz - 5860000 KHz @ 40000 KHz), (N/A, 3000 mBm)<br />Mar 25 08:34:06 Gargoyle user.info sysinit: setting up led USB1<br />Mar 25 08:34:06 Gargoyle user.info sysinit: setting up led USB2<br />Mar 25 08:34:06 Gargoyle user.info sysinit: setting up led WLAN2G<br />Mar 25 08:34:08 Gargoyle authpriv.info dropbear[2072]: Child connection from 192.168.1.6:3587<br />Mar 25 08:34:14 Gargoyle authpriv.notice dropbear[2072]: Password auth succeeded for &#039;root&#039; from 192.168.1.6:3587<br />Mar 25 08:34:36 Gargoyle authpriv.info dropbear[2072]: Exit (root): Exited normally<br />Mar 25 08:34:43 Gargoyle authpriv.info dropbear[2147]: Child connection from 192.168.1.6:3588<br />Mar 25 08:34:48 Gargoyle authpriv.notice dropbear[2147]: Password auth succeeded for &#039;root&#039; from 192.168.1.6:3588<br />Mar 25 08:35:00 Gargoyle user.notice ifup: Enabling Router Solicitations on loopback (lo)<br /><strong>Mar 25 08:35:59 Gargoyle authpriv.info dropbear[2147]: Exit (root): Exited normally<br />Mar 25 08:36:07 Gargoyle daemon.info dnsmasq[1624]: exiting on receipt of SIGTERM<br />Mar 25 08:36:08 Gargoyle kern.info kernel: [ 185.200000] device wlan0 left promiscuous mode<br />Mar 25 08:36:08 Gargoyle kern.info kernel: [ 185.210000] br-lan: port 2(wlan0) entered disabled state<br />Mar 25 08:36:10 Gargoyle kern.info kernel: [ 187.290000] br-lan: port 1(eth0.1) entered disabled state<br />Mar 25 08:36:10 Gargoyle kern.info kernel: [ 187.290000] device eth0.1 left promiscuous mode<br />Mar 25 08:36:10 Gargoyle kern.info kernel: [ 187.300000] device eth0 left promiscuous mode<br />Mar 25 08:36:10 Gargoyle kern.info kernel: [ 187.300000] br-lan: port 1(eth0.1) entered disabled state<br />Mar 25 08:36:10 Gargoyle kern.info kernel: [ 187.310000] eth0: link down<br />Mar 25 08:36:10 Gargoyle kern.info kernel: [ 187.320000] device eth0.1 entered promiscuous mode<br />Mar 25 08:36:10 Gargoyle kern.info kernel: [ 187.330000] device eth0 entered promiscuous mode<br />Mar 25 08:36:10 Gargoyle daemon.notice netifd: Interface &#039;lan&#039; is now up<br />Mar 25 08:36:10 Gargoyle daemon.notice netifd: Interface &#039;loopback&#039; is now up<br />Mar 25 08:36:10 Gargoyle daemon.notice netifd: wan (2686): udhcpc (v1.19.4) started<br />Mar 25 08:36:10 Gargoyle daemon.notice netifd: wan (2686): Sending discover...<br />Mar 25 08:36:11 Gargoyle kern.info kernel: [ 188.220000] eth0: link up (1000Mbps/Full duplex)<br />Mar 25 08:36:11 Gargoyle kern.info kernel: [ 188.230000] br-lan: port 1(eth0.1) entered forwarding state<br />Mar 25 08:36:11 Gargoyle kern.info kernel: [ 188.240000] br-lan: port 1(eth0.1) entered forwarding state<br />Mar 25 08:36:11 Gargoyle user.notice ifup: Enabling Router Solicitations on lan (br-lan)<br />Mar 25 08:36:12 Gargoyle kern.info kernel: [ 189.960000] device wlan0 entered promiscuous mode<br />Mar 25 08:36:13 Gargoyle kern.info kernel: [ 190.240000] br-lan: port 1(eth0.1) entered forwarding state<br />Mar 25 08:36:13 Gargoyle kern.info kernel: [ 190.280000] br-lan: port 2(wlan0) entered forwarding state<br />Mar 25 08:36:13 Gargoyle kern.info kernel: [ 190.280000] br-lan: port 2(wlan0) entered forwarding state<br />Mar 25 08:36:13 Gargoyle daemon.notice netifd: wan (2686): Sending discover...<br />Mar 25 08:36:13 Gargoyle daemon.notice netifd: wan (2686): Sending select for 78.87.23.148...<br />Mar 25 08:36:13 Gargoyle daemon.notice netifd: wan (2686): Lease of 78.87.23.148 obtained, lease time 601885<br />Mar 25 08:36:13 Gargoyle daemon.notice netifd: Interface &#039;wan&#039; is now up<br />Mar 25 08:36:14 Gargoyle daemon.info hostapd: wlan0: STA 00:23:69:c7:e9:dd IEEE 802.11: authenticated<br />Mar 25 08:36:14 Gargoyle daemon.info hostapd: wlan0: STA 00:23:69:c7:e9:dd IEEE 802.11: associated (aid 1)<br />Mar 25 08:36:14 Gargoyle daemon.info hostapd: wlan0: STA 00:23:69:c7:e9:dd RADIUS: starting accounting session 514FF05D-00000000<br />Mar 25 08:36:14 Gargoyle daemon.info hostapd: wlan0: STA 00:23:69:c7:e9:dd WPA: pairwise key handshake completed (RSN)<br />Mar 25 08:36:15 Gargoyle kern.info kernel: [ 192.280000] br-lan: port 2(wlan0) entered forwarding state<br />Mar 25 08:36:19 Gargoyle user.info firewall: adding lan (br-lan) to zone lan<br />Mar 25 08:36:20 Gargoyle user.info firewall: adding wan (eth0.2) to zone wan<br />Mar 25 08:36:21 Gargoyle user.notice dnsmasq: DNS rebinding protection is active, will discard upstream RFC1918 responses!<br />Mar 25 08:36:21 Gargoyle user.notice dnsmasq: Allowing 127.0.0.0/8 responses<br />Mar 25 08:36:25 Gargoyle daemon.info dnsmasq[3429]: started, version 2.62 cachesize 150<br />Mar 25 08:36:25 Gargoyle daemon.info dnsmasq[3429]: compile time options: IPv6 GNU-getopt no-DBus no-i18n no-IDN DHCP no-DHCPv6 no-Lua TFTP no-conntrack<br />Mar 25 08:36:25 Gargoyle daemon.info dnsmasq-dhcp[3429]: DHCP, IP range 192.168.1.100 -- 192.168.1.249, lease time 12h<br />Mar 25 08:36:25 Gargoyle daemon.info dnsmasq[3429]: using local addresses only for domain lan<br />Mar 25 08:36:25 Gargoyle daemon.info dnsmasq[3429]: reading /etc/resolv.conf.auto<br />Mar 25 08:36:25 Gargoyle daemon.info dnsmasq[3429]: using nameserver 208.67.220.220#53<br />Mar 25 08:36:25 Gargoyle daemon.info dnsmasq[3429]: using nameserver 208.67.222.222#53<br />Mar 25 08:36:25 Gargoyle daemon.info dnsmasq[3429]: using nameserver 208.67.222.222#53<br />Mar 25 08:36:25 Gargoyle daemon.info dnsmasq[3429]: using local addresses only for domain lan<br />Mar 25 08:36:25 Gargoyle daemon.info dnsmasq[3429]: cleared cache<br />Mar 25 08:36:25 Gargoyle daemon.info dnsmasq-dhcp[3429]: read /etc/ethers - 0 addresses<br />Mar 25 08:36:25 Gargoyle daemon.info hostapd: wlan0: STA 00:14:bf:3c:48:f9 IEEE 802.11: authenticated<br />Mar 25 08:36:25 Gargoyle daemon.info hostapd: wlan0: STA 00:14:bf:3c:48:f9 IEEE 802.11: associated (aid 2)<br />Mar 25 08:36:26 Gargoyle daemon.info hostapd: wlan0: STA 00:14:bf:3c:48:f9 RADIUS: starting accounting session 514FF05D-00000001<br />Mar 25 08:36:26 Gargoyle daemon.info hostapd: wlan0: STA 00:14:bf:3c:48:f9 WPA: pairwise key handshake completed (RSN)<br />Mar 25 08:36:41 Gargoyle authpriv.info dropbear[3511]: Child connection from 192.168.1.6:3596<br />Mar 25 08:36:44 Gargoyle user.notice ifup: Allowing Router Advertisements on wan (eth0.2)<br />Mar 25 08:36:44 Gargoyle user.info firewall: removing wan (eth0.2) from zone wan<br />Mar 25 08:36:45 Gargoyle user.info firewall: adding wan (eth0.2) to zone wan<br />Mar 25 08:36:48 Gargoyle authpriv.notice dropbear[3511]: Password auth succeeded for &#039;root&#039; from 192.168.1.6:3596<br />Mar 25 08:37:08 Gargoyle user.notice ifup: Enabling Router Solicitations on loopback (lo)<br />root@Gargoyle:~#</strong></p></blockquote></div><br /><p>(Notice the last lines on which I used bold characters which differ from the first output - this is after APLY CHANGES comand was issued from the webinterface &quot;connection&quot; menu)</p><p>if somebody is willing to help and give me a hint what to do, I could post also the dmesg output before and after ; <br />Many thanks !</p>											<p class="post-edited">(Last edited by <strong>paradoxman</strong> on 26 Mar 2013, 06:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196114">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">paradoxman</div>
					<div class="post-datetime">
						25 Mar 2013, 19:53					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m posting also the dmesg dump before and after I hit the APPLY CHANGES button</p><br /><p>BEFORE :</p><br /><p>root@Gargoyle:~# dmesg<br />[&nbsp; &nbsp; 0.000000] Linux version 3.3.8 (eric@Osiris) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #3 Thu Jan 3 08:55:36 EST 2013<br />[&nbsp; &nbsp; 0.000000] MyLoader: sysp=4b1bf7b5, boardp=9002c600, parts=6bde8914<br />[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />[&nbsp; &nbsp; 0.000000] CPU revision is: 0001974c (MIPS 74Kc)<br />[&nbsp; &nbsp; 0.000000] SoC: Atheros AR9344 rev 2<br />[&nbsp; &nbsp; 0.000000] Clocks: CPU:560.000MHz, DDR:450.000MHz, AHB:225.000MHz, Ref:40.000MHz<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 08000000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone PFN ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00008000<br />[&nbsp; &nbsp; 0.000000] Movable zone start PFN for each node<br />[&nbsp; &nbsp; 0.000000] Early memory PFN ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp; &nbsp;0: 0x00000000 -&gt; 0x00008000<br />[&nbsp; &nbsp; 0.000000] On node 0 totalpages: 32768<br />[&nbsp; &nbsp; 0.000000] free_area_init_node: node 0, pgdat 802daf90, node_mem_map 81000000<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 256 pages used for memmap<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 0 pages reserved<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 32512 pages, LIFO batch:7<br />[&nbsp; &nbsp; 0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768<br />[&nbsp; &nbsp; 0.000000] pcpu-alloc: [0] 0<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 32512<br />[&nbsp; &nbsp; 0.000000] Kernel command line:&nbsp; board=TL-WDR4300 console=ttyS0,115200 rootfstype=squashfs,jffs2 noinitrd<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Memory: 126556k/131072k available (2134k kernel code, 4516k reserved, 406k data, 212k init, 0k highmem)<br />[&nbsp; &nbsp; 0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:51<br />[&nbsp; &nbsp; 0.000000] Calibrating delay loop... 278.93 BogoMIPS (lpj=1394688)<br />[&nbsp; &nbsp; 0.070000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.070000] Mount-cache hash table entries: 512<br />[&nbsp; &nbsp; 0.080000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.080000] gpiochip_add: registered GPIOs 0 to 22 on device: ath79<br />[&nbsp; &nbsp; 0.090000] MIPS: machine is TP-LINK TL-WDR3600/4300/4310<br />[&nbsp; &nbsp; 0.090000] registering PCI controller with io_map_base unset<br />[&nbsp; &nbsp; 0.310000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.310000] PCI host bridge to bus 0000:00<br />[&nbsp; &nbsp; 0.320000] pci_bus 0000:00: root bus resource [mem 0x10000000-0x13ffffff]<br />[&nbsp; &nbsp; 0.320000] pci_bus 0000:00: root bus resource [io&nbsp; 0x0000]<br />[&nbsp; &nbsp; 0.330000] pci 0000:00:00.0: [168c:0033] type 0 class 0x000280<br />[&nbsp; &nbsp; 0.330000] pci 0000:00:00.0: invalid calibration data<br />[&nbsp; &nbsp; 0.330000] pci 0000:00:00.0: reg 10: [mem 0x00000000-0x0001ffff 64bit]<br />[&nbsp; &nbsp; 0.330000] pci 0000:00:00.0: reg 30: [mem 0x00000000-0x0000ffff pref]<br />[&nbsp; &nbsp; 0.330000] pci 0000:00:00.0: supports D1<br />[&nbsp; &nbsp; 0.330000] pci 0000:00:00.0: PME# supported from D0 D1 D3hot<br />[&nbsp; &nbsp; 0.330000] pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x1001ffff 64bit]<br />[&nbsp; &nbsp; 0.340000] pci 0000:00:00.0: BAR 6: assigned [mem 0x10020000-0x1002ffff pref]<br />[&nbsp; &nbsp; 0.340000] pci 0000:00:00.0: using irq 40 for pin 1<br />[&nbsp; &nbsp; 0.350000] Switching to clocksource MIPS<br />[&nbsp; &nbsp; 0.350000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.360000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.360000] TCP established hash table entries: 4096 (order: 3, 32768 bytes)<br />[&nbsp; &nbsp; 0.370000] TCP bind hash table entries: 4096 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.370000] TCP: Hash tables configured (established 4096 bind 4096)<br />[&nbsp; &nbsp; 0.380000] TCP reno registered<br />[&nbsp; &nbsp; 0.380000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.390000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.390000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.400000] PCI: CLS 0 bytes, default 32<br />[&nbsp; &nbsp; 0.410000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[&nbsp; &nbsp; 0.420000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />[&nbsp; &nbsp; 0.430000] msgmni has been set to 247<br />[&nbsp; &nbsp; 0.430000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.440000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.440000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />[&nbsp; &nbsp; 0.470000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A<br />[&nbsp; &nbsp; 0.470000] console [ttyS0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.490000] m25p80 spi0.0: found s25fl064k, expected m25p80<br />[&nbsp; &nbsp; 0.490000] m25p80 spi0.0: s25fl064k (8192 Kbytes)<br />[&nbsp; &nbsp; 0.500000] 5 tp-link partitions found on MTD device spi0.0<br />[&nbsp; &nbsp; 0.500000] Creating 5 MTD partitions on &quot;spi0.0&quot;:<br />[&nbsp; &nbsp; 0.510000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;<br />[&nbsp; &nbsp; 0.520000] 0x000000020000-0x000000103318 : &quot;kernel&quot;<br />[&nbsp; &nbsp; 0.520000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 0.540000] 0x000000103318-0x0000007f0000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 0.540000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 0.550000] mtd: partition &quot;rootfs&quot; set to be root filesystem<br />[&nbsp; &nbsp; 0.560000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=6A0000, len=150000<br />[&nbsp; &nbsp; 0.570000] 0x0000006a0000-0x0000007f0000 : &quot;rootfs_data&quot;<br />[&nbsp; &nbsp; 0.580000] 0x0000007f0000-0x000000800000 : &quot;art&quot;<br />[&nbsp; &nbsp; 0.580000] 0x000000020000-0x0000007f0000 : &quot;firmware&quot;<br />[&nbsp; &nbsp; 0.720000] ag71xx_mdio: probed<br />[&nbsp; &nbsp; 0.720000] eth0: Atheros AG71xx at 0xb9000000, irq 4<br />[&nbsp; &nbsp; 1.300000] eth0: Atheros AR8327 switch driver attached.<br />[&nbsp; &nbsp; 2.460000] ag71xx ag71xx.0: eth0: connected to PHY at ag71xx-mdio.0:00 [uid=004dd033, driver=Atheros AR8216/AR8236/AR8316]<br />[&nbsp; &nbsp; 2.480000] TCP cubic registered<br />[&nbsp; &nbsp; 2.480000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 2.480000] Bridge firewalling registered<br />[&nbsp; &nbsp; 2.490000] Ebtables v2.0 registered<br />[&nbsp; &nbsp; 2.490000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 2.500000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.<br />[&nbsp; &nbsp; 2.510000] Freeing unused kernel memory: 212k freed<br />[&nbsp; &nbsp; 4.510000] Registered led device: tp-link:blue:qss<br />[&nbsp; &nbsp; 4.510000] Registered led device: tp-link:blue:system<br />[&nbsp; &nbsp; 4.510000] Registered led device: tp-link:green:usb1<br />[&nbsp; &nbsp; 4.510000] Registered led device: tp-link:green:usb2<br />[&nbsp; &nbsp; 4.510000] Registered led device: tp-link:blue:wlan2g<br />[&nbsp; &nbsp; 5.470000] eth0: link up (1000Mbps/Full duplex)<br />[&nbsp; &nbsp; 7.800000] JFFS2 notice: (450) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (1 unchecked, 0 orphan) and 194 of xref (0 dead, 175 orphan) found.<br />[&nbsp; &nbsp; 7.980000] eth0: link down<br />[&nbsp; &nbsp; 9.040000] Compat-drivers backport release: compat-drivers-2012-09-04-2-gddac993<br />[&nbsp; &nbsp; 9.050000] Backport based on wireless-testing.git master-2012-09-07<br />[&nbsp; &nbsp; 9.060000] compat.git: wireless-testing.git<br />[&nbsp; &nbsp; 9.180000] cfg80211: Calling CRDA to update world regulatory domain<br />[&nbsp; &nbsp; 9.180000] cfg80211: World regulatory domain updated:<br />[&nbsp; &nbsp; 9.190000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[&nbsp; &nbsp; 9.200000] cfg80211:&nbsp; &nbsp;(2400000 KHz - 2483000 KHz @ 40000 KHz), (N/A, 3000 mBm)<br />[&nbsp; &nbsp; 9.200000] cfg80211:&nbsp; &nbsp;(5140000 KHz - 5860000 KHz @ 40000 KHz), (N/A, 3000 mBm)<br />[&nbsp; &nbsp; 9.650000] SCSI subsystem initialized<br />[&nbsp; &nbsp; 9.860000] usbcore: registered new interface driver usbfs<br />[&nbsp; &nbsp; 9.870000] usbcore: registered new interface driver hub<br />[&nbsp; &nbsp; 9.870000] usbcore: registered new device driver usb<br />[&nbsp; &nbsp;10.570000] ath: EEPROM regdomain: 0x0<br />[&nbsp; &nbsp;10.570000] ath: EEPROM indicates default country code should be used<br />[&nbsp; &nbsp;10.570000] ath: doing EEPROM country-&gt;regdmn map search<br />[&nbsp; &nbsp;10.570000] ath: country maps to regdmn code: 0x3a<br />[&nbsp; &nbsp;10.570000] ath: Country alpha2 being used: US<br />[&nbsp; &nbsp;10.570000] ath: Regpair used: 0x3a<br />[&nbsp; &nbsp;10.570000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;<br />[&nbsp; &nbsp;10.570000] Registered led device: ath9k-phy0<br />[&nbsp; &nbsp;10.570000] ieee80211 phy0: Atheros AR9340 Rev:0 mem=0xb8100000, irq=47<br />[&nbsp; &nbsp;10.580000] PCI: Enabling device 0000:00:00.0 (0000 -&gt; 0002)<br />[&nbsp; &nbsp;10.590000] ath: EEPROM regdomain: 0x0<br />[&nbsp; &nbsp;10.590000] ath: EEPROM indicates default country code should be used<br />[&nbsp; &nbsp;10.590000] ath: doing EEPROM country-&gt;regdmn map search<br />[&nbsp; &nbsp;10.590000] ath: country maps to regdmn code: 0x3a<br />[&nbsp; &nbsp;10.590000] ath: Country alpha2 being used: US<br />[&nbsp; &nbsp;10.590000] ath: Regpair used: 0x3a<br />[&nbsp; &nbsp;10.590000] ieee80211 phy1: Selected rate control algorithm &#039;minstrel_ht&#039;<br />[&nbsp; &nbsp;10.590000] Registered led device: ath9k-phy1<br />[&nbsp; &nbsp;10.590000] ieee80211 phy1: Atheros AR9300 Rev:4 mem=0xb0000000, irq=40<br />[&nbsp; &nbsp;10.720000] cfg80211: Calling CRDA for country: US<br />[&nbsp; &nbsp;10.730000] cfg80211: Regulatory domain changed to country: US<br />[&nbsp; &nbsp;10.730000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[&nbsp; &nbsp;10.740000] cfg80211:&nbsp; &nbsp;(2400000 KHz - 2483000 KHz @ 40000 KHz), (N/A, 3000 mBm)<br />[&nbsp; &nbsp;10.750000] cfg80211:&nbsp; &nbsp;(5140000 KHz - 5860000 KHz @ 40000 KHz), (N/A, 3000 mBm)<br />[&nbsp; &nbsp;11.150000] RPC: Registered named UNIX socket transport module.<br />[&nbsp; &nbsp;11.160000] RPC: Registered udp transport module.<br />[&nbsp; &nbsp;11.160000] RPC: Registered tcp transport module.<br />[&nbsp; &nbsp;11.170000] RPC: Registered tcp NFSv4.1 backchannel transport module.<br />[&nbsp; &nbsp;11.500000] PPP generic driver version 2.4.2<br />[&nbsp; &nbsp;11.580000] tun: Universal TUN/TAP device driver, 1.6<br />[&nbsp; &nbsp;11.580000] tun: (C) 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt;<br />[&nbsp; &nbsp;11.680000] GRE over IPv4 demultiplexor driver<br />[&nbsp; &nbsp;11.770000] GRE over IPv4 tunneling driver<br />[&nbsp; &nbsp;12.050000] Installing knfsd (copyright (C) 1996 okir@monad.swb.de).<br />[&nbsp; &nbsp;12.130000] ip_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;12.450000] NET: Registered protocol family 24<br />[&nbsp; &nbsp;12.650000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />[&nbsp; &nbsp;12.650000] ehci-platform ehci-platform: Generic Platform EHCI Controller<br />[&nbsp; &nbsp;12.660000] ehci-platform ehci-platform: new USB bus registered, assigned bus number 1<br />[&nbsp; &nbsp;12.700000] ehci-platform ehci-platform: irq 3, io mem 0x1b000000<br />[&nbsp; &nbsp;12.720000] ehci-platform ehci-platform: USB 2.0 started, EHCI 1.00<br />[&nbsp; &nbsp;12.720000] hub 1-0:1.0: USB hub found<br />[&nbsp; &nbsp;12.730000] hub 1-0:1.0: 1 port detected<br />[&nbsp; &nbsp;12.820000] nf_conntrack version 0.5.0 (1980 buckets, 7920 max)<br />[&nbsp; &nbsp;13.290000] usb 1-1: new high-speed USB device number 2 using ehci-platform<br />[&nbsp; &nbsp;13.300000] PPTP driver version 0.8.5<br />[&nbsp; &nbsp;13.550000] hub 1-1:1.0: USB hub found<br />[&nbsp; &nbsp;13.550000] hub 1-1:1.0: 4 ports detected<br />[&nbsp; &nbsp;13.870000] xt_time: kernel timezone is -0000<br />[&nbsp; &nbsp;14.480000]&nbsp; Hooked IMQ after mangle on PREROUTING<br />[&nbsp; &nbsp;14.490000]&nbsp; Hooked IMQ after nat on POSTROUTING<br />[&nbsp; &nbsp;14.490000] IMQ driver loaded successfully. (numdevs = 2, numqueues = 1)<br />[&nbsp; &nbsp;14.620000] Netfilter messages via NETLINK v0.30.<br />[&nbsp; &nbsp;14.800000] ip_set: protocol 6<br />[&nbsp; &nbsp;15.210000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver<br />[&nbsp; &nbsp;15.440000] usbcore: registered new interface driver cdc_acm<br />[&nbsp; &nbsp;15.440000] cdc_acm: USB Abstract Control Model driver for USB modems and ISDN adapters<br />[&nbsp; &nbsp;15.540000] usbcore: registered new interface driver usblp<br />[&nbsp; &nbsp;15.570000] usbcore: registered new interface driver usbserial<br />[&nbsp; &nbsp;15.570000] USB Serial support registered for generic<br />[&nbsp; &nbsp;15.580000] usbcore: registered new interface driver usbserial_generic<br />[&nbsp; &nbsp;15.580000] usbserial: USB Serial Driver core<br />[&nbsp; &nbsp;15.660000] Initializing USB Mass Storage driver...<br />[&nbsp; &nbsp;15.660000] usbcore: registered new interface driver usb-storage<br />[&nbsp; &nbsp;15.670000] USB Mass Storage support registered.<br />[&nbsp; &nbsp;15.690000] usbcore: registered new interface driver ums-alauda<br />[&nbsp; &nbsp;15.710000] usbcore: registered new interface driver ums-cypress<br />[&nbsp; &nbsp;15.730000] usbcore: registered new interface driver ums-datafab<br />[&nbsp; &nbsp;15.750000] usbcore: registered new interface driver ums-freecom<br />[&nbsp; &nbsp;15.770000] usbcore: registered new interface driver ums-isd200<br />[&nbsp; &nbsp;15.790000] usbcore: registered new interface driver ums-jumpshot<br />[&nbsp; &nbsp;15.810000] usbcore: registered new interface driver ums-karma<br />[&nbsp; &nbsp;15.830000] usbcore: registered new interface driver ums-sddr09<br />[&nbsp; &nbsp;15.850000] usbcore: registered new interface driver ums-sddr55<br />[&nbsp; &nbsp;15.870000] usbcore: registered new interface driver ums-usbat<br />[&nbsp; &nbsp;15.970000] fuse init (API version 7.18)<br />[&nbsp; &nbsp;19.300000] eth0: link up (1000Mbps/Full duplex)<br />[&nbsp; &nbsp;20.270000] eth0: link down<br />[&nbsp; &nbsp;20.280000] device eth0.1 entered promiscuous mode<br />[&nbsp; &nbsp;20.280000] device eth0 entered promiscuous mode<br />[&nbsp; &nbsp;20.310000] eth0: link up (1000Mbps/Full duplex)<br />[&nbsp; &nbsp;20.360000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;20.360000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;22.360000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;24.600000] device wlan0 entered promiscuous mode<br />[&nbsp; &nbsp;25.240000] br-lan: port 2(wlan0) entered forwarding state<br />[&nbsp; &nbsp;25.250000] br-lan: port 2(wlan0) entered forwarding state<br />[&nbsp; &nbsp;27.250000] br-lan: port 2(wlan0) entered forwarding state<br />[&nbsp; &nbsp;63.440000] cfg80211: Calling CRDA to update world regulatory domain<br />[&nbsp; &nbsp;63.440000] cfg80211: World regulatory domain updated:<br />[&nbsp; &nbsp;63.450000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[&nbsp; &nbsp;63.460000] cfg80211:&nbsp; &nbsp;(2400000 KHz - 2483000 KHz @ 40000 KHz), (N/A, 3000 mBm)<br />[&nbsp; &nbsp;63.470000] cfg80211:&nbsp; &nbsp;(5140000 KHz - 5860000 KHz @ 40000 KHz), (N/A, 3000 mBm)<br />root@Gargoyle:~#</p><br /><p>AFTER:</p><br /><br /><p>root@Gargoyle:~# dmesg<br />[&nbsp; &nbsp; 0.000000] Linux version 3.3.8 (eric@Osiris) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #3 Thu Jan 3 08:55:36 EST 2013<br />[&nbsp; &nbsp; 0.000000] MyLoader: sysp=4b1bf7b5, boardp=9002c600, parts=6bde8914<br />[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />[&nbsp; &nbsp; 0.000000] CPU revision is: 0001974c (MIPS 74Kc)<br />[&nbsp; &nbsp; 0.000000] SoC: Atheros AR9344 rev 2<br />[&nbsp; &nbsp; 0.000000] Clocks: CPU:560.000MHz, DDR:450.000MHz, AHB:225.000MHz, Ref:40.000MHz<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 08000000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone PFN ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00008000<br />[&nbsp; &nbsp; 0.000000] Movable zone start PFN for each node<br />[&nbsp; &nbsp; 0.000000] Early memory PFN ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp; &nbsp;0: 0x00000000 -&gt; 0x00008000<br />[&nbsp; &nbsp; 0.000000] On node 0 totalpages: 32768<br />[&nbsp; &nbsp; 0.000000] free_area_init_node: node 0, pgdat 802daf90, node_mem_map 81000000<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 256 pages used for memmap<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 0 pages reserved<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 32512 pages, LIFO batch:7<br />[&nbsp; &nbsp; 0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768<br />[&nbsp; &nbsp; 0.000000] pcpu-alloc: [0] 0<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 32512<br />[&nbsp; &nbsp; 0.000000] Kernel command line:&nbsp; board=TL-WDR4300 console=ttyS0,115200 rootfstype=squashfs,jffs2 noinitrd<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Memory: 126556k/131072k available (2134k kernel code, 4516k reserved, 406k data, 212k init, 0k highmem)<br />[&nbsp; &nbsp; 0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:51<br />[&nbsp; &nbsp; 0.000000] Calibrating delay loop... 278.93 BogoMIPS (lpj=1394688)<br />[&nbsp; &nbsp; 0.070000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.070000] Mount-cache hash table entries: 512<br />[&nbsp; &nbsp; 0.080000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.080000] gpiochip_add: registered GPIOs 0 to 22 on device: ath79<br />[&nbsp; &nbsp; 0.090000] MIPS: machine is TP-LINK TL-WDR3600/4300/4310<br />[&nbsp; &nbsp; 0.090000] registering PCI controller with io_map_base unset<br />[&nbsp; &nbsp; 0.310000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.310000] PCI host bridge to bus 0000:00<br />[&nbsp; &nbsp; 0.320000] pci_bus 0000:00: root bus resource [mem 0x10000000-0x13ffffff]<br />[&nbsp; &nbsp; 0.320000] pci_bus 0000:00: root bus resource [io&nbsp; 0x0000]<br />[&nbsp; &nbsp; 0.330000] pci 0000:00:00.0: [168c:0033] type 0 class 0x000280<br />[&nbsp; &nbsp; 0.330000] pci 0000:00:00.0: invalid calibration data<br />[&nbsp; &nbsp; 0.330000] pci 0000:00:00.0: reg 10: [mem 0x00000000-0x0001ffff 64bit]<br />[&nbsp; &nbsp; 0.330000] pci 0000:00:00.0: reg 30: [mem 0x00000000-0x0000ffff pref]<br />[&nbsp; &nbsp; 0.330000] pci 0000:00:00.0: supports D1<br />[&nbsp; &nbsp; 0.330000] pci 0000:00:00.0: PME# supported from D0 D1 D3hot<br />[&nbsp; &nbsp; 0.330000] pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x1001ffff 64bit]<br />[&nbsp; &nbsp; 0.340000] pci 0000:00:00.0: BAR 6: assigned [mem 0x10020000-0x1002ffff pref]<br />[&nbsp; &nbsp; 0.340000] pci 0000:00:00.0: using irq 40 for pin 1<br />[&nbsp; &nbsp; 0.350000] Switching to clocksource MIPS<br />[&nbsp; &nbsp; 0.350000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.360000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.360000] TCP established hash table entries: 4096 (order: 3, 32768 bytes)<br />[&nbsp; &nbsp; 0.370000] TCP bind hash table entries: 4096 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.370000] TCP: Hash tables configured (established 4096 bind 4096)<br />[&nbsp; &nbsp; 0.380000] TCP reno registered<br />[&nbsp; &nbsp; 0.380000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.390000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.390000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.400000] PCI: CLS 0 bytes, default 32<br />[&nbsp; &nbsp; 0.410000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[&nbsp; &nbsp; 0.420000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />[&nbsp; &nbsp; 0.430000] msgmni has been set to 247<br />[&nbsp; &nbsp; 0.430000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.440000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.440000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />[&nbsp; &nbsp; 0.470000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A<br />[&nbsp; &nbsp; 0.470000] console [ttyS0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.490000] m25p80 spi0.0: found s25fl064k, expected m25p80<br />[&nbsp; &nbsp; 0.490000] m25p80 spi0.0: s25fl064k (8192 Kbytes)<br />[&nbsp; &nbsp; 0.500000] 5 tp-link partitions found on MTD device spi0.0<br />[&nbsp; &nbsp; 0.500000] Creating 5 MTD partitions on &quot;spi0.0&quot;:<br />[&nbsp; &nbsp; 0.510000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;<br />[&nbsp; &nbsp; 0.520000] 0x000000020000-0x000000103318 : &quot;kernel&quot;<br />[&nbsp; &nbsp; 0.520000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 0.540000] 0x000000103318-0x0000007f0000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 0.540000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 0.550000] mtd: partition &quot;rootfs&quot; set to be root filesystem<br />[&nbsp; &nbsp; 0.560000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=6A0000, len=150000<br />[&nbsp; &nbsp; 0.570000] 0x0000006a0000-0x0000007f0000 : &quot;rootfs_data&quot;<br />[&nbsp; &nbsp; 0.580000] 0x0000007f0000-0x000000800000 : &quot;art&quot;<br />[&nbsp; &nbsp; 0.580000] 0x000000020000-0x0000007f0000 : &quot;firmware&quot;<br />[&nbsp; &nbsp; 0.720000] ag71xx_mdio: probed<br />[&nbsp; &nbsp; 0.720000] eth0: Atheros AG71xx at 0xb9000000, irq 4<br />[&nbsp; &nbsp; 1.300000] eth0: Atheros AR8327 switch driver attached.<br />[&nbsp; &nbsp; 2.460000] ag71xx ag71xx.0: eth0: connected to PHY at ag71xx-mdio.0:00 [uid=004dd033, driver=Atheros AR8216/AR8236/AR8316]<br />[&nbsp; &nbsp; 2.480000] TCP cubic registered<br />[&nbsp; &nbsp; 2.480000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 2.480000] Bridge firewalling registered<br />[&nbsp; &nbsp; 2.490000] Ebtables v2.0 registered<br />[&nbsp; &nbsp; 2.490000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 2.500000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.<br />[&nbsp; &nbsp; 2.510000] Freeing unused kernel memory: 212k freed<br />[&nbsp; &nbsp; 4.510000] Registered led device: tp-link:blue:qss<br />[&nbsp; &nbsp; 4.510000] Registered led device: tp-link:blue:system<br />[&nbsp; &nbsp; 4.510000] Registered led device: tp-link:green:usb1<br />[&nbsp; &nbsp; 4.510000] Registered led device: tp-link:green:usb2<br />[&nbsp; &nbsp; 4.510000] Registered led device: tp-link:blue:wlan2g<br />[&nbsp; &nbsp; 5.470000] eth0: link up (1000Mbps/Full duplex)<br />[&nbsp; &nbsp; 7.800000] JFFS2 notice: (450) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (1 unchecked, 0 orphan) and 194 of xref (0 dead, 175 orphan) found.<br />[&nbsp; &nbsp; 7.980000] eth0: link down<br />[&nbsp; &nbsp; 9.040000] Compat-drivers backport release: compat-drivers-2012-09-04-2-gddac993<br />[&nbsp; &nbsp; 9.050000] Backport based on wireless-testing.git master-2012-09-07<br />[&nbsp; &nbsp; 9.060000] compat.git: wireless-testing.git<br />[&nbsp; &nbsp; 9.180000] cfg80211: Calling CRDA to update world regulatory domain<br />[&nbsp; &nbsp; 9.180000] cfg80211: World regulatory domain updated:<br />[&nbsp; &nbsp; 9.190000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[&nbsp; &nbsp; 9.200000] cfg80211:&nbsp; &nbsp;(2400000 KHz - 2483000 KHz @ 40000 KHz), (N/A, 3000 mBm)<br />[&nbsp; &nbsp; 9.200000] cfg80211:&nbsp; &nbsp;(5140000 KHz - 5860000 KHz @ 40000 KHz), (N/A, 3000 mBm)<br />[&nbsp; &nbsp; 9.650000] SCSI subsystem initialized<br />[&nbsp; &nbsp; 9.860000] usbcore: registered new interface driver usbfs<br />[&nbsp; &nbsp; 9.870000] usbcore: registered new interface driver hub<br />[&nbsp; &nbsp; 9.870000] usbcore: registered new device driver usb<br />[&nbsp; &nbsp;10.570000] ath: EEPROM regdomain: 0x0<br />[&nbsp; &nbsp;10.570000] ath: EEPROM indicates default country code should be used<br />[&nbsp; &nbsp;10.570000] ath: doing EEPROM country-&gt;regdmn map search<br />[&nbsp; &nbsp;10.570000] ath: country maps to regdmn code: 0x3a<br />[&nbsp; &nbsp;10.570000] ath: Country alpha2 being used: US<br />[&nbsp; &nbsp;10.570000] ath: Regpair used: 0x3a<br />[&nbsp; &nbsp;10.570000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;<br />[&nbsp; &nbsp;10.570000] Registered led device: ath9k-phy0<br />[&nbsp; &nbsp;10.570000] ieee80211 phy0: Atheros AR9340 Rev:0 mem=0xb8100000, irq=47<br />[&nbsp; &nbsp;10.580000] PCI: Enabling device 0000:00:00.0 (0000 -&gt; 0002)<br />[&nbsp; &nbsp;10.590000] ath: EEPROM regdomain: 0x0<br />[&nbsp; &nbsp;10.590000] ath: EEPROM indicates default country code should be used<br />[&nbsp; &nbsp;10.590000] ath: doing EEPROM country-&gt;regdmn map search<br />[&nbsp; &nbsp;10.590000] ath: country maps to regdmn code: 0x3a<br />[&nbsp; &nbsp;10.590000] ath: Country alpha2 being used: US<br />[&nbsp; &nbsp;10.590000] ath: Regpair used: 0x3a<br />[&nbsp; &nbsp;10.590000] ieee80211 phy1: Selected rate control algorithm &#039;minstrel_ht&#039;<br />[&nbsp; &nbsp;10.590000] Registered led device: ath9k-phy1<br />[&nbsp; &nbsp;10.590000] ieee80211 phy1: Atheros AR9300 Rev:4 mem=0xb0000000, irq=40<br />[&nbsp; &nbsp;10.720000] cfg80211: Calling CRDA for country: US<br />[&nbsp; &nbsp;10.730000] cfg80211: Regulatory domain changed to country: US<br />[&nbsp; &nbsp;10.730000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[&nbsp; &nbsp;10.740000] cfg80211:&nbsp; &nbsp;(2400000 KHz - 2483000 KHz @ 40000 KHz), (N/A, 3000 mBm)<br />[&nbsp; &nbsp;10.750000] cfg80211:&nbsp; &nbsp;(5140000 KHz - 5860000 KHz @ 40000 KHz), (N/A, 3000 mBm)<br /><strong>[&nbsp; &nbsp;11.150000] RPC: Registered named UNIX socket transport module.<br />[&nbsp; &nbsp;11.160000] RPC: Registered udp transport module.<br />[&nbsp; &nbsp;11.160000] RPC: Registered tcp transport module.<br />[&nbsp; &nbsp;11.170000] RPC: Registered tcp NFSv4.1 backchannel transport module.<br />[&nbsp; &nbsp;11.500000] PPP generic driver version 2.4.2<br />[&nbsp; &nbsp;11.580000] tun: Universal TUN/TAP device driver, 1.6<br />[&nbsp; &nbsp;11.580000] tun: (C) 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt;<br />[&nbsp; &nbsp;11.680000] GRE over IPv4 demultiplexor driver<br />[&nbsp; &nbsp;11.770000] GRE over IPv4 tunneling driver<br />[&nbsp; &nbsp;12.050000] Installing knfsd (copyright (C) 1996 okir@monad.swb.de).<br />[&nbsp; &nbsp;12.130000] ip_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;12.450000] NET: Registered protocol family 24<br />[&nbsp; &nbsp;12.650000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />[&nbsp; &nbsp;12.650000] ehci-platform ehci-platform: Generic Platform EHCI Controller<br />[&nbsp; &nbsp;12.660000] ehci-platform ehci-platform: new USB bus registered, assigned bus number 1<br />[&nbsp; &nbsp;12.700000] ehci-platform ehci-platform: irq 3, io mem 0x1b000000<br />[&nbsp; &nbsp;12.720000] ehci-platform ehci-platform: USB 2.0 started, EHCI 1.00<br />[&nbsp; &nbsp;12.720000] hub 1-0:1.0: USB hub found<br />[&nbsp; &nbsp;12.730000] hub 1-0:1.0: 1 port detected<br />[&nbsp; &nbsp;12.820000] nf_conntrack version 0.5.0 (1980 buckets, 7920 max)<br />[&nbsp; &nbsp;13.290000] usb 1-1: new high-speed USB device number 2 using ehci-platform<br />[&nbsp; &nbsp;13.300000] PPTP driver version 0.8.5<br />[&nbsp; &nbsp;13.550000] hub 1-1:1.0: USB hub found<br />[&nbsp; &nbsp;13.550000] hub 1-1:1.0: 4 ports detected<br />[&nbsp; &nbsp;13.870000] xt_time: kernel timezone is -0000<br />[&nbsp; &nbsp;14.480000]&nbsp; Hooked IMQ after mangle on PREROUTING<br />[&nbsp; &nbsp;14.490000]&nbsp; Hooked IMQ after nat on POSTROUTING<br />[&nbsp; &nbsp;14.490000] IMQ driver loaded successfully. (numdevs = 2, numqueues = 1)<br />[&nbsp; &nbsp;14.620000] Netfilter messages via NETLINK v0.30.<br />[&nbsp; &nbsp;14.800000] ip_set: protocol 6<br />[&nbsp; &nbsp;15.210000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver<br />[&nbsp; &nbsp;15.440000] usbcore: registered new interface driver cdc_acm<br />[&nbsp; &nbsp;15.440000] cdc_acm: USB Abstract Control Model driver for USB modems and ISDN adapters<br />[&nbsp; &nbsp;15.540000] usbcore: registered new interface driver usblp<br />[&nbsp; &nbsp;15.570000] usbcore: registered new interface driver usbserial<br />[&nbsp; &nbsp;15.570000] USB Serial support registered for generic<br />[&nbsp; &nbsp;15.580000] usbcore: registered new interface driver usbserial_generic<br />[&nbsp; &nbsp;15.580000] usbserial: USB Serial Driver core<br />[&nbsp; &nbsp;15.660000] Initializing USB Mass Storage driver...<br />[&nbsp; &nbsp;15.660000] usbcore: registered new interface driver usb-storage<br />[&nbsp; &nbsp;15.670000] USB Mass Storage support registered.<br />[&nbsp; &nbsp;15.690000] usbcore: registered new interface driver ums-alauda<br />[&nbsp; &nbsp;15.710000] usbcore: registered new interface driver ums-cypress<br />[&nbsp; &nbsp;15.730000] usbcore: registered new interface driver ums-datafab<br />[&nbsp; &nbsp;15.750000] usbcore: registered new interface driver ums-freecom<br />[&nbsp; &nbsp;15.770000] usbcore: registered new interface driver ums-isd200<br />[&nbsp; &nbsp;15.790000] usbcore: registered new interface driver ums-jumpshot<br />[&nbsp; &nbsp;15.810000] usbcore: registered new interface driver ums-karma<br />[&nbsp; &nbsp;15.830000] usbcore: registered new interface driver ums-sddr09<br />[&nbsp; &nbsp;15.850000] usbcore: registered new interface driver ums-sddr55<br />[&nbsp; &nbsp;15.870000] usbcore: registered new interface driver ums-usbat<br />[&nbsp; &nbsp;15.970000] fuse init (API version 7.18)<br />[&nbsp; &nbsp;19.300000] eth0: link up (1000Mbps/Full duplex)<br />[&nbsp; &nbsp;20.270000] eth0: link down<br />[&nbsp; &nbsp;20.280000] device eth0.1 entered promiscuous mode<br />[&nbsp; &nbsp;20.280000] device eth0 entered promiscuous mode<br />[&nbsp; &nbsp;20.310000] eth0: link up (1000Mbps/Full duplex)<br />[&nbsp; &nbsp;20.360000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;20.360000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;22.360000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;24.600000] device wlan0 entered promiscuous mode<br />[&nbsp; &nbsp;25.240000] br-lan: port 2(wlan0) entered forwarding state<br />[&nbsp; &nbsp;25.250000] br-lan: port 2(wlan0) entered forwarding state<br />[&nbsp; &nbsp;27.250000] br-lan: port 2(wlan0) entered forwarding state<br />[&nbsp; &nbsp;63.440000] cfg80211: Calling CRDA to update world regulatory domain<br />[&nbsp; &nbsp;63.440000] cfg80211: World regulatory domain updated:<br />[&nbsp; &nbsp;63.450000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[&nbsp; &nbsp;63.460000] cfg80211:&nbsp; &nbsp;(2400000 KHz - 2483000 KHz @ 40000 KHz), (N/A, 3000 mBm)<br />[&nbsp; &nbsp;63.470000] cfg80211:&nbsp; &nbsp;(5140000 KHz - 5860000 KHz @ 40000 KHz), (N/A, 3000 mBm)<br />[&nbsp; 185.200000] device wlan0 left promiscuous mode<br />[&nbsp; 185.210000] br-lan: port 2(wlan0) entered disabled state<br />[&nbsp; 187.290000] br-lan: port 1(eth0.1) entered disabled state<br />[&nbsp; 187.290000] device eth0.1 left promiscuous mode<br />[&nbsp; 187.300000] device eth0 left promiscuous mode<br />[&nbsp; 187.300000] br-lan: port 1(eth0.1) entered disabled state<br />[&nbsp; 187.310000] eth0: link down<br />[&nbsp; 187.320000] device eth0.1 entered promiscuous mode<br />[&nbsp; 187.330000] device eth0 entered promiscuous mode<br />[&nbsp; 188.220000] eth0: link up (1000Mbps/Full duplex)<br />[&nbsp; 188.230000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; 188.240000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; 189.960000] device wlan0 entered promiscuous mode<br />[&nbsp; 190.240000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; 190.280000] br-lan: port 2(wlan0) entered forwarding state<br />[&nbsp; 190.280000] br-lan: port 2(wlan0) entered forwarding state<br />[&nbsp; 192.280000] br-lan: port 2(wlan0) entered forwarding state<br />root@Gargoyle:~#</strong></p><br /><br /><p>the text in bold characters differs from the first part and it is after I hit the APPLY CHANGES button in the &quot;connection&quot; menu from the webinterface</p><p>Is there some command using UCI to issue those changes automatically after each reboot and not having to access the webinterface?</p><p>any help is appreciated, thanks!</p>											<p class="post-edited">(Last edited by <strong>paradoxman</strong> on 25 Mar 2013, 19:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196122">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						25 Mar 2013, 20:45					</div>
				</div>
				<div class="post-content content">
					<p>you can try to add to your /etc/rc.local file (you can edit it from terminal using vi, or scp but with a unix-endline-capable text editor!..), before exit, this line:</p><p>/etc/init.d/network restart</p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 25 Mar 2013, 20:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196180">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">paradoxman</div>
					<div class="post-datetime">
						26 Mar 2013, 06:58					</div>
				</div>
				<div class="post-content content">
					<p>thanks but i have already done that, I issued this command after a plain reboot and did not bring on the network, the only solution I have found is hitting &quot;apply changes&quot; in the connection menu of the webinterface... so that&#039;s why i was wondering if that command starts some scripts, or re-loads some configs that I could start manually from putty, and if it has some command line equivalent</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196187">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">BashfulBladder</div>
					<div class="post-datetime">
						26 Mar 2013, 08:09					</div>
				</div>
				<div class="post-content content">
					<p>Why don&#039;t you save your configs (System -&gt; Backup/Restore -&gt; Get Backup button) on a working router &amp; a non-working config.</p><p>Expand both backup_Gargoyle.tar.gz files &amp; then do a diff -rq folder_working folder_non_working</p><p>As for what hitting Save Changes does, the scope of the saveChanges() function is large here:<br /><a href="http://www.gargoyle-router.com/gargoyle/projects/gargoyle/repository/revisions/master/entry/package/gargoyle/files/www/js/basic.js">http://www.gargoyle-router.com/gargoyle  s/basic.js</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196198">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">paradoxman</div>
					<div class="post-datetime">
						26 Mar 2013, 10:13					</div>
				</div>
				<div class="post-content content">
					<p>thank you for your advice, unfortunatelly it gave me this message after copying the working backup to &quot;ok&quot; folder and the other one to &quot;nok&quot; folder (both in /tmp)</p><p>root@Gargoyle:~# cd /tmp<br />root@Gargoyle:/tmp# diff -rq ok nok<br />-ash: diff: not found</p><br /><p>anyway, I checked the differences manually and there seems to be no difference between the 2 backups</p><p>on the other hand, thanks for the link to the startup script, I tried to copy that part (save changes function) and start it manually but with no success;<br />the fact is that this <strong>APPLY CHANGES</strong> button in the webinterface it doesn&#039;t have an universal function, because I only end up with a working router when I hit that button in the Connection Menu ... when I hit the same button in any other menu, I get no effect at all.</p><p>I&#039;m stucked ...</p>											<p class="post-edited">(Last edited by <strong>paradoxman</strong> on 26 Mar 2013, 10:13)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196233">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">BashfulBladder</div>
					<div class="post-datetime">
						26 Mar 2013, 14:03					</div>
				</div>
				<div class="post-content content">
					<p>No, on your computer you do the diff, not the router. Your OS might not have the diff command, but that&#039;s another problem.</p><p>The diff command looks for differences. The -r flag says to work through the files 1-by-1, the -q says to shut up and the paths tells the diff command which 2 folders to compare.</p><p>If you manually checked the files and found no differences, then you missed something because at least 1 file contains a timestamp (usr/data/time_backup) and a few bandwidth data files (/usr/data/bwmon/total5-download-day-365.bw).</p><p>You can&#039;t just use that saveChanges() function however you want. You can&#039;t expect a router (which basically does shell scripts) to understand client-side browser javascript. Eventually you might find the difference, and that basic.js (javascript) file is going to help you understand what settings the Gargoyle Connections page saved.</p><p>And on my 1.5.9 Gargoyle, its &quot;Save Changes&quot;. So if you &quot;Save Changes&quot; on the firewall page, its not shocking that you might not get the change you are looking for. So it is universal in that it &quot;Saves those changes on the page you are on&quot;. The &quot;Router Identification&quot; page won&#039;t work on your router interfaces if you &quot;Save Changes&quot; - the scope of that page is limited to the name of the router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196242">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">paradoxman</div>
					<div class="post-datetime">
						26 Mar 2013, 15:15					</div>
				</div>
				<div class="post-content content">
					<p>it absolutelly makes sense everything you wrote here;<br />however if i import the &quot;good&quot; working backup onto the router after a fresh reboot, I still end with a non-working device so that&#039;s why I said that basically the backups are identical with no differences (I only visually checked them)<br />until i hit that &quot;save changes&quot; button in the connection interface, it&#039;s no party for me !<br />may I have a defective unit?<br />although I don&#039;t think it&#039;s a hardware problem since a simple software command does bring it to life...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196255">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">BashfulBladder</div>
					<div class="post-datetime">
						26 Mar 2013, 16:03					</div>
				</div>
				<div class="post-content content">
					<p>If a good backup doesn&#039;t help, maybe the thing the Save button does is not a &quot;uci set blah blah&quot;, but some other command. I doubt you have a defective unit - probably just a router that has a slight unaccounted for variance.</p><p>Well, unfortunately, I&#039;m not at my router, but this might work (and be difficult to follow). What might help shed some light is to see the entirety of the commands that save button sends to the router. That requires editing the javascript source to dump all the output to a text file on the router.</p><p>Download that javascript basic.js webpage. Or do a git checkout. Or get the source - to get that 1 file.<br />Find:<br />&nbsp; commands = preCommands + commands + adjustIpCommands<br />&nbsp; &nbsp; (and there is more to that line)</p><p>Add on a new line after:<br />&nbsp; commands.push(&quot;echo \&#039;&quot; + commands.toString() + &quot;\&#039; &gt; /tmp/commands.tmp&quot;);</p><p>Save file.<br />Copy file to router:<br />&nbsp; scp /that/saved/basic.js root@192.168.1.1:/tmp</p><p>Now on the router ssh in &amp;:<br />Backup original file:<br />&nbsp; cp /www/js/basic.js /tmp/basic.js.original</p><p>Copy new file into place:<br />&nbsp; mv -f /tmp/basic.js /www/js/basic.js</p><p>On your computer, visit the Connections webpage. Click Save Changes. The 1 line addition should have left a file on the router.</p><p>On your router, ssh in &amp;:<br />&nbsp; cat /tmp/commands.tmp</p><p>If all goes well, that file is there &amp; holds what you are looking for.</p><p>Revert back to original basic.js by (on your router):<br />&nbsp; mv -f /tmp/basic.js.original /www/js/basic.js</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196275">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">paradoxman</div>
					<div class="post-datetime">
						26 Mar 2013, 16:50					</div>
				</div>
				<div class="post-content content">
					<p>thank you very much for your time and efforts for this explanation</p><p>meabwhile I just upgraded to the new DD-WRT firmware that came out yesterday and the unit is behaving just fine, it got connected to WAN imediatelly and also forwarded dns and internet to the wireless clients without any aditional settings; unfortunatelly, it has the TURBO 40 Mhz function broken, thus I am back to Gargoyle 1.5.9 using the &quot;noscan&quot;=1 feature to enable 40Mhz</p><p>this means it is not a hardware malfunction and hopefully gargoyle&#039;s next version will fix this issue using openwrt&#039;s newest developments but I really don&#039;t know when could we expect a new version</p><p>So, I will be able to test the scenario that you explained so well<br />will be back with the results, thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196287">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">paradoxman</div>
					<div class="post-datetime">
						26 Mar 2013, 17:31					</div>
				</div>
				<div class="post-content content">
					<p>I did exactly what you told me, downloaded that basic.js file from the link you gave me earlier and added that line with an unix text editor (ultraedit32), saved it and copied in original location after I did a backup;<br />unfortunatelly, when I hit &quot;save changes&quot; it waited for an undefinite period with the message &quot;please wait until changes are applied&quot; but got stuck there, nothing happened and no file was generated in /tmp meanwhile;</p><p>after that I put back the original backup and everything went fine with the same procedure; then I went to take a look in the original basic.js file from the router and when I did a search to find that string for adding that extra line, it gave me no results - that&#039;s why I presume that the original file differs big time from that one you gave me in that link</p><p>So I uploaded for you to take a look in my basic.js original file from the router and maybe give me a hint where to add that extra line inside it<br />Please click on the download link in the middle of the page &quot;apasati aici...&quot; to download the file, you don&#039;t have to enter any username or pass , thanks !</p><p><a href="http://www.filehost.ro/29395213/basic_js/">http://www.filehost.ro/29395213/basic_js/</a></p><br /><p>I like very much this gargoyle 1.5.9 for being able to work corectly with HT40 setting ;<br />I have this result with a WR941ND connected as a client bridge to this WDR3600 AP (running Gargoyle) at approx. 100 meter distance on a 120 Mbit WAN connection </p><br /><p><span class="postimg"><img src="http://i45.tinypic.com/200em82.jpg" alt="http://i45.tinypic.com/200em82.jpg" /></span></p>											<p class="post-edited">(Last edited by <strong>paradoxman</strong> on 26 Mar 2013, 17:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196305">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						26 Mar 2013, 19:50					</div>
				</div>
				<div class="post-content content">
					<p>have you tried an older version of Gargoyle?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196308">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">paradoxman</div>
					<div class="post-datetime">
						26 Mar 2013, 20:10					</div>
				</div>
				<div class="post-content content">
					<p>this router is a pretty new model so it is supported only in the last 3 firmwares of gargoyle ;<br />I would have liked to test 1.5.6 but this model is supported only from 1.5.7 to 1.5.9</p><p>I didn&#039;t test the last OPENWRTs from trunk because I liked gargoyle&#039;s interface and QOS settings, but I will for sure since this is pretty annoying bug; beside this and compared to dd-wrt, it works best with the 40 mhz setting which I need ;<br />I wonder if those with WDR4300 do have the same problem because they are pretty much the same at the hardware level, only the 5 ghz wl chip differs</p><p>for sure it&#039;s not a hardware problem since I tested today the last dd-wrt available and it&#039;s working good and don&#039;t manifest this strange problem , but there is broken the HT40 functionality on this model with dd-wrt</p><p>can&#039;t wait for a new gargoyle firmware or a new openwrt attitude adjustment version</p><p>maybe more users who will buy this device will give feedback, it is worth the price for sure even with this little annoying problem, it has very good wireless sensitivity (also as client) and big 128 MB RAM which helps it I think to handle better the P2P connections... I can download wirelessly with 12 MB/s from P2P just as same like on the LAN cable and meanwhile I can navigate the webpages without difficulties, unlike my other old router models</p>											<p class="post-edited">(Last edited by <strong>paradoxman</strong> on 26 Mar 2013, 20:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196309">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">BashfulBladder</div>
					<div class="post-datetime">
						26 Mar 2013, 20:12					</div>
				</div>
				<div class="post-content content">
					<p>A) you might be on something other than the most current Gargoyle version, in which case, downloading the newest wouldn&#039;t have helped much<br />B) your file passed through UglifyJS which reduces variable names down to save space<br />C) I assumed &#039;commands&#039; was an array - its a string.</p><p>In the file you posted, search for &quot;Fb=d+Fb+j+k+Gb+Hb;&quot; (without the quotes). right after that semicolon, paste:</p><p>Fb += &quot;\necho \&#039;&quot; + Fb + &quot;\&#039; &gt; /tmp/commands.tmp\n&quot;;</p><p>(you want Fb=d+Fb+j+k+Gb+Hb;Fb += &quot;\necho \&#039;&quot; + Fb + &quot;\&#039; &gt; /tmp/commands.tmp\n&quot;;var Ib=getP.....</p><p>Save &amp; copy that file onto your router &amp; into place in /www/js again.</p><p>I did a test run. It takes a while on my router, but it does a few uci settings, but its the last 3 lines (and probably the 1st):</p><p>sh /usr/lib/gargoyle/restart_network.sh ;</p><p>rm -rf /tmp/cached_basic_vars ;<br />/usr/lib/gargoyle/cache_basic_vars.sh &gt;/dev/null 2&gt;/dev/null</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196312">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">paradoxman</div>
					<div class="post-datetime">
						26 Mar 2013, 20:26					</div>
				</div>
				<div class="post-content content">
					<p>now it worked !</p><p>I got this in /tmp :</p><div class="quotebox"><blockquote><p>uci commit </p><p>uci set network.wan=interface<br />uci set wireless.ap_g=wifi-iface <br />uci commit </p><p>uci set firewall.@defaults[0].force_router_dns=1 <br />uci set wireless.ap_g=wifi-iface<br />uci set wireless.ap_g.device=radio0<br />uci set wireless.ap_g.mode=ap<br />uci set wireless.ap_g.network=lan<br />uci set wireless.ap_g.ssid=OpenWRT<br />uci set wireless.ap_g.encryption=psk2<br />uci set wireless.ap_g.key=AABBCCDDEE<br />uci commit<br />/etc/init.d/dnsmasq enable<br />uci set gargoyle.connection.dhcp=200<br />uci set gargoyle.firewall.portforwarding=100<br />uci set gargoyle.firewall.restriction=125<br />uci set gargoyle.firewall.quotas=175<br />uci set qos_gargoyle.global.network=wan<br />uci commit<br />sh /usr/lib/gargoyle/restart_network.sh ;</p><p>rm -rf /tmp/cached_basic_vars ;<br />/usr/lib/gargoyle/cache_basic_vars.sh &gt;/dev/null 2&gt;/dev/null</p></blockquote></div><p>which ones do you think I should execute from SSH ? the ones you have posted earlier ?<br />many thanks for your help!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196315">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">paradoxman</div>
					<div class="post-datetime">
						26 Mar 2013, 20:46					</div>
				</div>
				<div class="post-content content">
					<p>WOW, I just pasted the whole set of commands to etc/rc.local to execute it automatically on startup and IT WORKS !!</p><p>I don&#039;t know which one of those commands brought it to life, I will test them separatelly tomorrow and see which one has effect</p><p>but I cannot tell you how gratefull I am for all your time, knowledge and explanations !<br />you&#039;re a real linux guru <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> and I am so happy that I posted my problem on this forum because back at gargoyle forum it is very quiet, no one is saying anything</p><p>Wishing you all the luck and thanks again for your help<br />Ciao!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196322">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						26 Mar 2013, 21:23					</div>
				</div>
				<div class="post-content content">
					<p>i guess you only need </p><p>sh /usr/lib/gargoyle/restart_network.sh</p><p>but absolutely not sure..</p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 26 Mar 2013, 21:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197851">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">ztxdhr</div>
					<div class="post-datetime">
						10 Apr 2013, 08:18					</div>
				</div>
				<div class="post-content content">
					<p>Hi there! I believe I&#039;m facing the same problem with you, WAN can get IP address, but LAN and WLAN don&#039;t work. Wondering if you can post the file that I need to replace with...I&#039;m fresh new here...Thank you!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197937">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">paradoxman</div>
					<div class="post-datetime">
						10 Apr 2013, 18:48					</div>
				</div>
				<div class="post-content content">
					<p>sure, if you use the same configuration like myself, connect to router with WINCSP , enter the /etc directory and replace your empty rc.local file with this one found in this link</p><p><a href="http://www.filehost.ro/29450526/rc_local/">http://www.filehost.ro/29450526/rc_local/</a></p><p>after every fresh reboot, all your clients will succesfully get their DNS and IP </p><p>good luck!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>