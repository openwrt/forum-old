<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> backfire and b43 driver</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 7 Apr 2018 and 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=24208&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p106516">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">hayate</div>
					<div class="post-datetime">
						10 Apr 2010, 10:59					</div>
				</div>
				<div class="post-content content">
					<p>recently I installed backfire 10.03 with kernel 2.6 on my broadcom box which has a bcm4318 wireless device. Because I used brcm2.4 before, so I notice that the performance of wireless is not good as before.<br />on 2.4 kernel with old driver, I can copy a file through wireless link at 2m/s on my LAN, but now only at 1m/s</p><p>my config is:<br /></p><div class="codebox"><pre><code>config &#039;wifi-device&#039; &#039;radio0&#039;
        option &#039;type&#039; &#039;mac80211&#039;
        option &#039;macaddr&#039; &#039;00:14:a5:1b:d9:a8&#039;
        option &#039;hwmode&#039; &#039;11g&#039;
        option &#039;disabled&#039; &#039;0&#039;
        option &#039;channel&#039; &#039;6&#039;

config &#039;wifi-iface&#039;
        option &#039;device&#039; &#039;radio0&#039;
        option &#039;network&#039; &#039;lan&#039;
        option &#039;mode&#039; &#039;ap&#039;
        option &#039;ssid&#039; &#039;OpenWrt-XXX&#039;
        option &#039;encryption&#039; &#039;psk2&#039;
        option &#039;key&#039; &#039;xxxxx&#039;
        option &#039;hidden&#039; &#039;1&#039;</code></pre></div><p>is there something wrong with my config? When my laptop connect to the wireless, it appears that it is a 48m network, not 54m</p><p>thanks~</p>											<p class="post-edited">(Last edited by <strong>hayate</strong> on 10 Apr 2010, 11:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106531">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">neutron</div>
					<div class="post-datetime">
						10 Apr 2010, 14:09					</div>
				</div>
				<div class="post-content content">
					<p>I am using Backfire rc2 on my Asus WL500gP, and I am also experiencing the same performance drop. The reason is most probably the b43 driver. Take a look at this site:</p><p><a href="http://wireless.kernel.org/en/users/Drivers/b43">http://wireless.kernel.org/en/users/Drivers/b43</a></p><p>Here they say that BCM 4318 is _not_ working in AP mode due to some spurious packet loss issues. Besides the performance drop, sometimes my client cannot connect to the AP (authentication is WPA-Enterprise), and the only solution is wifi down &amp;&amp; wifi up. Stupid Broadcom chips... <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106547">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">hayate</div>
					<div class="post-datetime">
						10 Apr 2010, 19:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>grogi wrote:</cite><blockquote><p>You say you have broadcom radio, but config file mentions mac80211...</p></blockquote></div><p>It is automatically configured by the install, I do have a bcm4318 radio.</p><p>And as I know, don&#039;t the mac80211 drivers include the b43 driver?</p><p>If I&#039;m wrong please correct me.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106550">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">hayate</div>
					<div class="post-datetime">
						10 Apr 2010, 19:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>neutron wrote:</cite><blockquote><p>I am using Backfire rc2 on my Asus WL500gP, and I am also experiencing the same performance drop. The reason is most probably the b43 driver. Take a look at this site:</p><p><a href="http://wireless.kernel.org/en/users/Drivers/b43">http://wireless.kernel.org/en/users/Drivers/b43</a></p><p>Here they say that BCM 4318 is _not_ working in AP mode due to some spurious packet loss issues. Besides the performance drop, sometimes my client cannot connect to the AP (authentication is WPA-Enterprise), and the only solution is wifi down &amp;&amp; wifi up. Stupid Broadcom chips... <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p></blockquote></div><p>Thanks for your information.<br />But I remember that backfire release said that now broadcom wireless is working</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106552">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">loyukfai</div>
					<div class="post-datetime">
						10 Apr 2010, 19:27					</div>
				</div>
				<div class="post-content content">
					<p>Just tried the final release and it doesn&#039;t seem to bring up the wireless interface on a WBR2-G54, is it necessary to install the kmod-b43 manually...?</p><p>Was using <a href="http://downloads.openwrt.org/backfire/10.03/brcm47xx/openwrt-brcm47xx-squashfs.trx">http://downloads.openwrt.org/backfire/1 … uashfs.trx</a></p><p>Thanks in advance.</p>											<p class="post-edited">(Last edited by <strong>loyukfai</strong> on 10 Apr 2010, 19:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106553">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						10 Apr 2010, 20:31					</div>
				</div>
				<div class="post-content content">
					<p>Please paste the generated wireless config</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106555">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">hayate</div>
					<div class="post-datetime">
						10 Apr 2010, 20:38					</div>
				</div>
				<div class="post-content content">
					<p>hah!&nbsp; new discovery. When I change my wifi card to atheros 5212, the performance become worse!<br />I found that if I use no Encryption (currently wpa2-psk), the performance is good</p><p>And it seems there are many similar issues around forum</p>											<p class="post-edited">(Last edited by <strong>hayate</strong> on 11 Apr 2010, 09:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106556">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">ath</div>
					<div class="post-datetime">
						10 Apr 2010, 20:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hayate wrote:</cite><blockquote><div class="quotebox"><cite>neutron wrote:</cite><blockquote><p>Here they say that BCM 4318 is _not_ working in AP mode due to some spurious packet loss issues. Besides the performance drop, sometimes my client cannot connect to the AP (authentication is WPA-Enterprise), and the only solution is wifi down &amp;&amp; wifi up. Stupid Broadcom chips... <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p></blockquote></div><p>Thanks for your information.<br />But I remember that backfire release said that now broadcom wireless is working</p></blockquote></div><p>b43 in Backfire works on <em>most</em> BCM4306-BCM4318-based cards, included master (AP) mode. Unfortunately there are some models of BCM4318 which suffer from transmission problems and are unstable as a result, mostly noticeably when running as AP. Others models of BCM4318 seems to run fine.<br />Older BCM4306-based cards don&#039;t suffer from these problems and run great with b43.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106566">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">AdeBe</div>
					<div class="post-datetime">
						10 Apr 2010, 22:43					</div>
				</div>
				<div class="post-content content">
					<p>And on some models (e.g. Asus WL500gP v2) it doesn&#039;t work at all. :-(</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106568">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">helloworld1</div>
					<div class="post-datetime">
						10 Apr 2010, 23:49					</div>
				</div>
				<div class="post-content content">
					<p>b43 driver is unstable in my WRT54GL, it automatically disconnect and can&#039;t get it connected unless reboot after several hours. WRT54GL uses BCM4320.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106570">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">ath</div>
					<div class="post-datetime">
						11 Apr 2010, 00:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>AdeBe wrote:</cite><blockquote><p>And on some models (e.g. Asus WL500gP v2) it doesn&#039;t work at all. :-(</p></blockquote></div><p>The v2 uses a BCM4312 with a LP phy, it&#039;s still experimental (and probably unreliable) but <em>should</em> work with recent mac80211 versions. Not sure if the one included in Backtrack is recent enough, though.</p><div class="quotebox"><cite>helloworld1 wrote:</cite><blockquote><p>b43 driver is unstable in my WRT54GL, it automatically disconnect and can&#039;t get it connected unless reboot after several hours. WRT54GL uses BCM4320.</p></blockquote></div><p>There are different core revision of BCM4320 around.<br />Can you (and everyone else who has problems with b43 in Backfire) please post the output of<br /></p><div class="codebox"><pre><code>dmesg | grep &quot;WLAN found&quot;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106580">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">helloworld1</div>
					<div class="post-datetime">
						11 Apr 2010, 04:58					</div>
				</div>
				<div class="post-content content">
					<p>Is this one useful?<br />WRT54GL v1.1<br /># dmesg | grep wl0<br />wl0: wlc_attach: chiprev 0 coreunit 0 corerev 9 cccap 0x4787aa maccap 0x0 band 2.4G, phy_type 2 phy_rev 7 ana_rev 2<br />wl0: Broadcom BCM4320 802.11 Wireless Controller 4.150.10.5</p><p>More info from /proc/pci</p><p>&nbsp; Bus&nbsp; 0, device&nbsp; &nbsp;5, function&nbsp; 0:<br />&nbsp; &nbsp; Class 0280: PCI device 14e4:4320 (rev 0).<br />&nbsp; &nbsp; &nbsp; IRQ 2.<br />&nbsp; &nbsp; &nbsp; Master Capable.&nbsp; Latency=64.&nbsp; <br />&nbsp; &nbsp; &nbsp; Non-prefetchable 32 bit memory at 0x18005000 [0x18005fff].</p>											<p class="post-edited">(Last edited by <strong>helloworld1</strong> on 11 Apr 2010, 05:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106596">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">flux</div>
					<div class="post-datetime">
						11 Apr 2010, 17:37					</div>
				</div>
				<div class="post-content content">
					<p>those of you who have performance drop with the backfire may read this ticket <a href="https://dev.openwrt.org/ticket/7064">https://dev.openwrt.org/ticket/7064</a>.</p><p>It&#039;s for atheros drivers actually but I believe b43 is also affected</p><p>to test add country code text field on your wireless configuration page and put 392 there. Save&amp;Apply and reboot. Yes reboot is necessary. Share your experience.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106602">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">neutron</div>
					<div class="post-datetime">
						11 Apr 2010, 19:15					</div>
				</div>
				<div class="post-content content">
					<p>Well, the country code trick does not work for me, because I cannot add such a field to the configuration. The only selectable fields are Fragmentation threshold and RTS/CTS threshold. My WLAN chip revision is:</p><div class="codebox"><pre><code>root@OpenWrt:~# dmesg | grep &quot;WLAN found&quot;
b43-phy0: Broadcom 4318 WLAN found (core revision 9)</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106636">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">hayate</div>
					<div class="post-datetime">
						12 Apr 2010, 04:51					</div>
				</div>
				<div class="post-content content">
					<p>my experience is when I use ath5k and wpa2-psk the performance is very bad and cpu is 100%, if I use madwifi, all is OK, the throughput can reach 3MB/s<br />When using ath5k and NO encryption, the effect is acceptable.</p><br /><p>ps: sorry for involving ath driver here, because I have both broadcom and atheros card.</p>											<p class="post-edited">(Last edited by <strong>hayate</strong> on 12 Apr 2010, 13:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106638">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">helloworld1</div>
					<div class="post-datetime">
						12 Apr 2010, 05:27					</div>
				</div>
				<div class="post-content content">
					<p>The throughput of my WRT54GL 1.1 is 13Mb/s for b43 and 16Mb/s for wl. The speed is very good but the problem is stability.<br />The wired one is 39.9 Mb/s.</p>											<p class="post-edited">(Last edited by <strong>helloworld1</strong> on 12 Apr 2010, 05:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106650">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">ath</div>
					<div class="post-datetime">
						12 Apr 2010, 11:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>helloworld1 wrote:</cite><blockquote><p>The throughput of my WRT54GL 1.1 is 13Mb/s for b43 and 16Mb/s for wl. The speed is very good but the problem is stability.</p></blockquote></div><p>That&#039;s a corerev 9, then... I know the <a href="http://www.ing.unibs.it/openfwwf/">OpenFWWF</a> researchers use several WRT54GL corerev 9 with b43 and they seem to find them stable. They don&#039;t use encryption though. Does it make a difference in your case?<br />I&#039;ll ask them later about what exact kernel and mac80211 version they&#039;re using.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106862">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">loyukfai</div>
					<div class="post-datetime">
						14 Apr 2010, 18:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>loyukfai wrote:</cite><blockquote><p>Just tried the final release and it doesn&#039;t seem to bring up the wireless interface on a WBR2-G54, is it necessary to install the kmod-b43 manually...?</p><p>Was using <a href="http://downloads.openwrt.org/backfire/10.03/brcm47xx/openwrt-brcm47xx-squashfs.trx">http://downloads.openwrt.org/backfire/1 … uashfs.trx</a></p><p>Thanks in advance.</p></blockquote></div><p>Turns out that the problem is because I set the wireless channel to &quot;auto&quot;, now I set it as &quot;5&quot; and it works.</p><p>Cheers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p107011">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">helloworld1</div>
					<div class="post-datetime">
						16 Apr 2010, 04:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>loyukfai wrote:</cite><blockquote><div class="quotebox"><cite>loyukfai wrote:</cite><blockquote><p>Just tried the final release and it doesn&#039;t seem to bring up the wireless interface on a WBR2-G54, is it necessary to install the kmod-b43 manually...?</p><p>Was using <a href="http://downloads.openwrt.org/backfire/10.03/brcm47xx/openwrt-brcm47xx-squashfs.trx">http://downloads.openwrt.org/backfire/1 … uashfs.trx</a></p><p>Thanks in advance.</p></blockquote></div><p>Turns out that the problem is because I set the wireless channel to &quot;auto&quot;, now I set it as &quot;5&quot; and it works.</p><p>Cheers.</p></blockquote></div><p>The stability issue has nothing to do with this though.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p107068">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">loyukfai</div>
					<div class="post-datetime">
						16 Apr 2010, 17:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>helloworld1 wrote:</cite><blockquote><p>The stability issue has nothing to do with this though.</p></blockquote></div><p>I use WPA/WPA2-PSK, it&#039;s been stable, so far. I haven&#039;t thoroughly tested the speed yet through.</p><p>Cheers.</p>											<p class="post-edited">(Last edited by <strong>loyukfai</strong> on 16 Apr 2010, 17:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p107069">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">attila123456</div>
					<div class="post-datetime">
						16 Apr 2010, 17:20					</div>
				</div>
				<div class="post-content content">
					<p>With my WRTSL54GS I got 800 kB/s with b43 (otherwise stable). went back to brcm-2.4 that gives me 2 MB/s.<br />(that&#039;s copying from a USB disk attached to the router)</p>											<p class="post-edited">(Last edited by <strong>attila123456</strong> on 16 Apr 2010, 17:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p107142">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">ath</div>
					<div class="post-datetime">
						17 Apr 2010, 14:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>attila123456 wrote:</cite><blockquote><p>(that&#039;s copying from a USB disk attached to the router)</p></blockquote></div><p>Note that on these (CPU-limited) routers sending packets from the router itself (as in copying from USB) is usually slower than routing/bridging (ethernet &lt;-&gt; wireless). The b43 driver probably has more overhead in that situation than the binary driver. If you can, try again moving some files between the ethernet ports and the wireless.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p116181">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">medve540</div>
					<div class="post-datetime">
						30 Aug 2010, 22:42					</div>
				</div>
				<div class="post-content content">
					<p>Have somebody tried to test wifi performance with any of the new release candidates ( Backfire 10.03.1-rcX ) ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120925">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">AdeBe</div>
					<div class="post-datetime">
						12 Nov 2010, 20:25					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;d like to ask the above mentioned question again: what is the current performance of b43 driver, using Backfire 10.3.1-rc or trunk version?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p121726">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">blondquirk</div>
					<div class="post-datetime">
						22 Nov 2010, 23:30					</div>
				</div>
				<div class="post-content content">
					<p>Using Backfire 10.03.1-rc3 and BCM4318 WLAN I experience lockups in 802.11g mode. In 802.11b mode the speed is about 650 kbytes/s (with WPA2)</p>											<p class="post-edited">(Last edited by <strong>blondquirk</strong> on 22 Nov 2010, 23:36)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=24208&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>