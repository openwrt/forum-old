<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Netgear DGN1000</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 24 Apr 2018 and 6 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 3</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=39319&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=39319&amp;p=3.html">3</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p177851">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">cedricb</div>
					<div class="post-datetime">
						11 Sep 2012, 23:04					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;m just wondering if it&#039;ll be possible to install OpenWrt on the Netgear DGN1000 ?</p><p>So far I&#039;ve been able to telnet to the device by uploading/installing telnetd...</p><div class="quotebox"><blockquote><p># cat version<br />Linux version 2.6.20-Amazon_SE (root@localhost.localdomain) (gcc version 3.4.4 20050119 (MIPS SDE)) #32 Sun Jul 4 14:08:29 CST 2010</p></blockquote></div><div class="quotebox"><blockquote><p># cat cpuinfo <br />system type&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: R0416_BSP_EPHY_SPI_HOST_A4<br />processor&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 0<br />cpu model&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: MIPS 4KEc V6.12<br />BogoMIPS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 266.24<br />wait instruction&nbsp; &nbsp; &nbsp; &nbsp; : yes<br />microsecond timers&nbsp; &nbsp; &nbsp; : yes<br />tlb_entries&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 16<br />extra interrupt vector&nbsp; : yes<br />hardware watchpoint&nbsp; &nbsp; &nbsp;: yes<br />ASEs implemented&nbsp; &nbsp; &nbsp; &nbsp; : mips16<br />VCED exceptions&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: not available<br />VCEI exceptions&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: not available</p></blockquote></div><div class="quotebox"><blockquote><p># free<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; total&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;used&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;free&nbsp; &nbsp; &nbsp; &nbsp;shared&nbsp; &nbsp; &nbsp; buffers<br />&nbsp; Mem:&nbsp; &nbsp; &nbsp; &nbsp; 29900&nbsp; &nbsp; &nbsp; &nbsp; 12120&nbsp; &nbsp; &nbsp; &nbsp; 17780&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1152<br /> Swap:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0<br />Total:&nbsp; &nbsp; &nbsp; &nbsp; 29900&nbsp; &nbsp; &nbsp; &nbsp; 12120&nbsp; &nbsp; &nbsp; &nbsp; 17780</p></blockquote></div><div class="quotebox"><blockquote><p># cat partitions <br />major minor&nbsp; #blocks&nbsp; name</p><p>&nbsp; 31&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 128 mtdblock0<br />&nbsp; 31&nbsp; &nbsp; &nbsp;1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;64 mtdblock1<br />&nbsp; 31&nbsp; &nbsp; &nbsp;2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;64 mtdblock2<br />&nbsp; 31&nbsp; &nbsp; &nbsp;3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;64 mtdblock3<br />&nbsp; 31&nbsp; &nbsp; &nbsp;4&nbsp; &nbsp; &nbsp; &nbsp;6848 mtdblock4<br />&nbsp; 31&nbsp; &nbsp; &nbsp;5&nbsp; &nbsp; &nbsp; &nbsp;1024 mtdblock5<br />&nbsp; 31&nbsp; &nbsp; &nbsp;6&nbsp; &nbsp; &nbsp; &nbsp;7872 mtdblock6<br />&nbsp; 31&nbsp; &nbsp; &nbsp;7&nbsp; &nbsp; &nbsp; &nbsp; 128 mtdblock7</p></blockquote></div><p>I don&#039;t know where to go from here...</p><p>GPL source code of the Netgear firmware which matches my device number --&gt; <a href="http://www.downloads.netgear.com/files/GPL/DGN1000SP_V.2.1.00.44_RG_src.tar.zip">http://www.downloads.netgear.com/files/ … rc.tar.zip</a></p><br /><p>Cheers,<br />Ced.</p>											<p class="post-edited">(Last edited by <strong>cedricb</strong> on 11 Sep 2012, 23:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177893">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">cedricb</div>
					<div class="post-datetime">
						12 Sep 2012, 10:31					</div>
				</div>
				<div class="post-content content">
					<p>...more info on the internet -&gt; <a href="http://www.wikidevi.com/wiki/Netgear_DGN1000">http://www.wikidevi.com/wiki/Netgear_DGN1000</a><br />The wikidevi page specifies that there is a USB port, I can&#039;t see any with my old eyes!</p><p>To night, I&#039;ll have a go on the J1 connector with a multimeter... ;-)</p><p>Can somebody shed some light which has ported a similar device/chipset/etc.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177977">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">cedricb</div>
					<div class="post-datetime">
						12 Sep 2012, 21:59					</div>
				</div>
				<div class="post-content content">
					<p><span class="postimg"><img src="http://www.wikidevi.com/w/images/thumb/9/9f/Netgear_DGN1000_presumed_serial.jpg/800x600x800px-Netgear_DGN1000_presumed_serial.jpg.pagespeed.ic.p6u-Ru3YcL.jpg" alt="http://www.wikidevi.com/w/images/thumb/9/9f/Netgear_DGN1000_presumed_serial.jpg/800x600x800px-Netgear_DGN1000_presumed_serial.jpg.pagespeed.ic.p6u-Ru3YcL.jpg" /></span></p><p>I&#039;ve checked J1 and the left pad is the GND.&nbsp; The strange thing is; the 2nd, 3rd and 4th pads measured 3.3V against GND...&nbsp; I thought RX will be at 0V (based on the &quot;serial console&quot; page on the wiki).&nbsp; It looks like the 2nd and 4th pads are going to the Infineon chip.&nbsp; I&#039;ve ordered a USB to TTL converter, so it safe to use the 1st, 2nd and 4th pads?? :-) </p><p>Otherwise there is a non-populated USB connector (pcb type) on the front; J2.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178193">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">davide.85</div>
					<div class="post-datetime">
						14 Sep 2012, 18:40					</div>
				</div>
				<div class="post-content content">
					<p>hello I&#039;m also working on DGN1000, I have to say I&#039;m not an expert, but I wanted to connect a usb port for my printer. I saw the J2 free before and following the links look like they are 3 and come to a socket and then leave and go on 24-25-26 pin cpu. But I&#039;m not sure.<br />&nbsp; What do you think?<br />is there a way to confirm what I&#039;m saying?<br />I&#039;m sorry if my English is not good, but I am Italian.</p>											<p class="post-edited">(Last edited by <strong>davide.85</strong> on 14 Sep 2012, 18:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178194">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">cedricb</div>
					<div class="post-datetime">
						14 Sep 2012, 18:54					</div>
				</div>
				<div class="post-content content">
					<p>@davide.85 - Did you connect to the J1 UART ?&nbsp; I&#039;ve received a TTL converter so I&#039;m just wondering if you know which pins are RX and TX ?</p><p>For the USB, I think I&#039;ll solder a PCB USB connector when I get the device flashed; I would see if it works or not...</p><p>Can you share your process please?&nbsp; ...per favore? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178200">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">davide.85</div>
					<div class="post-datetime">
						14 Sep 2012, 19:38					</div>
				</div>
				<div class="post-content content">
					<p>ust yesterday I started so I did nothing and I should read the documentation of openwrt it is the first time I start this project. Anyway I&#039;m looking at network information CPU (psb 50601 Infineon) but found very little and nothing on the pins. So, I&#039;m sorry, but I can not say what TX and RX. but by following the links J2, seem to those who have said the pins.<br />I&#039;ll just progress I will share the process.<br />Let me know if you can find them.....:)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178203">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">cedricb</div>
					<div class="post-datetime">
						14 Sep 2012, 20:45					</div>
				</div>
				<div class="post-content content">
					<p>voila...</p><div class="codebox"><pre><code>ROM VER: 1.2.0
CFG 04
EEPROM Data OK


U-Boot 1.1.5-2.2 (Dec  3 2009 - 16:57:11)

DRAM:  32 MB

 relocate_code start
 relocate_code finish.
Now running in RAM - U-Boot at: 81fc0000
Flash:  8 MB
using default environment

In:    serial
Out:   serial
Err:   serial
Net:   External Clock
Selected EPHY_MODE 
AMAZON_SE Switch
mac = c4:3d:c7:bf:54:30
AMAZON_SE_GPIO_P0_IN = 0xa9ff..
AMAZON_SE_GPIO_P1_IN = 0x2b08..

Type &quot;run flash_nfs&quot; to mount root filesystem over NFS

Input Ctrl-c to stop autoboot:  0 
Check FW intergality...OK
bootloader verion = 1.07
## Booting image at 00700000 ...
   Image Name:   MIPS Linux-2.6.20
   Created:      2010-07-04   6:08:32 UTC
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    791251 Bytes = 772.7 kB
   Load Address: 80002000
   Entry Point:  80265000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK

Starting kernel ...

Linux version 2.6.20-Amazon_SE
 (root@localhost.localdomain) (gcc version 3.4.4 20050119 (MIPS SDE)) #32 Sun Jul 4 14:08:29 CST 2010
Current Model:R0416_BSP_EPHY_SPI_HOST_A4
This model supports only basic BSP feature on Amazon SE Small board with SPI flash USB host and PPE A4 firmware
CPU revision is: 0001906c
Determined physical RAM map:
User-defined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Built 1 zonelists.  Total pages: 8128
Kernel command line: root=/dev/mtdblock4 ip=192.168.1.1:192.168.1.123::::eth0:on console=ttyS0,115200 ethaddr=c4:3d:c7:bf:54:30 mem=32M panic=1 
Primary instruction cache 8kB, physically tagged, 4-way, linesize 16 bytes.
Primary data cache 8kB, 2-way, linesize 16 bytes.
Synthesized TLB refill handler (20 instructions).
Synthesized TLB load handler fastpath (32 instructions).
Synthesized TLB store handler fastpath (32 instructions).
Synthesized TLB modify handler fastpath (31 instructions).
PID hash table entries: 128 (order: 7, 512 bytes)
mips_hpt_frequency:133333333
r4k_offset: 00145855(1333333)
Using 133.333 MHz high precision timer.
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Memory: 29772k/32768k available (2064k kernel code, 2996k reserved, 377k data, 128k init, 0k highmem)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
NET: Registered protocol family 8
NET: Registered protocol family 20
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 0, 4096 bytes)
TCP bind hash table entries: 512 (order: -1, 2048 bytes)
TCP: Hash tables configured (established 1024 bind 512)
TCP reno registered
amazon_se_dma_init
dma_chip_init
gptu: totally 6 16-bit timers/counters
gptu: misc_register on minor 63
gptu: succeeded to request irq 25 for timer[0]
gptu: succeeded to request irq 26 for timer[1]
gptu: succeeded to request irq 27 for timer[2]
gptu: succeeded to request irq 28 for timer[3]
gptu: succeeded to request irq 29 for timer[4]
gptu: succeeded to request irq 30 for timer[5]
squashfs: version 3.2-r2 (2007/01/15) Phillip Lougher
squashfs: LZMA suppport for slax.org by jro
io scheduler noop registered (default)
Infineon Technologies port driver version 1.0.2 
cgu: misc_register on minor = 62
led: misc_register on minor = 151
drivers/char/amazon_se_led.c amazon_se_led_config 1244: f_software_update = 1
drivers/char/amazon_se_led.c amazon_se_led_config 1244: f_software_update = 1
drivers/char/amazon_se_led.c amazon_se_led_config 1244: f_software_update = 1
drivers/char/amazon_se_led.c amazon_se_led_config 1244: f_software_update = 1
Unknown module try to reserve GPIO
Unknown module try to reserve GPIO
Infineon Technologies Synchronous Serial Controller (SSC) driver version 0.2.1
IFX MEI Version 4.00.01

Infineon CPE API Driver version: DSL CPE API V3.20.5.1

DSL_DRV: using proc fs
ttyS0 at MMIO 0xbe100c00 (irq = 2) is a IFX_ASC
PPP generic driver version 2.4.2
NET: Registered protocol family 24
IMQ starting with 2 devices...
IMQ driver loaded successfully.
    Hooking IMQ before NAT on PREROUTING.
    Hooking IMQ after NAT on POSTROUTING.
Loading A4 (ATM+MII0) driver ...... Force to 100MB Duplex
Succeeded!
PPE datapath driver info:
  Version ID: 8.3.5.1.0.0.1
  Family    : Amazon-SE
  DR Type   : Normal Data Path | Indirect-Fast Path
  Interface : MII0 | ATM
  Mode      : Routing
  Release   : 0.0.1
PPE firmware info:
  Version ID: 3.1.2.6.1.3
  Family    : Amazon-SE
  FW Type   : Standard
  Interface : MII0 + ATM
  Mode      : Bridging + IPv4 Routing
  Release   : 1.3
PPA API --- init successfully
Infineon Technologies Synchronous SPI flash driver version 0.0.1 
MTD driver for SPI flash.
Probing for Serial flash ...
Update rx_eff_size to 4
 &lt;5&gt;Creating 8 MTD partitions on &quot;amazon_se-spi&quot;:
0x00000000-0x00020000 : &quot;U-Boot&quot;
0x00020000-0x00030000 : &quot;ENV_MAC&quot;
0x00030000-0x00040000 : &quot;DPF&quot;
0x00040000-0x00050000 : &quot;NVRAM&quot;
0x00050000-0x00700000 : &quot;RootFS_DPUMP&quot;
0x00700000-0x00800000 : &quot;Kernel&quot;
0x00050000-0x00800000 : &quot;ROOTFS_KERNEL&quot;
0x00000000-0x00020000 : &quot;POT&quot;
Update rx_eff_size to 4096
 &lt;6&gt;dwc_otg: version 2.2-RC3
dwc_otg dwc_otg: DWC OTG Controller
dwc_otg dwc_otg: new USB bus registered, assigned bus number 1
dwc_otg dwc_otg: irq 31, io mem 0x00000000
DWC_otg: Init: Power Port (0)
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
nf_conntrack version 0.5.0 (256 buckets, 2048 max)
nf_ct_ftp: registering helper for pf: 2 port: 21
nf_ct_ftp: registering helper for pf: 10 port: 21
GRE over IPv4 tunneling driver
ip_tables: (C) 2000-2006 Netfilter Core Team
usb 1-1: new high speed USB device using dwc_otg and address 2
usb 1-1: configuration #1 chosen from 1 choice
TCP cubic registered
NET: Registered protocol family 1
NET: Registered protocol family 17
NET: Registered protocol family 8
atmpvc_init() failed with -17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
Time: MIPS clocksource has been installed.
VFS: Mounted root (squashfs filesystem) readonly.
Freeing unused kernel memory: 128k freed
init started: BusyBox v1.13.1 (2010-07-04 14:01:59 CST
starting pid 14, tty &#039;&#039;: &#039;/usr/etc/rcS
netfilter PSD loaded - (c) astaro AG
cat: can&#039;t open &#039;/tmp/etc/block.htm&#039;: No such file or directory
ct_mgr: module license &#039;SerComm&#039; taints kernel.
device eth0 entered promiscuous mode
br0: port 1(eth0) entering learning state
cat: can&#039;t open &#039;/proc/nvram/BaseMacAddr&#039;: No such file or directory
ap_name=(null) action=start
/bin/echo GMT+0 &gt; /etc/TZ
killall: udhcpd: no process killed
iptables: No chain/target/match by that name
killall: miniupnpd: no process killed
killall: dnrd: no process killed
Notice: caching turned off
Warning: Using /etc/hosts will be removed in a future version. Please use only the /etc/dnrd/master file or use -m off.
dnrd -a 192.168.1.2 -m hosts -c off --timeout=0 -b  -s 1.1.1.1 
ff
WaitForConfiguration
100

Please press Enter to activate this console. WaitForLinkActivate
200</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178206">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">davide.85</div>
					<div class="post-datetime">
						14 Sep 2012, 21:21					</div>
				</div>
				<div class="post-content content">
					<p>woowwww,<br />&nbsp; you&#039;re just a genius.<br />really well done.<br />can you explain me step by step how you did and what you used?<br />I would be really grateful.<br />You say that so I could put a printer with usb?:D</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178213">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">cedricb</div>
					<div class="post-datetime">
						14 Sep 2012, 22:16					</div>
				</div>
				<div class="post-content content">
					<p>Here is the configuration for the 4 pads on the J1 connector:<br /></p><div class="codebox"><pre><code>J1 [GND] [TX] [VCC] [RX]</code></pre></div><p>...scratch gently the pads with a little screw driver and solder 3 pins... <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>you need to connect your USB TTL converter (e.g: <a href="http://www.amazon.co.uk/dp/B004ROOPK6/ref=pe_217191_31005151_3p_dp_1)">http://www.amazon.co.uk/dp/B004ROOPK6/r … 1_3p_dp_1)</a> as:<br />&nbsp; - GND &lt;--&gt; GND<br />&nbsp; - TX &lt;--&gt; RX<br />&nbsp; - RX &lt;--&gt; TX</p><p>I&#039;ve used &quot;kermit&quot; on my Linux host to have the serial console:<br /></p><div class="codebox"><pre><code>&gt;&gt; kermit -l /dev/ttyUSB0 
set speed 115200
set reliable
fast
set carrier-watch off
set flow-control none 
set prefixing all
connect</code></pre></div><p>...my next task is to understand what to do with the bootloader to flash a openwrt firmware.&nbsp; HELP welcome please! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I&#039;ve built openwrt from trunk:<br /> - target -&gt; Lantiq<br /> - subtarget -&gt; Amazon-SE<br /> - kernel modules -&gt; Wireless drivers -&gt; ath9k-htc&nbsp; &nbsp;(for Atheros AR9271)</p><p>The only thing I can&#039;t find in &quot;menuconfig&quot; is the driver for the Ethernet switch Atheros AR8216</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178220">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">cedricb</div>
					<div class="post-datetime">
						14 Sep 2012, 23:19					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>AMAZON_SE # printenv
bootcmd=run flash_flash
bootdelay=1
baudrate=115200
preboot=echo;echo Type &quot;run flash_nfs&quot; to mount root filesystem over NFS;echo
mem=32M
ipaddr=192.168.1.1
serverip=192.168.1.123
netdev=eth0
baudrate=115200
rootpath=/opt/nfs
nfsargs=setenv bootargs root=/dev/nfs rw nfsroot=$(serverip):$(rootpath)
ramargs=setenv bootargs root=/dev/ram rw
addip=setenv bootargs $(bootargs) ip=$(ipaddr):$(serverip):$(gatewayip):$(netmask):$(hostname):$(netdev):on
addmisc=setenv bootargs $(bootargs) console=ttyS0,$(baudrate) ethaddr=$(ethaddr) mem=$(mem) panic=1
flash_nfs=run nfsargs addip addmisc;bootm $(kernel_addr)
ramdisk_addr=B0100000
flash_self=run ramargs addip addmisc;bootm $(kernel_addr) $(ramdisk_addr)
bootfile=uImage
u-boot=bootloader.bin
firmware=firmware.img
fullimage=ifx_adslrt.img
net_nfs=tftp 80500000 $(bootfile);run nfsargs addip addmisc;bootm
root_filesystem=rootfs.img
load=tftp 80500000 $(u-boot)
update=protect off 1:0-2;era 1:0-2;cp.b 80500000 0x0 $(filesize)
flashargs=setenv bootargs root=/dev/mtdblock4
flash_flash=run flashargs addip addmisc; bootm $(kernel_addr)
update_uboot=tftpboot 80400000 $(u-boot); cp.b 80400000 00000000 $(filesize)
update_kernel=tftpboot 80400000 $(bootfile);upgrade 80400000 $(filesize)
update_rootfs=tftpboot 80400000 $(root_filesystem);upgrade 80400000 $(filesize)
update_firmware=tftpboot 80400000 $(firmware);upgrade 80400000 $(filesize)
update_fullimage=tftpboot 80400000 $(fullimage);upgrade 80400000 $(filesize)
update_download=tftp 80100000 download.bin;cp.b 80100000 0x15000 $(filesize)
reset_uboot_config=mw 80400000 &#039;FFFFFFFF&#039; 0x8000;cp.b 80400000 0x00020000 0x8000;reset
part0_begin=0x00000000
part1_begin=0x00010000
part2_begin=0x00040000
total_part=3
flash_end=0x003FFFFF
data_block0=uboot
data_block1=firmware
data_block2=rootfs
data_block3=kernel
data_block4=sysconfig
data_block5=ubootconfig
data_block6=fwdiag
total_db=7
f_uboot_addr=0x00000000
f_uboot_size=0
f_firmware_addr=0x00010000
f_firmware_size=0
f_rootfs_addr=0x00050000
f_rootfs_size=0
f_rootfs_end=0x00050000
f_kernel_addr=0x00700000
kernel_addr=0x00700000
f_kernel_size=0
f_sysconfig_addr=0x003FD200
f_sysconfig_size=0
f_ubootconfig_addr=0x00020000
f_ubootconfig_size=0x8000
f_fwdiag_addr=0x003FFE00
f_fwdiag_size=0x0200
chipid=1.2
boardid=112233
stdin=serial
stdout=serial
stderr=serial
ethact=AMAZON_SE Switc
ethaddr=c4:3d:c7:bf:54:30

Environment size: 2368/32764 bytes</code></pre></div><div class="codebox"><pre><code>AMAZON_SE # tftpboot
Using AMAZON_SE Switch?=?T0 device
TFTP from server 192.168.1.123; our IP address is 192.168.1.1
Filename &#039;uImage&#039;.
Load address: 0x80100000
Loading: T T T T T T T 
Abort
AMAZON_SE #</code></pre></div><p>...setup a tftp server on 192.168.1.123 and do --&gt; tftpboot 0x801000000 &lt;my super donkey image&gt;&nbsp; ??</p><p>...then what?</p><p>I don&#039;t know which image to use?</p><div class="codebox"><pre><code>2359300 Sep 14 21:24 openwrt-lantiq-ase-jffs2-128k.rootfs
2359300 Sep 14 21:24 openwrt-lantiq-ase-jffs2-256k.rootfs
2293764 Sep 14 21:24 openwrt-lantiq-ase-jffs2-64k.rootfs
3407876 Sep 14 21:24 openwrt-lantiq-ase-NONE-jffs2-128k.image
3407876 Sep 14 21:24 openwrt-lantiq-ase-NONE-jffs2-256k.image
3276804 Sep 14 21:24 openwrt-lantiq-ase-NONE-jffs2-64k.image
2621444 Sep 14 21:24 openwrt-lantiq-ase-NONE-squashfs.image
917546 Sep 14 21:24 openwrt-lantiq-ase-NONE-uImage
1527794 Sep 14 21:24 openwrt-lantiq-ase-squashfs.rootfs</code></pre></div><p>Sorry I&#039;ve never done anything like this... <img src="https://forum.openwrt.org/img/smilies/yikes.png" width="15" height="15" alt="yikes" /></p>											<p class="post-edited">(Last edited by <strong>cedricb</strong> on 14 Sep 2012, 23:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178271">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">cedricb</div>
					<div class="post-datetime">
						15 Sep 2012, 14:24					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>AMAZON_SE # setenv ipaddr 192.168.1.2
AMAZON_SE # setenv serverip 192.168.1.35

AMAZON_SE # tftpboot
Using AMAZON_SE Switch?=?T0 device
TFTP from server 192.168.1.35; our IP address is 192.168.1.2
Filename &#039;uImage&#039;.
Load address: 0x80100000
Loading: #################################################################
     #################################################################
     #################################################################
     #################################################################
     #################################################################
     #################################################################
     #################################################################
     ##########################################################
done
Bytes transferred = 2621444 (280004 hex)

AMAZON_SE # cp.b 0x80100000 0x00700000 0x280004
Copy to Serial Flash... done

AMAZON_SE # run flash_flash
## Booting image at 00700000 ...
   Image Name:   MIPS OpenWrt Linux-3.3.8
   Created:      2012-09-15  10:42:51 UTC
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    917473 Bytes = 896 kB
   Load Address: 80002000
   Entry Point:  80002000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK

Starting kernel ...

[    0.000000] Linux version 3.3.8 (cedric@anubis) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #1 Sat Sep 15 11:42:49 BST 2012
[    0.000000] SoC: Amazon_SE rev 1.3
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 0001906c (MIPS 4KEc)
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 02000000 @ 00000000 (usable)
[    0.000000] User-defined physical RAM map:
[    0.000000]  memory: 02000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone PFN ranges:
[    0.000000]   Normal   0x00000000 -&gt; 0x00002000
[    0.000000] Movable zone start PFN for each node
[    0.000000] Early memory PFN ranges
[    0.000000]     0: 0x00000000 -&gt; 0x00002000
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
[    0.000000] Kernel command line: root=/dev/mtdblock4 ip=192.168.1.2:192.168.1.35::::eth0:on console=ttyS0,115200 ethaddr=c4:3d:c7:bf:54:30 mem=32M panic=1 
[    0.000000] PID hash table entries: 128 (order: -3, 512 bytes)
[    0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
[    0.000000] Primary instruction cache 8kB, VIPT, 4-way, linesize 16 bytes.
[    0.000000] Primary data cache 8kB, 2-way, VIPT, no aliases, linesize 16 bytes
[    0.000000] Memory: 29664k/32768k available (2170k kernel code, 3104k reserved, 348k data, 160k init, 0k highmem)
[    0.000000] NR_IRQS:256
[    0.000000] CPU Clock: 266MHz
[    0.000000] Calibrating delay loop... 264.70 BogoMIPS (lpj=529408)
[    0.036000] pid_max: default: 32768 minimum: 301
[    0.040000] Mount-cache hash table entries: 512
[    0.056000] NET: Registered protocol family 16
[    0.068000] gpiochip_add: registered GPIOs 0 to 15 on device: ltq_gpio
[    0.072000] gpiochip_add: registered GPIOs 16 to 31 on device: ltq_gpio
[    0.076000] MIPS: machine is Generic Lantiq based board
[    0.104000] bio: create slab &lt;bio-0&gt; at 0
[    0.116000] Switching to clocksource MIPS
[    0.132000] NET: Registered protocol family 2
[    0.136000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.144000] TCP established hash table entries: 1024 (order: 1, 8192 bytes)
[    0.152000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.156000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.164000] TCP reno registered
[    0.168000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.172000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.180000] NET: Registered protocol family 1
[    0.184000] gptu: totally 6 16-bit timers/counters
[    0.192000] gptu: misc_register on minor 63
[    0.196000] gptu: succeeded to request irq 126
[    0.200000] gptu: succeeded to request irq 127
[    0.204000] gptu: succeeded to request irq 128
[    0.208000] gptu: succeeded to request irq 129
[    0.216000] gptu: succeeded to request irq 130
[    0.220000] gptu: succeeded to request irq 131
[    0.228000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.236000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.248000] msgmni has been set to 57
[    0.252000] io scheduler noop registered
[    0.256000] io scheduler deadline registered (default)
[    0.260000] ltq_asc.0: ttyLTQ0 at MMIO 0x1e100c00 (irq = 72) is a ltq_asc
[    0.284000] TCP cubic registered
[    0.284000] NET: Registered protocol family 17
[    0.292000] 8021q: 802.1Q VLAN Support v1.8
[    0.296000] turn off boot console early0

ROM VER: 1.2.0
CFG 04
EEPROM Data OK
UART</code></pre></div><p>I&#039;ve done the following:<br /> - upload openwrt-lantiq-ase-NONE-squashfs.image (uImage)<br /> - copy the image at the previous address 0x00700000<br /> - and boot</p><p>The kernel starts booting then the device resets and locks!!! <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>I&#039;ve restarted the board and same issue; stopped on the UART line...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178280">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">davide.85</div>
					<div class="post-datetime">
						15 Sep 2012, 16:02					</div>
				</div>
				<div class="post-content content">
					<p>thank you very much, as soon as I get the converter usb / tll I start work.<br />you&#039;ve noticed that little hoof free?<br />do you think there is likely to go a microcontroller usb converter / tll in so you can put a usb socket on jag2?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178294">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">cedricb</div>
					<div class="post-datetime">
						15 Sep 2012, 18:11					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve downloaded the official source from Netgear and compiled the bootloader.&nbsp; I&#039;ve tried to send the bootloader.bin using kermit but nothing is happening...&nbsp; Is there a way to upload a new u-boot via UART ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178301">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">davide.85</div>
					<div class="post-datetime">
						15 Sep 2012, 20:07					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m not very knowledgeable about these things.<br />But usually, the coupling of BOOT is much more difficult as the time window is very narrow.<br />try to see here <a href="http://www.hwupgrade.it/forum/archive/index.php/t-2081027.html">http://www.hwupgrade.it/forum/archive/i … 81027.html</a><br />the hardware is different but maybe it could be helpful</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178303">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">davide.85</div>
					<div class="post-datetime">
						15 Sep 2012, 20:10					</div>
				</div>
				<div class="post-content content">
					<p>I believe that you will succeed:D</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p187420">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">thomas.malcolm.bennett</div>
					<div class="post-datetime">
						30 Dec 2012, 19:57					</div>
				</div>
				<div class="post-content content">
					<p>just came across this some one has managed to makea custom firmware and has source unfortunatey i have no idea what to do wth this infomation but you guys seem like you may<br /><a href="http://www.netgear-forum.com/forum/index.php?showtopic=70380">http://www.netgear-forum.com/forum/inde … opic=70380</a></p>											<p class="post-edited">(Last edited by <strong>thomas.malcolm.bennett</strong> on 30 Dec 2012, 19:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p198868">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">quackquack</div>
					<div class="post-datetime">
						19 Apr 2013, 04:43					</div>
				</div>
				<div class="post-content content">
					<p>looks like i got myself a broken dgn1000 device, the previous owner sold it for 10 US$, yes its bricked. anyway to revive it? </p><p><a href="http://wiki.openwrt.org/toh/arcadyan/arv4518pw">http://wiki.openwrt.org/toh/arcadyan/arv4518pw</a> the wiki says:</p><p>UART boot</p><p>To enable UART booting in the ARV4518 board, just shortcut R80 and put the left side of R65 to +3.3V and… </p><p>same can be done for this device? i have got buspirate an also an external programmer, how to revive it?</p><p>thanks in advance<br />-paul</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215429">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">jmp</div>
					<div class="post-datetime">
						22 Oct 2013, 18:47					</div>
				</div>
				<div class="post-content content">
					<p>@cedricb seems that doing what you have overwrites uboot</p><p>I had this problem when following your steps earlier.</p><p>The only way to recover uboot is to lift and reflash the SPI EEPROM</p><p>I used a raspberry pi and flashrom tool to do this.</p><p>See </p><p><a href="http://www.macronix.com/QuickPlace/hq/PageLibrary4825740B00298A3B.nsf/h_Index/3F21BAC2E121E17848257639003A3146/$File/MX25L6445E,%203V,%2064Mb,%20v1.8.pdf">http://www.macronix.com/QuickPlace/hq/P … 20v1.8.pdf</a></p><p>for the flash pinout</p><p>Has anyone else made any progress with this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p235748">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">bulanula</div>
					<div class="post-datetime">
						5 Jun 2014, 16:35					</div>
				</div>
				<div class="post-content content">
					<p>Sorry to bump an old thread but I just got a hold of one of these devices today. </p><p>Pretty nice specs for the price ( IMHO ) : </p><p>32 MB RAM<br />8 MB flash<br />AR9271 certified ( not draft ) wireless N with 150 mbps support<br />Lantiq CPU<br />Uboot bootloader <br />ADSL that should also theoretically work fine. </p><p>I will try to get a serial connection going BUT I will only try and write anything to flash once I have an image that does fully boot.</p><p>Anybody have some tips ? </p><p>It seems stock Uboot does not like OpenWRT however, that same problem existed on another SIMILAR platform ( Home Hub 2 type B which also has Uboot, AR9160, Lantiq CPU so very similar hardware ) but I don&#039;t know how they patched their Uboot to work properly. They did share their work and all the sources, so it should be easy for us to replicate their approach.</p><p>However, it seems we do have the Uboot sources from Netgear thus it should be doable and not very difficult ! </p><p>It really is a shame this is not natively supported as the hardware is great underneath the horrible stock firmware. As I said, very similar to BT Home Hub 2 type B platform so maybe we can try and modify our Uboot to play nice just like the BT HH folks did ?</p>											<p class="post-edited">(Last edited by <strong>bulanula</strong> on 5 Jun 2014, 16:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p323761">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">krembuk</div>
					<div class="post-datetime">
						14 May 2016, 03:19					</div>
				</div>
				<div class="post-content content">
					<p>Anyone still working on this? Just ordered new router at USD5 from <a href="https://www.jakartanotebook.com/netgear-dgn1000-wireless-n-150-router-with-adsl2-or-2-splitter-black">https://www.jakartanotebook.com/netgear … tter-black</a> (sorry, it&#039;s in Indonesian). The price is tempting, so I don&#039;t quite mind playing with thistoy. Any companion will be much appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p324145">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">zx82</div>
					<div class="post-datetime">
						16 May 2016, 17:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>krembuk wrote:</cite><blockquote><p>Anyone still working on this?</p></blockquote></div><p>OpenWrt doesn&#039;t support hardware with so little RAM any more (these shipped with 16MiB, at least in the UK), so you&#039;d be looking at a pretty old release at best, and it&#039;d be no fun squeezing anything into 4MiB of flash either.&nbsp; Also, support for Amazon SE in OpenWrt probably never got very far; only the SMT-G3xxx ever had any degree of support.&nbsp; I don&#039;t think any proper documentation/datasheets ever surfaced, so it might just have been a source code drop.&nbsp; You can get lots more even for $5 now.</p><p>That said, by all means try and do something useful with it if you feel you can, to save it from Silicon Heaven.&nbsp; Even if all you can do is configure the switch chip to act as a simple bridge without DHCP (or maybe even a hub; those come in handy sometimes), that might be better than burying it.</p>											<p class="post-edited">(Last edited by <strong>zx82</strong> on 16 May 2016, 17:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p324278">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">krembuk</div>
					<div class="post-datetime">
						17 May 2016, 14:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zx82 wrote:</cite><blockquote><div class="quotebox"><cite>krembuk wrote:</cite><blockquote><p>Anyone still working on this?</p></blockquote></div><p>OpenWrt doesn&#039;t support hardware with so little RAM any more (these shipped with 16MiB, at least in the UK), so you&#039;d be looking at a pretty old release at best, and it&#039;d be no fun squeezing anything into 4MiB of flash either.&nbsp; Also, support for Amazon SE in OpenWrt probably never got very far; only the SMT-G3xxx ever had any degree of support.&nbsp; I don&#039;t think any proper documentation/datasheets ever surfaced, so it might just have been a source code drop.&nbsp; You can get lots more even for $5 now.</p><p>That said, by all means try and do something useful with it if you feel you can, to save it from Silicon Heaven.&nbsp; Even if all you can do is configure the switch chip to act as a simple bridge without DHCP (or maybe even a hub; those come in handy sometimes), that might be better than burying it.</p></blockquote></div><p>This DGN1000SP comes with 8MB flash and 32MB RAM, which I think is quite interesting.<br />I found the GPL source code here: <a href="http://download2.polytechnic.edu.na/pub4/sourceforge/o/of/officialnetgearfirmware/DGN1000SP_V.2.1.00.44_RG_src.tar.zip">http://download2.polytechnic.edu.na/pub … rc.tar.zip</a></p><p>Official Netgear source download: <a href="http://kb.netgear.com/app/answers/detail/a_id/2649/~/netgear-open-source-code-for-programmers-%28gpl%29">http://kb.netgear.com/app/answers/detai … -%28gpl%29</a></p><p>Thanks for the info about Amazon SE, I just realized that this thing is not AR7 <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Can you enlighten me, suppose I want to backup the whole 8MB flash, do you think I can use dd if=/dev/flash0?<br />Here are the partitions:</p><div class="codebox"><pre><code># cat partitions
major minor  #blocks  name

  31     0        128 mtdblock0
  31     1         64 mtdblock1
  31     2         64 mtdblock2
  31     3         64 mtdblock3
  31     4       6848 mtdblock4
  31     5       1024 mtdblock5
  31     6       7872 mtdblock6
  31     7        128 mtdblock7


# cat mtd
dev:    size   erasesize  name
mtd0: 00020000 00010000 &quot;U-Boot&quot;
mtd1: 00010000 00010000 &quot;ENV_MAC&quot;
mtd2: 00010000 00010000 &quot;DPF&quot;
mtd3: 00010000 00010000 &quot;NVRAM&quot;
mtd4: 006b0000 00010000 &quot;RootFS_DPUMP&quot;
mtd5: 00100000 00010000 &quot;Kernel&quot;
mtd6: 007b0000 00010000 &quot;ROOTFS_KERNEL&quot;
mtd7: 00020000 00010000 &quot;POT&quot;</code></pre></div>											<p class="post-edited">(Last edited by <strong>krembuk</strong> on 24 May 2016, 08:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p324281">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">zx82</div>
					<div class="post-datetime">
						17 May 2016, 14:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>krembuk wrote:</cite><blockquote><p>This DGN1000SP comes with 8MB flash and 32MB RAM, which I think is quite interesting.</p></blockquote></div><p>I&#039;m glad yours is a better unit, although it&#039;s probably still a lot of work.&nbsp; Having said it&#039;s poorly supported, the DGN1000B (and Amazon SE) does at least have <a href="https://github.com/openwrt-mirror/openwrt/blob/e737bc7e0799fb381dfc3859dea93b5d1999dfc1/target/linux/lantiq/dts/DGN1000B.dts">a .dts entry</a> (even in trunk) so you could try building an image.</p><div class="quotebox"><cite>krembuk wrote:</cite><blockquote><p>Thanks for the info about Amazon SE, I just realized that this thing is not AR7 <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>I&#039;d imagine Amazon and Danube share a lot with AR7.</p><div class="quotebox"><cite>krembuk wrote:</cite><blockquote><p>Can enlighten me, suppose I want to backup the whole 8MB flash, do you think I can use dd if=/dev/flash0?</p></blockquote></div><p>You probably want to look at the kernel log for that.&nbsp; I think you want to grab mtdblock0, 1, 2, 3 and 6 to get everything, but check your unit&#039;s log for the ranges (after &quot;Creating n MTD partitions&quot;).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p324709">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">krembuk</div>
					<div class="post-datetime">
						19 May 2016, 07:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zx82 wrote:</cite><blockquote><div class="quotebox"><cite>krembuk wrote:</cite><blockquote><p>This DGN1000SP comes with 8MB flash and 32MB RAM, which I think is quite interesting.</p></blockquote></div><p>I&#039;m glad yours is a better unit, although it&#039;s probably still a lot of work.&nbsp; Having said it&#039;s poorly supported, the DGN1000B (and Amazon SE) does at least have <a href="https://github.com/openwrt-mirror/openwrt/blob/e737bc7e0799fb381dfc3859dea93b5d1999dfc1/target/linux/lantiq/dts/DGN1000B.dts">a .dts entry</a> (even in trunk) so you could try building an image.</p><div class="quotebox"><cite>krembuk wrote:</cite><blockquote><p>Thanks for the info about Amazon SE, I just realized that this thing is not AR7 <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>I&#039;d imagine Amazon and Danube share a lot with AR7.</p><div class="quotebox"><cite>krembuk wrote:</cite><blockquote><p>Can enlighten me, suppose I want to backup the whole 8MB flash, do you think I can use dd if=/dev/flash0?</p></blockquote></div><p>You probably want to look at the kernel log for that.&nbsp; I think you want to grab mtdblock0, 1, 2, 3 and 6 to get everything, but check your unit&#039;s log for the ranges (after &quot;Creating n MTD partitions&quot;).</p></blockquote></div><p>Many thanks for the reply. Just successfully built the provided GPL source, it produces the newfirmware.bin without any error, so straight-forward! This is my first time to cross compile a provided source, and it was without any error: I&#039;m amazed! Still a lo of work to do, please wish me luck. Again, thanks for the reply.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p324739">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">zx82</div>
					<div class="post-datetime">
						19 May 2016, 11:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>krembuk wrote:</cite><blockquote><p>Just successfully built the provided GPL source</p></blockquote></div><p>Which zip from Netgear did you use?</p><div class="quotebox"><cite>krembuk wrote:</cite><blockquote><p>it produces the newfirmware.bin without any error, so straight-forward!</p></blockquote></div><p>It is fairly impressive that the build is sufficiently self-contained to still work; unfortunately it&#039;s probably a kernel from the dark ages with tons of vulnerabilities, and getting OpenWrt userspace working on that doesn&#039;t strike me as fun.</p><div class="quotebox"><cite>krembuk wrote:</cite><blockquote><p>please wish me luck</p></blockquote></div><p>Good luck!&nbsp; Turns out I have both the 16/4 variant and the 32/8 variant here.&nbsp; Out of curiosity I had a go at booting the generic ASE kernel from Attitude Adjustment (still pretty old, 3.3.8) on the 32/8 variant.&nbsp; It booted and panicked at the lack of root filesystem; I see no mention of flash probing (NOR, NAND or SPI) in the output, so I suspect the generic kernel might have no support for AmazonSE SPI.&nbsp; Then I somehow managed to overwrite U-Boot, so called it a day.</p><p>I&#039;ll see if I can restore U-Boot over serial later, and see whether the SPI support is just a missing config flag, or whether the Danube SPI driver works, or whether the Infineon driver in the 2.x code drop might build in a 3.x kernel.</p>											<p class="post-edited">(Last edited by <strong>zx82</strong> on 19 May 2016, 11:24)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 3</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=39319&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=39319&amp;p=3.html">3</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>