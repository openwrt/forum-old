<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Cannot connect to an AP with WEP encryption</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 2 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p306340">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">kokoliso</div>
					<div class="post-datetime">
						5 Jan 2016, 19:16					</div>
				</div>
				<div class="post-content content">
					<p>Hello.<br />I am using a TL-WDR3500 and I have tested 10.05 and differents trunk versions from the last weeks.<br />I want to connect from this router in client mode to an AP that uses WEP encryption which password I have.<br />When scanning, the signals varies from 50% to 70%, but when I try to join the network I get a good signal for 4 seconds and suddenly disappears and measures 0% of signal rest of the time. If I change any field editing the wireless connection, again when Applying the changes, measures a good signal for other 4 seconds and changes to 0%.<br />I have been using the router without issues and connecting in client mode to other networks without problem.<br />Searching I found some issues related to wep but from 2 years ago that were fixed, and also I made some tests with others APs with WEP encryption and it works, but I cannot get work with this one.<br />I made some measures of signal with HORST and oscillates between -60 and -70 dB.<br />Any suggestion?<br />Thanks :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306369">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">danymarc</div>
					<div class="post-datetime">
						5 Jan 2016, 22:43					</div>
				</div>
				<div class="post-content content">
					<p>have you tried, ascii converter on WEP key</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306370">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">kokoliso</div>
					<div class="post-datetime">
						5 Jan 2016, 22:45					</div>
				</div>
				<div class="post-content content">
					<p>I get this messages continuously:</p><p>Sat Dec 19 03:50:34 2015 kern.info kernel: [ 6938.937996] wlan0: authenticate with 64:70:02:9d:9e:38<br />Sat Dec 19 03:50:34 2015 kern.info kernel: [ 6938.957850] wlan0: send auth to 64:70:02:9d:9e:38 (try 1/3)<br />Sat Dec 19 03:50:34 2015 kern.info kernel: [ 6939.591807] wlan0: send auth to 64:70:02:9d:9e:38 (try 2/3)<br />Sat Dec 19 03:50:35 2015 kern.info kernel: [ 6940.527541] wlan0: authenticated<br />Sat Dec 19 03:50:35 2015 kern.info kernel: [ 6940.531290] ath9k ar934x_wmac wlan0: disabling HT/VHT due to WEP/TKIP use<br />Sat Dec 19 03:50:35 2015 kern.info kernel: [ 6940.539089] wlan0: associate with 64:70:02:9d:9e:38 (try 1/3)<br />Sat Dec 19 03:50:36 2015 kern.info kernel: [ 6940.857423] wlan0: deauthenticated from 64:70:02:9d:9e:38 while associating (Reason: 6=CLASS2_FRAME_FROM_NONAUTH_STA)<br />Sat Dec 19 03:55:36 2015 kern.info kernel: [ 7241.448229] wlan0: authenticate with 64:70:02:9d:9e:38<br />Sat Dec 19 03:55:36 2015 kern.info kernel: [ 7241.468081] wlan0: send auth to 64:70:02:9d:9e:38 (try 1/3)<br />Sat Dec 19 03:55:36 2015 kern.info kernel: [ 7241.596634] wlan0: send auth to 64:70:02:9d:9e:38 (try 2/3)<br />Sat Dec 19 03:55:37 2015 kern.info kernel: [ 7241.733300] wlan0: send auth to 64:70:02:9d:9e:38 (try 3/3)<br />Sat Dec 19 03:55:37 2015 kern.info kernel: [ 7241.831447] wlan0: authenticated<br />Sat Dec 19 03:55:37 2015 kern.info kernel: [ 7241.835180] ath9k ar934x_wmac wlan0: disabling HT/VHT due to WEP/TKIP use<br />Sat Dec 19 03:55:37 2015 kern.info kernel: [ 7241.848888] wlan0: associate with 64:70:02:9d:9e:38 (try 1/3)<br />Sat Dec 19 03:55:37 2015 kern.info kernel: [ 7241.940993] wlan0: deauthenticated from 64:70:02:9d:9e:38 while associating (Reason: 6=CLASS2_FRAME_FROM_NONAUTH_STA)<br />Sat Dec 19 04:00:37 2015 kern.info kernel: [ 7542.528439] wlan0: authenticate with 64:70:02:9d:9e:38<br />Sat Dec 19 04:00:37 2015 kern.info kernel: [ 7542.548276] wlan0: send auth to 64:70:02:9d:9e:38 (try 1/3)<br />Sat Dec 19 04:00:37 2015 kern.info kernel: [ 7542.610883] wlan0: authenticated<br />Sat Dec 19 04:00:37 2015 kern.info kernel: [ 7542.614590] ath9k ar934x_wmac wlan0: disabling HT/VHT due to WEP/TKIP use<br />Sat Dec 19 04:00:37 2015 kern.info kernel: [ 7542.628879] wlan0: associate with 64:70:02:9d:9e:38 (try 1/3)<br />Sat Dec 19 04:00:37 2015 kern.info kernel: [ 7542.638339] wlan0: deauthenticated from 64:70:02:9d:9e:38 while associating (Reason: 6=CLASS2_FRAME_FROM_NONAUTH_STA)<br />Sat Dec 19 04:05:38 2015 kern.info kernel: [ 7843.227924] wlan0: authenticate with 64:70:02:9d:9e:38<br />Sat Dec 19 04:05:38 2015 kern.info kernel: [ 7843.247741] wlan0: send auth to 64:70:02:9d:9e:38 (try 1/3)<br />Sat Dec 19 04:05:38 2015 kern.info kernel: [ 7843.255509] wlan0: authenticated<br />Sat Dec 19 04:05:38 2015 kern.info kernel: [ 7843.259377] ath9k ar934x_wmac wlan0: disabling HT/VHT due to WEP/TKIP use<br />Sat Dec 19 04:05:38 2015 kern.info kernel: [ 7843.269037] wlan0: associate with 64:70:02:9d:9e:38 (try 1/3)<br />Sat Dec 19 04:05:38 2015 kern.info kernel: [ 7843.409123] wlan0: deauthenticated from 64:70:02:9d:9e:38 while associating (Reason: 6=CLASS2_FRAME_FROM_NONAUTH_STA)<br />Sat Dec 19 04:10:39 2015 kern.info kernel: [ 8143.997944] wlan0: authenticate with 64:70:02:9d:9e:38<br />Sat Dec 19 04:10:39 2015 kern.info kernel: [ 8144.017786] wlan0: send auth to 64:70:02:9d:9e:38 (try 1/3)<br />Sat Dec 19 04:10:39 2015 kern.info kernel: [ 8144.466024] wlan0: send auth to 64:70:02:9d:9e:38 (try 2/3)<br />Sat Dec 19 04:10:40 2015 kern.info kernel: [ 8144.952053] wlan0: authenticated<br />Sat Dec 19 04:10:40 2015 kern.info kernel: [ 8144.955725] ath9k ar934x_wmac wlan0: disabling HT/VHT due to WEP/TKIP use<br />Sat Dec 19 04:10:40 2015 kern.info kernel: [ 8144.968967] wlan0: associate with 64:70:02:9d:9e:38 (try 1/3)<br />Sat Dec 19 04:10:40 2015 kern.info kernel: [ 8145.237369] wlan0: associate with 64:70:02:9d:9e:38 (try 2/3)<br />Sat Dec 19 04:10:40 2015 kern.info kernel: [ 8145.639125] wlan0: associate with 64:70:02:9d:9e:38 (try 3/3)<br />Sat Dec 19 04:10:40 2015 kern.info kernel: [ 8145.651313] wlan0: deauthenticated from 64:70:02:9d:9e:38 while associating (Reason: 6=CLASS2_FRAME_FROM_NONAUTH_STA)</p><p>Any idea?<br />Thanks :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306372">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">kokoliso</div>
					<div class="post-datetime">
						5 Jan 2016, 22:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>danymarc wrote:</cite><blockquote><p>have you tried, ascii converter on WEP key</p></blockquote></div><p>I am putting the key straight in ascii. Is this right? Or doesn&#039;t?</p><p>Thanks :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306398">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">davidc502</div>
					<div class="post-datetime">
						6 Jan 2016, 00:43					</div>
				</div>
				<div class="post-content content">
					<p>Is there any possibility to be able to use another encryption algorithm? This is a little bit of a hijack here, but WEP can be broken in just a few seconds by anyone with a wifi laptop, and just a little experience. WEP is no longer considered secure at all, so consider using WPA-AES or WPA-TKIP.</p><p>Best Regards,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306418">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">kokoliso</div>
					<div class="post-datetime">
						6 Jan 2016, 04:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>davidc502 wrote:</cite><blockquote><p>Is there any possibility to be able to use another encryption algorithm? This is a little bit of a hijack here, but WEP can be broken in just a few seconds by anyone with a wifi laptop, and just a little experience. WEP is no longer considered secure at all, so consider using WPA-AES or WPA-TKIP.</p><p>Best Regards,</p></blockquote></div><p>I know what you mean but is the connection of my neighbour and he has an old mac that has only WEP encryption (no WPA). Then, our only chance is to use WEP.</p><p>But anyway, is there any other issue more than security related with WEP?</p><p>Thanks :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306423">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">davidc502</div>
					<div class="post-datetime">
						6 Jan 2016, 05:40					</div>
				</div>
				<div class="post-content content">
					<p>Not that I&#039;m aware --- </p><p>Tried not to get too &quot;preachy&quot; with you about it <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&nbsp; &nbsp;Understand the reasons.</p><p>Best Regards,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306498">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">kokoliso</div>
					<div class="post-datetime">
						6 Jan 2016, 18:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>davidc502 wrote:</cite><blockquote><p>Not that I&#039;m aware --- </p><p>Tried not to get too &quot;preachy&quot; with you about it <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&nbsp; &nbsp;Understand the reasons.</p><p>Best Regards,</p></blockquote></div><p>Thanks for the advice.<br />I talked about the issues with WEP because searching I found that there were troubles in connecting with WEP encryption but six years ago: <a href="https://dev.openwrt.org/ticket/6491">https://dev.openwrt.org/ticket/6491</a></p><p>Also I have been searching without success about &quot;Reason: 6=CLASS2_FRAME_FROM_NONAUTH_STA&quot;. Anybody can explain me why about this error message?</p><p>Thanks :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306513">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						6 Jan 2016, 20:55					</div>
				</div>
				<div class="post-content content">
					<p>You can check some things. <br />Try to connect via command line<br /></p><div class="codebox"><pre><code>iw wlan0 connect somormujo 00:11:22:33:44:55 keys d:0:mysecretkey13</code></pre></div><p>where &quot;somormujo&quot; is the ESSID name of the remote AP, &quot;00:11:22:33:44:55&quot; the MAC, and &quot;mysecretkey13&quot; the wep encryption key.</p><p>Check the file /etc/config/wireless<br /></p><div class="codebox"><pre><code>cat /etc/config/wireless</code></pre></div><p>should be something like this<br /></p><div class="codebox"><pre><code> 
config wifi-device  radio0
        option type     mac80211
        option channel  auto
        option hwmode  11g
        option phy    phy0

config wifi-iface
        option device   radio0
        option network  wwan
        option mode     sta
        option ssid     somormujo
        option encryption wep-open
        option key      1
        option key1    6D797365637265746B65793133</code></pre></div><p>Remember with WEP encryptions only 13 or 5 ASCII character keys lenght are allowed. To convert your ASCII key to HEX you can use something like this <a href="http://www.dirtymonday.net/key_convert.html">http://www.dirtymonday.net/key_convert.html</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306663">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">kokoliso</div>
					<div class="post-datetime">
						8 Jan 2016, 04:01					</div>
				</div>
				<div class="post-content content">
					<p>Thank you very much but it doesn&#039;t worked. I have made some tests with other router with WEP encryption and it works flawlessly. But I think the problem is the AP which I am trying to connect that is old and never was updated (maybe is 5 years ago. I will try to guess something about it).<br />The thing is that still I don&#039;t know what it means the error which gives me when my router tries to associate with the AP, after the successful autentication: &quot;Reason: 6=CLASS2_FRAME_FROM_NONAUTH_STA&quot;</p><p>I have tried with 15.05, 14.07 and several trunks without success.</p><p>Anybody has any idea?</p><p>pd: ac치 donde vivo en el interior de argentina est치 lloviendo estos meses como si fuese pontevedra. Saludos para aquellas tierras :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306701">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">danymarc</div>
					<div class="post-datetime">
						8 Jan 2016, 12:32					</div>
				</div>
				<div class="post-content content">
					<p>Go back to stock here you find a stripped bin <a href="http://www.friedzombie.com/tplink-stripped-firmware/">http://www.friedzombie.com/tplink-stripped-firmware/</a> and try DD-WRT here is latest build <a href="ftp://ftp.dd-wrt.com/betas/2016/01-02-2016-r28647/">ftp://ftp.dd-wrt.com/betas/2016/01-02-2016-r28647/</a> if does not work use webflash bin to downgrade to older builds</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306705">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						8 Jan 2016, 13:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kokoliso wrote:</cite><blockquote><p>Thank you very much but it doesn&#039;t worked. I have made some tests with other router with WEP encryption and it works flawlessly. But I think the problem is the AP which I am trying to connect that is old and never was updated (maybe is 5 years ago. I will try to guess something about it).<br />The thing is that still I don&#039;t know what it means the error which gives me when my router tries to associate with the AP, after the successful autentication: &quot;Reason: 6=CLASS2_FRAME_FROM_NONAUTH_STA&quot;</p><p>I have tried with 15.05, 14.07 and several trunks without success.</p><p>Anybody has any idea?</p><p>pd: ac치 donde vivo en el interior de argentina est치 lloviendo estos meses como si fuese pontevedra. Saludos para aquellas tierras :-)</p></blockquote></div><p>Check the remote AP, there are two types of WEP encriptions<br />&nbsp; -&nbsp; <strong>wep open system</strong><br />&nbsp; -&nbsp; <strong>wep shared key</strong><br />Choose wep open on both routers if possible, otherwise choose wep shared on both. Also choose 11b only or 11g only on both routers.</p><p>And disable WMM Mode in OpenWrt</p><p>Saludos.</p>											<p class="post-edited">(Last edited by <strong>danitool</strong> on 8 Jan 2016, 13:58)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>