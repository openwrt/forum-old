<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> externd wireless range with wired routers</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p153545">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">seebaastian</div>
					<div class="post-datetime">
						8 Jan 2012, 04:25					</div>
				</div>
				<div class="post-content content">
					<p>Hello all.</p><p>I&#039;ll appreciate your help with this issue. I have two D-Link DIR-825 wired together with an utp cable. I want that my laptop perfoms handovers between them choosing the best server. Also I Know that handover is managed and performed by clients. I&#039;ve read that with WDS can be possible do what I want but I don&#039;t want to get the link between routers through the wireless conection. In other words I want to keep the wireless interfaces clean just for users traffic. It is possible to configure both routers to interchange information about clients using my wired &quot;backbone&quot; It would be awesome it&#039;s possible.</p><p>I&#039;ve set the same SSID in both routers in different channels with the same password using WPA security. the first one is plugged to internet and the second one should be an slave.</p><p>Any help will be appreciated because I want to add more devices</p><p>Regards!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p153575">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Cypher</div>
					<div class="post-datetime">
						8 Jan 2012, 14:58					</div>
				</div>
				<div class="post-content content">
					<p>You need same SSID, same encryption + key, same channel on all routers.<br />Then you should be able to roam around as much as you want. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p153579">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">3zl</div>
					<div class="post-datetime">
						8 Jan 2012, 15:34					</div>
				</div>
				<div class="post-content content">
					<p>it is not quite clear to me what you want to achieve.</p><p>So please make a small block diagram wtih routes to/from WAN/LAN to WLAN clients.</p><p>It will help yourself and us to to understand the scope and find a suitable way to implement.</p><p>points to specify :</p><p>1. laptop performs handover ..( maybe meaning &quot;WIFI roaming&quot; )<br />2. link between routers&nbsp; cable or wifi ? (&quot;Backbone&quot;)<br />3. client information interchange between routers ( what informations ? access control ? log ? )<br />4. Topology ?<br />5. multi/single WAN</p><br /><p>we realized setups like that with AWDS L2Mesh </p><p>regards</p><p>3zl</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p153596">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						8 Jan 2012, 18:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>3zl wrote:</cite><blockquote><p>1. laptop performs handover ..( maybe meaning &quot;WIFI roaming&quot; )<br />2. link between routers&nbsp; cable or wifi ? (&quot;Backbone&quot;)<br />3. client information interchange between routers ( what informations ? access control ? log ? )</p></blockquote></div><p>1) <a href="http://en.wikipedia.org/wiki/IEEE_802.11r-2008">802.11r or Fast Roaming</a><br />2) &quot;two D-Link DIR-825 wired together with an utp cable&quot;<br />3) Something like &quot;<a href="http://en.wikipedia.org/wiki/Inter-Access_Point_Protocol">802.11F or IAPP</a> but it&#039;s ceased in 2006.</p><p><a href="https://forum.openwrt.org/viewtopic.php?id=30150">OpenWrt / Howto connect to the best Access Point</a><br /><a href="http://hostap.epitest.fi/hostapd/">hostapd: IEEE 802.11 AP, IEEE 802.1X/WPA/WPA2/EAP/RADIUS Authenticator</a><br /></p><div class="quotebox"><blockquote><p><strong>Supported WPA/IEEE 802.11i/EAP/IEEE 802.1X features</strong><br />WPA-PSK (&quot;WPA-Personal&quot;)<br />WPA with EAP (with integrated EAP server or an external RADIUS backend authentication server) (&quot;WPA-Enterprise&quot;)<br />key management for CCMP, TKIP, WEP104, WEP40<br />WPA and full IEEE 802.11i/RSN/WPA2<br />RSN: PMKSA caching, pre-authentication<br /><strong><span style="color: Red">IEEE 802.11r</span></strong><br />IEEE 802.11w<br />RADIUS accounting<br />RADIUS authentication server with EAP<br />Wi-Fi Protected Setup (WPS)</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p153620">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">3zl</div>
					<div class="post-datetime">
						8 Jan 2012, 19:42					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your input FYI .. very profound like always enjoyed it.</p><p>So i did a little roaming on your links and came to same conclusion as 3 years ago :</p><p>&nbsp; There is alot of &quot;cooking&quot; but no success at the end. A least i could not find a decent description of final useful outcome. <br />&nbsp; So i suppose they all gave in at the end and left it to the &quot;profesionals&quot; doing their propietary solutions.</p><p>&nbsp; The &quot;ingredients&quot; are in hostapd and erverybody seems to cook, but no &quot;soup on the table&quot;.<br />&nbsp; I hope i would taste some one day...so to say.</p><p>Meanwhile for pratical purposes ( and more than 2 routers) and messing with tunnelling, i turned to Layer-2-Mesh-adhoc, which of course is not appropriate for normal AP-Client direct connections, but gives me IP-free node connections distributing L3-traffic.<br />So no TCP drop and&nbsp; additonally having AP&#039;s on every mesh-node with a central DHCP service and AAA. So no problem with clients changing IP on handover.</p><p>Multi-WAN ist still a a subject to be worked on. </p><p>How this may help in the case of &quot;extend wireless range with wired routers&quot; i can judge after i do know more about the scope of seebaastian&#039;s application.</p><p>Lets see; quite interesting matter anyway</p><p>regards</p><p>3zl</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p153642">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">seebaastian</div>
					<div class="post-datetime">
						8 Jan 2012, 22:24					</div>
				</div>
				<div class="post-content content">
					<p>Hello All. I&#039;ve appreciated your fast answer. Here is the deal. My home have 2 floors. My master DIR-825 router is placed in the library room located in the first floor. The problem begins when I try to have a decent signal strength in the second floor in my bedroom which is a lot of bricks walls away. So I wired a utp cable extension from the bottom router to be used with the second DIR-825. I enabled the 2.4 GHz radio in both routers but in different channels (master in channel 1 and slave in channel 11). I also configured the same SSID expecting that my laptop wireless adapter switch from one to another making that process transparent to the users (my little&nbsp; brothers). Routers have installed OpenWrt trunk (r29614).</p><p>I&#039;m wondering if my laptop can perform handovers between routers. I&#039;m going to try with a different one. Also the laptop uses Windows 7 pro.</p><p>The connection between routers is a cat6 ethernet cable like 60 feet long. If I plug another laptop using one of the lan ports I can get an IP address from master and also I can surf the web.</p><p>Here is my scheme:</p><p><span class="postimg"><img src="https://public.blu.livefilestore.com/y1pK1vepaNBbmT1ESf6QHKnzSL3zSC48gdOSKv4_Ntt22mKwCtsDf3CxaqfC1ZD04G7dsF4p9DBU6LDolw_klouaQ/wireless%20scheme.png?psid=1" alt="https://public.blu.livefilestore.com/y1pK1vepaNBbmT1ESf6QHKnzSL3zSC48gdOSKv4_Ntt22mKwCtsDf3CxaqfC1ZD04G7dsF4p9DBU6LDolw_klouaQ/wireless%20scheme.png?psid=1" /></span></p><p>Thank you for your support,<br />Seebaastian</p>											<p class="post-edited">(Last edited by <strong>seebaastian</strong> on 8 Jan 2012, 22:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p153655">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						8 Jan 2012, 23:41					</div>
				</div>
				<div class="post-content content">
					<p>I believe that you have done your best.</p><p><a href="http://www.dd-wrt.com/wiki/index.php/Wireless_access_point#Roaming_access">Wireless access point - DD-WRT Wiki</a><br /></p><div class="quotebox"><blockquote><p><strong>Roaming access</strong></p><p>If you are installing additional Access Points to cover a broader area with Wi-Fi access, it is possible to allow clients to roam freely between them. The common method is to <strong>use the same SSID and Security settings</strong> on each access point.<br /><strong>Use a different channel on each AP</strong>.</p></blockquote></div><p>And I think the main issue resides in the wifi clients.</p><p><a href="http://www.ciscopress.com/articles/article.asp?p=102282">Wireless LAN Fundamentals: Mobility &gt; Characteristics of Roaming</a><br /></p><div class="quotebox"><blockquote><p><strong>The Nature of Roaming in 802.11</strong></p><p>802.11 roaming is known as &quot;<strong>break before make</strong>,&quot; referring to the requirement that a station serves its association with one AP before creating an association with a new one. This process might seem unintuitive because it introduces the possibility for data loss during roaming, but it facilitates a simpler MAC protocol and radio.</p><p>If 802.11 were &quot;make before break,&quot; meaning a station could associate to a new AP before disassociating from the old AP, you would need safeguards in the MAC to ensure a loop-free topology. A station connected to the same Layer 2 broadcast domain via simultaneous network connections has the potential to trigger broadcast storms. A &quot;make before break&quot; architecture would necessitate an algorithm such as 802.1D spanning tree to resolve any potential loops, adding overhead to the MAC protocol. In addition, the client radio would have to be capable of listening and communicating on more than one channel at a time, increasing the complexity of the radio (and adding to the overall cost of the devices).</p></blockquote></div><p>So I think the best you can achieve right now might be &quot;802.11r or Fast Roaming&quot; but it depends on whether your wifi clients support it or not. If you have wireless USB dongle with Ralink SoC, you can take a look at Ralink Wireless Utility (RaUI). Under Advanced tab there&#039;s an option,<br /></p><div class="quotebox"><blockquote><p>[] Fast Roaming at?[-70] dBm</p></blockquote></div><p>I think it defines when the wifi client should start to look for another access point. Untested.</p><p><a href="http://www.wireless-nets.com/resources/tutorials/how_roaming_works.html">How Wi-Fi Roaming Really Works</a><br /><a href="http://www.iometrix.com/whitepapers/Iometrix_WPv3.pdf">Testing WLAN Roaming Step by Step</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157297">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						13 Feb 2012, 22:34					</div>
				</div>
				<div class="post-content content">
					<p>Is 802.11r supported in latest openwrt trunk?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159168">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">ashkanull</div>
					<div class="post-datetime">
						1 Mar 2012, 02:02					</div>
				</div>
				<div class="post-content content">
					<p>no it&#039;s not implemented in hostapd.sh but according to hostapd.conf you should be able to add it easily . <br /></p><div class="quotebox"><blockquote><p><strong>IEEE 802.11r configuration</strong><br />##### IEEE 802.11r configuration ##############################################</p><p># Mobility Domain identifier (dot11FTMobilityDomainID, MDID)<br /># MDID is used to indicate a group of APs (within an ESS, i.e., sharing the<br /># same SSID) between which a STA can use Fast BSS Transition.<br /># 2-octet identifier as a hex string.<br />#mobility_domain=a1b2</p><p># PMK-R0 Key Holder identifier (dot11FTR0KeyHolderID)<br /># 1 to 48 octet identifier.<br /># This is configured with nas_identifier (see RADIUS client section above).</p><p># Default lifetime of the PMK-RO in minutes; range 1..65535<br /># (dot11FTR0KeyLifetime)<br />#r0_key_lifetime=10000</p><p># PMK-R1 Key Holder identifier (dot11FTR1KeyHolderID)<br /># 6-octet identifier as a hex string.<br />#r1_key_holder=000102030405</p><p># Reassociation deadline in time units (TUs / 1.024 ms; range 1000..65535)<br /># (dot11FTReassociationDeadline)<br />#reassociation_deadline=1000</p><p># List of R0KHs in the same Mobility Domain<br /># format: &lt;MAC address&gt; &lt;NAS Identifier&gt; &lt;128-bit key as hex string&gt;<br /># This list is used to map R0KH-ID (NAS Identifier) to a destination MAC<br /># address when requesting PMK-R1 key from the R0KH that the STA used during the<br /># Initial Mobility Domain Association.<br />#r0kh=02:01:02:03:04:05 r0kh-1.example.com 000102030405060708090a0b0c0d0e0f<br />#r0kh=02:01:02:03:04:06 r0kh-2.example.com 00112233445566778899aabbccddeeff<br /># And so on.. One line per R0KH.</p><p># List of R1KHs in the same Mobility Domain<br /># format: &lt;MAC address&gt; &lt;R1KH-ID&gt; &lt;128-bit key as hex string&gt;<br /># This list is used to map R1KH-ID to a destination MAC address when sending<br /># PMK-R1 key from the R0KH. This is also the list of authorized R1KHs in the MD<br /># that can request PMK-R1 keys.<br />#r1kh=02:01:02:03:04:05 02:11:22:33:44:55 000102030405060708090a0b0c0d0e0f<br />#r1kh=02:01:02:03:04:06 02:11:22:33:44:66 00112233445566778899aabbccddeeff<br /># And so on.. One line per R1KH.</p><p># Whether PMK-R1 push is enabled at R0KH<br /># 0 = do not push PMK-R1 to all configured R1KHs (default)<br /># 1 = push PMK-R1 to all configured R1KHs whenever a new PMK-R0 is derived<br />#pmk_r1_push=1</p></blockquote></div><p>I didn&#039;t find any document on how to configure it even on hostapd website itself. I just found this <a href="http://lists.shmoo.com/pipermail/hostap/2008-May/017762.html">how to configure 802.11r <em>Tue May 13 13:56:46 EDT 2008</em></a></p>											<p class="post-edited">(Last edited by <strong>ashkanull</strong> on 1 Mar 2012, 02:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p270845">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">rossini</div>
					<div class="post-datetime">
						1 Apr 2015, 16:40					</div>
				</div>
				<div class="post-content content">
					<p>IEEE 802.11r is now supported in trunk. </p><p>can anyone help me with the configuration. i have the same setup like Seebaastian above.</p><p>thx</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271702">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">tuts</div>
					<div class="post-datetime">
						8 Apr 2015, 17:07					</div>
				</div>
				<div class="post-content content">
					<p>yes i want to use 802.11r to.<br />since now my mobile device only can use roaming very badly.<br />i&#039;m using 802.1x (wpa2 eap) auth with radius on all APs.</p><p>at <a href="http://wiki.openwrt.org/doc/uci/wireless#fast_bss_transition_options">http://wiki.openwrt.org/doc/uci/wireles â€¦ on_options</a> i found some information, but do not understand.</p><p>i added 2 lines in /etc/config/wireless<br />&nbsp; &nbsp; &nbsp; &nbsp; option iapp_interface &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option rsn_preauth &#039;1&#039;</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>