<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Slow Internet over Wifi</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p300137">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dominik1</div>
					<div class="post-datetime">
						17 Nov 2015, 12:05					</div>
				</div>
				<div class="post-content content">
					<p>Hi.</p><p>I&#039;m not quite sure if this is the correct Discussion to post this topic, so please excuse me if it is in the wrong place. </p><p>Anyways:</p><p>I have the following setup:</p><p>Linksys WRT54G - OpenWrt Backfire 10.03<br />--&gt; Set up in the following way: <a href="http://blog.jozjan.net/2008/12/wrt54gl-as-8021x-client-aka.html">http://blog.jozjan.net/2008/12/wrt54gl- … t-aka.html</a></p><p>So far the connection works great, so i decided to add a second router (Linksys E900) as a Wireless Access Point.</p><p>I have set the WAN Interface to a static IP and setup the Wireless in WPA2 (AES) - N Mode.</p><p>As long as I connect to the Linksys E900 - via LAN - the Internet Speed is excellent, but as soon as I try to connect via WiFi - I only get about 0.5Mbit - Even though I the connection speed is around 140Mbit..</p><br /><p>I have also tried another router with the same problem. What could be wrong here?</p><p>Thanks for your help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300167">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">inquba</div>
					<div class="post-datetime">
						17 Nov 2015, 15:50					</div>
				</div>
				<div class="post-content content">
					<p>Is there more devices connected to the WiFi?&nbsp; If yes they share the bandwidth.</p><p>I INSTALLED babeld&nbsp; package and my bandwidth speed go nicely. It avoid bandwidth starvation, but don&#039;t know if there is available for openwrt 10.03</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300180">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">dominik1</div>
					<div class="post-datetime">
						17 Nov 2015, 18:15					</div>
				</div>
				<div class="post-content content">
					<p>Unfortunately not - I tried that already. </p><p>Even if only one device is connected to the WiFi then I still get only around 0.7Mbit Download..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300183">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">inquba</div>
					<div class="post-datetime">
						17 Nov 2015, 18:36					</div>
				</div>
				<div class="post-content content">
					<p>You tried babeld ? <br />What distance you test?&nbsp; What device is connected wireless?&nbsp; Did you have config the interface wan in firewall wan zone?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300197">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">dominik1</div>
					<div class="post-datetime">
						17 Nov 2015, 20:26					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m not quite sure where to install babeld? On the Linksys E900 or the WRT54G?</p><p>I tried disabling the firewall too - but no significant change.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300199">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">inquba</div>
					<div class="post-datetime">
						17 Nov 2015, 20:39					</div>
				</div>
				<div class="post-content content">
					<p>Babeld is available in router openwrt when you go to --&gt;system--&gt;software--&gt;update.&nbsp; Then search babeld and install</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300204">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">dominik1</div>
					<div class="post-datetime">
						17 Nov 2015, 21:09					</div>
				</div>
				<div class="post-content content">
					<p>Unfortunately I cannot install babeld because I apparently do not have enough space (had to install wpad instead of wpad-mini).</p><p>Could you explain what babeld does and how it would help increase the download speed?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300230">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">inquba</div>
					<div class="post-datetime">
						17 Nov 2015, 23:47					</div>
				</div>
				<div class="post-content content">
					<p>babeld is an route manager. that automatize the creation of best routes. based in ping, speed, interfaces, etc It make the routes have not loops, optimize the routes and save,,, if a link interface is starving.... ( your case with wifi ) its automatic make the trafic bandwidth to go fine even more in my case.... it is easy to config you install and edit /etc/config/babeld and put the interfaces you want to create routes.... babeld admin all routes for you</p><p>in my case I have 3 wan interfaces: wan, wan2 and wan3&nbsp; before install babeld&nbsp; i have nice&nbsp; working wan and wan2&nbsp; but wan3 even when have lot of bandwidth it bareley used it.... I have like 9 mbps down and 3 mbps up..... after babeld and add the interfaces&nbsp; wan=eth0.2&nbsp; wan2 =eth0.200 and wan3 = eth0.300&nbsp; &nbsp; the wan3 increase the bandwidth used and the total three gives me 18mbps down and 5 mbps up...... it does some kind&nbsp; of homing.....it adds the bandwidth........</p><p>babeld is more specific to wireless interfaces (your case )&nbsp; but works fine with wired interfaces too</p><p>hope this help you</p><p>by the way babeld is tiny.... like 30kb</p>											<p class="post-edited">(Last edited by <strong>inquba</strong> on 17 Nov 2015, 23:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300264">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">dominik1</div>
					<div class="post-datetime">
						18 Nov 2015, 09:06					</div>
				</div>
				<div class="post-content content">
					<p>Hi.</p><p>This is the output from the installation:</p><br /><div class="codebox"><pre><code>root@OpenWrt:/overlay/usr/lib/opkg# opkg install babeld
Installing babeld (0.98-1) to root...
Downloading http://downloads.openwrt.org/backfire/10.03/brcm47xx/packages/babeld_0.98-1_brcm47xx.ipk.
Installing kmod-ipv6 (2.6.32.10-1) to root...
Collected errors:
 * verify_pkg_installable: Only have 424kb available on filesystem /overlay, pkg kmod-ipv6 needs 472
 * opkg_install_cmd: Cannot install package babeld.</code></pre></div><p>As you can see - not so tiny.. <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /> </p><p>Also I cannot see why babeld would help in this case. As mentioned:</p><br /><p>Internet ---&gt; WRT54G (802.1x Wifi Client Mode - OpenWRT) ----&gt; Linksys E900 (Lan to Lan, DD-WRT)</p><p>If i connect to the Linksys E900 via Lan - I get full speed for download and upload.</p><p>If I connect to the E900 via Wifi - I only get 0.7Mbit download and around 1 Mbit upload.</p><p>I also tried another Wifi Router, so the problem must definitely be a configuration issue with either the WRT54G or the Linksys E900.</p><p>Thanks for your help so far.</p><br /><p><strong>EDIT: </strong></p><p>I tried messing with the Wifi settings and Changed the Channel to Auto and the Channel with to 40Mhz - Ever since there is no issue with the download speeds whatsoever. So in fact in must have been a wifi interference issue.</p><p>Thanks again for your help.</p>											<p class="post-edited">(Last edited by <strong>dominik1</strong> on 18 Nov 2015, 09:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300294">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">inquba</div>
					<div class="post-datetime">
						18 Nov 2015, 16:45					</div>
				</div>
				<div class="post-content content">
					<p>Ohhh. Try to change to 20Mhz,&nbsp; and maybe erase wireless config an issue a command &quot;wifi detect&quot;&nbsp; then&nbsp; &quot;wifi detect &gt;&gt; /etc/config/wireless &quot;&nbsp; &nbsp; then reboot</p><p>Based on Nixor IDS: Wireless Adapter TL-WN7200ND with Kismet and OpenWRT Router TL-WDR4300 <a href="http://nixorids.blogspot.mx/2013/03/wireless-adapter-tl-wn7200nd-with.html?m=1">http://nixorids.blogspot.mx/2013/03/wir … h.html?m=1</a></p><br /><p>NOTE: I think the problem is the E900 with ddwrt as you said you connect to it via wifi. I would do a hard reset to ddwrt 30/30/30 reset.&nbsp; &nbsp;Click the reset button for 30 sec, then disconnect power for 30 sec then power on and still for other 30. I think the ddwrt firewall for wifi is somehow messed.... Try that</p><p>If after reset. the problem persist.... maybe it is because&nbsp; your router is multi-band and is ac&nbsp; 2.4Ghz/5Ghz and because you upgrade to DDWRT and ac drivers for the wireless are propietary... then the problem is the compatibility with ac</p><p>I have a buffalo 1750dhp and have low range in wifi.... after convert to openwrt 15.05&nbsp; my ac antennas drop so I dont use the internal antennas and use a dumb AP instead.....</p>											<p class="post-edited">(Last edited by <strong>inquba</strong> on 18 Nov 2015, 21:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300423">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">inquba</div>
					<div class="post-datetime">
						19 Nov 2015, 16:20					</div>
				</div>
				<div class="post-content content">
					<p>Worked ?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>