<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Atheros AR9160/AR9106 supported? Ath9k module not working...</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 6 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p174640">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Lennong</div>
					<div class="post-datetime">
						11 Aug 2012, 21:12					</div>
				</div>
				<div class="post-content content">
					<p>I have replaced the AR5416 that came with the router with an Atheros AR9160/AR9106 card (supposedly). I assumed the ath9k module would support the new card as it is stated as supported on the wiki. However, radio0 will not start and radio1 (5GHz) is not even configurable. Do I need to recompile something or what should I do? </p><p>Card:<br /><a href="http://www.ebay.com/itm/261057780190?ssPageName=STRK:MEWNX:IT&amp;_trksid=p3984.m1497.l2649">http://www.ebay.com/itm/261057780190?ss … 1497.l2649</a><br /><a href="http://unex.com.tw/product/dnma-83">http://unex.com.tw/product/dnma-83</a></p><p>The spec given is AR9160/AR9106, however I get in dmesg:<br />&quot;[&nbsp; &nbsp;54.369977] ieee80211 phy0: Atheros AR9160 MAC/BB Rev:1 <strong>AR5133</strong> RF Rev:b0 mem=0xc8b60000, irq=36&quot;<br />...is this a case of &quot;sticker tuning&quot; or am I missing something obvious? I&#039;m not sure what to here.. </p><p>dmesg:<br /></p><div class="codebox"><pre><code>[    0.000000] CPU: Feroceon [41069260] revision 0 (ARMv5TEJ), cr=a0053177
[    0.000000] CPU: VIVT data cache, VIVT instruction cache
[    0.000000] Machine: Linksys WRT350N v2
[    0.000000] Clearing invalid memory bank 0KB@0xffffffff
[    0.000000] Clearing invalid memory bank 0KB@0xffffffff
[    0.000000] Clearing invalid memory bank 0KB@0xffffffff
[    0.000000] Ignoring unrecognised tag 0x00000000
[    0.000000] Ignoring unrecognised tag 0x00000000
[    0.000000] Ignoring unrecognised tag 0x00000000
[    0.000000] Memory policy: ECC disabled, Data cache writeback
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 32512
[    0.000000] Kernel command line: root=/dev/mtdblock1 rootfstype=squashfs,jffs2 noinitrd console=ttyS0,115200
[    0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)
[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Memory: 128MB = 128MB total
[    0.000000] Memory: 126996k/126996k available, 4076k reserved, 0K highmem
[    0.000000] Virtual kernel memory layout:
[    0.000000]     vector  : 0xffff0000 - 0xffff1000   (   4 kB)
[    0.000000]     fixmap  : 0xfff00000 - 0xfffe0000   ( 896 kB)
[    0.000000]     vmalloc : 0xc8800000 - 0xff000000   ( 872 MB)
[    0.000000]     lowmem  : 0xc0000000 - 0xc8000000   ( 128 MB)
[    0.000000]     modules : 0xbf000000 - 0xc0000000   (  16 MB)
[    0.000000]       .text : 0xc0008000 - 0xc0292000   (2600 kB)
[    0.000000]       .init : 0xc0292000 - 0xc02b3000   ( 132 kB)
[    0.000000]       .data : 0xc02b4000 - 0xc02c9e40   (  88 kB)
[    0.000000]        .bss : 0xc02c9e64 - 0xc02d7598   (  54 kB)
[    0.000000] NR_IRQS:64
[    0.000000] gpiochip_add: registered GPIOs 0 to 31 on device: orion_gpio0
[    0.000000] sched_clock: 32 bits at 166MHz, resolution 5ns, wraps every 25769ms
[   19.801751] Calibrating delay loop... 331.77 BogoMIPS (lpj=1658880)
[   19.861629] pid_max: default: 32768 minimum: 301
[   19.861963] Mount-cache hash table entries: 512
[   19.862565] CPU: Testing write buffer coherency: ok
[   19.863095] Setting up static identity map for 0x23c2e8 - 0x23c324
[   19.865758] NET: Registered protocol family 16
[   19.869025] Orion ID: MV88F5181L-Rev-A1. TCLK=166666667.
[   19.873452] Applying Orion-1/Orion-NAS PCIe config read transaction workaround
[   19.873943] PCI host bridge to bus 0000:00
[   19.873982] pci_bus 0000:00: root bus resource [io  0x0000-0xfffff]
[   19.874017] pci_bus 0000:00: root bus resource [mem 0xe0000000-0xe7ffffff]
[   19.874339] PCI: bus0: Fast back to back transfers disabled
[   19.875324] PCI host bridge to bus 0000:01
[   19.875363] pci_bus 0000:01: root bus resource [io  0x100000-0x1fffff]
[   19.875399] pci_bus 0000:01: root bus resource [mem 0xe8000000-0xefffffff]
[   19.876191] PCI: bus1: Fast back to back transfers enabled
[   19.877300] pci 0000:01:07.0: BAR 0: assigned [mem 0xe8000000-0xe800ffff]
[   19.897267] bio: create slab &lt;bio-0&gt; at 0
[   19.900198] SCSI subsystem initialized
[   19.905450] Switching to clocksource orion_clocksource
[   19.910691] NET: Registered protocol family 2
[   19.910973] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[   19.911565] TCP established hash table entries: 4096 (order: 3, 32768 bytes)
[   19.911828] TCP bind hash table entries: 4096 (order: 2, 16384 bytes)
[   19.911942] TCP: Hash tables configured (established 4096 bind 4096)
[   19.911968] TCP reno registered
[   19.912000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[   19.912057] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[   19.912475] NET: Registered protocol family 1
[   19.916073] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[   19.916109] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[   19.916986] msgmni has been set to 248
[   19.917717] io scheduler noop registered
[   19.917743] io scheduler deadline registered (default)
[   20.149885] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
[   20.172209] serial8250.0: ttyS0 at MMIO 0xf1012000 (irq = 3) is a 16550A
[   20.559154] console [ttyS0] enabled
[   20.566499] physmap platform flash device: 00800000 at f4000000
[   20.572710] physmap-flash.0: Found 1 x16 devices at 0x0 in 8-bit bank. Manufacturer ID 0x0000ec Chip ID 0x0000e0
[   20.582941] Amd/Fujitsu Extended Query Table at 0x0040
[   20.588118]   Fixing Samsung&#039;s Amd/Fujitsu Extended Query version to 1.0
[   20.594805]   Amd/Fujitsu Extended Query version 1.0.
[   20.599877] physmap-flash.0: Swapping erase regions for top-boot CFI table.
[   20.606860] number of CFI chips: 1
[   20.611429] Creating 7 MTD partitions on &quot;physmap-flash.0&quot;:
[   20.617058] 0x000000000000-0x000000100000 : &quot;kernel&quot;
[   20.624588] 0x000000100000-0x000000750000 : &quot;rootfs&quot;
[   20.632163] mtd: partition &quot;rootfs&quot; set to be root filesystem
[   20.637984] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=610000, len=140000
[   20.646020] 0x000000610000-0x000000750000 : &quot;rootfs_data&quot;
[   20.653954] 0x000000760000-0x0000007a0000 : &quot;lang&quot;
[   20.661380] 0x0000007a0000-0x0000007c0000 : &quot;nvram&quot;
[   20.668864] 0x0000007c0000-0x000000800000 : &quot;u-boot&quot;
[   20.676358] 0x000000750000-0x000000760000 : &quot;eRcOmM_do_not_touch&quot;
[   20.684896] 0x000000000000-0x000000750000 : &quot;image&quot;
[   20.692809] mv643xx_eth: MV-643xx 10/100/1000 ethernet driver version 1.4
[   20.700071] mv643xx_eth smi: probed
[   20.705562] mv643xx_eth_port mv643xx_eth_port.0: eth0: port 0 with MAC address 00:00:00:00:51:81
[   20.715839] i2c /dev entries driver
[   20.720082] md: raid0 personality registered for level 0
[   20.725385] md: raid1 personality registered for level 1
[   20.735451] TCP cubic registered
[   20.738740] NET: Registered protocol family 17
[   20.743433] Distributed Switch Architecture driver version 0.1
[   20.749421] eth0[0]: detected a Marvell 88E6131 switch
[   20.820771] dsa slave smi: probed
[   20.836379] 8021q: 802.1Q VLAN Support v1.8
[   20.841013] drivers/rtc/hctosys.c: unable to open rtc device (rtc0)
[   20.848152] md: Waiting for all devices to be available before autodetect
[   20.854929] md: If you don&#039;t use raid, use raid=noautodetect
[   20.862550] md: Autodetecting RAID arrays.
[   20.866703] md: Scanned 0 and added 0 devices.
[   20.871136] md: autorun ...
[   20.873919] md: ... autorun DONE.
[   20.882650] VFS: Mounted root (squashfs filesystem) readonly on device 31:1.
[   20.890491] Freeing init memory: 132K
- preinit -
Press the [f] key and hit [enter] to enter failsafe mode
- regular preinit -
[   27.727705] JFFS2 notice: (1426) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (1 unchecked, 0 orphan) and 7 of xref (0 dead, 0 orphan) found.
[   28.527770] usbcore: registered new interface driver usbfs
[   28.533434] usbcore: registered new interface driver hub
[   28.541658] usbcore: registered new device driver usb
[   29.120036] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[   29.126743] orion-ehci orion-ehci.0: Marvell Orion EHCI
[   29.132099] orion-ehci orion-ehci.0: new USB bus registered, assigned bus number 1
[   29.165635] orion-ehci orion-ehci.0: irq 17, io mem 0xf1050000
[   29.195570] orion-ehci orion-ehci.0: USB 2.0 started, EHCI 1.00
[   29.202406] hub 1-0:1.0: USB hub found
[   29.206236] hub 1-0:1.0: 1 port detected
[   29.226212] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[   29.246124] uhci_hcd: USB Universal Host Controller Interface driver
[   29.271026] Initializing USB Mass Storage driver...
[   29.276229] usbcore: registered new interface driver usb-storage
[   29.282221] USB Mass Storage support registered.
[   29.525582] usb 1-1: new high-speed USB device number 2 using orion-ehci
[   29.678056] hub 1-1:1.0: USB hub found
[   29.682051] hub 1-1:1.0: 4 ports detected
[   29.966001] usb 1-1.1: new high-speed USB device number 3 using orion-ehci
[   30.079751] scsi0 : usb-storage 1-1.1:1.0
[   30.165983] usb 1-1.2: new high-speed USB device number 4 using orion-ehci
[   30.279690] scsi1 : usb-storage 1-1.2:1.0
[   31.076981] scsi 0:0:0:0: Direct-Access     SanDisk  Cruzer Edge      1.20 PQ: 0 ANSI: 5
[   31.090545] sd 0:0:0:0: [sda] 62530624 512-byte logical blocks: (32.0 GB/29.8 GiB)
[   31.100158] sd 0:0:0:0: [sda] Write Protect is off
[   31.106004] sd 0:0:0:0: [sda] Write cache: disabled, read cache: enabled, doesn&#039;t support DPO or FUA
[   31.121583]  sda: sda1
[   31.129499] sd 0:0:0:0: [sda] Attached SCSI removable disk
[   31.276594] scsi 1:0:0:0: Direct-Access     SanDisk  Cruzer Edge      1.20 PQ: 0 ANSI: 5
[   31.290038] sd 1:0:0:0: [sdb] 15633408 512-byte logical blocks: (8.00 GB/7.45 GiB)
[   31.299798] sd 1:0:0:0: [sdb] Write Protect is off
[   31.305493] sd 1:0:0:0: [sdb] Write cache: disabled, read cache: enabled, doesn&#039;t support DPO or FUA
[   31.321070]  sdb: sdb1
[   31.328863] sd 1:0:0:0: [sdb] Attached SCSI removable disk
switching to jffs2
- init -

Please press Enter to activate this console. [   51.947055] Compat-wireless backport release: compat-wireless-2012-06-14
[   51.953755] Backport based on wireless-testing.git master-2012-06-14
[   51.960157] compat.git: wireless-testing.git
[   51.999235] cfg80211: Calling CRDA to update world regulatory domain
[   52.005759] cfg80211: World regulatory domain updated:
[   52.010892] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[   52.019099] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   52.026868] cfg80211:   (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[   52.034598] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[   52.042528] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   52.050300] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   54.369977] ieee80211 phy0: Atheros AR9160 MAC/BB Rev:1 AR5133 RF Rev:b0 mem=0xc8b60000, irq=36
[   54.382432] cfg80211: Calling CRDA for country: US
[   54.387494] cfg80211: Regulatory domain changed to country: US
[   54.393319] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[   54.401529] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)
[   54.409295] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)
[   54.417063] cfg80211:   (5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   54.424794] cfg80211:   (5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   54.432563] cfg80211:   (5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   54.440481] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)
[   54.472658] device-mapper: ioctl: 4.22.0-ioctl (2011-10-19) initialised: dm-devel@redhat.com
[   55.199271] NTFS driver 2.1.30 [Flags: R/O MODULE].
[   55.385124] PPP generic driver version 2.4.2
[   55.464580] ip_tables: (C) 2000-2006 Netfilter Core Team
[   55.727615] NET: Registered protocol family 24
[   55.801874] nf_conntrack version 0.5.0 (1986 buckets, 7944 max)
[   56.220978] usbcore: registered new interface driver usblp
[   56.273251] usbcore: registered new interface driver ums-alauda
[   56.300076] usbcore: registered new interface driver ums-cypress
[   56.435442] usbcore: registered new interface driver ums-datafab
[   56.463058] usbcore: registered new interface driver ums-freecom
[   56.490946] usbcore: registered new interface driver ums-isd200
[   56.519307] usbcore: registered new interface driver ums-jumpshot
[   56.547214] usbcore: registered new interface driver ums-karma
[   56.576575] usbcore: registered new interface driver ums-sddr09
[   56.604473] usbcore: registered new interface driver ums-sddr55
[   56.632771] usbcore: registered new interface driver ums-usbat
[   56.788862] fuse init (API version 7.18)
[   60.635594] lvm: sending ioctl 1261 to a partition!
[   60.640476] lvm: sending ioctl 1261 to a partition!
[   60.648915] lvm: sending ioctl 1261 to a partition!
[   60.653800] lvm: sending ioctl 1261 to a partition!
[   60.672161] lvm: sending ioctl 1261 to a partition!
[   60.677105] lvm: sending ioctl 1261 to a partition!
[   60.685287] lvm: sending ioctl 1261 to a partition!
[   60.690242] lvm: sending ioctl 1261 to a partition!
[   60.838747] lvm: sending ioctl 1261 to a partition!
[   60.843629] lvm: sending ioctl 1261 to a partition!
[   63.060795] mv643xx_eth_port mv643xx_eth_port.0: eth0: link up, 1000 Mb/s, full duplex, flow control disabled
[   63.106777] device lan1 entered promiscuous mode
[   63.111404] device eth0 entered promiscuous mode
[   63.186659] device lan2 entered promiscuous mode
[   63.236635] device lan3 entered promiscuous mode
[   63.286679] device lan4 entered promiscuous mode
[   63.846293] wan: link up, 1000 Mb/s, full duplex, flow control disabled</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p174645">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						11 Aug 2012, 23:09					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://wiki.openwrt.org/doc/uci/wireless#regenerate.configuration">http://wiki.openwrt.org/doc/uci/wireles … figuration</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p174652">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Lennong</div>
					<div class="post-datetime">
						12 Aug 2012, 07:40					</div>
				</div>
				<div class="post-content content">
					<p>Ahh, I should have read more carefully! Thank you!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>