<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [HowTo] Openwrt cheap Digital Stereo WiFi Internet Radio &amp; MP3 Player</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 7 Apr 2018 and 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 6 of 7</div><nav><ul><li><a href="viewtopic.php%3Fid=49013&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=49013&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=49013&amp;p=5.html">5</a></li><li class="pagination-current"><span>6</span></li><li><a href="viewtopic.php%3Fid=49013&amp;p=7.html">7</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p337576">
				<div class="post-metadata">
					<div class="post-num">Post #126</div>
					<div class="post-author">luis.azpiazu</div>
					<div class="post-datetime">
						8 Sep 2016, 13:02					</div>
				</div>
				<div class="post-content content">
					<p>Thanks! I already wrote you <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> Looking forward to talk</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337624">
				<div class="post-metadata">
					<div class="post-num">Post #127</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						8 Sep 2016, 20:09					</div>
				</div>
				<div class="post-content content">
					<p><span class="bbu">Improve use of memory and increase stability of the Internet Radio by using Zram.</span></p><p>zram (also called zRAM and, initially, compcache) is a Linux kernel feature that provides a form of virtual memory compression. zram increases performance by avoiding paging to disk and using a compressed block device in RAM instead, inside which paging takes place until it is necessary to use the swap space on a hard disk drive. Since using zram is an alternative way to provide swapping on RAM, zram allows Linux to make a better use of RAM when swapping/paging is required, especially on older computers with less RAM installed.<br />zram offers advantages for low-end hardware devices such as embedded devices, such devices usually use flash-based storage, which has limited lifespan due to write amplification, and also use it to provide swap space. The reduction in swap usage as a result of using zram effectively reduces the amount of wear placed on such flash-based storage, resulting in prolonging its usable life. Also, using zram results in a significantly reduced I/O for Linux systems that require swapping.<br />Google uses zram in Android since its version 4.4</p><br /><p>In our case&nbsp; it stops the router from beeing reset by watchdog/low memory and &quot;virtually&quot; increase the total free RAM available <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /><br />Zram uses a little CPU power but in our case we have no problem with CPU, we have shortage of RAM instead, so it&#039;s a perfect solution!<br />-----------------------------------------------</p><p>OpenWRT Barrier Breaker install instructions:</p><p>prerequisites: you need at least 300 Kbytes of free flash space, check it with &quot;<strong>df</strong>&quot; command.</p><p><strong>opkg update<br />opkg install zram-swap</strong></p><p>then reboot.</p><p>After reboot you&#039;ll have a device called /dev/zram0</p><p>check free memory with &quot;free&quot; command, you should get something like this:</p><p>root@(none):/dev# <strong>free</strong><br /><em>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;total&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;used&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;free&nbsp; &nbsp; &nbsp; &nbsp;shared&nbsp; &nbsp; &nbsp; buffers<br />Mem:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;28860&nbsp; &nbsp; &nbsp; &nbsp; 27724&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1136&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1244<br />-/+ buffers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 26480&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2380<br /><span style="color: red">Swap:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0</span></em></p><p>now insert the following lines right at the begginning of the file &quot;/etc/rc.local&quot; to activate a Zram of 10 Megabytes:</p><p><em><span style="color: blue">/bin/echo $((10*1024*1024)) &gt; /sys/block/zram0/disksize<br />/usr/sbin/mkswap /dev/zram0&nbsp; <br />/usr/sbin/swapon /dev/zram0</span></em></p><p>Reboot the router and check again with &quot;free&quot; command:</p><p>root@(none):/dev# <strong>free</strong><br /><em>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;total&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;used&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;free&nbsp; &nbsp; &nbsp; &nbsp;shared&nbsp; &nbsp; &nbsp; buffers<br />Mem:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;28860&nbsp; &nbsp; &nbsp; &nbsp; 27376&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1484&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1248<br />-/+ buffers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 26128&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2732<br /><span style="color: red">Swap:&nbsp; &nbsp; &nbsp; &nbsp; 10236&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 10236</span></em></p><br /><p>That&#039;s all <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><br /><p>Note: if your router has more of 32 Mbytes of RAM, you may increase the Zram size, the best choice is about 30% of total ram.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 8 Sep 2016, 20:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337771">
				<div class="post-metadata">
					<div class="post-num">Post #128</div>
					<div class="post-author">killerjatt</div>
					<div class="post-datetime">
						9 Sep 2016, 23:23					</div>
				</div>
				<div class="post-content content">
					<p>hi i have&nbsp; awus036h 1 watt wifi usb can i connect wifi usb to mr3220&nbsp; ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338019">
				<div class="post-metadata">
					<div class="post-num">Post #129</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						12 Sep 2016, 12:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>killerjatt wrote:</cite><blockquote><p>hi i have&nbsp; awus036h 1 watt wifi usb can i connect wifi usb to mr3220&nbsp; ?</p></blockquote></div><p>I think so, but you need to use an external powered USB Hub since this dongle needs a lot of current.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p339591">
				<div class="post-metadata">
					<div class="post-num">Post #130</div>
					<div class="post-author">giri@nwrk.biz</div>
					<div class="post-datetime">
						29 Sep 2016, 00:21					</div>
				</div>
				<div class="post-content content">
					<p>Hey guys <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />I created a very similar project without hardware keys using the very cheap A5-V11 openwrt router. Here is my portable wireless music system with webradio, dlna/upnp server and dlna/upnp renderer: <a href="http://board.nwrk.biz/viewtopic.php?pid=344#p344">http://board.nwrk.biz/viewtopic.php?pid=344#p344</a></p><p>All in all this project costs about 25€ and the setup is pretty small. The installation should be quite easy because everything is preconfigured in an extroot filesystem. I also included ympd, a lightweight but powerful web based mpd client! (ympd is a standalone binary, php and uhttpd are not needed.)</p><p><a href="http://www70.zippyshare.com/v/PjCGi1Ev/file.html"><span class="postimg"><img src="http://www70.zippyshare.com/scaled/PjCGi1Ev/file.html" alt="http://www70.zippyshare.com/scaled/PjCGi1Ev/file.html" /></span></a><br /><span class="postimg"><img src="https://fredfire1.files.wordpress.com/2015/09/ympd-client-in-webbrowser.png" alt="https://fredfire1.files.wordpress.com/2015/09/ympd-client-in-webbrowser.png" /></span></p>											<p class="post-edited">(Last edited by <strong>giri@nwrk.biz</strong> on 29 Sep 2016, 02:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p339789">
				<div class="post-metadata">
					<div class="post-num">Post #131</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						30 Sep 2016, 14:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>giri@nwrk.biz wrote:</cite><blockquote><p>Hey guys <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />I created a very similar project without hardware keys using the very cheap A5-V11 openwrt router. Here is my portable wireless music system with webradio, dlna/upnp server and dlna/upnp renderer: <a href="http://board.nwrk.biz/viewtopic.php?pid=344#p344">http://board.nwrk.biz/viewtopic.php?pid=344#p344</a></p></blockquote></div><br /><p>Nice job! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347167">
				<div class="post-metadata">
					<div class="post-num">Post #132</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						19 Dec 2016, 23:55					</div>
				</div>
				<div class="post-content content">
					<p>If you want to see in real time (updated every second) the WiFi signal in client mode of your router, this is the shell single line &quot;multi-commands&quot; for you:</p><p><strong>while true; do iw dev wlan0 station dump | grep -i signal: | tr &#039;\012&#039; &#039;\015&#039;; sleep 1; done</strong></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 19 Dec 2016, 23:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347888">
				<div class="post-metadata">
					<div class="post-num">Post #133</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						28 Dec 2016, 14:53					</div>
				</div>
				<div class="post-content content">
					<p><span class="bbu"><strong>Add an external serial LCD display to our Internet Radio </strong></span> <em>(first part)</em></p><br /><p>To display the current MPD channel and the playing song, this is the command:</p><p><strong>while true; do mpc current | tr &#039;\012&#039; &#039;\015&#039;; sleep 1; done</strong><br /><em>(real time output) </em></p><p>or if you want a more exaustive output:</p><p><strong>echo &quot;currentsong&quot; | nc localhost 6600</strong><br /><em>(one shoot output)</em></p><p>or even:</p><p><strong>echo &quot;currentsong&quot; | nc localhost 6600 | grep -e &quot;^Title: &quot; -e &quot;^Name: &quot;</strong></p><p>you can redirect this information to an output device connected to the router&#039;s serial port, by this way:</p><p><strong>while true; do mpc current | tr &#039;\012&#039; &#039;\015&#039;; sleep 1; done <span style="color: red">&gt; /dev//dev/ttyATH0</span></strong></p><p>However, the serial port’s default speed of 115200 baud is too fast for some external serial displays, so we need to change the speed of the serial port from it’s default value of 115200 to 9600 baud.&nbsp; <br />This can be easily done by using the &quot;stty&quot; command.</p><p>First you need to install stty with the following commands:<br /><strong><br />opkg update<br />opkg install coreutils-stt</strong></p><p>then you can change the speed of the serial port by adding the following command to &quot;/etc/rc.local&quot; just before the &quot;exit 0&quot; line:</p><p><strong>/usr/bin/stty -F /dev/ttyATH0 9600 clocal cread cs8 -cstopb -parenb</strong></p><p>to check that the speed has been correctly set at 9600 baud, use the following comand:</p><p><strong>/usr/bin/stty -F /dev/ttyATH0</strong></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 29 Dec 2016, 04:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347889">
				<div class="post-metadata">
					<div class="post-num">Post #134</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						28 Dec 2016, 15:05					</div>
				</div>
				<div class="post-content content">
					<p>where to find the internal connections for the serial port of our Internet Radio (TP-Link TL-WR 710):</p><p>TP_IN = Rx (<strong>NOT</strong>connected)<br />TP_OUT= Tx to be connected to Rx pin of the display<br />GND = USB metal case (big solder pad under USB port)<br />5 Vcc to power out the external LCD display = square solder pad under C209 (see picture)</p><p>Note that the internal serial is 3.3V-logic, so we need a serial display that has the same 3.3 V signal voltage.</p><p><span class="postimg"><img src="http://www.lovisolo.com/asterisk/software/openwrt/tl-wr710n_1.jpg" alt="http://www.lovisolo.com/asterisk/software/openwrt/tl-wr710n_1.jpg" /></span></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 29 Dec 2016, 06:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347929">
				<div class="post-metadata">
					<div class="post-num">Post #135</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						29 Dec 2016, 05:49					</div>
				</div>
				<div class="post-content content">
					<p><span class="postimg"><img src="http://i.ebayimg.com/00/s/NjAwWDYwMA==/z/22UAAOSw44BYUAWl/$_57.JPG?set_id=8800005007" alt="http://i.ebayimg.com/00/s/NjAwWDYwMA==/z/22UAAOSw44BYUAWl/$_57.JPG?set_id=8800005007" /></span></p><p><span class="postimg"><img src="http://i.ebayimg.com/00/s/NjAwWDYwMA==/z/KnAAAOSwJ7RYUAWh/$_57.JPG?set_id=8800005007" alt="http://i.ebayimg.com/00/s/NjAwWDYwMA==/z/KnAAAOSwJ7RYUAWh/$_57.JPG?set_id=8800005007" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347931">
				<div class="post-metadata">
					<div class="post-num">Post #136</div>
					<div class="post-author">remlei</div>
					<div class="post-datetime">
						29 Dec 2016, 08:22					</div>
				</div>
				<div class="post-content content">
					<p>how cheap is this?</p><p>because I can built something similar with this without too much hassle using a old generation raspberry pi, all I did is install apps, plug things, on its builtin 4 port USB hub (in my case all I got plugged on it is USB WiFi).</p><p>after that I sit it at the back of my receiver (amplifier) and connected via HDMI. I can play music on it with my own music library on my NAS via DLNA server/Plex. Or stream a internet radio (shoutcast stream) via DLNA Renderer.</p><p>Total cost for all of this is only just $18, with class 10 4gb SDHC card and WiFi dongle a rpi case and the rpi itself. powering the rpi is not a issue since my receiver got a USB port at the back for firmware updates.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347937">
				<div class="post-metadata">
					<div class="post-num">Post #137</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						29 Dec 2016, 10:55					</div>
				</div>
				<div class="post-content content">
					<p>I did the same thing using Raspberry 2, but the problem with this raspberry board is the terrible audio output&nbsp; quality , very bad if you use analog audio output.<br />Also, Raspberry consumes more electrical power than a router and sometime (not so infrequently) filesystem get corrupted by power outages.</p><p>Anyway, I don&#039;t think the Raspberry solution is cheaper, my openwrt solution costs the following:</p><p>Euro 25 for a new router (with power supply and wifi interface integrated)<br />Euro 5 for the USB audio adapter<br />Euro 5 for the USB Hub (not needed if you control MPD by your Smartphone or by web browser)<br />Euro 7 for the USB keypad&nbsp; (not needed if you control MPD by your Smartphone or by web browser)</p><p>Obviously you can use an old router and old parts that you might have in a drawer and spend nothing <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 29 Dec 2016, 11:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347939">
				<div class="post-metadata">
					<div class="post-num">Post #138</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						29 Dec 2016, 11:26					</div>
				</div>
				<div class="post-content content">
					<p>Also, my goal was to obtain a very reliable WiFi Digital Internet Radio by using the minimum possible resources, in fact everything works well with 32 Mbytes of RAM and 8 Mbytes of flash storage and no more than 5 W of power supply consumption.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 29 Dec 2016, 11:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348073">
				<div class="post-metadata">
					<div class="post-num">Post #139</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						30 Dec 2016, 19:08					</div>
				</div>
				<div class="post-content content">
					<p>You&#039;ll find all files for configuring my Internet Radio (as described above @ page 5) here:</p><p><a href="http://www.lovisolo.com/asterisk/software/openwrt/Radio-Internet/">http://www.lovisolo.com/asterisk/softwa … -Internet/</a></p><p>The above configuration files work for A.A., B.B. and C.C. OpenWRT releases, just overwrite the original ones (if present) and copy all the other files in the same directories of your router.<br />To move the files to your router install vsftpd, start it then connect it with your preferred FTP client (use the router&#039;s root credentials), or else use wget from inside the router.<br />You&#039;ll also find the modified firmware for the TP-Link TL-WR710n router, but you can use any model of OpenWRT compatible router to make this radio.</p><br /><p><strong>my Triggerhappy configuration file is programmed to work with this type of USB keypad:</strong></p><p><span class="postimg"><img src="http://www.lindy.co.uk/images/usb-numeric-keypad-p763-1172_zoom.jpg" alt="http://www.lindy.co.uk/images/usb-numeric-keypad-p763-1172_zoom.jpg" /></span></p><p><span style="color: red">Key Enter = start playing MPD (first station listed in /etc/rc.local)<br />Key Slash (/) = next station&nbsp; (there are 42 stations already listed)<br />Key Asterisk (*) = prev station <br />Key + = Volume up: +2% for each press<br />Key - = Volume down: -2% for each press<br />Key Backspace (&lt;-) = mute: lower the volume at minimum audible level<br />Ket dot/Del (.) = stop playing</span><br /><span style="color: red">Keys 0 to 9 = 10 preset stations (my 10 preferred stations <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> )<br /></span><br /><strong>and also to work with with this infrared remote command </strong> (optional):<br />Note: it is better to fisically remove (or cut it at the top) the red power key because it crashes triggerhappy when pressed <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p><span class="postimg"><img src="http://img.dxcdn.com/productimages/sku_26368_1.jpg" alt="http://img.dxcdn.com/productimages/sku_26368_1.jpg" /></span></p><p><span style="color: red">Press once &quot;NumLook&quot; key to enable 0-9 keys (preset stations),<br />blue keys &quot;page up&quot; and &quot;page down&quot; = mpd &quot;next&quot; and &quot;prev&quot; station, <br />key ||&gt; (above fullscreen key) = mpd &quot;play first station&quot;, <br />key &quot;square&quot; (next to play key) = &quot;stop&quot; playing.</span></p><br /><p><strong>This is the best sounding USB audio adapter I found:</strong></p><p><span class="postimg"><img src="http://i00.i.aliimg.com/img/pb/053/104/874/874104053_565.jpg" alt="http://i00.i.aliimg.com/img/pb/053/104/874/874104053_565.jpg" /></span></p><p>but you can also use one of those two:</p><p><span class="postimg"><img src="http://www.music4company.com/images/Products/0-5ce1deb0-500.jpg" alt="http://www.music4company.com/images/Products/0-5ce1deb0-500.jpg" /></span></p><p><span class="postimg"><img src="http://g04.a.alicdn.com/kf/HTB1IBg1KVXXXXaeXVXXq6xXFXXXy/For-Win-XP-7-8-10-font-b-Android-b-font-Linux-MacOS-External-USB-to.jpg" alt="http://g04.a.alicdn.com/kf/HTB1IBg1KVXXXXaeXVXXq6xXFXXXy/For-Win-XP-7-8-10-font-b-Android-b-font-Linux-MacOS-External-USB-to.jpg" /></span></p><br /><p><strong>This is the web interface you see when you connect to http://router-ip-address/music</strong><br />by this interface you can play/stop and change radio stations, also you can see the station, the artist and song that is currently playing. </p><p><span class="postimg"><img src="https://camo.githubusercontent.com/4bdec174b19a659485dfb3f64207a4ed1b0fa0b8/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f313031353730322f6c696e6b65645f746f2f6d70642d7765622d636c69656e742e6a7067" alt="https://camo.githubusercontent.com/4bdec174b19a659485dfb3f64207a4ed1b0fa0b8/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f313031353730322f6c696e6b65645f746f2f6d70642d7765622d636c69656e742e6a7067" /></span></p><br /><p>This is the vacuum tubes Hi-Fi amplifier I designed and built specifically for this internet radio (the router is located inside), <br />I think it is probably the only one <strong>Brand New Vacuum Tubes Hi-Fi Stereo Internet Radio</strong> in the whole world <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p><span class="postimg"><img src="http://www.lovisolo.com/valvole/ampli5.jpg" alt="http://www.lovisolo.com/valvole/ampli5.jpg" /></span></p><p>in case you want to build it <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> this is the schematic I designed (one channel) [be careful!! HIGH VOLTAGE 500 Vac max]:</p><p><span class="postimg"><img src="http://www.lovisolo.com/valvole/per-cuffia.jpg" alt="http://www.lovisolo.com/valvole/per-cuffia.jpg" /></span></p><p>Happy listening <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 30 Dec 2016, 21:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348248">
				<div class="post-metadata">
					<div class="post-num">Post #140</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						2 Jan 2017, 22:44					</div>
				</div>
				<div class="post-content content">
					<p><span class="bbu"><strong>Router says local and public IP addresses through the speakers of our Internet Radio</strong></span></p><p>Since my router is without any display, I was wondering how I could find the WAN IP address (dhcp) of the router.<br />The answer was to use a text to speech engine and let the router to say the ip address through the speakers. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />By googling I found a very good and light TTS (text to speech) for Openwrt, so I created two scripts to have the router to say the current IP addresses (local and public), at startup or at request by pressing a button.<br />Svox (pico2wave) is an <span class="bbu">offline</span> text-to-speech engine with good voices in many languages, you can simply change language by using the -l parameter, example: &quot;-l de-DE&quot; speaks German, &quot;-l fr-FR&quot; speaks French, &quot;-l es-ES&quot; speaks Spanish, &quot;-l it-IT&quot; speaks Italian, and so on, default langage is English: &quot;-l en-US&quot;.<br />Svox unfortunately is only available on Chaos Calmer, so if you have installed A.A or B.B. OpenWRT releases, you can&#039;t use it without upgrading to C.C.</p><p><span class="bbu">Quick How-To:</span></p><p>You just need to install svox and some other packages (you probably have already installed) on the OpenWRT router.<br /><span class="bbu">Note:</span> <span style="color: red">svox needs a lot of space, so if you don&#039;t have at least 5 megabytes of free space, you need to use an external USB overlay.</span></p><p><strong>opkg update<br />opkg install svox<br />opkg install kmod-sound-core<br />opkg install kmod-usb-audio<br />opkg install alsa-utils</strong></p><p><span class="bbu">Note:</span> to install svox on Barrier Breaker you need to install it manually by grabbing it from the Chaos Calmer 15.01&nbsp; packages, example for AR71XX:</p><div class="codebox"><pre><code>opkg install http://archive.openwrt.org/chaos_calmer/15.05.1/ar71xx/generic/packages/packages/sox_14.4.1-3_ar71xx.ipk </code></pre></div><br /><p>then create the following two scripts:</p><p><strong>vi say-local-ip.sh</strong></p><p><span style="color: blue"><em>#!/bin/sh<br /> IP=$(/sbin/ifconfig <strong>br-lan</strong> | grep &#039;inet addr:&#039; | cut -d: -f2 | awk &#039;{ print $1}&#039;)<br /> cadena=$(echo $IP | sed &#039;s/\.1\./\.one\./g&#039;)<br /> cadena=$(echo $cadena | sed &#039;s/\./point/g&#039;)<br /> pico2wave -l en-US -w /tmp/text.wav &quot;the Local IP address is &quot;$cadena<br /> aplay -f S16_LE -D plughw:0,0 /tmp/text.wav</em></span></p><p><span class="bbu">note:</span> <span style="color: red">eventually change &quot;br-lan&quot; with your LAN interface name, discover it with &quot;ifconfig&quot; command.</span></p><p><strong>vi say-public-ip.sh</strong></p><p><span style="color: blue"><em>#!/bin/sh<br /> IP=$(wget <a href="http://ipecho.net/plain">http://ipecho.net/plain</a> -O - -q ; echo)<br /> cadena=$(echo $IP | sed &#039;s/\.1\./\.one\./g&#039;)<br /> cadena=$(echo $cadena | sed &#039;s/\./point/g&#039;)<br /> pico2wave -l en-US -w /tmp/text.wav &quot;the Public IP address is &quot;$cadena<br /> aplay -f S16_LE -D plughw:0,0 /tmp/text.wav</em></span></p><p>save and give them the right permissions:</p><p><strong>chmod 755 say-local-ip.sh</strong><br /><strong>chmod 755 say-public-ip.sh</strong></p><p>then you can test both scripts:</p><p><strong>/bin/sh /root/say-local-ip.sh<br />/bin/sh /root/say-public-ip.sh</strong></p><p>you shoud hear a female voice saying your local and public IP addresses through the speakers.</p><p>--------------------------------------------------------------------------------</p><p><span class="bbu">Scripts in Italian:</span></p><p>ip-pubblico.sh:</p><p><span style="color: blue"><em>#!/bin/sh<br /> IP=$(wget <a href="http://ipecho.net/plain">http://ipecho.net/plain</a> -O - -q ; echo)<br /> cadena=$(echo $IP | sed &#039;s/\.1\./\.uno\./g&#039;)<br /> cadena=$(echo $cadena | sed &#039;s/\./punto/g&#039;)<br /> pico2wave -l it-IT -w /tmp/text.wav &quot;il tuo indirizzo IP pubblico e&#039; &#039;&quot;$cadena<br /> aplay -f S16_LE -D plughw:0,0 /tmp/text.wav</em></span></p><p>ip-locale.sh:</p><p><span style="color: blue"><em>#!/bin/sh<br /> IP=$(/sbin/ifconfig br-lan | grep &#039;inet addr:&#039; | cut -d: -f2 | awk &#039;{ print $1}&#039;)<br /> cadena=$(echo $IP | sed &#039;s/\.1\./\.uno\./g&#039;)<br /> cadena=$(echo $cadena | sed &#039;s/\./punto/g&#039;)<br /> pico2wave -l it-IT -w /tmp/text.wav &quot;il tuo indirizzo IP privato e&#039; &#039;&quot;$cadena<br /> aplay -f S16_LE -D plughw:0,0 /tmp/text.wav</em></span></p><p>--------------------------------------------------------------------------</p><p>Ref.: <a href="http://openwrt.tuinstituto.es/script-para-reproduccion-por-altavoces-de-nuestra-direccion-ip-publica">http://openwrt.tuinstituto.es/script-pa … ip-publica</a><em> (in Spanish)</em></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 18 Jan 2018, 18:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348346">
				<div class="post-metadata">
					<div class="post-num">Post #141</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						3 Jan 2017, 20:39					</div>
				</div>
				<div class="post-content content">
					<p>Following the previous post I&#039;ve created an hotplug trigger that, when an hardware key is pressed on the router, it says the local and the public IP addresses through the speakers.<br />This is an example how to attach to the WiFi button of the router Huawei EchoLife HG553 (Vodafone Station) the above function, if the button is pressed for less than 1 second, the router says the local (LAN) IP address, if the button is pressed for more than two seconds, the router says the public (WAN) IP address.</p><p>I&#039;ve just edited the &quot;/etc/rc.button/rfkill&quot; file in this way:</p><p><span style="color: blue"><em>#!/bin/sh</em></span></p><p><span style="color: blue"><em>[ &quot;${ACTION}&quot; = &quot;released&quot; ] || exit 0</em></span></p><p><span style="color: blue"><em>. /lib/functions.sh</em></span></p><p><span style="color: blue"><em>logger &quot;$BUTTON pressed for $SEEN seconds&quot;</em></span></p><p><span style="color: blue"><em>if [ &quot;$SEEN&quot; -lt 1 ]<br />then<br />&nbsp; &nbsp; &nbsp; &nbsp; /root/say-local-ip.sh</em></span></p><p><span style="color: blue"><em>elif [ &quot;$SEEN&quot; -gt 2 ]<br />then<br />&nbsp; &nbsp; &nbsp; &nbsp; /root/say-public-ip.sh<br />fi</em></span></p><p><span style="color: blue"><em>return 0</em></span></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 3 Jan 2017, 20:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348746">
				<div class="post-metadata">
					<div class="post-num">Post #142</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						8 Jan 2017, 14:12					</div>
				</div>
				<div class="post-content content">
					<p>How to remove the stupid &quot;vi&quot; as a default editor and use nano instead:</p><p><strong>opkg update<br />opkg install nano<br />mv /bin/vi /bin/vi.stupid<br />ln -s /usr/bin/nano /bin/vi</strong></p><p><img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 8 Jan 2017, 14:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348750">
				<div class="post-metadata">
					<div class="post-num">Post #143</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						8 Jan 2017, 14:32					</div>
				</div>
				<div class="post-content content">
					<p>more radio stations to add to our internet radio:</p><div class="codebox"><pre><code>/usr/bin/mpc add http://144.76.106.52:7000/chillout.mp3
/usr/bin/mpc add http://205.164.62.15:9010/
/usr/bin/mpc add http://streaming.radionomy.com/PassionLoveRadio
/usr/bin/mpc add http://176.31.240.87:8025
/usr/bin/mpc add http://stream.srg-ssr.ch/m/rsj/mp3_128
/usr/bin/mpc add http://stream.srg-ssr.ch/m/rsc_it/mp3_128
/usr/bin/mpc add http://stream.srg-ssr.ch/m/rsp/mp3_128
/usr/bin/mpc add http://streaming.radionomy.com/CristalRelax
/usr/bin/mpc add http://streaming.radionomy.com/Radio-Quelit
/usr/bin/mpc add http://streaming.radionomy.com/R-E-T-R-OF-M
/usr/bin/mpc add http://streaming.radionomy.com/radio-accordeon
/usr/bin/mpc add http://streaming.radionomy.com/100-HIT-ra
/usr/bin/mpc add http://streaming.radionomy.com/colombiaromantica
/usr/bin/mpc add http://streaming.radionomy.com/GOLDEN-SIXTIES-SEVENTIES-EIGHTIES-RADIO
/usr/bin/mpc add http://streaming.radionomy.com/radio-oldies-and-rock--n--roll
/usr/bin/mpc add http://hr-mp3-m-h3.akacast.akamaistream.net/7/785/142133/v1/gnl.akacast.akamaistream.net/hr-mp3-m-h3
/usr/bin/mpc add http://streaming.hotmix-radio.net/hotmixradio-lounge-128.mp3
/usr/bin/mpc add http://streaming.radionomy.com/Ambiance-Reggae
/usr/bin/mpc add http://streaming.radionomy.com/always-80s
/usr/bin/mpc add http://streaming.radionomy.com/Hit-s-My-Music-Pop-Rock
/usr/bin/mpc add http://streaming.radionomy.com/Cafe-Romantico-Radio
/usr/bin/mpc add http://streaming.radionomy.com/1000-HITS-Sweet-Radio
/usr/bin/mpc add http://46.37.20.205:8000/rdsmp3
/usr/bin/mpc add http://89.16.185.174:8003/stream
/usr/bin/mpc add http://89.16.185.174:8000/stream
/usr/bin/mpc add http://89.16.185.174:8004/stream
/usr/bin/mpc add http://streaming.radionomy.com/Fm-Tropical-Shad-972
/usr/bin/mpc add http://streaming.radionomy.com/NashvilleEdge
/usr/bin/mpc add http://streaming.radionomy.com/Abacusfm-Nature
/usr/bin/mpc add http://streaming.radionomy.com/chd--radio-country
/usr/bin/mpc add http://streaming.radionomy.com/1-Radio-Dance
/usr/bin/mpc add http://streaming.radionomy.com/Acoustic-FM
/usr/bin/mpc add http://streaming.radionomy.com/ABC-Love
/usr/bin/mpc add http://streaming.radionomy.com/Radio-Nostalgia
/usr/bin/mpc add http://andromeda.shoutca.st:8634/stream
/usr/bin/mpc add http://streaming.radionomy.com/Tsjechische-Blaasmuziek
/usr/bin/mpc add http://streaming.radionomy.com/DanceRO
/usr/bin/mpc add http://streaming.radionomy.com/BobFamilyandfriends
/usr/bin/mpc add http://streaming.radionomy.com/The-Buffalo
/usr/bin/mpc add http://streaming.radionomy.com/VWClassicRock
/usr/bin/mpc add http://icecast2.rte.ie/ieradio1
/usr/bin/mpc add http://listen.radionomy.com/the-smooth-lounge
#
/usr/bin/mpc add http://bbcmedia.ic.llnwd.net/stream/bbcmedia_radio1_mf_p
/usr/bin/mpc add http://bbcmedia.ic.llnwd.net/stream/bbcmedia_radio1xtra_mf_p
/usr/bin/mpc add http://bbcmedia.ic.llnwd.net/stream/bbcmedia_radio2_mf_p
/usr/bin/mpc add http://bbcmedia.ic.llnwd.net/stream/bbcmedia_radio3_mf_p
/usr/bin/mpc add http://bbcmedia.ic.llnwd.net/stream/bbcmedia_radio4fm_mf_p
/usr/bin/mpc add http://bbcmedia.ic.llnwd.net/stream/bbcmedia_radio4lw_mf_p
/usr/bin/mpc add http://bbcmedia.ic.llnwd.net/stream/bbcmedia_radio4extra_mf_p
/usr/bin/mpc add http://bbcmedia.ic.llnwd.net/stream/bbcmedia_radio5live_mf_p
/usr/bin/mpc add http://bbcmedia.ic.llnwd.net/stream/bbcmedia_6music_mf_p
/usr/bin/mpc add http://bbcmedia.ic.llnwd.net/stream/bbcmedia_asianet_mf_p
/usr/bin/mpc add http://bbcmedia.ic.llnwd.net/stream/bbcmedia_nangaidheal_mf_p
#</code></pre></div>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 8 Jan 2017, 14:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p350161">
				<div class="post-metadata">
					<div class="post-num">Post #144</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						24 Jan 2017, 20:31					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m used to listen to my Internet Radio until late at night and often I fall asleep listening some ambient music.<br />The problem is that the radio needs to be switched off to not to bother my neighbors</p><p>so I created a series of cron jobs to gradually reduce the audio volume during the night and then stop playing music:</p><p><strong>vi /etc/crontabs/root</strong></p><p><span style="color: blue"><em>0 22 * * * /usr/bin/mpc volume 85 #volume 85-100<br />30 22 * * * /usr/bin/mpc volume 83 #volume 83-100<br />0 23 * * * /usr/bin/mpc volume 80 #volume 80-100<br />30 23 * * * /usr/bin/mpc volume 77 #volume 77-100<br />0 0 * * * /usr/bin/mpc volume 75 #volume 75-100<br />0 1 * * * /usr/bin/mpc volume 73 #volume 73-100<br />30 1 * * *&nbsp; /usr/bin/mpc stop # stop playing<br /></em></span></p><p>note: you may change the volume values to adapt them to your radio configuration.</p><p>If you use madplay or if you have a broken MPD version (barrier breaker), you may use the following command:</p><p><strong>/usr/bin/amixer -q set Speaker X%- </strong> </p><p>(instead of using &quot;/usr/bin/mpc volume X&quot;)</p><p>something like this:</p><p><span style="color: blue"><em>0 22 * * * /usr/bin/amixer -q set Speaker 15%-<br />30 22 * * * /usr/bin/amixer -q set Speaker 10%-<br />0 23 * * * /usr/bin/amixer -q set Speaker 10%-<br />30 23 * * * /usr/bin/amixer -q set Speaker 10%-<br />0 0 * * * /usr/bin/amixer -q set Speaker 10%-<br />0 1 * * * /usr/bin/amixer -q set Speaker 10%-</em></span></p><p>the only difference is that in this case we are specifying the amount of volume in percentage to be decrease, instead of specifying the absolute value, as the above example.</p><p>P.S.: remember to re-enable &quot;ntp&quot; if you have disabled it to save some RAM usage.<br />If you don&#039;t have luci and want to set up the correct date/time, getting the values from internet, put the following lines in your /etc/rc.local:</p><p><span style="color: blue"><em># get date-time<br />/bin/echo GMT-1 &gt; /etc/TZ<br />/usr/sbin/ntpd -q -p ntp1.ien.it</em></span></p><p>note: change GMT-1 with your local timezone</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 24 Jan 2017, 23:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p356050">
				<div class="post-metadata">
					<div class="post-num">Post #145</div>
					<div class="post-author">cgchris99</div>
					<div class="post-datetime">
						11 Apr 2017, 20:12					</div>
				</div>
				<div class="post-content content">
					<p>Just getting into this project. I&#039;ve seem posts that say bad USB sound adapters pop &amp; click. Anyone have a recommendation. I already have a router coming.&nbsp; Thanks for any advice.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p356553">
				<div class="post-metadata">
					<div class="post-num">Post #146</div>
					<div class="post-author">sqr</div>
					<div class="post-datetime">
						19 Apr 2017, 00:14					</div>
				</div>
				<div class="post-content content">
					<p>My TL-WDR4300 has 3 buttons - WPS, WiFi on/off, Power button.<br />I am not really familiar with all this electronic stuff but I have a feeling that WiFi and Power are not those buttons which could be programmed.<br />Have you had any similar experience with built-in buttons?</p><p>I need to clarify this before kill-reincarnate activities.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p356612">
				<div class="post-metadata">
					<div class="post-num">Post #147</div>
					<div class="post-author">cgchris99</div>
					<div class="post-datetime">
						19 Apr 2017, 20:25					</div>
				</div>
				<div class="post-content content">
					<p>Which version of mpd are your running.&nbsp; I built my off the info on mightyohm and can&#039;t get any stream that uses AAC to play audio since it runs mpd ver 0.13. Other streams seem to work.<br />My Asus WL-520gu seems like it might be too limited in memory to upgrade the o/s to a later version with a newer mpd version.</p><p>thanks for any advice</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p356681">
				<div class="post-metadata">
					<div class="post-num">Post #148</div>
					<div class="post-author">cgchris99</div>
					<div class="post-datetime">
						20 Apr 2017, 17:35					</div>
				</div>
				<div class="post-content content">
					<p>Just ordered a TP-Link TL-WDR3600 to replace the ASUS WL-520GU. Hopefully I can get this one working with a current version MPD that can handle decoding AAC. The asus had limited ram so I couldn&#039;t update it. At least not that I know of.</p><p>Did I also see someone mention running a web page on the router that allows you to change the channel on the MPD?<br />If anyone has a link for this, let me know.</p>											<p class="post-edited">(Last edited by <strong>cgchris99</strong> on 20 Apr 2017, 17:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p356687">
				<div class="post-metadata">
					<div class="post-num">Post #149</div>
					<div class="post-author">cgchris99</div>
					<div class="post-datetime">
						20 Apr 2017, 20:14					</div>
				</div>
				<div class="post-content content">
					<p>pilovis, did you think the Raspberry Pi is a better option now?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p356967">
				<div class="post-metadata">
					<div class="post-num">Post #150</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						24 Apr 2017, 16:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sqr wrote:</cite><blockquote><p>My TL-WDR4300 has 3 buttons - WPS, WiFi on/off, Power button.<br />I am not really familiar with all this electronic stuff but I have a feeling that WiFi and Power are not those buttons which could be programmed.<br />Have you had any similar experience with built-in buttons?</p><p>I need to clarify this before kill-reincarnate activities.</p></blockquote></div><p>For wifi button edit &quot;/etc/rc.button/rfkill&quot;<br />for power button edit &quot;/etc/rc.button/power&quot;</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 6 of 7</div><nav><ul><li><a href="viewtopic.php%3Fid=49013&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=49013&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=49013&amp;p=5.html">5</a></li><li class="pagination-current"><span>6</span></li><li><a href="viewtopic.php%3Fid=49013&amp;p=7.html">7</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>