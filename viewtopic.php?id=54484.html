<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Cisco VEN401 - supported and working, OpenWrt Barrier Breaker 14.07</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p257011">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">sturia</div>
					<div class="post-datetime">
						9 Dec 2014, 01:06					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,<br /><a href="https://wikidevi.com/wiki/Cisco_VEN401">Cisco VEN401</a> is a <span class="bbu">5GHz-only</span> AP based on Broadcom BRCM4717. The chipset itself supports also 2.4GHz band but it&#039;s somehow disabled at chip level on this AP. The device features 1x100M port as wired uplink and works perfectly with OpenWrt Barrier Breaker 14.07 <img src="https://forum.openwrt.org/img/smilies/cool.png" width="15" height="15" alt="cool" />.<br />The most straightforward way to use this device is to configure it as dumb AP, ie. a plain L2 bridge between the wired and the wireless domain. Nevertheless once Openwrt is onboard you can basically play any tricks with it (ex. you can configure nat between wireless and wired, dhcp, firewalling, etc.)</p><p>Quick installation:<br />Download this image, a recompiled Barrier Breaker 14.07 with few customizations to make it work out of the box on this AP <a href="http://tastiere.altervista.org/openwrt-brcm47xx-mips74k-squashfs.trx">http://tastiere.altervista.org/openwrt- â€¦ uashfs.trx</a> and flash it through http://&lt;VEN401_IP_ADDRESS&gt;/firmware.asp.<br />The image contains the proper settings in order for the AP to:<br /></p><ul><li><p>start dhcp client on wired interface to obtain the AP management IP address (yes, you haveto connect it to a dhcp-enabled network)</p></li><li><p>load the wl driver (I didn&#039;t succeed in making b43 work on this device)</p></li><li><p>bridge wired and wireless interface</p></li><li><p>broadcast an OpenWrt SSID</p></li></ul><p>here are the customized configuration settings of this image:<br /></p><div class="codebox"><pre><code>/etc/config/network

config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config interface &#039;lan&#039;
        option type &#039;bridge&#039;
        option proto &#039;dhcp&#039;
        option delegate &#039;0&#039;
        option stp &#039;1&#039;
        option _orig_ifname &#039;eth0 wl0 wl0&#039;
        option _orig_bridge &#039;true&#039;
        option ifname &#039;eth0&#039;</code></pre></div><div class="codebox"><pre><code>/etc/config/wireless

config wifi-device &#039;wl0&#039;
        option type &#039;broadcom&#039;
        option txantenna &#039;3&#039;
        option rxantenna &#039;3&#039;
        option txpower &#039;24&#039;
        option hwmode &#039;11bg&#039;
        option channel &#039;auto&#039;

config wifi-iface
        option device &#039;wl0&#039;
        option encryption &#039;none&#039;
        option mode &#039;ap&#039;
        option ssid &#039;OpenWrt&#039;
        option network &#039;lan&#039;</code></pre></div><p>Once flashing and boot is completed, check on your dhcp server which address has the VEN401 acquired and point to it - telnet/ssh or LuCI.</p><p>hope this is useful for someone,</p><p>cheers<br />g.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257393">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">andrewfawcett</div>
					<div class="post-datetime">
						11 Dec 2014, 20:30					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for your work! I have one of these boxes and it&#039;s been fairly worthless. I looked into flashing it a couple years ago and nothing, but it nice having OpenWrt on it. And it was nice having it work right after the flash.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257559">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">rrdrash</div>
					<div class="post-datetime">
						13 Dec 2014, 06:49					</div>
				</div>
				<div class="post-content content">
					<p>Didn&#039;t work for me. Flashed per the instructions and it is bricked. Glad I din&#039;t pay for it, though I would have liked to use it as an additional AP. Anyone know how to fix a bricked VEN401?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257593">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">sturia</div>
					<div class="post-datetime">
						13 Dec 2014, 16:03					</div>
				</div>
				<div class="post-content content">
					<p>when you say bricked I guess:<br />- you don&#039;t see any new leases in your wired dhcp server once the AP boots <br />- you don&#039;t see any OpenWrt SSID on your wifi clients.</p><p>That is strange.. I tried the above procedures on 3 different ap&#039;s with different original FW and it worked straight away.<br />Your device is not lost. Before getting to a working config i bricked it several times <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> and managed to revive it every time. <br />Serial port is not mandatory to perform this task, but really helps. Are you familiar with that?</p><p>cheers<br />g.</p>											<p class="post-edited">(Last edited by <strong>sturia</strong> on 13 Dec 2014, 16:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266358">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">kc8elq</div>
					<div class="post-datetime">
						21 Feb 2015, 05:29					</div>
				</div>
				<div class="post-content content">
					<p>I tried the &quot;flash&quot; and when it was done, the power light just stays red, but the wired ethernet connection shows a link and activity and the serial connection does not work (used 2 different level converters. Any one have an idea.</p><p>Thanks,</p><p>Paul</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266433">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">ghoffman</div>
					<div class="post-datetime">
						21 Feb 2015, 22:45					</div>
				</div>
				<div class="post-content content">
					<p>i flashed the openwrt image using the firmware upgrade page, and using the flash command on a serial console after interrupting the boot process.</p><p>in both circumstances: the image flashes correctly, and then boots.</p><p>the device apparently is looking for an ip address from dhcp. </p><p>if you reboot, the device picks up its default address of 192.168.1.1 and has ttl=100 response to ping, but never starts the openwrt image.</p><p>on the serial console, the image decompresses and loads, but the cfe won;t start it, with this error:</p><p>Loading: raw_fileop_uninit: warning: refcnt not zero</p><p>this post might give some relevant info:<br /><a href="https://lists.openwrt.org/pipermail/openwrt-devel/2012-June/015846.html">https://lists.openwrt.org/pipermail/ope â€¦ 15846.html</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266461">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">kc8elq</div>
					<div class="post-datetime">
						22 Feb 2015, 02:36					</div>
				</div>
				<div class="post-content content">
					<p>I got it back to the stock firmware and then tried again (had two bad 232 level converters). It has a red power light and the network light acts like it has a connection but does not get a ip from the router (checked the lease table). This is what i get on the serial console when it reboots and starts to load.</p><p>Decompressing...done</p><br /><p>CFE version 5.11.128.6 based on BBP 1.0.37 for BCM947XX (32bit,SP,LE)<br />Build Date: Wed Sep&nbsp; 7 00:26:21 CST 2011 (root@FC8_Dumas3)<br />Copyright (C) 2000-2008 Broadcom Corporation.</p><p>Init Arena<br />Init Devs.<br />Boot partition size = 131072(0x20000)<br />Found a 8MB ST compatible serial flash<br />et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 5.11.128.6<br />CPU type 0x19740: 354MHz<br />Tot mem: 65536 KBytes</p><p>CFE mem:&nbsp; &nbsp; 0x80700000 - 0x807A2F70 (667504)<br />Data:&nbsp; &nbsp; &nbsp; &nbsp;0x807356F0 - 0x807384C0 (11728)<br />BSS:&nbsp; &nbsp; &nbsp; &nbsp; 0x807384C0 - 0x8073CF70 (19120)<br />Heap:&nbsp; &nbsp; &nbsp; &nbsp;0x8073CF70 - 0x807A0F70 (409600)<br />Stack:&nbsp; &nbsp; &nbsp; 0x807A0F70 - 0x807A2F70 (8192)<br />Text:&nbsp; &nbsp; &nbsp; &nbsp;0x80700000 - 0x807356E8 (218856)</p><p>Device eth0:&nbsp; hwaddr BC-C8-10-BF-A3-5B, ipaddr 192.168.2.35, mask 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; gateway not set, nameserver not set<br />Open the flash0.os to check CRC...Loader:raw Filesys:tftp Dev:eth0 File:: Options:(null)<br />Loading: Failed.<br />Could not load :: Timeout occured<br />Open the flash0.os2 to check CRC...Got the Linux image 1</p><p>Loader:raw Filesys:raw Dev:flash0.os2 File: Options:(null)<br />Loading: .. 3712 bytes read<br />Entry at 0x80001000<br />Closing network.<br />Starting program at 0x80001000</p><p>and this is where it stops and just sits there. i let it sit for 30 min and still nothing. i just wonder if i got a bad down load.</p><p>73&#039;s</p><p>Paul</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266463">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">kc8elq</div>
					<div class="post-datetime">
						22 Feb 2015, 02:48					</div>
				</div>
				<div class="post-content content">
					<p>I have not tried to do the upgrade by the serial console because I was not able to figure out what &quot;flashdevice&quot; to use. Is it flash0 or flash1? when you watch the console after you do the update from the web page, it shows Linux 2 so I am not sure what partition to use. I just do not flash routers or AP of this type that often (last time was about 2 years ago).</p><p>Is there a wiki on how to do a serial upgrade?</p><p>73&#039;s Paul</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266474">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						22 Feb 2015, 04:37					</div>
				</div>
				<div class="post-content content">
					<p>So has anyone besides OP got OpenWRT working on Cisco VEN401?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266481">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">aslezak</div>
					<div class="post-datetime">
						22 Feb 2015, 06:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>stangri wrote:</cite><blockquote><p>So has anyone besides OP got OpenWRT working on Cisco VEN401?</p></blockquote></div><p>I tried this today &amp; it bricked my VEN401 as well. <br />I have the date code 10/12 HW VERSION V04 model of the VEN401-AT. <br />I get the never-ending flashing red power light.&nbsp; I don&#039;t see any IP / lease in the 192.168.1.254 router DHCP table.</p><p>How can I flash it back to the previous stock firmware?&nbsp; At least that was working.</p>											<p class="post-edited">(Last edited by <strong>aslezak</strong> on 23 Feb 2015, 04:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266506">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">ghoffman</div>
					<div class="post-datetime">
						22 Feb 2015, 14:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kc8elq wrote:</cite><blockquote><p>I have not tried to do the upgrade by the serial console because I was not able to figure out what &quot;flashdevice&quot; to use. Is it flash0 or flash1? when you watch the console after you do the update from the web page, it shows Linux 2 so I am not sure what partition to use. I just do not flash routers or AP of this type that often (last time was about 2 years ago).</p><p>Is there a wiki on how to do a serial upgrade?</p><p>73&#039;s Paul</p></blockquote></div><p>flash0 is the firmware. flash1 is sometimes the cfe. dont use that one!!<br />see <a href="http://wiki.openwrt.org/doc/techref/bootloader/cfe">http://wiki.openwrt.org/doc/techref/bootloader/cfe</a></p><p>you should be able to ping your router with an ethernet cable connected to your computer with a static ip.<br />i got ping response ttl=100 at 192.168.1.1</p><p>the serial flash command is:</p><p>flash -noheader : flash0.trx</p><p>then from your computer command shell, you can tftp the firmware:<br />(i renamed it openwrt.bin to save character typing)<br />tftp -i 192.168.1.1 put openwrt.bin</p><p>wath the serial console. if the router does not restart after flashing, issue a &#039;go&#039; command</p><p>this gets openwrt going on my device, but it does not restart at reboot because of the problem that i described above.</p>											<p class="post-edited">(Last edited by <strong>ghoffman</strong> on 22 Feb 2015, 15:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266532">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">aslezak</div>
					<div class="post-datetime">
						22 Feb 2015, 18:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>aslezak wrote:</cite><blockquote><p>Correction the power light just flashes red forever.&nbsp; I tried holding down the reset button for 30 seconds to 1 minute+, keeping it held while unplugged for 10 seconds, plugging back in then keeping it depressed another 10 seconds, never stops flashing after a few seconds into boot.</p><p>Any advice on how to revert to previous firmware, or get the router to respond on 192.168.1.1 ?&nbsp; I have tried static arp mappings but no luck.</p></blockquote></div><p>Status update:&nbsp; I thought to use a crossover cable instead of a direct Ethernet cable from the bricked VEN401 to my laptop.&nbsp; Well I don&#039;t have a crossover cable so I connected both to the same Ethernet switch, configured a static IP on the laptop (192.168.1.10 .. one that was unused on the subnet), &amp; did a static arp mapping to the MAC of the VEN401 (from a cmd.exe window: arp -s 192.168.1.9 MAC).&nbsp; The MAC is actually 1 less than the one listed on the bottom of the device as the one listed is for the wireless connection (mine ended in -E2 so I used -E1 for the arp mapping).&nbsp; In addition to the holding down the reset button for &gt;30 seconds, which may have enabled the emergency flash webpage, I could now connect to the VEN401 both via ping &amp; the emergency flash webpage.&nbsp; From there I clicked &quot;reset to NVRAM defaults&quot; &amp; then &quot;reboot&quot;.&nbsp; After the device came back up, I reloaded the OpenWrt firmware from this same webpage &amp; after a reboot, the power light on the VEN401 is solid red!&nbsp; </p><p>**EDIT: THIS DID NOT SURVIVE A REBOOT &amp; THE OPENWRT SSID WAS NEVER VISIBLE**</p>											<p class="post-edited">(Last edited by <strong>aslezak</strong> on 22 Feb 2015, 22:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266538">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">ghoffman</div>
					<div class="post-datetime">
						22 Feb 2015, 20:00					</div>
				</div>
				<div class="post-content content">
					<p>@alsezak: let me know if your openwrt config survives a power cycle!<br />thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266546">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">aslezak</div>
					<div class="post-datetime">
						22 Feb 2015, 22:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ghoffman wrote:</cite><blockquote><p>@alsezak: let me know if your openwrt config survives a power cycle!<br />thanks</p></blockquote></div><p>It did NOT survive a reboot - the router went back to the infinitely flashing red power button.&nbsp; Also, before the reboot I did not see any OpenWRT SSID.&nbsp; Therefore I have determined that using this modified Barrier Breaker 14.07 firmware does not work.&nbsp; I also tried the stock Barrier Breaker trx file &amp; that had the same result.<br />I flashed back to the original firmware which mrinaldi was nice enough to upload to DropBox (see post #7 at the following discussion link: <a href="https://forum.openwrt.org/viewtopic.php?id=53423)">https://forum.openwrt.org/viewtopic.php?id=53423)</a></p><p><span style="color: blue"><strong><br />For those who want to use the router with the stock firmware, the default SSID will not allow you to authenticate with WPA/WPA2.</strong>&nbsp; It will work with no security (full speed) &amp; WEP (54mbps), but not WPA nor WPA2 - it must have some way to detect an AT&amp;T video receiver.&nbsp; The key is to go into the Wireless / Multiple SSID setting.&nbsp; Enable a secondary SSID with WPA2 security, set whatever key you like.&nbsp; Once you have joined this new SSID with your laptop/desktop, you can go back to the same Wireless setting page &amp; disable the original SSID.&nbsp; I have tried to do the same with the Wi-Fi Protected Setup setting, but even after disabling the original SSID &amp; enabling WPS only on the secondary SSID, it still isn&#039;t working.&nbsp; Not a big deal but worth mentioning.<br /></span></p><p>UPDATE: /bin/wps_monitor has some logic to check for allowed equipment.&nbsp; After trying the WPS button with a non-AT&amp;T device, &quot;Wrong Client Device !!!&quot; is printed on the console.&nbsp; I tried doing&nbsp; strace from the console but could only see configuration details being read from nvram.&nbsp; There is mention of the WFADevice.xml but again this is not on the filesystem.&nbsp; I tried using a wps_monitor from one of the ASUS open source projects but did not succeed it getting that to stay running.</p>											<p class="post-edited">(Last edited by <strong>aslezak</strong> on 23 Feb 2015, 05:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266566">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">kc8elq</div>
					<div class="post-datetime">
						23 Feb 2015, 01:20					</div>
				</div>
				<div class="post-content content">
					<p>I got it to take openwrt, but it will not survive a power cycle or reboot. On the bottom I have HW Version V03.1 and Date Code 05/12. With the stock firmware (1.24.32.63DS-AT-NODFS) I can get into the &quot;Hidden&quot; pages and the firmware.asp page shows this:</p><p>Boot Loader Version: CFE 5.11.128.6<br />OS Version: Linux 5.24.32.13<br />WL Driver Version: DUCATI 5.11.128.6</p><p>This is the output I get from the serial console when I power cycle the unit:</p><p>Decompressing...done</p><br /><p>CFE version 5.11.128.6 based on BBP 1.0.37 for BCM947XX (32bit,SP,LE)<br />Build Date: Wed Sep&nbsp; 7 00:26:21 CST 2011 (root@FC8_Dumas3)<br />Copyright (C) 2000-2008 Broadcom Corporation.</p><p>Init Arena<br />Init Devs.<br />Boot partition size = 131072(0x20000)<br />Found a 8MB ST compatible serial flash<br />et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 5.11.128.6<br />CPU type 0x19740: 354MHz<br />Tot mem: 65536 KBytes</p><p>CFE mem:&nbsp; &nbsp; 0x80700000 - 0x807A2F70 (667504)<br />Data:&nbsp; &nbsp; &nbsp; &nbsp;0x807356F0 - 0x807384C0 (11728)<br />BSS:&nbsp; &nbsp; &nbsp; &nbsp; 0x807384C0 - 0x8073CF70 (19120)<br />Heap:&nbsp; &nbsp; &nbsp; &nbsp;0x8073CF70 - 0x807A0F70 (409600)<br />Stack:&nbsp; &nbsp; &nbsp; 0x807A0F70 - 0x807A2F70 (8192)<br />Text:&nbsp; &nbsp; &nbsp; &nbsp;0x80700000 - 0x807356E8 (218856)</p><p>Device eth0:&nbsp; hwaddr BC-C8-10-BF-A3-5B, ipaddr 192.168.2.35, mask 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; gateway not set, nameserver not set<br />Open the flash0.os to check CRC...Loader:raw Filesys:tftp Dev:eth0 File:: Optio)<br />Loading: Failed.<br />Could not load :: Timeout occured<br />Open the flash0.os to check CRC...Got the Linux image 0<br />Loader:raw Filesys:raw Dev:flash0.os File: Options:(null)<br />Loading: raw_fileop_uninit: warning: refcnt not zero<br />Entry at 0x00000000<br />CFE&gt;</p><p>I even used the nvram commit command before I power cycled the unit.</p><br /><p>I also found out that the flash location names on my unit are called flash0.os and flash0.os2</p><p>73&#039;s</p><p>Paul</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p270458">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">aslezak</div>
					<div class="post-datetime">
						30 Mar 2015, 05:59					</div>
				</div>
				<div class="post-content content">
					<p>OpenWRT isn&#039;t working, I wish they would update the subject line.</p><p>So I have access point mode working with the default firmware.<br /><strong><span style="color: blue">Client (station) mode is now working as well! </span></strong></p><p>wl ap 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#set device to Station mode<br />wl wet 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#enable wireless Ethernet mode&nbsp; (bridge Ethernet w/wireless)<br />wl set_pmk &quot;mywpa2passphrase&quot;<br />wl sup_wpa 1&nbsp; &nbsp;#enable built in WPA supplicant<br />wl wsec 4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#set to AES mode</p><p>wl scan<br />#give it a few seconds to gather the site survey results<br />wl scanresults</p><p>wl join &quot;Existing_5GHzAccessPoint&quot; amode wpa2psk<br />wl status&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#will show authenticated to existing AP</p><p>You should now be able to ping your gateway (192.168.1.254 if UVerse) &amp; Internet sites, both from the device &amp; from an Ethernet cable from your laptop into the VEN401!</p>											<p class="post-edited">(Last edited by <strong>aslezak</strong> on 4 Apr 2015, 05:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271451">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">aslezak</div>
					<div class="post-datetime">
						6 Apr 2015, 04:52					</div>
				</div>
				<div class="post-content content">
					<p>So I played around &amp; could not get the above procedure to automatically start the wireless client on reboot.&nbsp; I tried almost everything to no avail.&nbsp; The init scripts on this device are inside the rc binary.&nbsp; Much of the nvram configuration is done via the httpd binary, including all the cgi scripts.&nbsp; There is no real way to modify the startup or any of the scripts on this device, so unless you can track down the exact nvram settings that the rc/wl are looking for, you will not succeed in getting the client to auto connect on reboot.</p><p><strong><span style="color: blue">A better way to use the VEN401 as a wireless client is to use the WPS button on your access point.</span></strong>&nbsp; I&#039;ve found that if you make the connection this way, the setup will be saved &amp; the VEN401 will auto-reconnect when it is rebooted.</p><p>Your VEN401 will get an IP address from DHCP (assuming it&#039;s plugged into your existing network via Ethernet)<br />Find the VEN401 IP address from your UVerse gateway IP Allocation page.. <br />on my NVG589 it&#039;s <a href="http://192.168.1.254/cgi-bin/ipalloc.ha">http://192.168.1.254/cgi-bin/ipalloc.ha</a></p><p>In the below URLs, replace 192.168.1.xxx with your VEN401 IP address</p><p><a href="http://192.168.1.xxx/Factorydefaults.asp">http://192.168.1.xxx/Factorydefaults.asp</a><br />Restore Default Settings</p><p><a href="http://192.168.1.xxx/radio.asp">http://192.168.1.xxx/radio.asp</a><br />Change from<br />Mode: Access Point<br />to<br />Mode: Wireless Ethernet<br />Apply</p><p>reboot the VEN401 if the VEN401 does not reboot automatically</p><p><a href="http://192.168.1.xxx/Wireless_WPS_Client.asp">http://192.168.1.xxx/Wireless_WPS_Client.asp</a><br />Select your existing AP in the &quot;WPS AP List&quot;<br />&nbsp; &nbsp; <br />Press the WPS button on your existing access point .. in my case it is a VEN501 (5GHz)<br />On the webpage click the button under option 1 <br />&quot;1. If your AP device has a Wi-Fi Protected Setup button, press that button and then click the button on the <br />right &lt;button&gt;&quot;</p><p>You will get a status update page .. configuration changes saved.&nbsp; Click ok.<br />It will return to the WPS setup page.<br />The &quot;WPS Current Status:&quot; should change to Enrolling, then eventually, Succeeded.</p><p>Once this is done you should have Internet access through your VEN401!<br />You will have to unplug the Ethenet to the VEN401 &amp; plug the VEN401 into whatever device needs internet access, e.g. your Dish network / Sling receiver.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274384">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">sturia</div>
					<div class="post-datetime">
						29 Apr 2015, 00:46					</div>
				</div>
				<div class="post-content content">
					<p>Apparently the behavior of this unit is not particularly consistent.. but on my side I still confirm it works. I don&#039;t know how many versions of VEN401 are out there, but I have 3 of them and they all work with the image linked in the first post.<br />The board of my VEN401s is this:<br /><a href="http://postimage.org/"><span class="postimg"><img src="http://s23.postimg.org/suaoha5dn/VEN401.jpg" alt="http://s23.postimg.org/suaoha5dn/VEN401.jpg" /></span></a></p><p>I recently recompiled a new master image for this unit working as pure AP, taking away some stuff I didn&#039;t need (like v6 stuff, ppp/atm) and adding some other features like lldp. Opkg is still available to custmize it further.<br />Here is the link:<br /><a href="http://tastiere.altervista.org/openwrt-brcm47xx-mips74k-squashfs_new.trx">Openwrt Barrier Breaker for VEN401</a></p><p>here is the list of included and removed (-) packages:<br /></p><div class="codebox"><pre><code>cmdftp opkg luci iwinfo bmon nano ddns-scripts wireless-tools ethtool netcat lldpd iperf ssmtp -odhcp6c -odhcpd -ppp -ppp-mod-pppoe -ppp -ppp-mod-pppoa -ppp-mod-pppoe -kmod-pppoa -atm-tools -linux-atm -br2684ctl -ip6tables</code></pre></div><p>here is the default interface configuration:<br /></p><div class="codebox"><pre><code>config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config interface &#039;lan&#039;
        option type &#039;bridge&#039;
        option proto &#039;dhcp&#039;
        option delegate &#039;0&#039;
        option stp &#039;1&#039;
        option ifname &#039;eth0&#039;</code></pre></div><p>and here is the boot sequence and ifconfig output:</p><div class="codebox"><pre><code>Decompressing...done
Decompressing...done


CFE version 5.10.128.13 based on BBP 1.0.37 for BCM947XX (32bit,SP,LE)
Build Date: Fri Jan 22 01:01:45 PST 2010 (hwnbuild@lc-sj1-2224)
Copyright (C) 2000-2008 Broadcom Corporation.

Init Arena
Init Devs.
Boot partition size = 131072(0x20000)
Found a 8MB ST compatible serial flash
et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 5.10.128.13
CPU type 0x19740: 354MHz
Tot mem: 65536 KBytes

CFE mem:    0x80700000 - 0x8079D720 (644896)
Data:       0x807339E0 - 0x807367A0 (11712)
BSS:        0x807367A0 - 0x80737720 (3968)
Heap:       0x80737720 - 0x8079B720 (409600)
Stack:      0x8079B720 - 0x8079D720 (8192)
Text:       0x80700000 - 0x807339D8 (211416)

Device eth0:  hwaddr 00-25-2E-xx-xx-xx, ipaddr 192.168.1.10, mask 255.255.255.0
        gateway not set, nameserver not set
Loader:raw Filesys:tftp Dev:eth0 File:: Options:(null)
Loading: Failed.
Could not load :: Timeout occured
Loader:raw Filesys:raw Dev:flash0.os File: Options:(null)
Loading: .. 3712 bytes read
Entry at 0x80001000
Closing network.
Starting program at 0x80001000
[    0.000000] Linux version 3.10.49 (bb@builder1) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r42625) ) #3 Wed Oct 1 14:56:26 CEST 2014
[    0.000000] CPU revision is: 00019740 (MIPS 74Kc)
[    0.000000] bcm47xx: using bcma bus
[    0.000000] bcma: bus0: Found chip with id 0x4716, rev 0x01 and package 0x09
[    0.000000] bcma: bus0: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x1F, class 0x0)
[    0.000000] bcma: bus0: Core 3 found: MIPS 74K (manuf 0x4A7, id 0x82C, rev 0x01, class 0x0)
[    0.000000] bcma: bus0: Found M25P64 serial flash (size: 8192KiB, blocksize: 0x10000, blocks: 128)
[    0.000000] bcma: bus0: Early bus registered
[    0.000000] MIPS: machine is Unknown Board
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x03ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x03ffffff]
[    0.000000] Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line:  noinitrd console=ttyS0,115200
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 61532k/65536k available (2373k kernel code, 4004k reserved, 588k data, 168k init, 0k highmem)
[    0.000000] NR_IRQS:128
[    0.000000] Setting up vectored interrupts
[    0.070000] Calibrating delay loop... 176.53 BogoMIPS (lpj=882688)
[    0.070000] pid_max: default: 32768 minimum: 301
[    0.070000] Mount-cache hash table entries: 512
[    0.070000] NET: Registered protocol family 16
[    0.100000] bio: create slab &lt;bio-0&gt; at 0
[    0.100000] Switching to clocksource MIPS
[    0.110000] NET: Registered protocol family 2
[    0.110000] TCP established hash table entries: 512 (order: 0, 4096 bytes)
[    0.110000] TCP bind hash table entries: 512 (order: -1, 2048 bytes)
[    0.110000] TCP: Hash tables configured (established 512 bind 512)
[    0.110000] TCP: reno registered
[    0.110000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.110000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.110000] NET: Registered protocol family 1
[    0.110000] bcma: bus0: Core 1 found: IEEE 802.11 (manuf 0x4BF, id 0x812, rev 0x11, class 0x0)
[    0.110000] bcma: bus0: Core 2 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x00, class 0x0)
[    0.110000] bcma: bus0: Core 4 found: USB 2.0 Host (manuf 0x4BF, id 0x819, rev 0x04, class 0x0)
[    0.110000] bcma: bus0: Core 5 found: PCIe (manuf 0x4BF, id 0x820, rev 0x0E, class 0x0)
[    0.110000] bcma: bus0: Core 6 found: DDR1/DDR2 Memory Controller (manuf 0x4BF, id 0x82E, rev 0x01, class 0x0)
[    0.110000] bcma: bus0: Core 7 found: Internal Memory (manuf 0x4BF, id 0x80E, rev 0x07, class 0x0)
[    0.110000] bcma: bus0: Core 8 found: I2S (manuf 0x4BF, id 0x834, rev 0x00, class 0x0)
[    0.130000] can not parse nvram name sb/1/ag0(null) with value 4.5 got -22
[    0.130000] can not parse nvram name sb/1/ag1(null) with value 4.5 got -22
[    0.130000] alpha2 is too long ALL
[    0.180000] can not parse nvram name sb/1/ag2(null) with value 4.5 got -22
[    0.380000] bcma: bus0: PCIEcore in host mode found
[    0.380000] bcma: bus0: This PCIE core is disabled and not working
[    0.380000] bcma: bus0: Bus registered
[    0.390000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.390000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.390000] msgmni has been set to 120
[    0.390000] io scheduler noop registered
[    0.390000] io scheduler deadline registered (default)
[    0.390000] Serial: 8250/16550 driver, 16 ports, IRQ sharing enabled
[    0.420000] serial8250.0: ttyS0 at MMIO 0xb8000300 (irq = 2) is a U6_16550A
[    0.820000] console [ttyS0] enabled
[    0.970000] 6 bcm47xxpart partitions found on MTD device bcm47xxsflash
[    0.970000] Creating 6 MTD partitions on &quot;bcm47xxsflash&quot;:
[    0.980000] 0x000000000000-0x000000020000 : &quot;boot&quot;
[    0.990000] 0x000000020000-0x0000007f0000 : &quot;firmware&quot;
[    1.000000] 0x00000002001c-0x00000002090c : &quot;loader&quot;
[    1.010000] 0x00000002090c-0x00000012d000 : &quot;linux&quot;
[    1.010000] mtd: partition &quot;linux&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    1.030000] 0x00000012d000-0x0000007f0000 : &quot;rootfs&quot;
[    1.030000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    1.050000] mtd: device 4 (rootfs) set to be root filesystem
[    1.050000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=0x400000, len=0x3f0000
[    1.060000] 0x000000400000-0x0000007f0000 : &quot;rootfs_data&quot;
[    1.070000] 0x0000007f0000-0x000000800000 : &quot;nvram&quot;
[    1.090000] bgmac bcma0:1: Found PHY addr: 0
[    1.100000] ------------[ cut here ]------------
[    1.100000] WARNING: at drivers/net/phy/b53/b53_mdio.c:69 b53_mdio_op+0xc0/0xec()
[    1.110000] Modules linked in:
[    1.110000] CPU: 0 PID: 1 Comm: swapper Not tainted 3.10.49 #3
[    1.120000] Stack : 00000000 00000000 00000000 00000000 803469c6 00000032 83821b00 80330000
      802919f8 802d6d13 00000001 80335ea0 83821b00 80330000 00000000 c0000000
      802a829c 802328e4 00000003 8019d520 802a80bc 80330000 802930d4 83823984
      00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
      00000000 00000000 00000000 00000000 00000000 00000000 00000000 83823910
      ...
[    1.160000] Call Trace:
[    1.160000] [&lt;801d8d90&gt;] show_stack+0x48/0x70
[    1.160000] [&lt;802422c0&gt;] warn_slowpath_common+0x78/0xa8
[    1.170000] [&lt;80242378&gt;] warn_slowpath_null+0x18/0x24
[    1.170000] [&lt;80061e68&gt;] b53_mdio_op+0xc0/0xec
[    1.180000] [&lt;80062108&gt;] b53_mdio_read8+0x2c/0x64
[    1.180000] [&lt;80062ea0&gt;] b53_switch_detect+0x40/0x23c
[    1.190000] [&lt;8006263c&gt;] b53_phy_probe+0x64/0xac
[    1.190000] [&lt;80193e40&gt;] phy_probe+0x7c/0xb0
[    1.200000] [&lt;800d2cb0&gt;] driver_probe_device+0xc8/0x21c
[    1.200000] [&lt;8008d2bc&gt;] bus_for_each_drv+0x9c/0xac
[    1.210000] [&lt;800b5a14&gt;] device_attach+0x78/0x9c
[    1.210000] [&lt;8008d368&gt;] bus_probe_device+0x3c/0xcc
[    1.220000] [&lt;800b57b4&gt;] device_add+0x444/0x578
[    1.220000] [&lt;80193008&gt;] phy_device_register+0x3c/0x90
[    1.230000] [&lt;8015368c&gt;] mdiobus_scan+0xb8/0xf0
[    1.230000] [&lt;801534f8&gt;] mdiobus_register+0x10c/0x1b8
[    1.240000] [&lt;80073ed8&gt;] bgmac_probe+0x628/0x868
[    1.240000] [&lt;800d2cb0&gt;] driver_probe_device+0xc8/0x21c
[    1.250000] [&lt;80030994&gt;] __driver_attach+0x7c/0xb4
[    1.250000] [&lt;8008d210&gt;] bus_for_each_dev+0x98/0xa8
[    1.260000] [&lt;8008ced8&gt;] bus_add_driver+0x108/0x24c
[    1.260000] [&lt;800d2ed8&gt;] driver_register+0xbc/0x16c
[    1.270000] [&lt;802f692c&gt;] bgmac_init+0x1c/0x44
[    1.270000] [&lt;800c8160&gt;] do_one_initcall+0xf0/0x198
[    1.280000] [&lt;802e6a80&gt;] kernel_init_freeable+0x150/0x208
[    1.280000] [&lt;800057b0&gt;] kernel_init+0x10/0x10c
[    1.290000] [&lt;80001478&gt;] ret_from_kernel_thread+0x14/0x1c
[    1.290000] 
[    1.300000] ---[ end trace 20e3cd45cdeec113 ]---
[    1.300000] Broadcom B53 (1): probe of bgmac-0-0:00 failed with error -5
[    1.310000] libphy: bgmac mii bus: probed
[    1.320000] bgmac: Broadcom 47xx GBit MAC driver loaded
[    1.320000] bcm47xx-wdt bcm47xx-wdt.0: BCM47xx Watchdog Timer enabled (30 seconds)
[    1.330000] TCP: cubic registered
[    1.340000] NET: Registered protocol family 17
[    1.340000] Bridge firewalling registered
[    1.340000] 8021q: 802.1Q VLAN Support v1.8
[    1.370000] VFS: Mounted root (squashfs filesystem) readonly on device 31:4.
[    1.370000] Freeing unused kernel memory: 168K (802e6000 - 80310000)
procd: Console is alive
procd: - watchdog -
procd: - preinit -
Press the [f] key and hit [enter] to enter failsafe mode
Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level
jffs2 is ready
jffs2 is ready
[    8.640000] jffs2: notice: (221) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (0 unchecked, 0 orphan) and 9 of xref (0 dead, 2 orphan) found.
switching to overlay
procd: - early -
procd: - watchdog -
procd: - ubus -
procd: - init -
Please press Enter to activate this console.
[   13.250000] wl: module license &#039;unspecified&#039; taints kernel.
[   13.250000] Disabling lock debugging due to kernel taint
[   13.430000] wl0: Broadcom BCM432a 802.11 Wireless Controller 5.10.56.27
[   13.440000] SSB/BCMA glue driver successfully attached
[   13.460000] nf_conntrack version 0.5.0 (964 buckets, 3856 max)
[   13.590000] xt_time: kernel timezone is -0000
[   13.610000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   20.710000] device eth0 entered promiscuous mode
[   20.740000] br-lan: port 1(eth0) entered listening state
[   20.740000] br-lan: port 1(eth0) entered listening state
[   22.740000] br-lan: port 1(eth0) entered learning state
[   23.330000] device wl0 entered promiscuous mode
[   23.340000] br-lan: port 2(wl0) entered listening state
[   23.340000] br-lan: port 2(wl0) entered listening state
[   24.380000] br-lan: port 1(eth0) received tcn bpdu
[   24.390000] br-lan: topology change detected, propagating
[   24.740000] br-lan: topology change detected, propagating
[   24.740000] br-lan: port 1(eth0) entered forwarding state
[   25.340000] br-lan: port 2(wl0) entered learning state
[   27.340000] br-lan: topology change detected, propagating
[   27.340000] br-lan: port 2(wl0) entered forwarding state
procd: - init complete -



BusyBox v1.22.1 (2014-09-21 02:32:34 CEST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 -----------------------------------------------------
 BARRIER BREAKER (14.07, r42625)
 -----------------------------------------------------
  * 1/2 oz Galliano         Pour all ingredients into
  * 4 oz cold Coffee        an irish coffee mug filled
  * 1 1/2 oz Dark Rum       with crushed ice. Stir.
  * 2 tsp. Creme de Cacao
 -----------------------------------------------------
root@OpenWrt:/# ifco
root@OpenWrt:/# ifconfig [J
br-lan    Link encap:Ethernet  HWaddr 00:25:2E:xx:xx:xx  
          inet addr:192.168.1.20  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:33 errors:0 dropped:0 overruns:0 frame:0
          TX packets:28 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:5408 (5.2 KiB)  TX bytes:2864 (2.7 KiB)

eth0      Link encap:Ethernet  HWaddr 00:25:2E:xx:xx:xx  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:10 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
          Interrupt:4 

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:28 errors:0 dropped:0 overruns:0 frame:0
          TX packets:28 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:4382 (4.2 KiB)  TX bytes:4382 (4.2 KiB)

wl0       Link encap:Ethernet  HWaddr 00:25:2E:F0:F6:14  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:11 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:748 (748.0 B)
          Interrupt:3 Base address:0x1000 </code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p283257">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">ghoffman</div>
					<div class="post-datetime">
						12 Jul 2015, 17:57					</div>
				</div>
				<div class="post-content content">
					<p>after a lot of trial and error, i have not been successful getting opnewrt to run in client bridge mode.&nbsp; however, i was able to do this was a dd-wrt build - also after a lot of trial and error.<br />the cfe on this device is very forgiving luckily.</p><p>see <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?p=974590#974590">http://www.dd-wrt.com/phpBB2/viewtopic. â€¦ 590#974590</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>