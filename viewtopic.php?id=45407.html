<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Reflashed U-Boot, have prompt, how to continue ?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 6 Feb 2018 and 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=45407&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p207904">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jenom</div>
					<div class="post-datetime">
						24 Jul 2013, 05:09					</div>
				</div>
				<div class="post-content content">
					<p>On a bricked DIR-615 E3, removed the FLASH chip from board (MX25L3206) and reloaded it with with U-Boot AP99 v1.3.0<br />Connected FLASH back to board and it boots and I via putty serial I have terminal access, prompts AR7241&gt;<br />Below are the boot messages, did &quot;help&quot; for available commands, and did &quot;printenv&quot; and changed &quot;bootdelay&quot; to 10</p><p>My question is, how to proceed from here ??</p><p>1) Should I send in via tftp an&nbsp; original factory image or try open-wrt or dd-wrt ?</p><p>2) Can I load firmware imag into flash&nbsp; thru the serial console?</p><p>3) U-Boot looking for an image at&nbsp; address 9f020000,maybe&nbsp; copy some image there with my programmer ?</p><p>Thanks for any reply!</p><br /><p>U-Boot 1.3.0 (Nov&nbsp; 6 2011 - 17:03:51)@TTHR</p><p>AP99 (ar7240 - Python) U-boot<br />ar7240_ddr_initial_config(138): python ddr init<br />CPU_FREQ=410##DDR_FREQ=410##AHB_FREQ=205<br />DRAM:&nbsp; 32 MB<br />Flash:&nbsp; 8 MB<br />Using default environment</p><p>In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;ag7240_enet_initialize...<br />No valid address in Flash. Using fixed address<br />No valid address in Flash. Using fixed address<br />: cfg1 0xf cfg2 0x7014<br />eth0: 40:16:9f:ab:e0:82<br />eth0 up<br />: cfg1 0xf cfg2 0x7214<br />eth1: 40:16:9f:ab:e0:82<br />ATHRS26: resetting s26<br />ATHRS26: s26 reset done<br />eth1 up<br />eth0, eth1<br />Hit any key to stop autoboot:&nbsp; 0 <br />## Booting image at 9f020000 ...<br />&nbsp; &nbsp;Uncompressing Kernel Image ... Error: Bad gzipped data<br />GUNZIP ERROR - must RESET board to recover</p><p>Resetting...</p><p>AR7241# printenv<br />bootargs=console=ttyS0,115200 root=31:02 rootfstype=jffs2 init=/sbin/init mtdparts=ar7240-nor0:128k(u-boot),6720k(rootfs),1280k(Kernel),64k(ART)<br />bootcmd=bootm 0x9f020000<br />bootdelay=2<br />baudrate=115200<br />ethaddr=0x40:0x16:0x9F:0xAB:0xE0:0x82<br />ipaddr=192.168.1.32<br />serverip=192.168.1.100<br />stdin=serial<br />stdout=serial<br />stderr=serial<br />ethact=eth0</p><p>Environment size: 332/65532 bytes</p><br /><br /><br /><p>AR7241# help<br />?&nbsp; &nbsp; &nbsp; &nbsp;- alias for &#039;help&#039;<br />base&nbsp; &nbsp; - print or set address offset<br />boot&nbsp; &nbsp; - boot default, i.e., run &#039;bootcmd&#039;<br />bootd&nbsp; &nbsp;- boot default, i.e., run &#039;bootcmd&#039;<br />bootm&nbsp; &nbsp;- boot application image from memory<br />bootp&nbsp; &nbsp; - boot image via network using BootP/TFTP protocol<br />cmp&nbsp; &nbsp; &nbsp;- memory compare<br />coninfo - print console devices and information<br />cp&nbsp; &nbsp; &nbsp; - memory copy<br />crc32&nbsp; &nbsp;- checksum calculation<br />echo&nbsp; &nbsp; - echo args to console<br />erase&nbsp; &nbsp;- erase FLASH memory<br />flinfo&nbsp; - print FLASH memory information<br />go&nbsp; &nbsp; &nbsp; - start application at address &#039;addr&#039;<br />help&nbsp; &nbsp; - print online help<br />loop&nbsp; &nbsp; - infinite loop on address range<br />md&nbsp; &nbsp; &nbsp; - memory display<br />mm&nbsp; &nbsp; &nbsp; - memory modify (auto-incrementing)<br />mtest&nbsp; &nbsp;- simple RAM test<br />mw&nbsp; &nbsp; &nbsp; - memory write (fill)<br />nm&nbsp; &nbsp; &nbsp; - memory modify (constant address)<br />printenv- print environment variables<br />protect - enable or disable FLASH write protection<br />rarpboot- boot image via network using RARP/TFTP protocol<br />reset&nbsp; &nbsp;- Perform RESET of the CPU<br />setenv&nbsp; - set environment variables<br />tftpboot- boot image via network using TFTP protocol<br />version - print monitor version<br />AR7241# version</p><p>U-Boot 1.3.0 (Nov&nbsp; 6 2011 - 17:03:51)@TTHR<br />AR7241# base<br />Base Address: 0x00000000<br />AR7241# coninfo<br />List of available devices:<br />serial&nbsp; &nbsp;80000003 SIO stdin stdout stderr <br />AR7241# flinfo</p><p>Bank # 1: <br />Flash MF_ID:[0xc2]Dev_ID:[0x20]Size_ID:[0x16]<br />Flash Size:[8MByte]<br />Flash has [128] Sectors</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207986">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						25 Jul 2013, 01:16					</div>
				</div>
				<div class="post-content content">
					<p>1) it&#039;s probably a better idea to flash an openwrt image (some original firmware might come packaged with a bootloader).<br />2) sure. see this part of the wr1043nd wiki: <a href="http://wiki.openwrt.org/toh/tp-link/tl-wr1043nd#oem.installation.using.the.kermit.and.rs232.method">http://wiki.openwrt.org/toh/tp-link/tl- … 232.method</a><br />3) would be possible, but now that you already have a valid uboot, you can use it to program the flash. commands are basically the same as for the wr1043nd, but I&#039;m sure you need to adjust the adresses a bit (use 0x9f.... instead of 0xbf....). give that mtest command a try and test the memory where you want to transfer the image to, first.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207990">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jenom</div>
					<div class="post-datetime">
						25 Jul 2013, 03:03					</div>
				</div>
				<div class="post-content content">
					<p>thanks for the info</p><p>tried the following:</p><p>made my pc&#039;s&nbsp; lan a fixed address of 192.168.1.100</p><p>started tftpd32 ......tftp client.....host:192.168.1.32&nbsp; port: left empty<br />local file name: xxx.bin,&nbsp; GET</p><p>on the router:</p><p>ar7240&gt; tftpboot 0x80000000 xxx.bin</p><p>receiving message on router:</p><p>Using eth1 device<br />TFTP from server 192.168.1.100; our IP address is 192.168.1.32<br />Filename &#039;1.bin&#039;.<br />Load address: 0x80000000<br />Loading: T T T T T T T T T T<br />Retry count exceeded; starting again<br />eth0 link down<br />Using eth1 device<br />TFTP from server 192.168.1.100; our IP address is 192.168.1.32<br />Filename &#039;1.bin&#039;.<br />Load address: 0x80000000<br />Loading: T T T T T T T T T T<br />Retry count exceeded; starting again<br />eth0 link down<br />Using eth1 device<br />TFTP from server 192.168.1.100; our IP address is 192.168.1.32<br />Filename &#039;1.bin&#039;.<br />Load address: 0x80000000</p><p>I have tried to plug in ethernet cable into WAN and all the LAN port.....no change<br />PC shows status for the network cable is plugged in<br />Router does not reply to ping on neither 192.168.1.32 or 192.168.100<br />Router Lan/Wan lights are lighting&nbsp; up when a cable is plugged in</p><p>Any suggestion/ advise&nbsp; how to get tftp file transfer to work ?</p>											<p class="post-edited">(Last edited by <strong>jenom</strong> on 25 Jul 2013, 03:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208010">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">saturn-b</div>
					<div class="post-datetime">
						25 Jul 2013, 08:20					</div>
				</div>
				<div class="post-content content">
					<p>Turn off your firewall,<br />on some cases you need to rename the binary file to &quot;code.bin&quot;</p><p>Hope this will help you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208016">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						25 Jul 2013, 09:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jenom wrote:</cite><blockquote><p>Any suggestion/ advise&nbsp; how to get tftp file transfer to work ?</p></blockquote></div><p>Run tftpd32 after powering up the router. You should have a &quot;Tftp Server&quot; tab inside the application and above &quot;Current Directory&quot; and &quot;Server interface&quot; drop down menus. Choose directory which contains your image file and 192.168.1.100 as an interface.</p><p>It should look like this (I&#039;m using static 192.168.1.2 IP on my network card):<br /><span class="postimg"><img src="http://www.tech-blog.pl/pliki/2013-07-25_085654.jpg" alt="http://www.tech-blog.pl/pliki/2013-07-25_085654.jpg" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208107">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">jenom</div>
					<div class="post-datetime">
						26 Jul 2013, 03:40					</div>
				</div>
				<div class="post-content content">
					<p>thanks for all the replies and now file transfer went through<br />So this is what I did:</p><p>ar7240&gt; tftpboot 0x80000000 FACTORY-TO-OPENWRT/DDWRT.bin</p><p>Bytes transferred = 3932160 (3c0000 hex)</p><p>ar7240&gt; erase 0x9f020000 +0x3c0000</p><p>ar7240&gt; cp.b 0x80000000 0x9f020000 0x3c0000</p><p>all went ok, no error messages , done</p><p>ar7240&gt; bootm 0x9f020000</p><p>Router reboots, boot message on putty&#039;s serial terminal:</p><p>Booting Image at 9f020000<br />Uncompressing Kernel Image .....Error, Bad Gzipped Data<br />GUnzip error.......must reset board to recover</p><p>I have tried to load 3 different files: dlink 615 original, dd-wrt factory to ddwrt, openwrt-ar71xxx</p><p>Alway same error result !</p><p>I would like to add, that the U-boot came from a different router , (TPL-W..) which uses same Atheros hardware and has same memory. Unfortunately, I can not get a DIR-615 vE.3 U-boot</p><p>Any suggestion: <br />1) what file&nbsp; I should&nbsp; exactly load ?</p><p>2) how can I verify&nbsp; that it is actually in the memory&nbsp; and good ?</p><p>3) ???????</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208120">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						26 Jul 2013, 07:19					</div>
				</div>
				<div class="post-content content">
					<p>well... then use wr841v5 image (or v7?? ) !! obviously there are differences in uboot...</p><p>note: this seems strange to me..</p><p> mtdparts=ar7240-nor0:128k(u-boot),6720k(rootfs),1280k(Kernel),64k(ART)</p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 26 Jul 2013, 07:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208122">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">jenom</div>
					<div class="post-datetime">
						26 Jul 2013, 08:17					</div>
				</div>
				<div class="post-content content">
					<p>also strange that U-boot show 8 mb flash </p><p>Bank # 1:<br />Flash MF_ID:[0xc2]Dev_ID:[0x20]Size_ID:[0x16]<br />Flash Size:[8MByte]<br />Flash has [128] Sectors</p><p>and I have only 4 mb&nbsp; (Mx25L3206)</p><p>I wish, I can find a more correct U-boot for my router, made for an AR7xx&nbsp; &nbsp;like AP81, AP91 or AP93</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208136">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						26 Jul 2013, 11:25					</div>
				</div>
				<div class="post-content content">
					<p>Try a different RAM address, like:<br />ar7240&gt; tftpboot <strong>0x81000000</strong> ...</p><p>You can also check the FLASH content with <strong>md</strong> command in U-Boot.</p><p>Maybe this topic will help you: <a href="https://forum.openwrt.org/viewtopic.php?id=30180">https://forum.openwrt.org/viewtopic.php?id=30180</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208153">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						26 Jul 2013, 13:45					</div>
				</div>
				<div class="post-content content">
					<p>what uboot image have you flashed specifically?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208243">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">jenom</div>
					<div class="post-datetime">
						27 Jul 2013, 07:44					</div>
				</div>
				<div class="post-content content">
					<p>Found a U-boot from TP-Link WR841ND&nbsp; made for AR7240, with a correct 4 mb flash, 32 mb ram<br />After flashing, used TPL to stop, and flashed firmware as before:</p><p>ar7240&gt; tftpboot 0x80000000 FACTORY-TO-DDWRT.bin</p><p>Bytes transferred = 3932160 (3c0000 hex)</p><p>ar7240&gt; erase 0x9f020000 +0x3c0000</p><p>ar7240&gt; cp.b 0x80000000 0x9f020000 0x3c0000</p><p>ar7240&gt; bootm 0x9f020000</p><br /><p>Router now rebooted, and started doing something different:</p><br /><p>U-Boot 1.1.4 (Sep&nbsp; 3 2010 - 12:28:13)</p><p>AP91 (ar7240) U-boot<br />DRAM:&nbsp; <br />sri<br />#### TAP VALUE 1 = a, 2 = b<br />32 MB<br />id read 0x100000ff<br />flash size 4194304, sector count = 64<br />Flash:&nbsp; 4 MB<br />Using default environment</p><p>BOARD IS NOT CALIBRATED!!!<br />In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;ag7240_enet_initialize...<br />No valid address in Flash. Using fixed address<br />: cfg1 0xf cfg2 0x7014<br />eth0: 00:03:7f:09:0b:ad<br />eth0 up<br />No valid address in Flash. Using fixed address<br />: cfg1 0xf cfg2 0x7214<br />eth1: 00:03:7f:09:0b:ad<br />ATHRS26: resetting s26<br />ATHRS26: s26 reset done<br />eth1 up<br />eth0, eth1<br />Autobooting in 1 seconds<br />## Booting image at 9f020000 ...<br />&nbsp; &nbsp;Uncompressing Kernel Image ... OK</p><p>Starting kernel ...</p><br /><br /><p>OpenWrt kernel loader for AR7XXX/AR9XXX<br />Copyright (C) 2011 Gabor Juhos &lt;juhosg@openwrt.org&gt;<br />Decompressing kernel... <br />done!<br />Starting kernel...</p><p>[&nbsp; &nbsp; 0.000000] flash_size passed from bootloader = 1731<br />[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />AR7240<br />PT, I-cache aliases, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] Linux version 3.5.7 (root@dd-wrt) (gcc version 4.7.3 20121205 (prerelease) (Linaro GCC 4.7-2012.12) ) #6148 Mon Mar 25 08:58:25 CET 2013<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 8128<br />[&nbsp; &nbsp; 0.000000] Kernel command line: console=ttyS0,115200 root=1f02 rootfstype=squashfs noinitrd init=/sbin/init<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 128 (order: -3, 512 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.000000] __ex_table already sorted, skipping sort<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Memory: 29472k/32768k available (2120k kernel code, 3296k reserved, 411k data, 164k init, 0k highmem)<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:80<br />[&nbsp; &nbsp; 0.000000] Calibrating delay loop... 232.24 BogoMIPS (lpj=1161216)<br />[&nbsp; &nbsp; 0.080000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.080000] Mount-cache hash table entries: 512<br />[&nbsp; &nbsp; 0.090000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.380000] registering PCI controller with io_map_base unset<br />[&nbsp; &nbsp; 0.400000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.400000] PCI host bridge to bus 0000:00<br />[&nbsp; &nbsp; 0.410000] pci_bus 0000:00: root bus resource [mem 0x10000000-0x13ffffff]<br />[&nbsp; &nbsp; 0.410000] pci_bus 0000:00: root bus resource [io&nbsp; 0x0000]<br />[&nbsp; &nbsp; 0.420000] pci 0000:00:00.0: invalid calibration data<br />[&nbsp; &nbsp; 0.420000] pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x1000ffff 64bit]<br />[&nbsp; &nbsp; 0.430000] PCI: mapping irq 72 to pin1@0000:00:00.0<br />[&nbsp; &nbsp; 0.430000] Switching to clocksource MIPS<br />[&nbsp; &nbsp; 0.440000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.440000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.450000] TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.460000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.460000] TCP: Hash tables configured (established 1024 bind 1024)<br />[&nbsp; &nbsp; 0.470000] TCP: reno registered<br />[&nbsp; &nbsp; 0.470000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.480000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.490000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.490000] gpio_proc: module loaded and /proc/gpio/ created<br />[&nbsp; &nbsp; 0.500000] fixup WR741 Switch LED&#039;s<br />[&nbsp; &nbsp; 0.500000] wl0gpio_proc: module loaded and /proc/wl0gpio/ created<br />[&nbsp; &nbsp; 0.510000] squashfs: version 3.0 (2006/03/15) Phillip Lougher<br />[&nbsp; &nbsp; 0.510000] msgmni has been set to 57<br />[&nbsp; &nbsp; 0.520000] io scheduler noop registered (default)<br />[&nbsp; &nbsp; 0.520000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />[&nbsp; &nbsp; 0.550000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A<br />[&nbsp; &nbsp; 0.560000] console [ttyS0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.560000] console [ttyS0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.570000] guessed flashsize = 4M<br />[&nbsp; &nbsp; 0.580000] scanning for root partition<br />[&nbsp; &nbsp; 0.580000] tplink uboot detected<br />[&nbsp; &nbsp; 0.580000] guessed bootloader size = 20000<br />[&nbsp; &nbsp; 0.590000] <br />[&nbsp; &nbsp; 0.590000] found squashfs at 110000<br />[&nbsp; &nbsp; 0.600000] Creating 8 MTD partitions on &quot;ar7240-nor0&quot;:<br />[&nbsp; &nbsp; 0.600000] 0x000000000000-0x000000020000 : &quot;RedBoot&quot;<br />[&nbsp; &nbsp; 0.610000] 0x000000020000-0x0000003e0000 : &quot;linux&quot;<br />[&nbsp; &nbsp; 0.610000] 0x000000110000-0x0000003e0000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 0.620000] mtd: partition &quot;rootfs&quot; set to be root filesystem<br />[&nbsp; &nbsp; 0.630000] 0x0000003e0000-0x000000400000 : &quot;ddwrt&quot;<br />[&nbsp; &nbsp; 0.630000] 0x0000003e0000-0x0000003f0000 : &quot;nvram&quot;<br />[&nbsp; &nbsp; 0.640000] 0x0000003f0000-0x000000400000 : &quot;board_config&quot;<br />[&nbsp; &nbsp; 0.650000] 0x000000000000-0x000000400000 : &quot;fullflash&quot;<br />[&nbsp; &nbsp; 0.660000] 0x000000000000-0x000000020000 : &quot;fullboot&quot;<br />[&nbsp; &nbsp; 1.060000] PPP generic driver version 2.4.2<br />[&nbsp; &nbsp; 1.070000] PPP BSD Compression module registered<br />[&nbsp; &nbsp; 1.070000] PPP Deflate Compression module registered<br />[&nbsp; &nbsp; 1.080000] PPP MPPE Compression module registered<br />[&nbsp; &nbsp; 1.080000] NET: Registered protocol family 24<br />[&nbsp; &nbsp; 1.110000] u32 classifier<br />[&nbsp; &nbsp; 1.110000]&nbsp; &nbsp; &nbsp;Performance counters on<br />[&nbsp; &nbsp; 1.110000]&nbsp; &nbsp; &nbsp;input device check on<br />[&nbsp; &nbsp; 1.120000]&nbsp; &nbsp; &nbsp;Actions configured<br />[&nbsp; &nbsp; 1.120000] Netfilter messages via NETLINK v0.30.<br />[&nbsp; &nbsp; 1.120000] nf_conntrack version 0.5.0 (460 buckets, 1840 max)<br />[&nbsp; &nbsp; 1.130000] nf_conntrack_rtsp v0.6.21 loading<br />[&nbsp; &nbsp; 1.140000] nf_nat_rtsp v0.6.21 loading<br />[&nbsp; &nbsp; 1.140000] ip_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp; 1.150000] IPP2P v0.8.2 loading<br />[&nbsp; &nbsp; 1.150000] TCP: westwood registered<br />[&nbsp; &nbsp; 1.150000] TCP: hybla registered<br />[&nbsp; &nbsp; 1.160000] TCP: vegas registered<br />[&nbsp; &nbsp; 1.160000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 1.160000] Bridge firewalling registered<br />[&nbsp; &nbsp; 1.170000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 1.170000] searching for nvram<br />[&nbsp; &nbsp; 1.180000] nvram size = 0<br />[&nbsp; &nbsp; 1.210000] Broken NVRAM found, recovering it (Magic FFFFFFFF)<br />[&nbsp; &nbsp; 1.220000] Atheros AR71xx hardware watchdog driver version 0.1.0<br />[&nbsp; &nbsp; 1.220000] ar71xx-wdt: timeout=15 secs (max=24) ref freq=175000000<br />[&nbsp; &nbsp; 1.230000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.<br />[&nbsp; &nbsp; 1.240000] Freeing unused kernel memory: 164k freed<br />start service<br />starting Architecture code for wr741<br />starting hotplug<br />Jan&nbsp; 1 00:00:03 udevtrigger[238]: parse_config_file: can&#039;t open &#039;/etc/udev/udev.conf&#039; as config file: No such file or directory<br />done<br />load ATH Ethernet Driver<br />[&nbsp; &nbsp; 4.540000] ag71xx_mdio: probed<br />[&nbsp; &nbsp; 4.540000] eth0: Atheros AG71xx at 0xb9000000, irq 4, mode:MII<br />[&nbsp; &nbsp; 5.130000] ag71xx ag71xx.0: eth0: connected to PHY at ag71xx-mdio.0:04 [uid=004dd041, driver=Generic PHY]<br />[&nbsp; &nbsp; 5.140000] eth1: Atheros AG71xx at 0xba000000, irq 5, mode:GMII<br />[&nbsp; &nbsp; 5.710000] eth1: Found an AR7240/AR9330 built-in switch<br />configure eth0 to f8:d1:11:21:1a:d6<br />configure eth1 to F8:D1:11:21:1A:D7<br />/bin/sh: can&#039;t create /sys/class/leds/generic_13/port_mask: nonexistent directory<br />/bin/sh: can&#039;t create /sys/class/leds/generic_14/port_mask: nonexistent directory<br />/bin/sh: can&#039;t create /sys/class/leds/generic_15/port_mask: nonexistent directory<br />/bin/sh: can&#039;t create /sys/class/leds/generic_16/port_mask: nonexistent directory<br />load ATH 802.11 a/b/g Driver<br />load ATH9K 802.11n Driver<br />[&nbsp; &nbsp; 9.150000] Compat-drivers backport release: compat-drivers-2013-01-21-1<br />[&nbsp; &nbsp; 9.150000] Backport based on wireless-testing.git master-2013-02-22<br />[&nbsp; &nbsp; 9.160000] compat.git: wireless-testing.git<br />[&nbsp; &nbsp; 9.370000] cfg80211: Calling CRDA to update world regulatory domain<br />[&nbsp; &nbsp; 9.370000] cfg80211: World regulatory domain updated:<br />[&nbsp; &nbsp; 9.380000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[&nbsp; &nbsp; 9.390000] cfg80211:&nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp; 9.390000] cfg80211:&nbsp; &nbsp;(2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp; 9.400000] cfg80211:&nbsp; &nbsp;(2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp; 9.410000] cfg80211:&nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp; 9.420000] cfg80211:&nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;10.180000] eth0: link up (100Mbps/Full duplex)<br />[&nbsp; &nbsp;12.420000] eth0: link down<br />[&nbsp; &nbsp;12.490000] device eth0 entered promiscuous mode<br />[&nbsp; &nbsp;14.600000] device eth1 entered promiscuous mode<br />[&nbsp; &nbsp;15.280000] eth0: link up (100Mbps/Full duplex)<br />[&nbsp; &nbsp;15.600000] br0: port 1(eth0) entered forwarding state<br />[&nbsp; &nbsp;15.600000] br0: port 1(eth0) entered forwarding state<br />br0: No such process<br />SIOCGIFFLAGS: No such device<br />erase[0]erase[65536]<br />Sending SIGTERM to all processes[&nbsp; &nbsp;17.490000] ar71xx-wdt: device closed unexpectedly, watchdog timer will not stop!</p><p>[&nbsp; &nbsp;17.600000] br0: port 1(eth0) entered forwarding state<br />[&nbsp; &nbsp;19.000000] nf_conntrack: automatic helper assignment is deprecated and it will be removed soon. Use the iptables CT target to attach helpers instead.<br />Sending SIGKILL to all processes<br />[&nbsp; &nbsp;25.530000] Restarting system.</p><p>Tried to load using&nbsp; a same procedure firmware written for TP-Link TL-WR841ND (that is where U-boot came from),<br />however I got exactly the same result !</p><p>Can someone explain from above what went wrong here ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208252">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">saturn-b</div>
					<div class="post-datetime">
						27 Jul 2013, 09:24					</div>
				</div>
				<div class="post-content content">
					<p>Take out art partition of your bricked DIR-615 E3 (removed FLASH chip) and upload it to router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208254">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						27 Jul 2013, 09:58					</div>
				</div>
				<div class="post-content content">
					<p>why are you using factory to ddwrt??? Seems the wrong firmware to me xD</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208282">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">motoxxx138</div>
					<div class="post-datetime">
						27 Jul 2013, 15:46					</div>
				</div>
				<div class="post-content content">
					<p>jenom -</p><p>&nbsp; &nbsp; Will you please explain to me how you managed to flash u-boot directly to the serial chip. I have been trying to do this for days now. I am using a bus_pirate and I am able to remove the chip from my router and write to it no problem but I am confused about the file format to write to the flash chip.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208289">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">jenom</div>
					<div class="post-datetime">
						27 Jul 2013, 17:12					</div>
				</div>
				<div class="post-content content">
					<p>thanks for everybody for their replies<br />BIG THANKS for PEPE2K from Poland to sending me the link......now I have new target addresses:</p><p>0x81000000 0xbf040000</p><p>the U-Boot I am using is from a TP-Link TL WR841ND, it is an AR77xx router, same memory size of 4 Mb/ 32 MB , </p><p>when firmware loaded, I can not stop at boot-prompt with &quot;TPL&quot;, got only 1 sec<br />needed to reflash chip with U-Boot again and then I can stop it<br />I will do &quot;md&quot; and will post result</p><p>For MOTOXX138</p><p>I am using SPIPGM program, with home made build, only 5x 150 Ohm resistor, 1 capacitor, parallel cable, and a 8 pin IC socket<br />Google SPIPGM, you will find easily the program and schematics, etc....</p><p>Do you have a DIR-615 v E3 or E4 router &#039;s U-BOOT file ?<br />If you do, can you PM , and I will send you my email address to get it </p><p>For SATURN-B<br />I have already erased (wiped empty) my flash chip about 10 times, there is no ART there</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208297">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">motoxxx138</div>
					<div class="post-datetime">
						27 Jul 2013, 19:02					</div>
				</div>
				<div class="post-content content">
					<p>My apologies if I am wrong, but I think you misunderstood my question. I am not having any problem reading/writing/erasing the chip.&nbsp; I am using flashrom with my buspirate to achieve this.&nbsp; I am confused as to what file you are flashing to the chip. If I understand correctly I can&#039;t just take U-boot.bin, pad it to 4mb and write it to the chip and have the router recognize the code properly? FYI the router I am trying to do this with is a WNR2000v4 which also has an ap81 reference board with a 4mb flash and 32mb ram.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208298">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						27 Jul 2013, 19:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>motoxxx138 wrote:</cite><blockquote><p>If I understand correctly I can&#039;t just take U-boot.bin, pad it to 4mb and write it to the chip and have the router recognize the code properly?</p></blockquote></div><p>Yes, you can. Put the U-Boot.bin file at 0x0 offset on the chip and it should boot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208299">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">motoxxx138</div>
					<div class="post-datetime">
						27 Jul 2013, 19:12					</div>
				</div>
				<div class="post-content content">
					<p>Awesome, thank you very much pepe2k. I have been trying to figure this out for almost 5 days now. lol</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208310">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">jenom</div>
					<div class="post-datetime">
						27 Jul 2013, 23:19					</div>
				</div>
				<div class="post-content content">
					<p>If I understand correctly I can&#039;t just take U-boot.bin, pad it to 4mb and write it to the chip and have the router recognize the code properly?</p><p>For motoxx 138</p><p>yes, you can write you-boot as it is, done it about a dozen times<br />just erase your flash completely and send it there</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208311">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">jenom</div>
					<div class="post-datetime">
						27 Jul 2013, 23:44					</div>
				</div>
				<div class="post-content content">
					<p>followin pepe2k &#039;s link, read ldpinney posts<br />sent him a PM, hoping he still around and willing to share U-boot he used<br />he emailed back and attached his U-boot file<br />after loading it, it created totally different partitions:</p><p>U-Boot 1.1.4 (Dec 29 2009 - 22:03:13)</p><p>AP99 (ar7240 - Python) U-boot<br />DRAM:&nbsp; <br />sri<br />#### TAP VALUE 1 = 0x8, 2 = 0x8 [0x10101111: 0x20220202]<br />32 MB<br />Top of RAM usable for U-Boot at: 82000000<br />Reserving 244k for U-Boot at: 81fc0000<br />Reserving 192k for malloc() at: 81f90000<br />Reserving 44 Bytes for Board Info at: 81f8ffd4<br />Reserving 36 Bytes for Global Data at: 81f8ffb0<br />Reserving 128k for boot params() at: 81f6ffb0<br />Stack Pointer at: 81f6ff98<br />Now running in RAM - U-Boot at: 81fc0000<br />id read 0x100000ff<br />flash size 4194304, sector count = 64<br />Flash:&nbsp; 4 MB<br />*** Warning - bad CRC, using default environment</p><p>BOARD IS NOT CALIBRATED!!!<br />In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;ag7240_enet_initialize...<br />No valid address in Flash. Using fixed address<br />: cfg1 0xf cfg2 0x7014<br />eth0: 00:03:7f:09:0b:ad<br />eth0 up<br />No valid address in Flash. Using fixed address<br />: cfg1 0xf cfg2 0x7214<br />eth1: 00:03:7f:09:0b:ad<br />ATHRS26: resetting s26<br />ATHRS26: s26 reset done<br />eth1 up<br />eth0, eth1<br />Hit any key to stop autoboot:&nbsp; 1  0 </p><br /><p>this U-Boot has more commands, including &quot;bdinfo&quot;, &quot;iminfo&quot; &quot;progmac&quot; &quot;saveenv&quot;</p><p>base&nbsp; &nbsp; - print or set address offset<br />bdinfo&nbsp; - print Board Info structure<br />boot&nbsp; &nbsp; - boot default, i.e., run &#039;bootcmd&#039;<br />bootd&nbsp; &nbsp;- boot default, i.e., run &#039;bootcmd&#039;<br />bootm&nbsp; &nbsp;- boot application image from memory<br />bootp&nbsp; &nbsp; - boot image via network using BootP/TFTP protocol<br />cmp&nbsp; &nbsp; &nbsp;- memory compare<br />coninfo - print console devices and information<br />cp&nbsp; &nbsp; &nbsp; - memory copy<br />crc32&nbsp; &nbsp;- checksum calculation<br />echo&nbsp; &nbsp; - echo args to console<br />erase&nbsp; &nbsp;- erase FLASH memory<br />ethreg&nbsp; &nbsp; - S26 PHY Reg rd/wr&nbsp; utility<br />exit&nbsp; &nbsp; - exit script<br />flinfo&nbsp; - print FLASH memory information<br />go&nbsp; &nbsp; &nbsp; - start application at address &#039;addr&#039;<br />help&nbsp; &nbsp; - print online help<br />iminfo&nbsp; - print header information for application image<br />imls&nbsp; &nbsp; - list all images found in flash<br />itest&nbsp; &nbsp; - return true/false on integer compare<br />loadb&nbsp; &nbsp;- load binary file over serial line (kermit mode)<br />loads&nbsp; &nbsp;- load S-Record file over serial line<br />loady&nbsp; &nbsp;- load binary file over serial line (ymodem mode)<br />loop&nbsp; &nbsp; - infinite loop on address range<br />md&nbsp; &nbsp; &nbsp; - memory display<br />mii&nbsp; &nbsp; &nbsp;- MII utility commands<br />mm&nbsp; &nbsp; &nbsp; - memory modify (auto-incrementing)<br />mtest&nbsp; &nbsp;- simple RAM test<br />mw&nbsp; &nbsp; &nbsp; - memory write (fill)<br />nfs&nbsp; &nbsp; - boot image via network using NFS protocol<br />nm&nbsp; &nbsp; &nbsp; - memory modify (constant address)<br />printenv- print environment variables<br />progmac - Set ethernet MAC addresses<br />protect - enable or disable FLASH write protection<br />rarpboot- boot image via network using RARP/TFTP protocol<br />reset&nbsp; &nbsp;- Perform RESET of the CPU<br />run&nbsp; &nbsp; &nbsp;- run commands in an environment variable<br />saveenv - save environment variables to persistent storage<br />setenv&nbsp; - set environment variables<br />sleep&nbsp; &nbsp;- delay execution for some time<br />test&nbsp; &nbsp; - minimal test like /bin/sh<br />tftpboot- boot image via network using TFTP protocol<br />version - print monitor version<br />autoscr - run script from memory</p><br /><p>here is &quot;bdinfo&quot;</p><p>ar7240&gt; bdinfo<br />boot_params = 0x81F6FFB0<br />memstart&nbsp; &nbsp; = 0x80000000<br />memsize&nbsp; &nbsp; &nbsp;= 0x02000000<br />flashstart&nbsp; = 0xBF000000<br />flashsize&nbsp; &nbsp;= 0x00400000<br />flashoffset = 0x0002F040<br />ethaddr&nbsp; &nbsp; &nbsp;= 00:AA:BB:CC:DD:EE<br />ip_addr&nbsp; &nbsp; &nbsp;= 192.168.1.10<br />baudrate&nbsp; &nbsp; = 115200 bps</p><p>I think that ethernet address will be a trouble !</p><p>here&nbsp; is &quot;printenv&quot;</p><p>ar7240&gt;&nbsp; &nbsp;printenv</p><p>bootargs=console=ttyS0,115200 root=31:03 rootfstype=squashfs,jffs2 init=/sbin/init mtdparts=ar7240-nor0:192k(u-boot),64k(nvram),960k(linux),2560k(rootfs),64k(MAC),192k(LP),64k(ART)<br />bootcmd=bootm 0xbf040000<br />bootdelay=1<br />baudrate=115200<br />ethaddr=0x00:0xaa:0xbb:0xcc:0xdd:0xee<br />ipaddr=192.168.1.10<br />serverip=192.168.1.27<br />stdin=serial<br />stdout=serial<br />stderr=serial<br />ethact=eth0</p><p>The ethernet address does not look valid, isnt it ?<br />So I made my PC&#039;s static IP same as server address (192.168.1.27)<br />When I tried to transfer FW image as before, it did not go through!<br />LDPINNEY had a same problem and ended up using a serial transfer mode.<br />I am not familiar neither with LOADB (kermit)&nbsp; or LOADY (v-modem)&nbsp; method:<br />-- how to set up my pc ?, <br />--what program do I need ?</p><p>I would like to figure out, how to fix that aa:bb:cc:dd:ee ethernet address somehow, since I have all the info written on the case: s/n&nbsp; mac id, wps pin, <br />I can see two&nbsp; maybe useful commands:&nbsp; PROGMAC&nbsp; &nbsp;and ETHREG</p><p>Anybody can advise&nbsp; how to use them ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208348">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						28 Jul 2013, 12:18					</div>
				</div>
				<div class="post-content content">
					<p>again, you can use this method to use with kermit: <a href="http://wiki.openwrt.org/toh/tp-link/tl-wr1043nd#oem.installation.using.the.kermit.and.rs232.method">http://wiki.openwrt.org/toh/tp-link/tl- … 232.method</a><br />I made mostly good experience using minicom, which supports a bunch of serial transfer protocols.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208363">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">jenom</div>
					<div class="post-datetime">
						28 Jul 2013, 18:21					</div>
				</div>
				<div class="post-content content">
					<p>currently I am fighting with a suddenly misbehaving TTl-RS232 converter, (Max2323 Ebay $2.50)</p><p>the &quot;received&quot; messages on the screen are fine, however my typing from keyboard shows as &quot;garbled&quot; characters</p><p>it was working fine before, using same settings as before, trying with different terminal programs (putty, foxterm,q-term), all shows the same </p><p>--I am going to shorten 3 wires between router&#039;s board to TTL-RS232 converter from 20&quot; (50 cm) to 10&quot; (25 cm)<br />--change power supply to TTL-RS232 board (3.3VDC ----5.0 VDC)<br />--add some filter capacitor to +/- terminal on the TTL-RS232 board<br />--change capacitors on board </p><p>As for a serial transfer, since I have only one serial port to work with , so the same port will be used for terminal communication (console) and file transfer (kermit, ymodem, xmodem).</p><p>So I would start first: loadb/loady on router and close putty and then&nbsp; transfer with minicom/tere term/c-kermit&nbsp; ???</p>											<p class="post-edited">(Last edited by <strong>jenom</strong> on 28 Jul 2013, 18:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208370">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						28 Jul 2013, 22:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jenom wrote:</cite><blockquote><p>--change power supply to TTL-RS232 board (3.3VDC ----5.0 VDC)</p></blockquote></div><p>What is this supposed to mean? 5 VDC gives me a bad feeling.<br /></p><div class="quotebox"><cite>jenom wrote:</cite><blockquote><p>As for a serial transfer, since I have only one serial port to work with , so the same port will be used for terminal communication (console) and file transfer (kermit, ymodem, xmodem).</p><p>So I would start first: loadb/loady on router and close putty and then&nbsp; transfer with minicom/tere term/c-kermit&nbsp; ???</p></blockquote></div><p>I don&#039;t know how different terminal programs behave when sharing the serial port with other programs. I always used minicom, which is a terminal program, which offers serial upload with a lot of protocols.<br />But if in doubt, then yes: you issue loadb/loady, which makes the router listen for incoming data. And if your terminal program doesn&#039;t support file upload, then you need to quit it and run a program that does the file upload. But this way you might miss messages of the router after upload is complete.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208379">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">jenom</div>
					<div class="post-datetime">
						29 Jul 2013, 00:30					</div>
				</div>
				<div class="post-content content">
					<p>you are right, max3232 uses exactly 3.3 vdc<br />I have a max232a in another project, using 5 vdc<br />capacitors on this max3232 board supposed to be 100 nF, very likely they are good<br />the max232a board had larger capacitors on it (1 uF, etc...), and they maybe be more troublesome (electrolytes)</p><p>I am in a search for a nice terminal program , where I can do telnet and file transfer in a same program, <br />so far collected hyperterminal, Qmodem, Erics telnet</p><p>Meanwhile used putty to start loadb 0x81000000 , exit putty, started tera term ..File...Transfer....Kermit...Send</p><p>Watched file transfer for about 15-20 min, then did:<br />--- erase 0xbf040000+0x390018<br />----cp.b 0x81000000 0xbf040000 0x390018<br />----bootm 0xbf040000</p><p>BAD MAGIC NUMBER !!!!</p><p>Checked with md at 81000000 and bf040000......same content</p><p>ar7240&gt; md 0xbf040000<br />bf040000: 04111111 22222200 01110011 22222222&nbsp; &nbsp; ....&quot;&quot;&quot;.....&quot;&quot;&quot;&quot;<br />bf040010: 00011111 22222222 11111101 22222222&nbsp; &nbsp; ....&quot;&quot;&quot;&quot;....&quot;&quot;&quot;&quot;<br />bf040020: 11111111 22222222 11110111 22202220&nbsp; &nbsp; ....&quot;&quot;&quot;&quot;....&quot; &quot; <br />bf040030: 11111110 22022202 11100101 22222222&nbsp; &nbsp; ....&quot;.&quot;.....&quot;&quot;&quot;&quot;<br />bf040040: 30111111 20222222 11011101 02222222&nbsp; &nbsp; 0... &quot;&quot;&quot;.....&quot;&quot;&quot;<br />bf040050: 11110111 22220200 11111111 22202022&nbsp; &nbsp; ....&quot;&quot;......&quot;&nbsp; &quot;<br />bf040060: 11111111 20222222 10111111 22222022&nbsp; &nbsp; .... &quot;&quot;&quot;....&quot;&quot; &quot;<br />bf040070: 11111111 22222022 11100111 22022222&nbsp; &nbsp; ....&quot;&quot; &quot;....&quot;.&quot;&quot;<br />bf040080: 10111111 22222220 11101101 22222222&nbsp; &nbsp; ....&quot;&quot;&quot; ....&quot;&quot;&quot;&quot;<br />bf040090: 11111111 22220220 11111110 22222222&nbsp; &nbsp; ....&quot;&quot;. ....&quot;&quot;&quot;&quot;<br />bf0400a0: 11111111 02222222 18111111 02020222&nbsp; &nbsp; .....&quot;&quot;&quot;.......&quot;<br />bf0400b0: 11101111 02220222 11011010 22222222&nbsp; &nbsp; .....&quot;.&quot;....&quot;&quot;&quot;&quot;<br />bf0400c0: 11111011 22022222 11101011 22222002&nbsp; &nbsp; ....&quot;.&quot;&quot;....&quot;&quot; .<br />bf0400d0: 11111011 02220222 11101111 22202022&nbsp; &nbsp; .....&quot;.&quot;....&quot;&nbsp; &quot;<br />bf0400e0: 13111001 22222022 11111111 22402220&nbsp; &nbsp; ....&quot;&quot; &quot;....&quot;@&quot; <br />bf0400f0: 01101011 22222202 11011110 02220222&nbsp; &nbsp; ....&quot;&quot;&quot;......&quot;.&quot;<br />ar7240&gt; </p><br /><p>Interestingly, when I tried to select and copy&nbsp; the above in &quot;putty&quot;, the ar7240&gt; prompt changed to hush&gt;<br />I could not do anything there, frozen, so Had to restart and use Q serial terminal<br />Did a quick research about &quot;hush&gt;&quot;, it is one of&nbsp; busybox prompt....so does it mean busybox is running ???</p><p>Busybox started&nbsp; by U-Boot?&nbsp; Linux is running ?&nbsp; &nbsp; Could it be used for to do something ?</p><p>Checked the first 4 bytes the image I have loaded:&nbsp; 27 05 19 56&nbsp; &nbsp;(openwrt-ar71xx-generic-dir-615-squashfs-factory.bin)<br />Checked original D-Link firmware, same 27 05 19 56<br />Checked ddwrt firmware 48 44 52 30</p><p>1) something went wrong with my upload ?<br />2) did I uploaded it to the wrong address ?<br />3) something wrong with MAGIC NUMBERS ?</p>											<p class="post-edited">(Last edited by <strong>jenom</strong> on 29 Jul 2013, 00:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208469">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						30 Jul 2013, 00:56					</div>
				</div>
				<div class="post-content content">
					<p>you could crc32 the memory range that you uploaded your image to, as well as in the flash and compare it to the crc32 of the image file. this should prove, if the upload went correctly. another way of testing would be to use mw to fill the memory range with a certain byte-pattern (at best one, which is different to the last byte of your image file), first, and then check some sample ranges with md and compare it to the image file.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=45407&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>