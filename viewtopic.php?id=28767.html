<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> asterisk-1.8.x compilation fails MySQL dependencies</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 10 Jun 2014.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p129192">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						22 Feb 2011, 14:45					</div>
				</div>
				<div class="post-content content">
					<p>I tried to compile asterisk-1.8.x for my Seagate DockStar and it fails on MySQL dependencies as shown in the following:<br/></p><div class="codebox"><pre><code>make[3]: Entering directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3&#039;
make[3]: `include/asterisk/buildopts.h&#039; is up to date.
make[3]: `defaults.h&#039; is up to date.
make[3]: `makeopts.embed_rules&#039; is up to date.
make[3]: Leaving directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3&#039;
make[3]: Entering directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3&#039;
make[4]: Entering directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/utils&#039;
make[4]: Nothing to be done for `all&#039;.
make[4]: Leaving directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/utils&#039;
make[4]: Entering directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/agi&#039;
make[4]: Nothing to be done for `all&#039;.
make[4]: Leaving directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/agi&#039;
make[4]: Entering directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/channels&#039;
make[4]: Nothing to be done for `all&#039;.
make[4]: Leaving directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/channels&#039;
make[4]: Entering directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/pbx&#039;
make[4]: Nothing to be done for `all&#039;.
make[4]: Leaving directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/pbx&#039;
make[4]: Entering directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/apps&#039;
make[4]: Nothing to be done for `all&#039;.
make[4]: Leaving directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/apps&#039;
make[4]: Entering directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/codecs&#039;
make[4]: Nothing to be done for `all&#039;.
make[4]: Leaving directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/codecs&#039;
make[4]: Entering directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/formats&#039;
make[4]: Nothing to be done for `all&#039;.
make[4]: Leaving directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/formats&#039;
make[4]: Entering directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/cdr&#039;
make[4]: Nothing to be done for `all&#039;.
make[4]: Leaving directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/cdr&#039;
make[4]: Entering directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/cel&#039;
make[4]: Nothing to be done for `all&#039;.
make[4]: Leaving directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/cel&#039;
make[4]: Entering directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/bridges&#039;
make[4]: Nothing to be done for `all&#039;.
make[4]: Leaving directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/bridges&#039;
make[4]: Entering directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/funcs&#039;
make[4]: Nothing to be done for `all&#039;.
make[4]: Leaving directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/funcs&#039;
make[4]: Entering directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/tests&#039;
make[4]: Nothing to be done for `all&#039;.
make[4]: Leaving directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/tests&#039;
make[4]: Entering directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/res&#039;
make[4]: Nothing to be done for `all&#039;.
make[4]: Leaving directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/res&#039;
make[4]: Entering directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/addons&#039;
arm-openwrt-linux-uclibcgnueabi-gcc -o app_mysql.o -c app_mysql.c -MD -MT app_mysql.o -MF .app_mysql.o.d -MP -pthread -I/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/include -Os -pipe -march=armv5te -mtune=marvell-f -funit-at-a-time -fhonour-copts -msoft-float -I/opt/tmp/openwrt-svn-trunk/staging_dir/target-arm_v5te_uClibc-0.9.32_eabi/usr/include -I/opt/tmp/openwrt-svn-trunk/staging_dir/target-arm_v5te_uClibc-0.9.32_eabi/include -I/opt/tmp/openwrt-svn-trunk/staging_dir/toolchain-arm_v5te_gcc-4.3.3+cs_uClibc-0.9.32_eabi/usr/include -I/opt/tmp/openwrt-svn-trunk/staging_dir/toolchain-arm_v5te_gcc-4.3.3+cs_uClibc-0.9.32_eabi/include   -Wall -Wstrict-prototypes -Wmissing-prototypes -Wmissing-declarations   -fsigned-char   -fPIC -DAST_MODULE=\&quot;app_mysql\&quot;  -I/usr/include/mysql  -fmessage-length=0 -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables -g -DPIC -fPIC -DUNDEF_HAVE_INITGROUPS -fno-strict-aliasing   -DUNIV_LINUX -DUNIV_LINUX -I/opt/tmp/openwrt-svn-trunk/staging_dir/target-arm_v5te_uClibc-0.9.32_eabi/usr/include -I/opt/tmp/openwrt-svn-trunk/staging_dir/target-arm_v5te_uClibc-0.9.32_eabi/include -I/opt/tmp/openwrt-svn-trunk/staging_dir/toolchain-arm_v5te_gcc-4.3.3+cs_uClibc-0.9.32_eabi/usr/include -I/opt/tmp/openwrt-svn-trunk/staging_dir/toolchain-arm_v5te_gcc-4.3.3+cs_uClibc-0.9.32_eabi/include -DLOW_MEMORY
cc1: warning: include location &quot;/usr/include/mysql&quot; is unsafe for cross-compilation
app_mysql.c:33:25: error: mysql/mysql.h: No such file or directory
app_mysql.c: In function &#039;mysql_ds_destroy&#039;:
app_mysql.c:135: warning: implicit declaration of function &#039;mysql_close&#039;
app_mysql.c:138: warning: implicit declaration of function &#039;mysql_free_result&#039;
app_mysql.c: In function &#039;aMYSQL_connect&#039;:
app_mysql.c:320: error: &#039;MYSQL&#039; undeclared (first use in this function)
app_mysql.c:320: error: (Each undeclared identifier is reported only once
app_mysql.c:320: error: for each function it appears in.)
app_mysql.c:320: error: &#039;mysql&#039; undeclared (first use in this function)
app_mysql.c:331: warning: implicit declaration of function &#039;mysql_init&#039;
app_mysql.c:338: warning: implicit declaration of function &#039;mysql_options&#039;
app_mysql.c:338: error: &#039;MYSQL_OPT_CONNECT_TIMEOUT&#039; undeclared (first use in this function)
app_mysql.c:344: warning: implicit declaration of function &#039;mysql_real_escape_string&#039;
app_mysql.c:345: error: &#039;MYSQL_INIT_COMMAND&#039; undeclared (first use in this function)
app_mysql.c:346: error: &#039;MYSQL_SET_CHARSET_NAME&#039; undeclared (first use in this function)
app_mysql.c:349: warning: implicit declaration of function &#039;mysql_real_connect&#039;
app_mysql.c:359: warning: implicit declaration of function &#039;mysql_errno&#039;
app_mysql.c:359: warning: implicit declaration of function &#039;mysql_error&#039;
app_mysql.c:359: warning: format &#039;%s&#039; expects type &#039;char *&#039;, but argument 10 has type &#039;int&#039;
app_mysql.c: In function &#039;aMYSQL_query&#039;:
app_mysql.c:375: error: &#039;MYSQL&#039; undeclared (first use in this function)
app_mysql.c:375: error: &#039;mysql&#039; undeclared (first use in this function)
app_mysql.c:376: error: &#039;MYSQL_RES&#039; undeclared (first use in this function)
app_mysql.c:376: error: &#039;mysqlres&#039; undeclared (first use in this function)
app_mysql.c:392: warning: implicit declaration of function &#039;mysql_query&#039;
app_mysql.c:393: warning: format &#039;%s&#039; expects type &#039;char *&#039;, but argument 6 has type &#039;int&#039;
app_mysql.c:397: warning: implicit declaration of function &#039;mysql_store_result&#039;
app_mysql.c:400: warning: implicit declaration of function &#039;mysql_field_count&#039;
app_mysql.c: In function &#039;aMYSQL_nextresult&#039;:
app_mysql.c:410: error: &#039;MYSQL&#039; undeclared (first use in this function)
app_mysql.c:410: error: &#039;mysql&#039; undeclared (first use in this function)
app_mysql.c:411: error: &#039;MYSQL_RES&#039; undeclared (first use in this function)
app_mysql.c:411: error: &#039;mysqlres&#039; undeclared (first use in this function)
app_mysql.c:432: warning: implicit declaration of function &#039;mysql_more_results&#039;
app_mysql.c:433: warning: implicit declaration of function &#039;mysql_next_result&#039;
app_mysql.c: In function &#039;aMYSQL_fetch&#039;:
app_mysql.c:450: error: &#039;MYSQL_RES&#039; undeclared (first use in this function)
app_mysql.c:450: error: &#039;mysqlres&#039; undeclared (first use in this function)
app_mysql.c:451: error: &#039;MYSQL_ROW&#039; undeclared (first use in this function)
app_mysql.c:451: error: expected &#039;;&#039; before &#039;mysqlrow&#039;
app_mysql.c:468: error: &#039;mysqlrow&#039; undeclared (first use in this function)
app_mysql.c:468: warning: implicit declaration of function &#039;mysql_fetch_row&#039;
app_mysql.c:469: warning: implicit declaration of function &#039;mysql_num_fields&#039;
app_mysql.c: In function &#039;aMYSQL_clear&#039;:
app_mysql.c:502: error: &#039;MYSQL_RES&#039; undeclared (first use in this function)
app_mysql.c:502: error: &#039;mysqlres&#039; undeclared (first use in this function)
app_mysql.c: In function &#039;aMYSQL_disconnect&#039;:
app_mysql.c:519: error: &#039;MYSQL&#039; undeclared (first use in this function)
app_mysql.c:519: error: &#039;mysql&#039; undeclared (first use in this function)
make[4]: *** [app_mysql.o] Error 1
make[4]: Leaving directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/addons&#039;
make[3]: *** [addons] Error 2
make[3]: Leaving directory `/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3&#039;
make[2]: *** [/opt/tmp/openwrt-svn-trunk/build_dir/target-arm_v5te_uClibc-0.9.32_eabi/asterisk-1.8.2.3/.built] Error 2</code></pre></div><p>I looked around while still in the <em>make menuconfig</em> and did not see any entry to disable the app_mysql.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p129213">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						22 Feb 2011, 18:32					</div>
				</div>
				<div class="post-content content">
					<p>ok, you can disable it for your build in:</p><p><a href="https://dev.openwrt.org/browser/packages/net/asterisk-1.8.x/patches/200-menuselect_tree_addons.patch">https://dev.openwrt.org/browser/package â€¦ dons.patch</a></p><p>in the mean time I&#039;ll try to fix the include path</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p129220">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						22 Feb 2011, 19:14					</div>
				</div>
				<div class="post-content content">
					<p>Hans,</p><p>Thanks for you quick response. I will just disable the build for the time being and wait for the new patch9s).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p129245">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						22 Feb 2011, 23:32					</div>
				</div>
				<div class="post-content content">
					<p>fixed by adding a mysql asterisk package in <a href="https://dev.openwrt.org/changeset/25664">https://dev.openwrt.org/changeset/25664</a></p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p129262">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						23 Feb 2011, 05:22					</div>
				</div>
				<div class="post-content content">
					<p>Hans,</p><p>Many thanks for your quick responses with fixes.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>