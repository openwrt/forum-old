<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Converting .bin to .trx</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p224009">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Swiss</div>
					<div class="post-datetime">
						29 Jan 2014, 07:38					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t understand what this means: dd if=image.bin of=image.trx bs=32 skip=1<br />Where do I put this command? is it a command?&nbsp; Others said to open the bin in a hex editor and strip 32 bytes off... what?<br />Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224010">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						29 Jan 2014, 08:02					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://en.wikipedia.org/wiki/Dd_(Unix)">http://en.wikipedia.org/wiki/Dd_(Unix)</a><br /><a href="http://www.gnu.org/software/coreutils/manual/html_node/dd-invocation.html">http://www.gnu.org/software/coreutils/m … ation.html</a></p><p><a href="http://en.wikipedia.org/wiki/Linux_console">http://en.wikipedia.org/wiki/Linux_console</a></p><p>.bin files may contain vendor specific header and then standard trx.<br />Default CFE expects trx<br />Vendor GUI usually expects bin</p><p>What GUI does is checking bin header (verify firmware file matches device), then extracting trx (by stripping 32B header) and installing it.<br />If you want to use firmware with CFE directly (not with vendor&#039;s firmware GUI), you may need to remove the header.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224012">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Swiss</div>
					<div class="post-datetime">
						29 Jan 2014, 08:08					</div>
				</div>
				<div class="post-content content">
					<p>Thanks.. Yeah I know that part, but I don&#039;t know how to actually do it.&nbsp; What do I do exactly within a hex editor to remove 32 bytes?&nbsp; Where do I put dd if=image.bin of=image.trx bs=32 skip=1?&nbsp; I don&#039;t have linux.&nbsp; I don&#039;t know what that means to remove the header.<br />Just trying to rollback to stock firmware, can&#039;t do it with .bin and have to make it .trx.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224013">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						29 Jan 2014, 08:35					</div>
				</div>
				<div class="post-content content">
					<p>Google for &quot;dd windows&quot; or install Cygwin.<br />I won&#039;t provide you howto for your favorite HEX editor.</p>											<p class="post-edited">(Last edited by <strong>Zajec</strong> on 29 Jan 2014, 08:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224014">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Swiss</div>
					<div class="post-datetime">
						29 Jan 2014, 08:54					</div>
				</div>
				<div class="post-content content">
					<p>Already got one of those and it kept asking for a floppy.. <br />Even if I get one I have no idea what to do with it like I already said.&nbsp; I have a hex editor already but don&#039;t know what to do with it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224017">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">RooTDoWN</div>
					<div class="post-datetime">
						29 Jan 2014, 09:46					</div>
				</div>
				<div class="post-content content">
					<p>&quot;dd if=image.bin of=image.trx bs=32 skip=1&quot; means copy image.bin to image.trx, except the first 32bytes of image.bin.</p><p>bs=32 skip=1 means skip first data block (skip=1) of 32 bytes (bs=32).</p><p>if you have a file called &quot;hello.txt&quot; with the content &quot;this is a test&quot; and put this command in a linux shell:<br />dd if=hello.txt of=bye.txt bs=4 skip=1</p><p>it will create the file &quot;bye.txt&quot; with the content &quot; is a test&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224021">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Swiss</div>
					<div class="post-datetime">
						29 Jan 2014, 10:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>RooTDoWN wrote:</cite><blockquote><p>&quot;dd if=image.bin of=image.trx bs=32 skip=1&quot; means copy image.bin to image.trx, except the first 32bytes of image.bin.</p><p>bs=32 skip=1 means skip first data block (skip=1) of 32 bytes (bs=32).</p><p>if you have a file called &quot;hello.txt&quot; with the content &quot;this is a test&quot; and put this command in a linux shell:<br />dd if=hello.txt of=bye.txt bs=4 skip=1</p><p>it will create the file &quot;bye.txt&quot; with the content &quot; is a test&quot;.</p></blockquote></div><p>Ok... how do I use a linux shell from windows?&nbsp; Thanks for the information, but I need steps.&nbsp; My router is now bricked, or appears to be anyways, so probably doesn&#039;t matter.&nbsp; Found a guide that said to use SCP to upload the firmware that way and run an execute.&nbsp; It started installing and then it stopped.&nbsp; Now my router gui is <a href="http://oi60.tinypic.com/24ccvtc.jpg">http://oi60.tinypic.com/24ccvtc.jpg</a><br />If I try to upload it just doesn&#039;t respond.&nbsp; Can get that page but can&#039;t actually ping it.</p><p>I started off with this guide: <a href="http://wiki.openwrt.org/toh/wd/n750">http://wiki.openwrt.org/toh/wd/n750</a><br />I found it from a review that suggested it helped with the frequent disconnects.&nbsp; I did those steps and then didn&#039;t have a UI.&nbsp; &nbsp; I didn&#039;t realize there would be 3 or 4 more pages about other things I had to do in order to use openwrt.&nbsp; Took hours to figure out how to get that up and by that point I just wanted to revert and couldn&#039;t because openwrt only upgrades fw with .trx, even though the openwrt I used was .bin.. dunno</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224024">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">RooTDoWN</div>
					<div class="post-datetime">
						29 Jan 2014, 11:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Swiss wrote:</cite><blockquote><p>Ok... how do I use a linux shell from windows?</p></blockquote></div><p>with cygwin or virtualbox.</p><p>but the easiest solution is edit the file with a hex-editor and delete the first 32 bytes.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224025">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Swiss</div>
					<div class="post-datetime">
						29 Jan 2014, 11:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>RooTDoWN wrote:</cite><blockquote><div class="quotebox"><cite>Swiss wrote:</cite><blockquote><p>Ok... how do I use a linux shell from windows?</p></blockquote></div><p>with cygwin or virtualbox.</p><p>but the easiest solution is edit the file with a hex-editor and delete the first 32 bytes.</p></blockquote></div><p>Is it really that hard for you to be specific?&nbsp; I&#039;m not being mean or something, I don&#039;t get it.</p><p>My first post: &quot;Others said to open the bin in a hex editor and strip 32 bytes off... what?&quot;</p><p>My second post: &quot;Thanks.. Yeah I know that part, but I don&#039;t know how to actually do it.&nbsp; What do I do exactly within a hex editor to remove 32 bytes?&quot;</p><p>My third post: &quot;I have a hex editor already but don&#039;t know what to do with it.&quot;</p><p>My fourth post: &quot;Ok... how do I use a linux shell from windows?&nbsp; Thanks for the information, but I need steps&quot;</p><p>To which you reply:<br /> &quot;with cygwin or virtualbox.<br />but the easiest solution is edit the file with a hex-editor and delete the first 32 bytes.&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224029">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">zloop</div>
					<div class="post-datetime">
						29 Jan 2014, 11:52					</div>
				</div>
				<div class="post-content content">
					<p>1. You did not read the links provided by zajec.</p><p>Why did I come for this conclusion?</p><div class="codebox"><pre><code>dd copies a file (from standard input to standard output, by default) with a changeable I/O block size, while optionally performing conversions on it. Synopses:

     dd [operand]...
     dd option

‘if=file’
    Read from file instead of standard input.
‘of=file’
    Write to file instead of standard output. Unless ‘conv=notrunc’ is given, dd truncates file to zero bytes (or the size specified with ‘seek=’). 

‘bs=bytes’
    Set both input and output block sizes to bytes. This makes dd read and write bytes per block, overriding any ‘ibs’ and ‘obs’ settings. In addition, if no data-transforming conv option is specified, input is copied to the output as soon as it&#039;s read, even if it is smaller than the block size. 

‘skip=n’
    Skip n ‘ibs’-byte blocks in the input file before copying. If ‘iflag=skip_bytes’ is specified, n is interpreted as a byte count rather than a block count. </code></pre></div><p>However: The dd tool is not available on Windows &quot;normally&quot;. You have to install additional Software to get dd.<br />The Cygwin Project provides it - read / download at <a href="http://cygwin.com/">http://cygwin.com/</a><br />OR<br />Installing the free VirtualBox program to setup a Virtual Machine (VM). In it you can install Linux and have access to dd. You can access the files that you made from inside the VM through many different ways (Shared Folders, FTP Server, send email to yourself ...)</p><br /><p>A Hex Editor is similar to a text editor.<br />Instead of text it shows the files binary code as hex.<br />Instead of TEXT you can edit the FIRMWARE BIN file for example.</p><p>So how to use it?<br />1. Open the file<br />2. Mark 32 bytes (1 byte is 8 bits = values from 0x00 to 0xFF so 32 x &quot;__&quot; )<br />3. Delete marked bytes<br />4. save file<br />5. Your file should now be 32 bytes smaller</p><p><a href="https://en.wikipedia.org/wiki/Hex_editor">https://en.wikipedia.org/wiki/Hex_editor</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p334377">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">kiliam80</div>
					<div class="post-datetime">
						13 Aug 2016, 22:09					</div>
				</div>
				<div class="post-content content">
					<p>Hi<br />I am having very hard time trying to convert my .bin file to .trx. I am following the steps but somehow it doesn&#039;t work, so I was wondering if one of you binary geniuses would be so kind and convert my .bin file into .trx so I can come back to the original firmware as OpenWrt didn&#039;t work for me. I would be so grateful. :DDDD</p><p>here is my .bin file <a href="http://www.ekspedycjamichal.pl/mr3420v2_pl_3_16_9_up_boot(150902)L850V.bin">http://www.ekspedycjamichal.pl/mr3420v2 … )L850V.bin</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p334405">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">stas2z</div>
					<div class="post-datetime">
						14 Aug 2016, 02:49					</div>
				</div>
				<div class="post-content content">
					<p>mr3420? you are at the wrong way</p><p>it&#039;s a tplink atheros based device and bin/trx stuf is not applicable to it<br />you need to cut boot part of this file to flash it via serial console or automate tftp recovery</p><p>so the way is similar, but not exact</p><p>dd if=orig.bin of=tplink.bin skip=257 bs=512<br />it means you need to cut 257*512 (131584) bytes from your firmware file</p><p>you can use gnu utils for windows bundle <a href="http://gnuwin32.sourceforge.net/downlinks/coreutils-bin-zip.php">http://gnuwin32.sourceforge.net/downlin … in-zip.php</a> to get <strong>dd</strong> app (dd.exe in yr case)</p><p>just rename your fw file to tplink bin and run command above from the command line (WIN+R -&gt; cmd -&gt; cd C:\your_folder_where_dd.exe_and_tplink.bin_are_stored\)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p334485">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">kiliam80</div>
					<div class="post-datetime">
						14 Aug 2016, 19:52					</div>
				</div>
				<div class="post-content content">
					<p>thank you very kindly stas2z<br />it worked like a charm <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>