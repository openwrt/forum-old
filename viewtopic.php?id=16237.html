<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Turning a wlan network into an Hotspot, but how?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p70589">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">seballa</div>
					<div class="post-datetime">
						7 Jul 2008, 14:11					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>My Situation: We have a small hotel and i&#039;am using a Speedport 701v and two Speedports 100xr (in a row as repeater) to allow our guest a free wlan connection. They have to get a wep key from me. So far so good, works fine.</p><p>problems:<br />1. I am conserned because I can only use WEP in repeater mode.<br />2. I have no possibility to prove that I am innocent if a guest for example downloads an movie illegal, because I cant see whos online at what time and how much bandwidththey did use.</p><p>Solutions<br />1. Setup a Liunx Server with a Hotspot Software (I probably could do it but a pc needs quite a lot of power if running 24/7)<br />2. my idea where I need help: use an OPENWRT Hotspot with Login: (I played around with a wrt54ap and managed to get OPENWRT up once so I should be able to come into the subject quickly I hope)</p><p>2.1 does the basic setup work?? INET--&gt;WRT54G--&gt;(probably inbetween 701v?)--&gt;Speedport100xr--&gt;Speedport100xr--&gt;User <br />2.2 is a hotspotsoftware secure enough to disable WEP (its hacked to easy anyway)<br />2.3 Can OpenWrt monitor the time and bandwidth usage of my guests<br />2.4 if those three points are answerd with yes: Which ono oft he 1000wrt54g&#039;s is the on I want and do i want white russian or kamikaze? Important for me of course is to have a running system which works stable when setted up probably.</p><p>Thanks a lot</p><p>Seballa</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70622">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Tex-Twil</div>
					<div class="post-datetime">
						7 Jul 2008, 22:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>seballa wrote:</cite><blockquote><p>Hello,</p></blockquote></div><p>Hi and welcome <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>I think I will give you only partial answers but better that nothing.</p><div class="quotebox"><cite>seballa wrote:</cite><blockquote><p>1. I am conserned because I can only use WEP in repeater mode.</p></blockquote></div><p>why ? Is it because of hardware limitation of your Acess Points ?</p><div class="quotebox"><cite>seballa wrote:</cite><blockquote><p>2. I have no possibility to prove that I am innocent if a guest for example downloads an movie illegal, because I cant see whos online at what time and how much bandwidththey did use.</p></blockquote></div><p>I guess this topic depends on the country you live in. I fear that no matter what you do, the owner of the Internet subscription is always legally responsible of what&#039;s going on. </p><br /><div class="quotebox"><cite>seballa wrote:</cite><blockquote><p>2.2 is a hotspotsoftware secure enough to disable WEP (its hacked to easy anyway)</p></blockquote></div><p>You are right WEP originally stands for Wire Equivalent Privacy but&nbsp; should be&nbsp; renamed to Weak Encryption Protocol <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> Hotspots <strong>that don&#039;t use any encryption</strong> are of course even &quot;worse&quot;.&nbsp; I won&#039;t go into details but basically the dangers are<br />- For a legitimate client :&nbsp; its traffic goes through the air without any encryption so an attacker can steal his data easily. There is just no Confidentiality Integrity Authenticity of data <br />- For the AP&#039;s owner (you) : it is &quot;easy&quot; to steal a legitimate client&#039;s session and access the net. On a hotspot (or captive portal) a client&#039;s session is tracked by its IP or MAC address or both. In any case it is possible for an attacker to steal the session without being noticed.</p><br /><br /><div class="quotebox"><cite>seballa wrote:</cite><blockquote><p>2.3 Can OpenWrt monitor the time and bandwidth usage of my guests</p></blockquote></div><p>There are different possibilities and I will give you the one I&#039;ve just tried and which is simple and works. I used CoovaChilli (formally Chillispot) : <a href="http://coova.org/wiki/index.php/CoovaChilli">http://coova.org/wiki/index.php/CoovaChilli</a></p><p>Check this thread: <a href="http://forum.openwrt.org/viewtopic.php?id=16196">http://forum.openwrt.org/viewtopic.php?id=16196</a></p><p>What I like is that you can use a simple local file to store your users/passwords so you don&#039;t need to setup a Radius server which is often needed to by captive portals to authenticate and track the client&#039;s session (bandwitdh, connection time ...)</p><p>If you create an account on Covva&#039;s AAA page you will have an radius account. In theory, you can administrate your users there BUT (!!) the creation of users is kind of chaotic. I dont really undersand how they did it but it looks like you can give access to your network only to users which already have an account there. This means that only a owner of an access point can access your AP ... kind of wierd. </p><p>Nevertheless, what is great is that you can combine both possibilities: Have a local file on your openwrt with your users and track their connections data (accounting) on the coova radius server via the web admin !!<br />You can check my post on Covva&#039;s forum : <a href="http://coova.org/phpBB3/viewtopic.php?f=7&amp;t=817">http://coova.org/phpBB3/viewtopic.php?f=7&amp;t=817</a></p><p>Last but not least you can of course install a radius server (freeradius) on your openwrt. You will gain some advantages but it will be more complex to set up.</p><br /><div class="quotebox"><cite>seballa wrote:</cite><blockquote><p>2.1 does the basic setup work?? INET--&gt;WRT54G--&gt;(probably inbetween 701v?)--&gt;Speedport100xr--&gt;Speedport100xr--&gt;User</p></blockquote></div><p>All I said above, I&#039;ve tried it on a single openwrt but I don&#039;t know whether or not it is possible to set up in such a configuration.</p><br /><p>I also know the Coova provides a firmware for captive portals : CoovaAP.&nbsp; <a href="http://coova.org/wiki/index.php/CoovaAP">http://coova.org/wiki/index.php/CoovaAP</a> I&#039;ve never tried though.</p><br /><p>Another solution would be to use WPA2 Enterprise instead of using a captive portal.&nbsp; This is by far the more secure solution and not necessarily difficult to set up. Here again I have not (yet) experience with this <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> I wanted to try but there seems to be a (now fixed) bug for Atheros devices:<br /><a href="http://forum.openwrt.org/viewtopic.php?id=13298">http://forum.openwrt.org/viewtopic.php?id=13298</a></p><p>Btw you ask if you should use White Russian or Kamikaze. I would definitely go for kamikaze but I think it also depends on your hardware compatibility. A lot of people (me included) use a built version from the Kamikaze SVN which is more stable. </p><p>There also is a new official release planned for August <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Cheers,<br />Tex.</p>											<p class="post-edited">(Last edited by <strong>Tex-Twil</strong> on 7 Jul 2008, 22:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70623">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">seballa</div>
					<div class="post-datetime">
						7 Jul 2008, 23:54					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>thanks a lot for your reply! I was reading quite a lot about this today and decided, that i can do it although there is a lot to learn for me. I ordered a wrt54g (should be 3.1). We will see how far I get, but I think... no I know, I will need more help </p><div class="quotebox"><cite>Tex-Twil wrote:</cite><blockquote><p>why ? Is it because of hardware limitation of your Acess Points ?</p></blockquote></div><p>Yes, there are only proprietary solutions for this problem as far as i know there is no standart which makes WDS and WPA possible, My accesspoint has no option of WPA in Repeater mode nor have my Repeaters. </p><br /><div class="quotebox"><cite>Tex-Twil wrote:</cite><blockquote><p>it is &quot;easy&quot; to steal a legitimate client&#039;s session and access the net. On a hotspot (or captive portal) a client&#039;s session is tracked by its IP or MAC address or both. In any case it is possible for an attacker to steal the session without being noticed.</p></blockquote></div><p>I did&#039;t think about that. That means basically, that my wlan will remain unsecure</p><div class="quotebox"><cite>Tex-Twil wrote:</cite><blockquote><p>There are different possibilities and I will give you the one I&#039;ve just tried and which is simple and works. I used CoovaChilli (formally Chillispot) : <a href="http://coova.org/wiki/index.php/CoovaChilli">http://coova.org/wiki/index.php/CoovaChilli</a></p></blockquote></div><p>I will try that one. But does it means, that I am some how depending on their Radius, meaning if they stop the support or their server is down, i cant track my users? And is it a free service?? how is paying the server??</p><div class="quotebox"><cite>Tex-Twil wrote:</cite><blockquote><p>Last but not least you can of course install a radius server (freeradius) on your openwrt. You will gain some advantages but it will be more complex to set up.</p></blockquote></div><p>That is what I thought. I still might do this. The question is, how long will it take me and how difficult is setting up and the every day work, like adding users? </p><div class="quotebox"><cite>Tex-Twil wrote:</cite><blockquote><p>A lot of people (me included) use a built version from the Kamikaze SVN which is more stable.</p></blockquote></div><p>I never built anything so far probably the main reason is i never had to.&nbsp; I am messing arround quite some time now with mulinux, knoppix, kanotix and once openwrt on a WPA54g (wich I bricked during playing arround ;-)). But I am still working with MS on my working Computers and I HATE VI(and VI hates me I think). But anyway I am very motivated to get this hotspot running, and I am learning all the time.</p><p>Thanks </p><p>Seballa</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70638">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Tex-Twil</div>
					<div class="post-datetime">
						8 Jul 2008, 09:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>seballa wrote:</cite><blockquote><p>Hi,<br />Yes, there are only proprietary solutions for this problem as far as i know there is no standart which makes WDS and WPA possible, My accesspoint has no option of WPA in Repeater mode nor have my Repeaters.</p></blockquote></div><p>But it looks like it is possible with openwrt : <a href="http://wiki.openwrt.org/OpenWrtDocs/Configuration#head-3894daa2a32a60a1203afb0665137cf67546498e">http://wiki.openwrt.org/OpenWrtDocs/Con â€¦ f67546498e</a> I have no experience with this.</p><div class="quotebox"><cite>seballa wrote:</cite><blockquote><div class="quotebox"><cite>Tex-Twil wrote:</cite><blockquote><p>it is &quot;easy&quot; to steal a legitimate client&#039;s session and access the net. On a hotspot (or captive portal) a client&#039;s session is tracked by its IP or MAC address or both. In any case it is possible for an attacker to steal the session without being noticed.</p></blockquote></div><p>I did&#039;t think about that. That means basically, that my wlan will remain unsecure</p></blockquote></div><p>If your hotspot doesn&#039;t use encryption ... yes it is completely insecure. Though it is possible to use WPA/WPA2 + a hotspot configuration. In this case you would have to provide the WPA passphrase (PSK) <strong>plus</strong> the login/password credential to your clients. </p><div class="quotebox"><cite>seballa wrote:</cite><blockquote><div class="quotebox"><cite>Tex-Twil wrote:</cite><blockquote><p>There are different possibilities and I will give you the one I&#039;ve just tried and which is simple and works. I used CoovaChilli (formally Chillispot) : <a href="http://coova.org/wiki/index.php/CoovaChilli">http://coova.org/wiki/index.php/CoovaChilli</a></p></blockquote></div><p>I will try that one. But does it means, that I am some how depending on their Radius, meaning if they stop the support or their server is down, i cant track my users? And is it a free service?? how is paying the server??</p></blockquote></div><p>That is exactly what I had on mind. It&#039;s a online service so you depend on it. Furthermore, by default the login page of the captive portal is also &quot;hosted&quot; by Coova. It is possible to either customize it with a local stored html template or store it locally. Yes it is free.</p><br /><div class="quotebox"><cite>seballa wrote:</cite><blockquote><div class="quotebox"><cite>Tex-Twil wrote:</cite><blockquote><p>Last but not least you can of course install a radius server (freeradius) on your openwrt. You will gain some advantages but it will be more complex to set up.</p></blockquote></div><p>That is what I thought. I still might do this. The question is, how long will it take me and how difficult is setting up and the every day work, like adding users?</p></blockquote></div><p>Once again there are different possibilities more or less complex. The radius it self can use different methods or &quot;modules&quot; to store users: simple text files, your unix /etc/passwd file, database such as mysql or postgres. Note that if you use the file based method I&#039;m not sure how does the &quot;accounting&quot; works. It is possible that in this case it is very limited.&nbsp; To add/delete users you just edit the file (vi <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> )</p><p>If you chose the database solution for the radius you get much more possibilities. Last weekend I tried to install freeradius and mysql&nbsp; on my Linux PC and use this web interface to administrate the users : <a href="http://daloradius.wiki.sourceforge.net">http://daloradius.wiki.sourceforge.net</a>/&nbsp; It looks great. I will try to install it on my openwrt and eventually write a small tutorial. </p><div class="quotebox"><cite>seballa wrote:</cite><blockquote><p>I never built anything so far probably the main reason is i never had to.&nbsp; I am messing arround quite some time now with mulinux, knoppix, kanotix and once openwrt on a WPA54g (wich I bricked during playing arround ;-)). But I am still working with MS on my working Computers and I HATE VI(and VI hates me I think). But anyway I am very motivated to get this hotspot running, and I am learning all the time.</p></blockquote></div><p>It is not difficult but it does take some time. Keep on mind that in this case you have to have LInux distrib to build openwrt on. You also have to build all the packages you will need by your self since the ones available via the official mirror will not be compatible with a system built from SVN. Ii is not difficult cos you just have to choose what you need via the &quot;menuconfig&quot;. If you forget to build a package that you need later, you just build it and that&#039;s it.</p><p>The thing is that once you have everything build you have to set up your own repository for your packages where you will install them from. You can put it on a HTTP server where ever you want (local or remote) or, if you have a USB storage in your openwrt, store them on the USB. The latter is the option I use. Check the wiki for USB installation.</p><br /><p>So as you can see there are different possibilities more or less complex. If you need a quick working solution, maybe it is a good idea to start with something simple: official kamikaze 7.09 + chillispot + file based authentication. At this point you have what you need. And after you can start playing around with radius. If you are scared to screw up something on your openwrt, you can experiment with freeradius on a Linux PC . I now use Linux Mint now which is a &quot;more user friendly&quot; Ubuntu/Kubuntu distribution. <a href="http://www.linuxmint.com">http://www.linuxmint.com</a>/&nbsp; When you are more familiar with it, give it a try on openwrt. Or just go ahead and install it directly on openwrt it is not a big deal. Btw you can you vim instead if vi it is &quot;vi improved&quot; <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Regards,<br />Tex</p>											<p class="post-edited">(Last edited by <strong>Tex-Twil</strong> on 8 Jul 2008, 09:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70774">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Tex-Twil</div>
					<div class="post-datetime">
						11 Jul 2008, 14:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Tex-Twil wrote:</cite><blockquote><div class="quotebox"><cite>seballa wrote:</cite><blockquote><p>2. I have no possibility to prove that I am innocent if a guest for example downloads an movie illegal, because I cant see whos online at what time and how much bandwidththey did use.</p></blockquote></div><p>I guess this topic depends on the country you live in. I fear that no matter what you do, the owner of the Internet subscription is always legally responsible of what&#039;s going on.</p></blockquote></div><p>Hi, again<br />I&#039;ve just read this article about the legal conditions in Germany :<br /><a href="http://news.slashdot.org/news/08/07/11/0346233.shtml">http://news.slashdot.org/news/08/07/11/0346233.shtml</a></p><p>Tex</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70784">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">seballa</div>
					<div class="post-datetime">
						11 Jul 2008, 18:55					</div>
				</div>
				<div class="post-content content">
					<p>Hi</p><p>thanks for the link.</p><p>In the meantime I started to get things done.</p><p>- I have a AsusWL500GP now<br />- I managed to flash my device with 7.09 precompiled<br />- I managed to config the network to have internet acess over my existing router by ssh<br />- I installed webif, cillispot and freeradius (I opened a new thread for that one because one packaged is missing in backports)</p><p>I will start to configure everything in the next couple of days. I am quite busy at the WE so I am not sure if can spend much time</p><p>Thanks<br />Seballa</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70808">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Tex-Twil</div>
					<div class="post-datetime">
						12 Jul 2008, 14:47					</div>
				</div>
				<div class="post-content content">
					<p>ok.<br />I also have a 500gp (but with an Atheros wlan card).</p><p>Let me know if you are stuck somewhere, I&#039;ll help if I can.</p><p>Tex</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>