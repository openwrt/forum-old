<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Is the RE450 now supported?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 31 Mar 2018 and 7 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 4</div><nav><ul><li><a href="viewtopic.php%3Fid=63975&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=63975&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=63975&amp;p=4.html">4</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p342640">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">grodders</div>
					<div class="post-datetime">
						31 Oct 2016, 17:51					</div>
				</div>
				<div class="post-content content">
					<p>Hey all, have been following this thread for a couple of weeks now. I was able to build an image successfully (greater than 4MB too) but not able to flash via WebUI. I made the mistake of upgrading stock/original firmware from the one shipped, which was dated back in 2015, same version as joaopaulo.mello has on this second unit.</p><p>I have the EU unit, V1 same as joaopaulo.mello, however, all 3 firmwares on TP-Link site will error an OpenWRT image. I also attempted to build their sources, successful in that, but the same Checksum Error flashing through WebUI. Currently running the 1.0.0 Build 20160727 Rel. 63203 firmware.</p><p>Does anyone know if this new u-boot in the 2016 firmwares will lock out (go brick) with an OpenWRT image if I go Serial/TFTP?</p><p>It&#039;s my guess that the newer firmwares have bundled some lock out, as on the UK site they state;</p><p><em>The EU firmware was specialized for CE certification and can’t be downgraded to other version, please click here for choosing your region and selecting the most suitable firmware version to upgrade.<br /></em></p><p>This is a binwalk from their sources firmware; re450_eu-flash-ver1-0-0-P1[20161003-rel79314].bin</p><div class="codebox"><pre><code>14608         0x3910          U-Boot version string, &quot;U-Boot 1.1.4 (Oct  3 2016 - 21:43:37)&quot;
15952         0x3E50          uImage header, header size: 64 bytes, header CRC: 0x38455E33, created: Mon Oct  3 21:43:39 2016, image size: 38353 bytes, Data Address: 0x80010000, Entry Point: 0x80010000, data CRC: 0x27EAADED, OS: Linux, CPU: MIPS, image type: Firmware Image, compression type: lzma, image name: &quot;u-boot image&quot;
16016         0x3E90          LZMA compressed data, properties: 0x5D, dictionary size: 33554432 bytes, uncompressed size: 100972 bytes
131072        0x20000         TP-Link firmware header, firmware version: 0.0.0, image version: &quot;ver. 1.0&quot;, product ID: 0x0, product version: 0, kernel load address: 0x80002000, kernel entry point: 0x801930C0, kernel offset: 512, kernel length: 771359, rootfs offset: 0, rootfs length: 0, bootloader offset: 0, bootloader length: 0
131584        0x20200         LZMA compressed data, properties: 0x5D, dictionary size: 33554432 bytes, uncompressed size: 2207564 bytes
917504        0xE0000         Squashfs filesystem, little endian, version 4.0, compression:lzma, size: 3218894 bytes,  562 inodes, blocksize: 1048576 bytes, created: Mon Oct  3 22:01:44 2016</code></pre></div><p>Which is the flash image, the upgrade image; re450_eu-up-ver1-0-0-P1\[20161003-rel79314\].bin </p><div class="codebox"><pre><code>22820         0x5924          U-Boot version string, &quot;U-Boot 1.1.4 (Oct  3 2016 - 21:43:37)&quot;
24164         0x5E64          uImage header, header size: 64 bytes, header CRC: 0x38455E33, created: Mon Oct  3 21:43:39 2016, image size: 38353 bytes, Data Address: 0x80010000, Entry Point: 0x80010000, data CRC: 0x27EAADED, OS: Linux, CPU: MIPS, image type: Firmware Image, compression type: lzma, image name: &quot;u-boot image&quot;
24228         0x5EA4          LZMA compressed data, properties: 0x5D, dictionary size: 33554432 bytes, uncompressed size: 100972 bytes
62582         0xF476          TP-Link firmware header, firmware version: 0.0.0, image version: &quot;ver. 1.0&quot;, product ID: 0x0, product version: 0, kernel load address: 0x80002000, kernel entry point: 0x801930C0, kernel offset: 512, kernel length: 771359, rootfs offset: 0, rootfs length: 0, bootloader offset: 0, bootloader length: 0
63094         0xF676          LZMA compressed data, properties: 0x5D, dictionary size: 33554432 bytes, uncompressed size: 2207564 bytes
834454        0xCBB96         Squashfs filesystem, little endian, version 4.0, compression:lzma, size: 3218894 bytes,  562 inodes, blocksize: 1048576 bytes, created: Mon Oct  3 22:01:44 2016</code></pre></div>											<p class="post-edited">(Last edited by <strong>grodders</strong> on 31 Oct 2016, 17:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342650">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">radekdostal</div>
					<div class="post-datetime">
						31 Oct 2016, 19:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>grodders wrote:</cite><blockquote><p>Does anyone know if this new u-boot in the 2016 firmwares will lock out (go brick) with an OpenWRT image if I go Serial/TFTP?</p></blockquote></div><p>1) I have booted OpenWRT with EU firmware from <strong>May 30th</strong> using UART/TFTP, but I have not flashed it yet. I only made a build with initramfs and booted that. Worked absolutely fine.</p><p>2) If somebody is interested, I re-based the patches from mailing list on top of recent LEDE version, see my github for patches: github.com/dasty/lede-source/commits/TP-RE450 with initramfs this works well (including 4.4 kernel), but have not tried to flash it yet (only tested using initramfs). Please be aware the branch is still work in progress.</p><p>3) I have also managed to get quite an old firmware re450_eu-up-ver1-0-0-P1[20150611-rel60542].bin, which is even older than the one joaopaulo.mello used. If interested here is its binwalk:</p><div class="codebox"><pre><code>DECIMAL       HEXADECIMAL     DESCRIPTION
--------------------------------------------------------------------------------
22820         0x5924          U-Boot version string, &quot;U-Boot 1.1.4-gedb11d65-dirty (Jun 11 2015 - 16:40:54)&quot;
22884         0x5964          CRC32 polynomial table, big endian
24180         0x5E74          uImage header, header size: 64 bytes, header CRC: 0xBF80DE71, created: 2015-06-11 08:40:54, image size: 39492 bytes, Data Address: 0x80010000, Entry Point: 0x80010000, data CRC: 0xDF8B1D0C, OS: Linux, CPU: MIPS, image type: Firmware Image, compression type: lzma, image name: &quot;u-boot image&quot;
24244         0x5EB4          LZMA compressed data, properties: 0x5D, dictionary size: 33554432 bytes, uncompressed size: 105244 bytes
63737         0xF8F9          TP-Link firmware header, firmware version: 0.0.0, image version: &quot;&quot;, product ID: 0x0, product version: 0, kernel load address: 0x0, kernel entry point: 0x80002000, kernel offset: 0, kernel length: 512, rootfs offset: 771467, rootfs length: 0, bootloader offset: 0, bootloader length: 0
64249         0xFAF9          LZMA compressed data, properties: 0x5D, dictionary size: 33554432 bytes, uncompressed size: 2207564 bytes
835717        0xCC085         Squashfs filesystem, little endian, version 4.0, compression:lzma, size: 3231393 bytes, 563 inodes, blocksize: 1048576 bytes, created: 2015-06-11 08:48:59</code></pre></div>											<p class="post-edited">(Last edited by <strong>radekdostal</strong> on 31 Oct 2016, 19:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342863">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">pr0f</div>
					<div class="post-datetime">
						2 Nov 2016, 23:15					</div>
				</div>
				<div class="post-content content">
					<p>Is openwrt running stable and smoothly on your RE450s?&nbsp; Any issues?</p><p>Just patched and compiled git checkout c3161b06c706b65d66d6ae443d4549fc942ebc97 from Jan 7 without problems.&nbsp; Would be ready to flash...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342868">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">joaopaulo.mello</div>
					<div class="post-datetime">
						3 Nov 2016, 00:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pr0f wrote:</cite><blockquote><p>Is openwrt running stable and smoothly on your RE450s?&nbsp; Any issues?</p><p>Just patched and compiled git checkout c3161b06c706b65d66d6ae443d4549fc942ebc97 from Jan 7 without problems.&nbsp; Would be ready to flash...</p></blockquote></div><p>At least for me it is. Buuuut I&#039;m using only as a AP, not routing. The router it&#039;s a OpenWRT eletrikR4in running in a Supermicro atom server.<br />I&#039;m still struggling with buildroot to generate a 8MB root partition, I&#039;m stuck with 4MB and I&#039;m afraid to break something messing the things up, still waiting for someone with a hint on how to solve this.<br />About stability: First unit is running with heavy traffic for one month now without any problems, no reboots, no crashes.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343055">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">Heinz</div>
					<div class="post-datetime">
						4 Nov 2016, 22:59					</div>
				</div>
				<div class="post-content content">
					<p>Hi @radekdostal<br />I try to building firmware from your github and make two patches:<br />one important: fix build sysupgrade image: <a href="ftp://tplink-forum.pl/temp/sysupgrade.patch">ftp://tplink-forum.pl/temp/sysupgrade.patch</a><br />second: Renaming LED accordance with the standard: <a href="ftp://tplink-forum.pl/temp/ledfix.patch">ftp://tplink-forum.pl/temp/ledfix.patch</a></p><p>Flash firmware from webgui works OK ( have old UN wersion) <br />Sysupgrade LEDE - OK<br />and create back_to_stock.bin firmware to back to my old version ( i dont know if this work if You have EU firmware) - OK</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343291">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">hendrytjen</div>
					<div class="post-datetime">
						8 Nov 2016, 13:09					</div>
				</div>
				<div class="post-content content">
					<p>Hi. i just recently bought an RE450 UE-version, currently&nbsp; running 1.0.0 Build 20160727 Rel. 63203</p><p>Does anyone be so kind to share me a firmware to a stable OpenWRT ? <br />I kind of need the RE450 to work as AP mode with multiple VLAN, multi-SSID and mixed WPA-PSK + enterprise Authentication.</p><br /><p>thanks in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343373">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">nortii</div>
					<div class="post-datetime">
						9 Nov 2016, 19:54					</div>
				</div>
				<div class="post-content content">
					<p>thx guys, with all your patches i built an image and flashed it via webui (i have the EU-version), and everything just worked OOTB <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>any plans to upstream it? (to LEDE, i&#039;d suggest)</p>											<p class="post-edited">(Last edited by <strong>nortii</strong> on 9 Nov 2016, 19:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343391">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">joaopaulo.mello</div>
					<div class="post-datetime">
						10 Nov 2016, 00:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nortii wrote:</cite><blockquote><p>thx guys, with all your patches i built an image and flashed it via webui (i have the EU-version), and everything just worked OOTB <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>any plans to upstream it? (to LEDE, i&#039;d suggest)</p></blockquote></div><p>One question, did you end up with a 8 MB root partition?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343414">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">radekdostal</div>
					<div class="post-datetime">
						10 Nov 2016, 12:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Heinz wrote:</cite><blockquote><p>Hi @radekdostal<br />I try to building firmware from your github and make two patches:<br />one important: fix build sysupgrade image: <a href="ftp://tplink-forum.pl/temp/sysupgrade.patch">ftp://tplink-forum.pl/temp/sysupgrade.patch</a><br />second: Renaming LED accordance with the standard: <a href="ftp://tplink-forum.pl/temp/ledfix.patch">ftp://tplink-forum.pl/temp/ledfix.patch</a></p><p>Flash firmware from webgui works OK ( have old UN wersion) <br />Sysupgrade LEDE - OK<br />and create back_to_stock.bin firmware to back to my old version ( i dont know if this work if You have EU firmware) - OK</p></blockquote></div><p>Thank you very much for these patches, they seem to make sense and I am including them into my github branch as a fixups with credit given in the commit message. Unfortunately, the factory image is still not compatible with newer firmware (20160530) I have on my device. I get following messages in the console, when trying to flash it:</p><div class="codebox"><pre><code>[device_error: sysmgr_cfg_checkSupportList:950]00000000 NOT Match.


Firmware not supports, check failed.

[NM_Error](nm_checkUpdateContent) 00809: hardware version not support

[NM_Error](nm_buildUpgradeStruct) 00912: checkUpdateContent failed.


[utilities_error: swCheckFirm:292]build upgrade struct failed!

[Error]wrpSockGetReponseNew():  797 @ wmnetTcpRead recv header error[4]!
[Error]wrpDoSockCmdNew(): 1480 @ wrpSockGetReponse failed
[WRP][_wrpOpDo:75]Fail to do sock!
[Error]wrpSockGetReponseNew():  797 @ wmnetTcpRead recv header error[4]!
[Error]wrpDoSockCmdNew(): 1480 @ wrpSockGetReponse failed
[WRP][_wrpOpDo:75]Fail to do sock!
[Error]wrpSockGetReponseNew():  797 @ wmnetTcpRead recv header error[4]!
[Error]wrpDoSockCmdNew(): 1480 @ wrpSockGetReponse failed
[WRP][_wrpOpDo:75]Fail to do sock!</code></pre></div><br /><div class="quotebox"><cite>hendrytjen wrote:</cite><blockquote><p>Hi. i just recently bought an RE450 UE-version, currently&nbsp; running 1.0.0 Build 20160727 Rel. 63203</p><p>Does anyone be so kind to share me a firmware to a stable OpenWRT ?</p></blockquote></div><p>sorry, this does not exist yet. I can only post version for 2015 builds.</p><div class="quotebox"><cite>nortii wrote:</cite><blockquote><p>thx guys, with all your patches i built an image and flashed it via webui (i have the EU-version), and everything just worked OOTB <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>any plans to upstream it? (to LEDE, i&#039;d suggest)</p></blockquote></div><p>you are welcome, I would like to sort out an issue with flashing to newer firmware version, before sending it upstream, but if I do not have enough time I will send it to upstream (LEDE) as is.</p><p>BTW: do you remember which version of firmware you had originally when you did upgrade over webui?</p>											<p class="post-edited">(Last edited by <strong>radekdostal</strong> on 10 Nov 2016, 12:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343439">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">radekdostal</div>
					<div class="post-datetime">
						10 Nov 2016, 22:47					</div>
				</div>
				<div class="post-content content">
					<p>Hi Everybody,</p><p>I believe I may have figured out an issue with flashing to newer firmware versions such as (1.0.0 Build 20160727 Rel. 63203.) This seem to made the trick:</p><div class="codebox"><pre><code>diff --git a/tools/firmware-utils/src/tplink-safeloader.c b/tools/firmware-utils/src/tplink-safeloader.c
index bd70f73..843b0c1 100644
--- a/tools/firmware-utils/src/tplink-safeloader.c
+++ b/tools/firmware-utils/src/tplink-safeloader.c
@@ -247,7 +247,14 @@ static const char eap120_support_list[] =
 */
 static const char re450_support_list[] =
        &quot;SupportList:\r\n&quot;
-       &quot;{product_name:RE450,product_ver:1.0.0,special_id:00000000}\r\n&quot;;
+       &quot;{product_name:RE450,product_ver:1.0.0,special_id:00000000}\r\n&quot;
+       &quot;{product_name:RE450,product_ver:1.0.0,special_id:55530000}\r\n&quot;
+       &quot;{product_name:RE450,product_ver:1.0.0,special_id:45550000}\r\n&quot;
+       &quot;{product_name:RE450,product_ver:1.0.0,special_id:4A500000}\r\n&quot;
+       &quot;{product_name:RE450,product_ver:1.0.0,special_id:43410000}\r\n&quot;
+       &quot;{product_name:RE450,product_ver:1.0.0,special_id:41550000}\r\n&quot;
+       &quot;{product_name:RE450,product_ver:1.0.0,special_id:4B520000}\r\n&quot;
+       &quot;{product_name:RE450,product_ver:1.0.0,special_id:55534100}\r\n&quot;;
 
 #define error(_ret, _errno, _str, ...)                         \
        do {</code></pre></div><p>Everything is now pushed to github. I will give it a bit more testing before sending it upstream. If anybody is interested in giving me some &quot;tested-by&quot; statements that would be more than appreciated.</p><p>I also pushed out the binaries, for those who just want to give it a try: <a href="https://github.com/dasty/lede-source/releases/tag/RE450-20161110">https://github.com/dasty/lede-source/re … 0-20161110</a>. - NO WARRANTY!</p>											<p class="post-edited">(Last edited by <strong>radekdostal</strong> on 10 Nov 2016, 22:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344600">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">hendrytjen</div>
					<div class="post-datetime">
						23 Nov 2016, 16:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>radekdostal wrote:</cite><blockquote><p>Hi Everybody,</p><p>I believe I may have figured out an issue with flashing to newer firmware versions such as (1.0.0 Build 20160727 Rel. 63203.) This seem to made the trick:</p><p>Everything is now pushed to github. I will give it a bit more testing before sending it upstream. If anybody is interested in giving me some &quot;tested-by&quot; statements that would be more than appreciated.<br />I also pushed out the binaries, for those who just want to give it a try:............0-20161110. - NO WARRANTY!</p></blockquote></div><br /><br /><p>I&#039;d love to, but please bear with me. i am very very new to OpenWRT. <br />Looking at your github, which of the 3 files should i begin with ?<br />my device currently running 1.0.0 Build 20160727 Rel. 63203</p><p>thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344609">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">radekdostal</div>
					<div class="post-datetime">
						23 Nov 2016, 17:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hendrytjen wrote:</cite><blockquote><p>I&#039;d love to, but please bear with me. i am very very new to OpenWRT. <br />Looking at your github, which of the 3 files should i begin with ?<br />my device currently running 1.0.0 Build 20160727 Rel. 63203</p><p>thanks.</p></blockquote></div><p>you need the one which has factory in its name, but if you are a newbe, I am not sure it is best for you to start with a device, which is not yet officially supported. This is still work in progress with very limited testing and no WARRANTY.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344610">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">Heinz</div>
					<div class="post-datetime">
						23 Nov 2016, 17:24					</div>
				</div>
				<div class="post-content content">
					<p>@radekdostal try fix conflicted files on Your PR:<br />target/linux/ar71xx/base-files/etc/hotplug.d/firmware/11-ath10k-caldata<br />target/linux/ar71xx/files/arch/mips/ath79/Kconfig.openwrt</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344629">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">radekdostal</div>
					<div class="post-datetime">
						23 Nov 2016, 21:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Heinz wrote:</cite><blockquote><p>@radekdostal try fix conflicted files on Your PR:<br />target/linux/ar71xx/base-files/etc/hotplug.d/firmware/11-ath10k-caldata<br />target/linux/ar71xx/files/arch/mips/ath79/Kconfig.openwrt</p></blockquote></div><p>I just did that (again) - seems like that conflicts are appearing faster than maintainers picking the merge requests.</p><p>If anybody wants to also test the lastest version, I uploaded the binaries to <a href="https://github.com/dasty/lede-source/releases/tag/RE450-20161123">https://github.com/dasty/lede-source/re … 0-20161123</a></p>											<p class="post-edited">(Last edited by <strong>radekdostal</strong> on 23 Nov 2016, 21:13)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344774">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">brandst</div>
					<div class="post-datetime">
						25 Nov 2016, 18:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>radekdostal wrote:</cite><blockquote><p>If anybody wants to also test the lastest version</p></blockquote></div><p>Today I bought the RE450 (EU) and have found this forum post. I&#039;m testing the newest build from you and actually it&#039;s working pretty well. Do you plan regular releases?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344780">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">radekdostal</div>
					<div class="post-datetime">
						25 Nov 2016, 20:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>brandst wrote:</cite><blockquote><div class="quotebox"><cite>radekdostal wrote:</cite><blockquote><p>If anybody wants to also test the lastest version</p></blockquote></div><p>Today I bought the RE450 (EU) and have found this forum post. I&#039;m testing the newest build from you and actually it&#039;s working pretty well. Do you plan regular releases?</p></blockquote></div><p>I hope I will not have to make regular releases. If my code makes it upstream, it will be than released by LEDE directly.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344870">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">brandst</div>
					<div class="post-datetime">
						26 Nov 2016, 16:20					</div>
				</div>
				<div class="post-content content">
					<p>Good to know. I tested the throughout of your release and just getting 94MBit. I tried to go back to the original firmware with mtd write and it seems i bricked my device. On the serial i get the following. Have you tried to go back to original software yet? How can i fix this:</p><p>U-Boot 1.1.4 (Dec&nbsp; 3 2015 - 14:05:31)</p><p>ap135 - Scorpion 1.0</p><p>DRAM:&nbsp; 128 MB<br />Top of RAM usable for U-Boot at: 88000000<br />Reserving 133k for U-Boot at: 87fdc000<br />Reserving 192k for malloc() at: 87fac000<br />Reserving 44 Bytes for Board Info at: 87fabfd4<br />Reserving 36 Bytes for Global Data at: 87fabfb0<br />Reserving 128k for boot params() at: 87f8bfb0<br />Stack Pointer at: 87f8bf98<br />Now running in RAM - U-Boot at: 87fdc000<br />Flash Manuf Id 0xef, DeviceId0 0x40, DeviceId1 0x17<br />flash size 16MB, sector count = 256<br />Flash: 16 MB<br />Using default environment</p><p>In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;ath_gmac_enet_initialize...<br />athrs_sgmii_res_cal: cal value = 0xe<br />No valid address in Flash. Using fixed address<br />Scorpion&nbsp; ----&gt; AR8033 PHY *<br />AR8033 PHY init <br />eth0: 00:03:7f:09:0b:ad<br />eth0 up<br />eth0<br />Setting 0x18116290 to 0x58b0214f<br />Autobooting in 1 seconds<br />## Booting image at 9f020000 ...<br />&nbsp; &nbsp;Uncompressing Kernel Image ... Stream with EOS marker is not supportedLZMA ERROR 1 - must RESET board to recover</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344902">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">radekdostal</div>
					<div class="post-datetime">
						26 Nov 2016, 18:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>brandst wrote:</cite><blockquote><p>Good to know. I tested the throughout of your release and just getting 94MBit. I tried to go back to the original firmware with mtd write and it seems i bricked my device. On the serial i get the following. Have you tried to go back to original software yet? How can i fix this:</p></blockquote></div><p>1) I have not tried going back to the original firmware. </p><p>2) Please be aware, that original firmware and LEDE firmware have different partition layout - LEDE kernel is much bigger than original one. On the other hand as kernel partition is bigger, if you used the LEDE partition layout when flashing it back it should get stuck at corrupted rootfs and not so early.</p><p>3) As you have serial available I would recommend booting initramfs over TFTP with hacked in original partition layout &quot;mtdparts=spi0.0:128k(u-boot),768k(kernel),5248k(rootfs),1984k(config),64k(art)&quot; and than flashing back kernel, rootfs and config. I make a backup of RE450_V1_160530 if you need one.</p><p>Best greetings from Vienna,<br />Radek</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344908">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">pr0f</div>
					<div class="post-datetime">
						26 Nov 2016, 19:09					</div>
				</div>
				<div class="post-content content">
					<p>I diffed the TP-RE450 and master branches of radekdostals git to look through the modifications. Then applied this patch to the up-to-date LEDE git. Compiled including luci, and flashed two brand-new TP-RE450 without any problems. Running 7 and 15 days now. Connects at Tx rate up to 1300. <br />One minor bug I came across: ntpd requires numeric IP addresses.<br />A cron job turns the leds off at night :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344909">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">brandst</div>
					<div class="post-datetime">
						26 Nov 2016, 19:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>radekdostal wrote:</cite><blockquote><div class="quotebox"><cite>brandst wrote:</cite><blockquote><p>Good to know. I tested the throughout of your release and just getting 94MBit. I tried to go back to the original firmware with mtd write and it seems i bricked my device. On the serial i get the following. Have you tried to go back to original software yet? How can i fix this:</p></blockquote></div><p>1) I have not tried going back to the original firmware. </p><p>2) Please be aware, that original firmware and LEDE firmware have different partition layout - LEDE kernel is much bigger than original one. On the other hand as kernel partition is bigger, if you used the LEDE partition layout when flashing it back it should get stuck at corrupted rootfs and not so early.</p><p>3) As you have serial available I would recommend booting initramfs over TFTP with hacked in original partition layout &quot;mtdparts=spi0.0:128k(u-boot),768k(kernel),5248k(rootfs),1984k(config),64k(art)&quot; and than flashing back kernel, rootfs and config. I make a backup of RE450_V1_160530 if you need one.</p><p>Best greetings from Vienna,<br />Radek</p></blockquote></div><p>Thanks Radek,</p><p>that would be very helpful. Nevertheless it seem that I have bricked my device - I tried to recover it with your latest release too, but no go. I think your way could be the key - can you guide me:</p><p>scorpion&gt; setenv ipaddr 192.168.2.6<br />scorpion&gt; setenv serverip 192.168.2.103<br />scorpion&gt; tftpboot 0x81000000 lede-re450.bin<br />Trying eth0<br />Checking Link: Up<br />Checking Duplex: Full<br />Checking Speed 1000BaseT<br />Using eth0 device<br />TFTP from server 192.168.2.103; our IP address is 192.168.2.6<br />Filename &#039;lede-re450.bin&#039;.<br />Load address: 0x81000000<br />Loading: #################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#################################################################<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;###############################################<br />done<br />Bytes transferred = 3564540 (3663fc hex)<br />scorpion&gt; erase 0x9f020000 +3663fc<br />Erase Flash from 0x9f020000 to 0x9f38ffff in Bank # 1 <br />First 0x2 last 0x38 sector size 0x10000<br />&nbsp; 56<br />Erased 55 sectors<br />scorpion&gt; cp.b 0x81000000 0x9f020000 0x3663fc<br />Copy to Flash... write addr: 9f020000<br />done<br />scorpion&gt; bootm 9f020000<br />Unknown command &#039;bootm&#039; - try &#039;help&#039;<br />scorpion&gt; bootm 9f020000<br />## Booting image at 9f020000 ...<br />&nbsp; &nbsp;Uncompressing Kernel Image ... Stream with EOS marker is not supportedLZMA ERROR 1 - must RESET board to recover</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344914">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">radekdostal</div>
					<div class="post-datetime">
						26 Nov 2016, 20:03					</div>
				</div>
				<div class="post-content content">
					<p>1) Download <a href="https://github.com/dasty/lede-source/releases/download/RE450-20161123/lede-ar71xx-generic-re450-initramfs-kernel.bin">https://github.com/dasty/lede-source/re … kernel.bin</a> and put it to your tftp boot directory</p><p>2) Than in your u-boot just execute<br /></p><div class="codebox"><pre><code>tftp 0x87000000 lede-ar71xx-generic-re450-initramfs-kernel.bin
bootm 0x87000000</code></pre></div><p>3) this should boot things directly from tftp without touching flash.</p><p>=== additionally couple of questions ===</p><p>Q1: what is lede-re450.bin ?</p><p>Q2: In which mode you operated your TPLINK when you measured that 94mbps throughput? I noticed that you had relatively old version of u-boot flashed and at that time AP mode maybe was not yet supported by TP-LINK. All my test I have done were in AP mode not in the repeater mode.</p>											<p class="post-edited">(Last edited by <strong>radekdostal</strong> on 26 Nov 2016, 20:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344916">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">Heinz</div>
					<div class="post-datetime">
						26 Nov 2016, 20:11					</div>
				</div>
				<div class="post-content content">
					<p>@brandst check my file: <a href="ftp://tplink-forum.pl/temp/re450_back_to_stock.bin">ftp://tplink-forum.pl/temp/re450_back_to_stock.bin</a></p><p>or use LEDE sysupgrade image.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344927">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">brandst</div>
					<div class="post-datetime">
						26 Nov 2016, 21:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Heinz wrote:</cite><blockquote><p>@brandst check my file: <a href="ftp://tplink-forum.pl/temp/re450_back_to_stock.bin">ftp://tplink-forum.pl/temp/re450_back_to_stock.bin</a></p><p>or use LEDE sysupgrade image.</p></blockquote></div><p>Works - but I cannot login - did you change the default admin password?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344930">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">Heinz</div>
					<div class="post-datetime">
						26 Nov 2016, 21:50					</div>
				</div>
				<div class="post-content content">
					<p>No. Try reset firmware to default or use Your old login and password, because lede not erase settings from factory firmware.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344931">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">brandst</div>
					<div class="post-datetime">
						26 Nov 2016, 21:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Heinz wrote:</cite><blockquote><p>No. Try reset firmware to default or use Your old login and password, because lede not erase settings from factory firmware.</p></blockquote></div><br /><p>I just did that - had forgotten it :-) Thanks for all your help.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 2 of 4</div><nav><ul><li><a href="viewtopic.php%3Fid=63975&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=63975&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=63975&amp;p=4.html">4</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>