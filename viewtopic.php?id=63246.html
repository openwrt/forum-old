<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Please help setting up VDSL on BT Home Hub 5a</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 9 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p314092">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">core2lee</div>
					<div class="post-datetime">
						9 Mar 2016, 09:35					</div>
				</div>
				<div class="post-content content">
					<p>Hi everyone; </p><p>So i have recently installed OpenWRT onto my BT Home Hub 5a and wish to use the internal VDSL modem to connect to my (Plusnet) FTTC/VDSL internet connection. </p><p>First of all, this is my config; </p><p>config vdsl &#039;dsl&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option annex &#039;b&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option firmware &#039;/lib/firmware/vdsl.bin&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option tone &#039;av&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option xfer_mode &#039;ptm&#039;</p><p>config interface &#039;wan&#039;<br />&nbsp; &nbsp;option proto &#039;pppoa&#039;<br />&nbsp; &nbsp;option username &#039;username@plusdsl.net&#039;<br />&nbsp; &nbsp;option password &#039;********&#039;<br />&nbsp; &nbsp;option encaps &#039;vc&#039;<br />&nbsp; &nbsp;option payload &#039;bridged&#039;<br />&nbsp; &nbsp;option atmdev &#039;0&#039;<br />&nbsp; &nbsp;option vci &#039;38&#039;<br />&nbsp; &nbsp;option vpi &#039;0&#039;<br />&nbsp; &nbsp;option ipv6 &#039;0&#039;</p><p><strong>A log read on this basically cycles the following; </strong></p><p>Tue Mar&nbsp; 8 09:16:15 2016 daemon.info pppd[22389]: Plugin pppoatm.so loaded.<br />Tue Mar&nbsp; 8 09:16:15 2016 daemon.info pppd[22389]: PPPoATM plugin_init<br />Tue Mar&nbsp; 8 09:16:15 2016 daemon.info pppd[22389]: PPPoATM setdevname_pppoatm - SUCCESS:0.0.38<br />Tue Mar&nbsp; 8 09:16:15 2016 daemon.notice pppd[22389]: pppd 2.4.7 started by root, uid 0<br />Tue Mar&nbsp; 8 09:16:15 2016 daemon.err pppd[22389]: connect(0.0.38): No such device<br />Tue Mar&nbsp; 8 09:16:15 2016 daemon.info pppd[22389]: Exit.<br />Tue Mar&nbsp; 8 09:16:15 2016 daemon.notice netifd: Interface &#039;wan&#039; is now down<br />Tue Mar&nbsp; 8 09:16:15 2016 daemon.notice netifd: Interface &#039;wan&#039; is setting up now<br />Tue Mar&nbsp; 8 09:16:15 2016 daemon.info pppd[22409]: Plugin pppoatm.so loaded.<br />Tue Mar&nbsp; 8 09:16:15 2016 daemon.info pppd[22409]: PPPoATM plugin_init<br />Tue Mar&nbsp; 8 09:16:15 2016 daemon.info pppd[22409]: PPPoATM setdevname_pppoatm - SUCCESS:0.0.38<br />Tue Mar&nbsp; 8 09:16:15 2016 daemon.notice pppd[22409]: pppd 2.4.7 started by root, uid 0<br />Tue Mar&nbsp; 8 09:16:15 2016 daemon.err pppd[22409]: connect(0.0.38): No such device<br />Tue Mar&nbsp; 8 09:16:15 2016 daemon.info pppd[22409]: Exit.</p><p><strong>And my line sync looks good; </strong></p><p>ATU-C Vendor ID:<br />ATU-C System Vendor ID:<br />Chipset:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Lantiq-VRX200 Unknown<br />Firmware Version:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5.7.4.3.0.6<br />API Version:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4.16.6.3<br />XTSE Capabilities:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2<br />Annex:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; B<br />Line Mode:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; G.993.2 (VDSL2)<br />Profile:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 17a<br />Line State:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;UP [0x801: showtime_tc_sync]<br />Forward Error Correction Seconds (FECS):&nbsp; Near: 137 / Far: 0<br />Errored seconds (ES):&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Near: 0 / Far: 0<br />Severely Errored Seconds (SES):&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Near: 0 / Far: 0<br />Loss of Signal Seconds (LOSS):&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Near: 0 / Far: 0<br />Unavailable Seconds (UAS):&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Near: 34 / Far: 34<br />Header Error Code Errors (HEC):&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Near: 0 / Far: 0<br />Non Pre-emtive CRC errors (CRC_P):&nbsp; &nbsp; &nbsp; &nbsp; Near: 0 / Far: 0<br />Pre-emtive CRC errors (CRCP_P):&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Near: 0 / Far: 0<br />Power Management Mode:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; L0 - Synchronized<br />Latency / Interleave Delay:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Down: Interleave (8.0 ms) / Up: Fast (&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0 ms)<br />Data Rate:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Down: 57.658 Mb/s / Up: 10.988 Mb/s<br />Line Attenuation (LATN):&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Down: 20.5dB / Up: 29.2dB<br />Signal Attenuation (SATN):&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Down: 19.7dB / Up: 29.0dB<br />Noise Margin (SNR):&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Down: 6.1dB / Up: 6.1dB<br />Aggregate Transmit Power(ACTATP):&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Down: 6.9dB / Up: 13.6dB<br />Max. Attainable Data Rate (ATTNDR):&nbsp; &nbsp; &nbsp; &nbsp;Down: 66.795 Mb/s / Up: 11.064 Mb/s<br />Line Uptime Seconds:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4<br />Line Uptime:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4s</p><br /><p>Out of interest, If I change &#039;option xfer_mode&#039; to atm from ptm (which i assume is for ADSL lines?) I get the following; </p><p>Tue Mar&nbsp; 8 09:20:21 2016 daemon.notice netifd: Interface &#039;wan&#039; is now down<br />Tue Mar&nbsp; 8 09:20:21 2016 daemon.notice netifd: Interface &#039;wan&#039; is setting up now<br />Tue Mar&nbsp; 8 09:20:21 2016 daemon.info pppd[1336]: Plugin pppoatm.so loaded.<br />Tue Mar&nbsp; 8 09:20:21 2016 daemon.info pppd[1336]: PPPoATM plugin_init<br />Tue Mar&nbsp; 8 09:20:21 2016 daemon.info pppd[1336]: PPPoATM setdevname_pppoatm - SUCCESS:0.0.38<br />Tue Mar&nbsp; 8 09:20:21 2016 daemon.notice pppd[1336]: pppd 2.4.7 started by root, uid 0<br />Tue Mar&nbsp; 8 09:20:21 2016 kern.info kernel: [&nbsp; &nbsp;55.144277] pppoa-wan: renamed from ppp0<br />Tue Mar&nbsp; 8 09:20:21 2016 daemon.info pppd[1336]: Using interface pppoa-wan<br />Tue Mar&nbsp; 8 09:20:21 2016 daemon.notice pppd[1336]: Connect: pppoa-wan &lt;--&gt; 0.0.38<br />Tue Mar&nbsp; 8 09:20:51 2016 daemon.warn pppd[1336]: LCP: timeout sending Config-Requests<br />Tue Mar&nbsp; 8 09:20:51 2016 daemon.notice pppd[1336]: Connection terminated.<br />Tue Mar&nbsp; 8 09:20:51 2016 daemon.notice pppd[1336]: Modem hangup</p><p>However with xfer_mode set to atm, the line doesn&#039;t seem to sync;</p><p>Annex:<br />Line Mode:<br />Profile:<br />Line State:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DOWN [0xff: idle request]<br />&lt;snip&gt;</p><p>Please please someone help, I am ready to throw this router in the bin <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /> </p><p>Thanks.</p>											<p class="post-edited">(Last edited by <strong>core2lee</strong> on 9 Mar 2016, 11:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314112">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">core2lee</div>
					<div class="post-datetime">
						9 Mar 2016, 12:44					</div>
				</div>
				<div class="post-content content">
					<p>Ok so I managed to figure out how to get Broadband connected, for anyone interested, this is my config; </p><p>config vdsl &#039;dsl&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option annex &#039;b&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option firmware &#039;/lib/firmware/vdsl.bin&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option tone &#039;av&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option xfer_mode &#039;ptm&#039;</p><p>config interface &#039;wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;pppoe&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option macaddr &#039;00:20:DA:86:23:75&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option service &#039;Plusnet&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option _orig_ifname &#039;nas0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option _orig_bridge &#039;false&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;ptm0.101&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option username &#039;username@plusdsl.net&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option password &#039;********&#039;</p><p>The main thing here is tagging the xDSL interface with the &#039;101&#039; VLAN, without this it won&#039;t connect (possibly a BT thing?). more here; <a href="https://community.bt.com/t5/BT-Infinity-Speed-Connection/Configuration-of-third-party-router/td-p/1040540">https://community.bt.com/t5/BT-Infinity â€¦ -p/1040540</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>