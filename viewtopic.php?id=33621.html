<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> wgt634u</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p151712">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">gothrog</div>
					<div class="post-datetime">
						21 Dec 2011, 20:48					</div>
				</div>
				<div class="post-content content">
					<p>All,</p><p>So I&#039;m having some issues trying to get an image to be loaded on a board (wgt634u).&nbsp; It already seems to have an FreeWRT version on it.&nbsp; However I can&#039;t seem to mount the USB drive and can&#039;t get an FTP session working.</p><p>I checked with Filezilla Client that it can download the file from the Filezilla Server (test done on the same machine, not sure if a good test). I tried some different combinations of using wget, but no luck.</p><p>Also I noticed that I am missing commands like, scp.&nbsp; </p><p>Board IP: 192.168.0.10<br />FTP Server: 192.168.0.4<br />Serial connection: 3rd machine</p><p>However I have gotten to the CFG setup (via ctrl-c upon boot in the serial terminal).&nbsp; I changed the setup to boot to the TFTP and have a stock image loaded.&nbsp; Unfortunately I don&#039;t know if I lost the original flashed image.&nbsp; I stored all the env vars (in a txt file) before I ran &#039;setup&#039;, so in theory it is still there.&nbsp; Is there away for me to put it back?</p><p>I noticed that there in no 2nd partition to boot from.&nbsp; It is nice to be able to setup the 1st partition in flash and 2nd as an TFTP boot to an image for dev/test.&nbsp; Is it possible to change the firmware to enable this?</p><p>I want to create an image with all the OpenWRT bells and whistles.&nbsp; The openwrt-wgt634u-squashfs.bin image doesn&#039;t seem to work.&nbsp; I really need a working USB so I can utilize local file storage<br /><a href="http://downloads.openwrt.org/kamikaze/8.09.2/brcm47xx/">http://downloads.openwrt.org/kamikaze/8.09.2/brcm47xx/</a></p><br /><p>===========================================<br />.<br />usb.c: registered new driver Philips webcam<br />hub.c: new USB device 00:03.0-1, assigned address 3<br />usb.c: USB device not accepting new address=3 (error=-145)<br />hub.c: new USB device 00:03.0-2, assigned address 4<br />usb.c: USB device not accepting new address=4 (error=-145)<br />hub.c: new USB device 00:03.0-2, assigned address 5<br />usb.c: USB device not accepting new address=5 (error=-145)<br />hub.c: port 1 over-current change</p><p>===========================================<br />root@FreeWRT:~/image# wget ftp://wrm4@192.168.1.4:openwrt-wgt634u-squashfs.bin<br />Connecting to 192.168.1.4[192.168.1.4]:0<br />wget: Unable to connect to remote host (192.168.1.4): Connection timed out<br />root@FreeWRT:~/image#<br />--------------------------------------------<br />root@FreeWRT:~/image# wget ftp://wrm4@192.168.1.4:21/openwrt-wgt634u-squashfs.bin<br />Connecting to 192.168.1.4[192.168.1.4]:21<br />wget: Unable to connect to remote host (192.168.1.4): Connection timed out<br />root@FreeWRT:~/image# ls -alrt<br />drwxrwxrwt&nbsp; &nbsp; 6 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 140 Jan&nbsp; 1 01:55 ..<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 Jan&nbsp; 1 02:28 openwrt-wgt634u-squashfs.bin<br />drwxrwxrwx&nbsp; &nbsp; 2 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;60 Jan&nbsp; 1 02:28 .</p><p>===========================================<br />root@FreeWRT:~/image# ls /dev<br />console&nbsp; &nbsp;kmem&nbsp; &nbsp; &nbsp; mtdblock&nbsp; ptmx&nbsp; &nbsp; &nbsp; root&nbsp; &nbsp; &nbsp; urandom<br />cua&nbsp; &nbsp; &nbsp; &nbsp;log&nbsp; &nbsp; &nbsp; &nbsp;null&nbsp; &nbsp; &nbsp; pts&nbsp; &nbsp; &nbsp; &nbsp;shm&nbsp; &nbsp; &nbsp; &nbsp;usb<br />full&nbsp; &nbsp; &nbsp; mem&nbsp; &nbsp; &nbsp; &nbsp;nvram&nbsp; &nbsp; &nbsp;pty&nbsp; &nbsp; &nbsp; &nbsp;tts&nbsp; &nbsp; &nbsp; &nbsp;zero<br />gpio&nbsp; &nbsp; &nbsp; mtd&nbsp; &nbsp; &nbsp; &nbsp;port&nbsp; &nbsp; &nbsp; random&nbsp; &nbsp; tty<br />===========================================<br />root@FreeWRT:~/image# ls /bin<br />ash&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo&nbsp; &nbsp; &nbsp; &nbsp; iplink&nbsp; &nbsp; &nbsp; mv&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; run-parts&nbsp; &nbsp;umount<br />busybox&nbsp; &nbsp; &nbsp;egrep&nbsp; &nbsp; &nbsp; &nbsp;iproute&nbsp; &nbsp; &nbsp;netmsg&nbsp; &nbsp; &nbsp; sed&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;uname<br />cat&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;false&nbsp; &nbsp; &nbsp; &nbsp;iptunnel&nbsp; &nbsp; netstat&nbsp; &nbsp; &nbsp;sh&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; uncompress<br />chgrp&nbsp; &nbsp; &nbsp; &nbsp;fgrep&nbsp; &nbsp; &nbsp; &nbsp;kill&nbsp; &nbsp; &nbsp; &nbsp; nice&nbsp; &nbsp; &nbsp; &nbsp; sleep&nbsp; &nbsp; &nbsp; &nbsp;usleep<br />chmod&nbsp; &nbsp; &nbsp; &nbsp;grep&nbsp; &nbsp; &nbsp; &nbsp; ln&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pidof&nbsp; &nbsp; &nbsp; &nbsp;stat&nbsp; &nbsp; &nbsp; &nbsp; vi<br />chown&nbsp; &nbsp; &nbsp; &nbsp;gunzip&nbsp; &nbsp; &nbsp; lock&nbsp; &nbsp; &nbsp; &nbsp; ping&nbsp; &nbsp; &nbsp; &nbsp; stty&nbsp; &nbsp; &nbsp; &nbsp; watch<br />cp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gzip&nbsp; &nbsp; &nbsp; &nbsp; ls&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printenv&nbsp; &nbsp; su&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; zcat<br />date&nbsp; &nbsp; &nbsp; &nbsp; hostname&nbsp; &nbsp; mkdir&nbsp; &nbsp; &nbsp; &nbsp;ps&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sync<br />dd&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ip&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mktemp&nbsp; &nbsp; &nbsp; pwd&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tar<br />df&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ipaddr&nbsp; &nbsp; &nbsp; more&nbsp; &nbsp; &nbsp; &nbsp; rm&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; touch<br />dmesg&nbsp; &nbsp; &nbsp; &nbsp;ipcalc&nbsp; &nbsp; &nbsp; mount&nbsp; &nbsp; &nbsp; &nbsp;rmdir&nbsp; &nbsp; &nbsp; &nbsp;true</p><p>===========================================<br />root@FreeWRT:~/image# ls /sbin<br />failsafe&nbsp; &nbsp; &nbsp;if-watchdog&nbsp; insmod&nbsp; &nbsp; &nbsp; &nbsp;modprobe&nbsp; &nbsp; &nbsp;reboot&nbsp; &nbsp; &nbsp; &nbsp;syslogd<br />fwcf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ifconfig&nbsp; &nbsp; &nbsp;jffs2root&nbsp; &nbsp; mount_root&nbsp; &nbsp;rmmod&nbsp; &nbsp; &nbsp; &nbsp; udhcpc<br />fwcf.helper&nbsp; ifdown&nbsp; &nbsp; &nbsp; &nbsp;klogd&nbsp; &nbsp; &nbsp; &nbsp; mtd&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; route&nbsp; &nbsp; &nbsp; &nbsp; vconfig<br />halt&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ifup&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;logread&nbsp; &nbsp; &nbsp; pivot_root&nbsp; &nbsp;switch_root&nbsp; watchdog<br />hotplug&nbsp; &nbsp; &nbsp; init&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lsmod&nbsp; &nbsp; &nbsp; &nbsp; poweroff&nbsp; &nbsp; &nbsp;sysctl<br />===========================================</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151715">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">gothrog</div>
					<div class="post-datetime">
						21 Dec 2011, 21:42					</div>
				</div>
				<div class="post-content content">
					<p>I have also tried OpenWRT 10.03 for <br /><a href="http://downloads.openwrt.org/backfire/10.03/brcm47xx/openwrt-wgt634u-squashfs.bin">http://downloads.openwrt.org/backfire/1 … uashfs.bin</a> </p><p>It seems that only the original image is working.....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151916">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">gothrog</div>
					<div class="post-datetime">
						23 Dec 2011, 18:53					</div>
				</div>
				<div class="post-content content">
					<p>All I have taken the bleeding edge openwrt-wgt634u-squashfs.bin in 10.03.1 that was updated 12/21/2011.&nbsp; If someone read this post and built it thanks, but unfortunately it still doesn&#039;t work.&nbsp; </p><p>Warning: negative seek on tftp file attempted<br />Error:&nbsp; Invalid ELF file</p><div class="codebox"><pre><code>CFE&gt; setup

Setup system configuration
WARNING: Invalid data could render system inoperable.
Press Enter for Platform name to Exit.
Enter Platform name:

        bcm95365r - Broadcom BCM95365R Sentry5 VR/WAP/VPN GW Platform
        bcm95365p - Broadcom BCM95365P Sentry5 PCI NIC Platform
        bcm95365k - Broadcom BCM95365K Sentry5 PCI Platform
        bu5365fpga - Broadcom BCM95365 53XXX Sentry5 FPGA Platform
        bcm95380_rr - Broadcom BCM95380 RoboRouter/Sentry5 Dev Platform
        bcm94702cpci - Broadcom BCM94702 CPCI Host Controller
        bcm94710ap - Broadcom BCM94710AP WAP/Router
        bcm94710 - Broadcom BCM94710D Dev Platform

Press Enter to exit
Enter platform string:bcm95365r
Using platform[bcm95365r]
IP Interface Configuration type [DHCP/Static/None]:Static
Enter IP Address:192.168.1.10
Enter IP Netmask:255.255.255.0
Enter Gateway IP:192.168.1.1
Enter DNS Server IP:192.168.1.1
OS Boot type[FLASH/TFTP]:TFTP
TFTP Server IP Address:192.168.1.2
ELF Image Filename:openwrt-wgt634u-squashfs.bin
Configuring STARTUP for Static IP Configuration, TFTP OS Boot
Filesystem Type[RAMDISK/NFS/FLASH/Other]:FLASH
Enter Linux FLASH Device name [/dev/fl/0]:/dev/fl/0
Configuring Kernel for FLASH Root Filesystem Configuration
*** command status = 0
CFE&gt; reboot

....

Device eth0:  hwaddr 00-09-5B-F7-40-1E, ipaddr 192.168.1.10, mask 255.255.255.0
        gateway 192.168.1.1, nameserver 192.168.1.1
Loader:elf Filesys:tftp Dev:eth0 File:192.168.1.2:openwrt-wgt634u-squashfs.bin Options:(null)
***************************
****  MAC Client V1.0  ****
***************************
et0macaddr value :flag =0 value=00-09-5b-f7-40-1e
et1macaddr value :flag =0 value=00-09-5b-f7-40-1f
MAC exist at least one
system ethernet mac exist and not default....
Skip mac client process.....
Loading: Warning: negative seek on tftp file attempted
Failed.
Could not load openwrt-wgt634u-squashfs.bin: Invalid ELF file</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152373">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">gothrog</div>
					<div class="post-datetime">
						29 Dec 2011, 23:01					</div>
				</div>
				<div class="post-content content">
					<p>Alright so I have been able to build an image from OpenWrt-ImageBuilder-brcm47xx-for-Linux-i686 Kamikaze 8.09.2 utilizing the command:<br />make image PROFILE=WGT634U</p><p>I load the image through a TFTP, but after it begins to boot instead of failing on &quot;Loading Image&quot;, it starts the original image on the board.&nbsp; I have no idea why this is happening.&nbsp; Can someone tell me what I&#039;m miss interpreting?</p>											<p class="post-edited">(Last edited by <strong>gothrog</strong> on 29 Dec 2011, 23:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152947">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">stanelie</div>
					<div class="post-datetime">
						4 Jan 2012, 01:29					</div>
				</div>
				<div class="post-content content">
					<p>Hum...</p><p>I have been able to load the latest BackFire 10.03.1 by first downgrading the original firmware to 1.4.1.10 (downloaded from netgear&#039;s website) and then uploading a special config backup, and then flashing the openwrt firmware (as per <a href="http://wiki.openwrt.org/oldwiki/OpenWrtDocs/Hardware/Netgear/WGT634U)">http://wiki.openwrt.org/oldwiki/OpenWrt … r/WGT634U)</a>.</p><p>It boots, the web interface (luci) works, but wifi is missing...</p><p>Any ideas?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>