<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Flash tp-link archer C20i from stock firmware ?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p271937">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">fred3398</div>
					<div class="post-datetime">
						10 Apr 2015, 15:23					</div>
				</div>
				<div class="post-content content">
					<p>Hye,</p><p>I would like to know how to use the file openwrt-ramips-mt7620-ArcherC20i-squashfs-sysupgrade.bin to flash my brand new archer c20i.<br />Can I flash the router with this file directly from router interface or is there another method to flash it ?</p>											<p class="post-edited">(Last edited by <strong>fred3398</strong> on 10 Apr 2015, 15:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271981">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						10 Apr 2015, 22:58					</div>
				</div>
				<div class="post-content content">
					<p>The only information I know about the Archer C20i is in this topic about the Archer C2:<br /><a href="https://forum.openwrt.org/viewtopic.php?id=52625">https://forum.openwrt.org/viewtopic.php?id=52625</a><br />The C20i and the C2 seem to be very much the same router.</p><p>If you try anything, don&#039;t hesitate to explain what worked or what went wrong.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271995">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">SCF</div>
					<div class="post-datetime">
						11 Apr 2015, 00:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zo0ok wrote:</cite><blockquote><p>The only information I know about the Archer C20i is in this topic about the Archer C2:<br /><a href="https://forum.openwrt.org/viewtopic.php?id=52625">https://forum.openwrt.org/viewtopic.php?id=52625</a><br />The C20i and the C2 seem to be very much the same router.</p></blockquote></div><p>The C20i only has a 100MBit switch, while the C2 has a GbE switch. Other than that they should be identical.</p><p>Also as zo0ok noted, first check out the linked thread as there seem to be some issues with this router, just to make sure you don&#039;t end up with a bricked device.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271996">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">fred3398</div>
					<div class="post-datetime">
						11 Apr 2015, 00:07					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for reply. I saw the post about c2 and c20i but I didn&#039;t find anything to help me.<br />I don&#039;t know how to flash the router. Can i do it with the web interface ?<br />The firmware is not a factory.bin, is it safe to do that ?</p>											<p class="post-edited">(Last edited by <strong>fred3398</strong> on 11 Apr 2015, 00:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272000">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						11 Apr 2015, 00:31					</div>
				</div>
				<div class="post-content content">
					<p>fred3398, to be clear... it is not safe.</p><p>I don&#039;t think anyone has successfully ever flashed (OpenWRT to) the router from the web interface. If they had, I think they would have posted so in the topic I linked to. Or they would comment here.</p><p>The router was added months ago to the &quot;unknown&quot; list of hardware:<br /><a href="http://wiki.openwrt.org/toh/unknown">http://wiki.openwrt.org/toh/unknown</a><br />No one has moved it from unknown to &quot;possible&quot;, &quot;work in progress&quot; or &quot;supported&quot;.</p><p>That said... there is an image for it... I don&#039;t know for sure that it will fail. I just say I don&#039;t think it is safe.</p><p>Worst scenarios if you try to flash it:<br />1) You brick the router beyond repair.<br />2) You brick the router and needs a serial console to recover factory firmware<br />3) OpenWRT does not start, but the router can be restored using some recovery mode</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272003">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">fred3398</div>
					<div class="post-datetime">
						11 Apr 2015, 00:35					</div>
				</div>
				<div class="post-content content">
					<p>Ok, I will wait for a better support for this router. Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279215">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						7 Jun 2015, 21:21					</div>
				</div>
				<div class="post-content content">
					<p>Archer C20i: I successfully flashed the CC RC1 sysupgrade image using stock firmware:<br /><a href="https://downloads.openwrt.org/chaos_calmer/15.05-rc1/ramips/mt7620/openwrt-15.05-rc1-ramips-mt7620-ArcherC20i-squashfs-sysupgrade.bin">https://downloads.openwrt.org/chaos_cal … pgrade.bin</a><br />I dont know if this was by design, or pure luck. Or if it was stupid for some reason. And I dont know how to go back to OEM (and I dont intend to).</p><p>I put some basic information on the device page:<br /><a href="http://wiki.openwrt.org/toh/tp-link/archer-c20i">http://wiki.openwrt.org/toh/tp-link/archer-c20i</a></p><p>I moved it from &quot;Unknown&quot; to &quot;Supported&quot; in ToH.</p><p>It seems, at first glance, that 2.4GHz works and 5GHz does not work. As expected. Although, I have not tested, just seen that OpenWrt discovers it.</p><p>I have CC RC1 on this device now. It has been stable for 51 minutes now (doing no real work).<br />If you have any questions about it, I will try to provide answers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279850">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">fred3398</div>
					<div class="post-datetime">
						13 Jun 2015, 13:04					</div>
				</div>
				<div class="post-content content">
					<p>Good news !</p><p>I have tried and it works with web interface and same original firmware.<br />Openwrt seems to work but only power and wan leds are working.<br />Wps/Reset and Wireles On/Off buttons are not working.</p><p>Can&#039;t get failsafe mode, so be careful.</p>											<p class="post-edited">(Last edited by <strong>fred3398</strong> on 18 Jun 2015, 12:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280496">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">fred3398</div>
					<div class="post-datetime">
						18 Jun 2015, 12:45					</div>
				</div>
				<div class="post-content content">
					<p>Lan led turns on with :<br />echo 1 &gt; /sys/class/gpio/export<br />echo out &gt; /sys/class/gpio1/direction</p><p>Usb led turns on with :<br />echo 11 &gt; /sys/class/gpio/export<br />echo out &gt; /sys/class/gpio11/direction</p>											<p class="post-edited">(Last edited by <strong>fred3398</strong> on 29 Jun 2015, 18:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280500">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						18 Jun 2015, 13:10					</div>
				</div>
				<div class="post-content content">
					<p>Nice (with the Leds)</p><p>Is USB working for you? I am on CC RC2. I load the usb drivers (modules) but no device is found (as far as I can see).</p><p>uchi/ohci/ehci/xhci?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280516">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">fred3398</div>
					<div class="post-datetime">
						18 Jun 2015, 15:32					</div>
				</div>
				<div class="post-content content">
					<p>Usb does not work for me too.<br />Two usb 2.0 keys and one keyboard, nothing in log or dmesg.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p281009">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">fred3398</div>
					<div class="post-datetime">
						22 Jun 2015, 18:09					</div>
				</div>
				<div class="post-content content">
					<p>Usb is working now !</p><p>Modify the file ArcherC20i.dts in Image builder chaos chalmer rc2 :</p><p>Add before the line which starts with &quot;ethernet@10100000 {&quot; :</p><p>&nbsp; &nbsp; &nbsp; &nbsp; ehci@101c0000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; status = &quot;okay&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; ohci@101c1000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; status = &quot;okay&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; };</p><p>Rebuild firmware with these packages : kmod-usb-storage block-mount kmod-fs-ext4 kmod-fs-vfat kmod-nls-cp437 kmod-nls-iso8859-1</p><p>Flash with new firmware and it&#039;s done !</p>											<p class="post-edited">(Last edited by <strong>fred3398</strong> on 22 Jun 2015, 18:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p281018">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						22 Jun 2015, 20:44					</div>
				</div>
				<div class="post-content content">
					<p>Great! Did you submit those patches somehow/somewhere so they will make it into RC3?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p281019">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">fred3398</div>
					<div class="post-datetime">
						22 Jun 2015, 20:46					</div>
				</div>
				<div class="post-content content">
					<p>No, I don&#039;t know how to do that. I&#039;m still looking for having leds and buttons working too.</p>											<p class="post-edited">(Last edited by <strong>fred3398</strong> on 22 Jun 2015, 20:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p281020">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						22 Jun 2015, 20:57					</div>
				</div>
				<div class="post-content content">
					<p>Here is how to submit patches:<br /><a href="https://dev.openwrt.org/wiki/SubmittingPatches">https://dev.openwrt.org/wiki/SubmittingPatches</a><br />...never did it myself, and I don&#039;t want to take credit for your patch <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Well, I will not do it today anyway...<br />If you choose to try let me know so we don&#039;t do double work.<br />I will let you know if I try.</p><p>With some luck @jow, @mazilo or @alphasparc or someone will see the importance (well well) of this patch/topic and just fix it <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p281380">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						25 Jun 2015, 23:22					</div>
				</div>
				<div class="post-content content">
					<p>I tried to submit a patch. Lets see how that turns out <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p281794">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">fred3398</div>
					<div class="post-datetime">
						29 Jun 2015, 20:43					</div>
				</div>
				<div class="post-content content">
					<p>This is my final dts file with usb support, leds (wlan, lan, usb) and buttons (reset/wps, wifi on/off)</p><p>/dts-v1/;</p><p>/include/ &quot;mt7620a.dtsi&quot;</p><p>/ {<br />&nbsp; &nbsp; compatible = &quot;ralink,mt7620a-soc&quot;;<br />&nbsp; &nbsp; model = &quot;TP-Link Archer C20i&quot;;</p><p>&nbsp; &nbsp; chosen {<br />&nbsp; &nbsp; &nbsp; &nbsp; bootargs = &quot;console=ttyS0,115200&quot;;<br />&nbsp; &nbsp; };</p><p>&nbsp; &nbsp; palmbus@10000000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; gpio2: gpio@660 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; status = &quot;okay&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gpio3: gpio@688 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; status = &quot;okay&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; spi@b00 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; status = &quot;okay&quot;;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; m25p80@0 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #address-cells = &lt;1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #size-cells = &lt;1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; compatible = &quot;en25q64&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0 0&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; linux,modalias = &quot;m25p80&quot;, &quot;mx25l6405d&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; spi-max-frequency = &lt;10000000&gt;;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; partition@0 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;u-boot&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x0 0x20000&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; read-only;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; partition@20000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;firmware&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x20000 0x7a0000&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; partition@7c0000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;config&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x7c0000 0x10000&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rom: partition@7d0000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;rom&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x7d0000 0x10000&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; partition@7e0000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;romfile&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x7e0000 0x10000&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; radio: partition@7f0000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;radio&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x7f0000 0x10000&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; };</p><p>&nbsp; &nbsp; pinctrl {<br />&nbsp; &nbsp; &nbsp; &nbsp; state_default: pinctrl0 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gpio {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ralink,group = &quot;i2c&quot;, &quot;uartf&quot;, &quot;rgmii1&quot;, &quot;rgmii2&quot;, &quot;wled&quot;, &quot;nd_sd&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ralink,function = &quot;gpio&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; };</p><p>&nbsp; &nbsp; ethernet@10100000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; pinctrl-names = &quot;default&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; pinctrl-0 = &lt;&amp;ephy_pins&gt;;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; mtd-mac-address = &lt;&amp;rom 0xf100&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; ralink,port-map = &quot;wllll&quot;;<br />&nbsp; &nbsp; };</p><p>&nbsp; &nbsp; ehci@101c0000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; status = &quot;okay&quot;;<br />&nbsp; &nbsp; };</p><p>&nbsp; &nbsp; ohci@101c1000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; status = &quot;okay&quot;;<br />&nbsp; &nbsp; };</p><p>&nbsp; &nbsp; wmac@10180000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; ralink,mtd-eeprom = &lt;&amp;radio 0&gt;;<br />&nbsp; &nbsp; };</p><p>&nbsp; &nbsp; pcie@10140000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; status = &quot;okay&quot;;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; pcie-bridge {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mt76@0,0 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x0000 0 0 0 0&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; device_type = &quot;pci&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mediatek,mtd-eeprom = &lt;&amp;radio 32768&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mediatek,2ghz = &lt;0&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; };</p><p>&nbsp; &nbsp; gpio-leds {<br />&nbsp; &nbsp; &nbsp; &nbsp; compatible = &quot;gpio-leds&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lan {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;tp-link:blue:lan&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gpios = &lt;&amp;gpio0 1 1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; usb {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;tp-link:blue:usb&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gpios = &lt;&amp;gpio0 11 1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; wlan {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;tp-link:blue:wlan&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gpios = &lt;&amp;gpio3 0 1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; };</p><p>&nbsp; &nbsp; gpio-keys-polled {<br />&nbsp; &nbsp; &nbsp; &nbsp; compatible = &quot;gpio-keys-polled&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; #address-cells = &lt;1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; #size-cells = &lt;0&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; poll-interval = &lt;20&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; reset_wps {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;reset_wps&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gpios = &lt;&amp;gpio0 13 1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; linux,code = &lt;0x198&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; rfkill {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;rfkill&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gpios = &lt;&amp;gpio0 2 1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; linux,code = &lt;0xf7&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; };<br />};</p><p>To have failsafe mode working, add MT7620 in /lib/preinit/07_set_preinit_iface_ramips like this post: <a href="https://forum.openwrt.org/viewtopic.php?pid=262503#p262503">https://forum.openwrt.org/viewtopic.php … 03#p262503</a><br />If you want to submit patch to openwrt devs, you can do it.</p>											<p class="post-edited">(Last edited by <strong>fred3398</strong> on 29 Jun 2015, 20:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282604">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						6 Jul 2015, 23:38					</div>
				</div>
				<div class="post-content content">
					<p>I tried to submit a/the new patch. Lets see what happens.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p283860">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">polioman</div>
					<div class="post-datetime">
						17 Jul 2015, 16:25					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;m new here, I try to put OpenWRT into an Archer C2 via TP-Link web GUI, it only says that :</p><p>&quot;Error code: 4503<br />The uploaded file was not accepted by the device.&quot;</p><p>At least, it doesn&#039;t brick it...</p><p>Maybe I do something wrong, but I can&#039;t get this to work. I didn&#039;t try TFTP on it at the moment.</p><br /><br /><p>I also try to put a 3G USB modem on an Archer C20i (almost the same hardware) using fred&#039;s method.</p>											<p class="post-edited">(Last edited by <strong>polioman</strong> on 17 Jul 2015, 16:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291227">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">iryna7</div>
					<div class="post-datetime">
						11 Sep 2015, 11:14					</div>
				</div>
				<div class="post-content content">
					<p>Hi :</p><p>Router Name : Archer C2 AC750</p><p>I tried to upgrade default firmware to OpenWRT firmware which is based on the RC1,RC2 and RC3. but, all failed so far. this is the same error message &#039;4503&#039; from web frimware upgrade interface. </p><p>here are the download link what i used.</p><p><a href="https://downloads.openwrt.org/chaos_calmer/15.05-rc3/ramips/mt7620/openwrt-15.05-rc3-ramips-mt7620-ArcherC20i-squashfs-sysupgrade.bin">https://downloads.openwrt.org/chaos_cal … pgrade.bin</a></p><p>Any comment would be nice and appreciates. thanks in advance.</p><p>P.S : is there any quick guide to using tftp download method? i mean how to get in the u-boot menus.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298724">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">STi</div>
					<div class="post-datetime">
						5 Nov 2015, 18:11					</div>
				</div>
				<div class="post-content content">
					<p>Hello, <br />after flashing a image my Archer C2 no longer starts. <br />Only the left LED goes on. No serial connection.</p><p>I have a programmer. I will burn the flash memory. <br />Can anyone make a &quot;Generic Backup&quot; of flash memory?<br />Description see <a href="http://wiki.openwrt.org/doc/howto/generic.backup">http://wiki.openwrt.org/doc/howto/generic.backup</a></p><p>flash memory: W25Q64BV<br />0x000000000000-0x000000020000 : &quot;boot&quot;<br />0x000000020000-0x000000160000 : &quot;kernel&quot;<br />0x000000160000-0x0000007c0000 : &quot;rootfs&quot;<br />0x0000007c0000-0x0000007d0000 : &quot;config&quot;<br />0x0000007d0000-0x0000007e0000 : &quot;romfile&quot;<br />0x0000007e0000-0x0000007f0000 : &quot;rom&quot;<br />0x0000007f0000-0x000000800000 : &quot;radio&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306563">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						7 Jan 2016, 03:33					</div>
				</div>
				<div class="post-content content">
					<p>Did anyone got Archer C20i to boot and work with OpenWrt? Is it even booting? How is the wifi performance? Is 802.11ac working?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306631">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						7 Jan 2016, 19:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>valentt wrote:</cite><blockquote><p>Did anyone got Archer C20i to boot and work with OpenWrt? Is it even booting? How is the wifi performance? Is 802.11ac working?</p></blockquote></div><p>It works quite fine, the wiki is updated: <a href="https://wiki.openwrt.org/toh/tp-link/archer-c20i">https://wiki.openwrt.org/toh/tp-link/archer-c20i</a></p><p>I bricked mine yesterday when I used sysupgrade to install stock firmware.<br />(I did some tftp-recovery-attempts, and either I dont know how to use tftp properly, or I managed to make things worse)</p>											<p class="post-edited">(Last edited by <strong>zo0ok</strong> on 7 Jan 2016, 19:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306864">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">NoiZe91</div>
					<div class="post-datetime">
						9 Jan 2016, 17:24					</div>
				</div>
				<div class="post-content content">
					<p>Hey,</p><p>so I bricked mine today too. Can anyone of you provide me the correct PINs for the UART connection?</p><p>What I tried: Actually, I bricked 2 C20i (which is even worse). The first one I tried to upload the image via TFTP (Recovery mode) which worked pretty fine. Only afterward, the router is not doing anything. The system light is on and when I plug the cable into the &quot;Internet&quot; port, the corresponding light goes on in the front.</p><p>The second one I tried the upload via the Web-interface. Which also worked without a problem. After the reboot the switch is now in the same state as the first one. </p><p>Did anybody manage to connect to a C20i over the serial connection, or unbrick one?</p><p>Image used: <a href="https://downloads.openwrt.org/chaos_calmer/15.05/ramips/mt7620/openwrt-15.05-ramips-mt7620-ArcherC20i-squashfs-sysupgrade.bin">https://downloads.openwrt.org/chaos_cal … pgrade.bin</a></p>											<p class="post-edited">(Last edited by <strong>NoiZe91</strong> on 9 Jan 2016, 17:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306874">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						9 Jan 2016, 18:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>NoiZe91 wrote:</cite><blockquote><p>What I tried: Actually, I bricked 2 C20i (which is even worse). The first one I tried to upload the image via TFTP (Recovery mode) which worked pretty fine. Only afterward, the router is not doing anything. The system light is on and when I plug the cable into the &quot;Internet&quot; port, the corresponding light goes on in the front.</p></blockquote></div><p>Interesting! I am also under the impression that I successfully uploaded an image via TFTP, but now it is dead (I think I have exactly the same light/cable-situation as you have).</p><p>I broke in to mine yesterday, to access the serial connections. It was not a pretty job. If anyone wants to get in I can provide pictures. There are two screws under the sticker at the bottom of the router - I guess it is best to remove those first <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>There are four connections inside that are supposed to be serial:<br />Square-round-round-round.<br />They are supposed to be<br />VCC-Ground-TX/RX (dont know the order of TX/RX).</p><p>I tried to connect it to a raspberry pi (which also uses 3.3V serial). I was not successful. I tried both 9600 and 115200. I am not very good at serial connections, but the few times I have tried I usually get what I want in the end. Not with my C20i. I might try with a USB-Serial-adapter some day.</p><p>If I learn anything I will definitely post it here. I appreciate any help to recover my C20i.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>