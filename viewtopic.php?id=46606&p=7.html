<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Realtek SoC support in OpenWrt</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 22 Sep 2016 and 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 7 of 13</div><nav><ul><li><a href="viewtopic.php%3Fid=46606&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=46606&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=46606&amp;p=6.html">6</a></li><li class="pagination-current"><span>7</span></li><li><a href="viewtopic.php%3Fid=46606&amp;p=8.html">8</a></li><li><a href="viewtopic.php%3Fid=46606&amp;p=9.html">9</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=46606&amp;p=13.html">13</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p262600">
				<div class="post-metadata">
					<div class="post-num">Post #151</div>
					<div class="post-author">baerle</div>
					<div class="post-datetime">
						23 Jan 2015, 21:31					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>regarding nprove.in:<br />I had the same problem, but on<br /><a href="http://main.lv/writeup/building_openwrt_for_rtl8196c.html">http://main.lv/writeup/building_openwrt … 8196c.html</a><br />there is a note about that and a link to <br /><a href="http://git.advem.lv/">http://git.advem.lv/</a></p><p>So to my &quot;problem&quot;:<br />I was able (by replacing several URLs and other small stuff I don&#039;t remember) to get &quot;everything&quot; from there compiled.<br />And I have a serial connection to my Edimax 6200NL, so I can get access to the Bootloader.<br />(Sadly the original running system doesn&#039;t start a shell for the console when it is running...)</p><p>My current situation might be specific to my device, but I think it is a more general thing:<br />Currently I have stopped to try things, because I did not understand what would happen next!</p><p>I think TFTP to the device will work, but when I would do so: What file will I upload to the device? <br />The uImage of the kernel? I expect something else generated during the compile, but what?<br />Maybe it is explained somewhere, but then I did miss that piece of information...</p><p>I can&#039;t imagine I can upload the whole system, or will the tftp write directly to the flash memory?<br />So would I be able (for testing/repair?) to upload the original firmware that way?</p><p>If it is a complete firmware:<br />Do I have to provide an address or something to get the device boot my image? <br />There are specific offsets in the &quot;original&quot; firmware images, at least I found three parts and <br />their offsets in the original firmware files with binwalk...</p><p>Maybe it is even much simpler than tftp:<br />Currently I still have the original web interface, and I could use that firmware update:<br />But I never told the compiling process anything about my specific hardware: <br />I still expect I have missed one important thing.</p><p>Maybe &quot;tomate&quot; can light me up a bit, as he (she?) has successfully used the same deivce?</p><p>Thanks,</p><p>&nbsp; Baerle (also from Germany)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262668">
				<div class="post-metadata">
					<div class="post-num">Post #152</div>
					<div class="post-author">Tomate</div>
					<div class="post-datetime">
						24 Jan 2015, 16:40					</div>
				</div>
				<div class="post-content content">
					<p>Hi baerle,</p><p>firstly thanks for the actual woking links!</p><p>I didn&#039;t work on this stuff for longer time, but I think I can help you anyway.</p><p>First be sure you have Edimax 3G-6200nL V2 (it is marked on the case), because the 3G-6200nL has a different chipset and you would brick this device! Only the V2 has the realtek chipset.</p><p>Flashing via tftp is very simple and if you have configured and compiled correctly all would flash fine.</p><p>When you start menuconfig you have to check in the submenu &quot;Target Images&quot; if the addresses are correct for your system.<br />For me it&#039;s this address config:<br /></p><div class="codebox"><pre><code>(0x80500000) Load address of kernel in ram
(10000) Offset of kernel in flash rom (HEX)
(130000) Offset of filesystem in flash rom (HEX)
(0x800000) size of the flash rom
(530000) FLATFS image offset in flash</code></pre></div><p>This addresses are contained in the images and tftp burns automatically to the right location.</p><p>On the tftp console I did these commands:<br /></p><div class="codebox"><pre><code>connect 192.168.1.6
put bin/realtek/openwrt-realtek-rtl8196c-nprove-squashfs.bin
put bin/realtek/openwrt-realtek-rtl8196c-nprove-kernel.bin</code></pre></div><p>It&#039;s important to flash the squashfs image first, because after burning the kernel image the device reboots automatically. If you do it the other way round the firmware doesn&#039;t work because of the missing filesystem.</p><p>The only thing you must take care of is that your image doesn&#039;t exceed the flash size. I had this one time and after that the bootloader was overwritten. Luckily the device has a serial flash chip and I made a backup of the original flash, so I could solder out the chip and restore to factory defaults.</p><p>Hope this helps you!</p><br /><p>P.S.: I still have the problem, that I can&#039;t access via LAN with my firmware (the problem I mentioned at the beginning of the thread). I was fed of it and that&#039;s the reason why I didn&#039;t work on that stuff any longer.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262690">
				<div class="post-metadata">
					<div class="post-num">Post #153</div>
					<div class="post-author">andygo</div>
					<div class="post-datetime">
						24 Jan 2015, 20:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>vitasonline wrote:</cite><blockquote><p><strong>andygo</strong>,<br />Hello!<br />I bought a router UR-825AC<br />The official firmware does not suit me.<br />Let us together make OpenWrt?</p></blockquote></div><p>yes, sure! could you provide me with sources of the last one?<br />(<a href="https://yadi.sk/d/ZP726zQEdwWQu">https://yadi.sk/d/ZP726zQEdwWQu</a>)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262739">
				<div class="post-metadata">
					<div class="post-num">Post #154</div>
					<div class="post-author">baerle</div>
					<div class="post-datetime">
						25 Jan 2015, 02:23					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Wow, thank you Tomate, that really has helped:</p><p>It is a bit late, so I first didn&#039;t understand why I always got a wrong checksum and nothing was flashed:<br />Then I switched to binary in tftp...<br />And it worked!</p><p>At least the board has booted, and I have a shell now.</p><p>Enough for now, it is a bit late.</p><p>Ciao,</p><p>&nbsp; Baerle</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262823">
				<div class="post-metadata">
					<div class="post-num">Post #155</div>
					<div class="post-author">baerle</div>
					<div class="post-datetime">
						25 Jan 2015, 20:36					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>So it was a big success:<br />I don&#039;t know what kind of LAN problem you have Tomate, at least for me it works (or it seems to do so?):<br />- I have running the luci web interface<br />- my phone can connect via wifi<br />- &quot;ddserver&quot; is running.</p><p>That last thing was my (new) main purpose for this device (the original plan was to use it for something more special, but there I have used a openwrt &quot;standard&quot; hardware)</p><p>So now the device isn&#039;t useless anymore:I just have to build a battery for that now, and then I can use everywhere with dslrdashboard. Ok, I haven&#039;t connected it to my camera, but I don&#039;t expect problems from that part.</p><p>A nice extra would be to able to use the button, the LED or some other GPIO Pins: <br />Then I can also use it to control some more things. We will see!</p><p>So thanks all here for making this possible!</p><p>Baerle</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262833">
				<div class="post-metadata">
					<div class="post-num">Post #156</div>
					<div class="post-author">Tomate</div>
					<div class="post-datetime">
						25 Jan 2015, 22:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>baerle wrote:</cite><blockquote><p>Hi all,</p><p>So it was a big success:<br />I don&#039;t know what kind of LAN problem you have Tomate, at least for me it works (or it seems to do so?):<br />- I have running the luci web interface<br />- my phone can connect via wifi<br />- &quot;ddserver&quot; is running.</p><p>That last thing was my (new) main purpose for this device (the original plan was to use it for something more special, but there I have used a openwrt &quot;standard&quot; hardware)</p><p>So now the device isn&#039;t useless anymore:I just have to build a battery for that now, and then I can use everywhere with dslrdashboard. Ok, I haven&#039;t connected it to my camera, but I don&#039;t expect problems from that part.</p><p>A nice extra would be to able to use the button, the LED or some other GPIO Pins: <br />Then I can also use it to control some more things. We will see!</p><p>So thanks all here for making this possible!</p><p>Baerle</p></blockquote></div><p>Hi baerle,</p><p>nice to hear that it works fine for you. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />If I would know what&#039;s my problem I would solve it <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Which system did you use to cross compile? Maybe that&#039;s the reason for my fault, because it&#039;s a bit old openSUSE 12.1. Perhaps I should start again from the beginning.<br />Would it be possible to share your .config and images? Than I could try if your stuff works on my hardware.</p><br /><p>Tomate</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262850">
				<div class="post-metadata">
					<div class="post-num">Post #157</div>
					<div class="post-author">baerle</div>
					<div class="post-datetime">
						26 Jan 2015, 00:44					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Of course I can provide you the files you want. I think I will create something on github for that.</p><p>But in fact: &quot;Zu früh gefreut&quot; on my side:<br />The USB doesn&#039;t work: Kernel side seems to be fine,&nbsp; but no device is found:</p><p>I have seen there are some codes different from &quot;my&quot; kernel to the GPL Sources I found for that device, especially there are a few &quot;USB_PWR&quot; things, so I&#039;m sure I can solve that:<br />I expect there is at least one GPIO or something that needs to be activated.<br />So I have to work a bit more on the software side :-(</p><p>Of course I&#039;m open for tipps here, too!</p><p>Thanks,<br />&nbsp; Baerle</p><p>PS:<br />I used Ubuntu 14.04 to build...</p>											<p class="post-edited">(Last edited by <strong>baerle</strong> on 26 Jan 2015, 00:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263163">
				<div class="post-metadata">
					<div class="post-num">Post #158</div>
					<div class="post-author">Tomate</div>
					<div class="post-datetime">
						27 Jan 2015, 21:44					</div>
				</div>
				<div class="post-content content">
					<p>OK, I started from the beginning again. And now it works! I can access via LAN, works fine.</p><p>The problem with the USB is, that it the power can be switched off by GPIO. With my former firmware I could turn it on by simply echoing 1 to a file. But I don&#039;t remember which file it was....and I don&#039;t find it in my actual firmware....maybe I have to switch back to the old firmware an have a look.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263269">
				<div class="post-metadata">
					<div class="post-num">Post #159</div>
					<div class="post-author">baerle</div>
					<div class="post-datetime">
						28 Jan 2015, 17:20					</div>
				</div>
				<div class="post-content content">
					<p>A bit Documentation about that board (Edimax 3G-6200nL V2)</p><p>GPIO2, 13 and 14 can control the LEDs on the side<br />GPIO5 is connected to the button<br />GPIO6 controls the USB Power<br />GPIO16 control the LED between USB and the button</p><p>To control the LEDs, one has to write 0x343FC0 to /sys/module/gpio_rtl819x/parameters/rtl819x_mux<br />See /etc/init.d/sysled for this. <br />At least that file isfunny, as it disabled my USB power...</p><p>But my problems are not solved yet:<br />Even with USB power I didn&#039;t got a USB-device working yet.</p>											<p class="post-edited">(Last edited by <strong>baerle</strong> on 28 Jan 2015, 19:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263318">
				<div class="post-metadata">
					<div class="post-num">Post #160</div>
					<div class="post-author">Tomate</div>
					<div class="post-datetime">
						29 Jan 2015, 00:18					</div>
				</div>
				<div class="post-content content">
					<p>Hi baerle,</p><p>where did you get this information?</p><p>The number I have to write to rtl819x_mux is 0x340c00.</p><p>According to your info, I can read the button on GPIO5 and set the LED on GPIO2. Writing on GPIO 6, 13, 14 or 16 does nothing. I was not able to switch on USB Power.</p><p>I flashed my old firmware (where network isn&#039;t working) and tried there the same. I can read the button, switch the LED on GPIO2 and can switch the USB Power on GPIO6. The other GPIOs aren&#039;t changing anything here, too.</p><p>I read here: <a href="https://dev.openwrt.org/ticket/13201#comment:18">https://dev.openwrt.org/ticket/13201#comment:18</a> that JTAG wasn&#039;t disabled and that was the problem the GPIO didn&#039;t work. Maybe that&#039;s the same reason here?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263325">
				<div class="post-metadata">
					<div class="post-num">Post #161</div>
					<div class="post-author">baerle</div>
					<div class="post-datetime">
						29 Jan 2015, 00:54					</div>
				</div>
				<div class="post-content content">
					<p>Hi Tomate,</p><p>I got this information by educated guessing:</p><p>1st: I have found a PDF Datasheet for the 8196C: There the PIN_MUX register was explained. I searched the sources and found a few accesses, but nothing 100% clear for me what might be wrong.</p><p>2nd: Then I noticed that USB power was on(!) during booting, and then &quot;suddenly&quot; stopped:<br />So I knew there was a trigger in &quot;userspace&quot;, obviously something from the init part. I didn&#039;t notice the led-file earlier.</p><p>3rd: in the PDF the LED part for the Ethernet-switch LEDs was explained, so I tried to change them to GPIO and it worked:<br />For that you have to use that other 0x343FC0 value. I decided to post this information here, as it is at least nice to know.<br />Edit: To make it clear: the additional bits configure the MUX to connect the &quot;internal GPIO&quot; with the external pin. So writing to the GPIO without changing that Mux will not change the Pin. It depends what you want: Ethernet Information or GPIO controlled LEDs. Both is possible.</p><p>4th: I searched in the Edimax GPL Sources and noticed there was GPIO6 used for the usb power, so that matched: <br />GPIO6 is the usb power. I don&#039;t have a &quot;power LED&quot; on my board.<br />Edit: but it is inverted, so the write in that init-file disabled the power.</p><p>Then there was still one LED missing: The one between USB and the button:<br />So I took photos from both sides of the board, loaded them to inkscape, rotated a bit and mirrored. I also placed the pin-out graphic from the PDF on top of the chip: I never did something like that before, but it worked really well: I got both sides on top of each other and then could easily follow the lines: USB was as already noticed on GPIO6, and the last LED was controlled by PortC[0], so GPIO16. I also did this to check the other GPIO pins: Pin 102 is at the edge of the chip and seems not to be used: If I want to control a hardware, that would be a nice pin I expect.<br />(I edited my posting for that, so all LEDs are &quot;documented&quot; now)</p><p>Currently I&#039;m comparing the kernel of that GPL-things, and the one I&#039;m using:<br />There is one strange thing that might be the reason for my problem:<br />In the Edimax &quot;GPL&quot; Kernel there is an &quot;ehci-rtl8652.c&quot; driver used (not the rtl-819x.c).<br />And I found a &quot;realtek patch&quot; in &quot;check_reset_complete&quot; that will do 3 retries in that code.<br />I know that this 8652 driver is used (you can find messages from it in this thread, and there is also a<br />#if defined(CONFIG_RTL_8196C)<br />inside, so I&#039;m sure it is for &quot;our&quot; chip.</p>											<p class="post-edited">(Last edited by <strong>baerle</strong> on 29 Jan 2015, 12:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263328">
				<div class="post-metadata">
					<div class="post-num">Post #162</div>
					<div class="post-author">baerle</div>
					<div class="post-datetime">
						29 Jan 2015, 01:07					</div>
				</div>
				<div class="post-content content">
					<p>Strike!!!</p><p>[&nbsp; &nbsp; 4.670000] usb 1-1: new full speed USB device using rtl819x-ohci and address 2<br />[&nbsp; &nbsp; 5.380000] usb 1-1: New USB device found, idVendor=0d8c, idProduct=000c<br />[&nbsp; &nbsp; 5.390000] usb 1-1: New USB device strings: Mfr=0, Product=1, SerialNumber=0<br />[&nbsp; &nbsp; 5.400000] usb 1-1: Product: C-Media USB Headphone Set&nbsp; <br />[&nbsp; &nbsp; 5.620000] usb 1-1: configuration #1 chosen from 1 choice</p><p>Don&#039;t know if everything is fine, but at least that rtl8652 made me another step forward!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263330">
				<div class="post-metadata">
					<div class="post-num">Post #163</div>
					<div class="post-author">baerle</div>
					<div class="post-datetime">
						29 Jan 2015, 01:15					</div>
				</div>
				<div class="post-content content">
					<p>Really don&#039;t know what still might be wrong (I started to expect the worst...)</p><p>But I have the image of my dslr camera on my smartphone now!<br />Via ddserver and WLAN from that &quot;Edimax 6200nL v2&quot; device.</p><p>(And I made a tar copy from my whole build dir, so I cannot lose it:<br />currently to many edits in to many files...)</p><p>Edit:<br />I will try to make it reproducable: Currently I have edited directly in the kernel sources. My plan is to get something that allows &quot;everyone&quot; to generate the images. If there is a good place for uploading, I can provide my files there: Any ideas?<br />If not, I think I can upload my work to github.</p><p>I noticed you can get that device waiting for tftp by pressing the button when connecting the power:<br />Just hold it for a while, then the bootloader will stop (and start waiting for an upload).<br />So this way you can flash a new firmware and kernel without ever connecting a serial console, and you don&#039;t even have to open it. <br />It is a rather cheap (less than 26 Euro) but nice (small, external antenna, USB) box. (thats why I bought it for my original plan)</p>											<p class="post-edited">(Last edited by <strong>baerle</strong> on 29 Jan 2015, 12:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263444">
				<div class="post-metadata">
					<div class="post-num">Post #164</div>
					<div class="post-author">Tomate</div>
					<div class="post-datetime">
						30 Jan 2015, 00:01					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your efforts, baerle!</p><p>It would ge great if you can put all in a patch or create something like a manual.<br />I&#039;m trying to solve this for myself based on your infos here.</p><p>For uploading I think github would be the best.</p><p>If I can help you with something then tell me. I&#039;ll try my best!</p><br /><p>And I bought this router for the same reasons as you <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> Rather cheap and nice.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263462">
				<div class="post-metadata">
					<div class="post-num">Post #165</div>
					<div class="post-author">vitasonline</div>
					<div class="post-datetime">
						30 Jan 2015, 06:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>andygo wrote:</cite><blockquote><div class="quotebox"><cite>vitasonline wrote:</cite><blockquote><p><strong>andygo</strong>,<br />Hello!<br />I bought a router UR-825AC<br />The official firmware does not suit me.<br />Let us together make OpenWrt?</p></blockquote></div><p>yes, sure! could you provide me with sources of the last one?<br />(<a href="https://yadi.sk/d/ZP726zQEdwWQu">https://yadi.sk/d/ZP726zQEdwWQu</a>)</p></blockquote></div><p>I have no source of firmware. Her gave me a support service upvel.ru, but it is no different from the previous fw-UR-825AC-19.11.14.zip&nbsp; All errors remain.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263667">
				<div class="post-metadata">
					<div class="post-num">Post #166</div>
					<div class="post-author">baerle</div>
					<div class="post-datetime">
						31 Jan 2015, 22:27					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m currently creating a repository with all my changes and a short &quot;walkthrough&quot; to get openwrt to that device.</p><p>Edit:<br />You can find it here:</p><p><a href="https://github.com/utessel/edimax">https://github.com/utessel/edimax</a></p><p>I don&#039;t have my experiments to get usb working there yet, as I would like to understand what is going wrong.</p>											<p class="post-edited">(Last edited by <strong>baerle</strong> on 1 Feb 2015, 20:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263907">
				<div class="post-metadata">
					<div class="post-num">Post #167</div>
					<div class="post-author">Tomate</div>
					<div class="post-datetime">
						2 Feb 2015, 23:32					</div>
				</div>
				<div class="post-content content">
					<p>Thanks baerle (especially for the credits in the readme file <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> )</p><p>Sadly I didn&#039;t get USB working as well. I also tried the original Edimax driver, and it didn&#039;t work. But here some things I noticed, maybe they help to find the problem:<br />The original Edimax driver uses irq9, in the Openwrt driver irq10 is used. I changed it on both but it had no effect.<br />On USB I have a flash drive with power LED on it. I took my camera and made a 250fps video to find out when the USB power goes off. It is after the &quot;new USB bus registered&quot; and before the &quot;irq10, io mem 0x18021000&quot; message.</p><div class="codebox"><pre><code>[    3.850000] mtd: partition &quot;rootfs&quot; set to be root filesystem
[    3.860000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=3F0000, len=410000
[    3.870000] 0x0000003f0000-0x000000800000 : &quot;rootfs_data&quot;
[    3.890000] 0x000000010000-0x000000800000 : &quot;firmware&quot;
[    3.910000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[    3.920000] rtl819x-ehci rtl819x-ehci: Realtek rtl819x On-Chip EHCI Host Controller
[    3.940000] rtl819x-ehci rtl819x-ehci: new USB bus registered, assigned bus number 1
[    3.990000] rtl819x-ehci rtl819x-ehci: irq 10, io mem 0x18021000
[    4.030000] rtl819x-ehci rtl819x-ehci: USB 2.0 started, EHCI 1.00</code></pre></div><p>What I don&#039;t know how long it takes between power off and LED off. The USB Power is buffered with 470µF so this might be some 10 to 100ms....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263914">
				<div class="post-metadata">
					<div class="post-num">Post #168</div>
					<div class="post-author">baerle</div>
					<div class="post-datetime">
						3 Feb 2015, 00:20					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I now have &quot;understood&quot; why I got a USB device working: the ehci driver wasn&#039;t running (One init call or so was missing). This makes a bit sense that the ohci part takes over with USB1.1.</p><p>@tomate:<br />Do you still have an issue with the power?<br />As I don&#039;t have any problems there anymore: At least USB is working when the EHCI part is not initialized somehow.</p><p>Do you have the boot messages from the original firmware? <br />I would like to compare them with &quot;my&quot; kernel, but also compare them with the source: <br />I&#039;m always a bit more confident I&#039;m reading the right source if I know the messages are really printed.</p><p>Hmm: You said you had network problems with an earlier version: But the USB did work? Do you still have the state of the git repository you have used? There must be one path that helped with the LAN problem, and another one that stopped USB....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263922">
				<div class="post-metadata">
					<div class="post-num">Post #169</div>
					<div class="post-author">Tomate</div>
					<div class="post-datetime">
						3 Feb 2015, 01:00					</div>
				</div>
				<div class="post-content content">
					<p>Her e are the messages from the original firmware:</p><div class="codebox"><pre><code>---RealTek(RTL8196C)at 2012.03.22-07:08+0800 version v1.1f [16bit](390MHz)


&lt;=== GPIOA6 off/on 9/1 2202918 times ===&gt;

Jump to image start=0x80500000...

decompressing kernel:
Uncompressing Linux... done, booting the kernel.
done decompressing kernel.
start address: 0x80003630
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Memory: 26656k/32768k available (2650k kernel code, 6112k reserved, 667k data, 108k init, 0k highmem)
Calibrating delay loop... 388.30 BogoMIPS (lpj=1941504)
Mount-cache hash table entries: 512
net_namespace: 528 bytes
NET: Registered protocol family 16
bio: create slab &lt;bio-0&gt; at 0
SCSI subsystem initialized
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 4.0 (2009/01/31) Phillip Lougher
msgmni has been set to 52
io scheduler noop registered
io scheduler cfq registered (default)
HDLC line discipline: version $Revision: 4.8 $, maxframe=4096
N_HDLC line discipline registered.
Realtek GPIO Driver for Flash Reload Default
Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
serial8250: ttyS0 at MMIO 0x18002000 (irq = 8) is a 16550A
PPP generic driver version 2.4.2
MPPE/MPPC encryption/compression module registered
NET: Registered protocol family 24
usbcore: registered new interface driver asix
RTL8192C/RTL8188C driver version 1.4 (2010-08-11)
=====&gt;&gt;INSIDE rtl8192cd_init_one &lt;&lt;=====
vendor_deivce_id=819110ec
=====&gt;&gt;EXIT rtl8192cd_init_one &lt;&lt;=====
=====&gt;&gt;INSIDE rtl8192cd_init_one &lt;&lt;=====
=====&gt;&gt;EXIT rtl8192cd_init_one &lt;&lt;=====
=====&gt;&gt;INSIDE rtl8192cd_init_one &lt;&lt;=====
=====&gt;&gt;EXIT rtl8192cd_init_one &lt;&lt;=====
=====&gt;&gt;INSIDE rtl8192cd_init_one &lt;&lt;=====
=====&gt;&gt;EXIT rtl8192cd_init_one &lt;&lt;=====
=====&gt;&gt;INSIDE rtl8192cd_init_one &lt;&lt;=====
=====&gt;&gt;EXIT rtl8192cd_init_one &lt;&lt;=====
=====&gt;&gt;INSIDE rtl8192cd_init_one &lt;&lt;=====
=====&gt;&gt;EXIT rtl8192cd_init_one &lt;&lt;=====



Probing RTL8186 10/100 NIC-kenel stack size order[3]...
chip name: 8196B, chip revid: 0
  Set 8196C PHY Patch OK
NOT YET
Set threshould idx 0
eth0 added. vid=9 Member port 0x1...
eth1 added. vid=8 Member port 0x10...
eth2 added. vid=10 Member port 0x2...
eth3 added. vid=11 Member port 0x4...
eth4 added. vid=12 Member port 0x8...
[peth0] added, mapping to [eth1]...
SPI INIT
flash device: 0x400000 at 0xbfe00000
SPI 1
Physically mapped flash: Found an alies 0x800000 for the chip at 0x0, MX25L6405D device detect.
Creating 2 MTD partitions on &quot;Physically mapped flash&quot;:
0x000000000000-0x000000800000 : &quot;boot+cfg+linux+rootfs&quot;
0x000000120000-0x000000800000 : &quot;root fs&quot;
ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
reg 0xe0 not correct
USB 2.0 PHY Patch Done.
rtl8652-ehci rtl8652-ehci.0: RTL8652 On-Chip EHCI Host Controller
rtl8652-ehci rtl8652-ehci.0: new USB bus registered, assigned bus number 1
read synopsys=0
read synopsys2=0
rtl8652-ehci rtl8652-ehci.0: irq 9, io base 0x18021000
rtl8652-ehci rtl8652-ehci.0: USB 0.0 started, EHCI 1.00
usb usb1: New USB device found, idVendor=1d6b, idProduct=0002
usb usb1: New USB device strings: Mfr=3, Product=2, SerialNumber=1
usb usb1: Product: RTL8652 On-Chip EHCI Host Controller
usb usb1: Manufacturer: Linux 2.6.30.9 ehci_hcd
usb usb1: SerialNumber: rtl8652-ehci.0
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
rtl8652-ohci rtl8652-ohci.0: RTL8652 OHCI
rtl8652-ohci rtl8652-ohci.0: new USB bus registered, assigned bus number 2
rtl8652-ohci rtl8652-ohci.0: irq 9, io mem 0x18020000
usb usb2: New USB device found, idVendor=1d6b, idProduct=0001
usb usb2: New USB device strings: Mfr=3, Product=2, SerialNumber=1
usb usb2: Product: RTL8652 OHCI
usb usb2: Manufacturer: Linux 2.6.30.9 ohci_hcd
usb usb2: SerialNumber: rtl8652
usb usb2: configuration #1 chosen from 1 choice
hub 2-0:1.0: USB hub found
hub 2-0:1.0: 1 port detected
Netfilter messages via NETLINK v0.30.
nf_conntrack version 0.5.0 (512 buckets, 2048 max)
CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use
nf_conntrack.acct=1 kernel paramater, acct=1 nf_conntrack module option or
sysctl net.netfilter.nf_conntrack_acct=1 to enable it.
init 461 Check Point!
xt_time: kernel timezone is -0000
ip_tables: (C) 2000-2006 Netfilter Core Team
TCP cubic registered
NET: Registered protocol family 17
VFS: Mounted root (squashfs filesystem) readonly on device 31:1.
Freeing unused kernel memory: 108k freed

init started: BusyBox v1.11.1 (2012-06-11 18:01:16 CST)

starting pid 666, tty &#039;&#039;: &#039;/etc/init.d/rcS&#039;

Please press Enter to activate this console. 
starting pid 669, tty &#039;&#039;: &#039;-/bin/sh&#039;


BusyBox v1.11.1 (2012-06-11 18:01:16 CST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

Sat Jan  1 00:00:00 UTC 2011
Running: USB is enabled

&lt;=== USB PWR on ===&gt;
Running: usb/internet led off
Fast Nat 
Fast Nat end
killall: pptp.sh: no process killed
killall: pppoe.sh: no process killed
killall: comgt: no process killed
killall: failover.sh: no process killed
killall: ppp3gloop.sh: no process killed
killall: dhcp3gloop.sh: no process killed

--------------------------------------------------------------------------------
/bin/disconnect.sh all
--------------------------------------------------------------------------------
=== Close Wan Interface!! ===
=== Finish running disconnect.sh ===
=== clean /tmp/disconnect.pid ===
Initialize WLAN interface


Running: wlan blink
Setup BRIDGE interface

ifconfig: ioctl 0x8913 failed: No such device
ifconfig: ioctl 0x8913 failed: No such device
bridge br0 doesn&#039;t exist; can&#039;t delete it
Setup bridge...
device eth0 entered promiscuous mode
device wlan0 entered promiscuous mode
===&gt; Load_92C_Firmware
&lt;=== Load_92C_Firmware
br0: port 2(wlan0) entering forwarding state
br0: port 1(eth0) entering forwarding state


WiFi Simple Config v1.17 (2010.06.04-06:14+0000).

device eth1 is not a slave of br0
route: ioctl 0x890c failed: No such process
device eth0 is already a member of a bridge; can&#039;t enslave it to bridge br0.
**********************************************************************
*                           Running Diagd                            *
**********************************************************************
**********************************************************************
*                          Enable WSC_UPnP                           *
**********************************************************************
IEEE 802.11f (IAPP) using interface br0 (v1.7)

**********************************************************************
*                            Start WPS_daemon                        *
**********************************************************************
**********************************************************************
*                            Enable LLTD                             *
**********************************************************************

killall: lld2d: no process killed


**********************************************************************
*                       Enable GPIO Interrupt                        *
**********************************************************************
Start AP as Enrollee daemon !!


killall: watchdog.sh: no process killed
killall: radiusd: no process killed
RADIUS server disable !!
ReInit APMIB
**********************************************************************
*                       FREE Page,Dentries and Inodes Cache          *
**********************************************************************
MemFree:           14972 kB
Cached:             3100 kB
=== LAN_WAN_SEL is NOT defined ===
=== Starting WAN ===
killall: pppd: no process killed
killall: runppp.sh: no process killed
killall: pptp.sh: no process killed
killall: pppoe.sh: no process killed

--------------------------------------------------------------------------------
/bin/disconnect.sh all
--------------------------------------------------------------------------------
=== Close Wan Interface!! ===
=== Finish running disconnect.sh ===
=== clean /tmp/disconnect.pid ===
killall: ppp3gloop.sh: no process killed
=== Setup WAN interface ===

--------------------------------------------------------------------------------
/bin/disconnect.sh all 0
--------------------------------------------------------------------------------
=== Close Wan Interface!! ===
=== Finish running disconnect.sh ===
=== clean /tmp/disconnect.pid ===
device eth0 left promiscuous mode
br0: port 1(eth0) entering disabled state
device eth0 entered promiscuous mode
br0: port 1(eth0) entering forwarding state




udhcp client (v0.9.9-pre) started
ReInit APMIB
into eth1.deconfig
WEBS Restarting !
Start AP as Enrollee daemon !!
Start AP as Enrollee daemon !!</code></pre></div><p>I didn&#039;t try your firmware yet, so I have already problems with USB power. Hope your firmware will work then <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Yes, on my first try with nprove firmware USB worked an LAN did not. Maybe I can restore the state of the repository, I only backuped the images.....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264089">
				<div class="post-metadata">
					<div class="post-num">Post #170</div>
					<div class="post-author">lexa2</div>
					<div class="post-datetime">
						4 Feb 2015, 03:40					</div>
				</div>
				<div class="post-content content">
					<p>Guys, I&#039;ve got a question regarding sources you use to build a firmware. It seems like you follow git repo made available by former nprove employee and looking into sources it looks like realtek target there is based on 2.6.30 kernel. At the same time I was able to find and download tarball named 00002778-rtk_openwrtSDK_v2.1_20140314_full.tar.gz (there was a link posted earlier in this thread) which claims to contain the SDK for realtek-based routers based on OpenWRT. Checking its contents reveals that it is based on a more fresh snapshot of openwrt and realtek target is based on kernel 3.10.</p><p>Thus I&#039;m curious about two things:<br />1) Had you tried using &quot;rtk_openwrtSDK_v2.1_20140314&quot; to check if USB works with it out of the box?<br />2) Does anyone here have any idea what is the source of &quot;rtk_openwrtSDK_v2.1_20140314&quot;? Is it an official release from realtek or is it some internal project that had leaked to public somehow?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264123">
				<div class="post-metadata">
					<div class="post-num">Post #171</div>
					<div class="post-author">baerle</div>
					<div class="post-datetime">
						4 Feb 2015, 12:21					</div>
				</div>
				<div class="post-content content">
					<p>Hi Lexa2,</p><p>Thanks for your hint.<br />My primary interest was to get that router hardware work for me, not a specific kernel or openwrt version, not even &quot;current&quot; was important: I don&#039;t plan to use it as a &quot;router&quot;, so I don&#039;t see security issues: I will typically not connect it to the internet at all. Tomate has mentioned he had tried it on the same hardware, so I thought, give it a try, and if it works with my software, I&#039;m done with it.<br />If I would have got the GPL packet from Edimax compiled, I would have used that for my &quot;problem&quot;.<br />(Edit: I was able now to compile that and load the generated image to the device, it runs and USB works with that)</p><p>As I have found a few things like those GPIO things, I wanted to publish that, maybe someone else has the same questions? <br />And while compiling the original git I had to solve a few little problems: it didn&#039;t work out of the box as a few URLs where out of date or whatever, so I published these changes: At least I had these question, nothing difficult, but it might help someone. Another copy of that repository doesn&#039;t hurt I think?</p><p>I know nothing about 2), but for 1):<br />I didn&#039;t take a look to that package you mentioned when I started, but now I have downloaded the file:<br />I&#039;m not sure it will help after having a first look: My router has a rtl8196c. No default config for that chip: That tar-ball mentions these chips:<br />rtl8198C<br />rtl8954E<br />rtl8197D<br />rtl8196E<br />rtl8881A<br />I can&#039;t even select the right one (for me) in menuconfig. So: Nothing I plan to dig into.</p>											<p class="post-edited">(Last edited by <strong>baerle</strong> on 4 Feb 2015, 16:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264163">
				<div class="post-metadata">
					<div class="post-num">Post #172</div>
					<div class="post-author">dickms</div>
					<div class="post-datetime">
						4 Feb 2015, 17:58					</div>
				</div>
				<div class="post-content content">
					<p>Lexa, did you find a download of that tarball that wasn&#039;t infected with adware? The link previously mentioned in this thread was, along with everything I could find on a search...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264208">
				<div class="post-metadata">
					<div class="post-num">Post #173</div>
					<div class="post-author">baerle</div>
					<div class="post-datetime">
						5 Feb 2015, 00:55					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m just curious: How can one infect a gzipped tarball with adware? </p><p>Accourding the USB problem:<br />To compile the edimax GPL things, I did exactly what they have written in their docu:<br />Installed Fedora 8, code in /home/..., Then I got it compiled: <br />Seems some parts rely on real old environments...<br />This is in fact not related to openwrt, but at least I should be able to instrument both kernels with that.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264272">
				<div class="post-metadata">
					<div class="post-num">Post #174</div>
					<div class="post-author">dickms</div>
					<div class="post-datetime">
						5 Feb 2015, 17:46					</div>
				</div>
				<div class="post-content content">
					<p>It wasn&#039;t a simple tgz... the link in the thread pointed to an htm page that downloaded a tar.gz.exe&nbsp; Your recent link, to the tgz, was just fine, of course, and raised no flags.</p><p>This is endpoint of following the link from earlier in our thread, from my Downloads list (points to a non-existent file, now):</p><p><a href="http://get.bedinstall.com/n/3.2.96/13752191/00002778-rtk_openwrtSDK_v2.1_20140314_full.tar.gz.exe?secure=1423065399_c84b61a115845218d5fd450e6c9d572f">http://get.bedinstall.com/n/3.2.96/1375 … 0e6c9d572f</a></p><p>The file, when downloaded, raised a flag in AVG for BundleApp_r.</p><p>My actual process was to click on chiajiao&#039;s link:</p><p>2014-06-04 23:00:15<br />Re: Realtek SoC support in OpenWrt (174 replies, posted in Hardware Hacking)<br />New url <a href="http://www.solidfiles.com/d/473dd51828/00002778-rtk_openwrtSDK_v2.1_20140314_full.tar.gz">http://www.solidfiles.com/d/473dd51828/ … ull.tar.gz</a></p><p>That took me to a solidfiles page with a download button, which had the .exe link quoted above...<br />Unless I&#039;ve got some kind of link editting virus.... try it yourself, please.</p>											<p class="post-edited">(Last edited by <strong>dickms</strong> on 5 Feb 2015, 17:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264398">
				<div class="post-metadata">
					<div class="post-num">Post #175</div>
					<div class="post-author">lexa2</div>
					<div class="post-datetime">
						6 Feb 2015, 18:10					</div>
				</div>
				<div class="post-content content">
					<p>I had no troubles (except for slow download speed for &quot;free download&quot;) fetching tar.gz and it was what I expected it to be. No adware or any other binaries from Windows world. I suspect that you might press on the wrong link and get some adware or so-called &quot;download-manager downloader&quot; instead of fetching a direct link. It is typical for file hosting sites to place nice and big &quot;DOWNLOAD IT NOW&quot; buttons that lead to anything except for the real file you want to download. Try again and keep as much attention as you can on what you click and you should end up with a real download link.</p><p>P.S. Just tried pressing that big fancy green download button on solidfiles site using Google Chrome running under Linux Mate DE. Got normal tar.gz as expected and not *.tar.gz.exe.</p>											<p class="post-edited">(Last edited by <strong>lexa2</strong> on 6 Feb 2015, 18:13)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 7 of 13</div><nav><ul><li><a href="viewtopic.php%3Fid=46606&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=46606&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=46606&amp;p=6.html">6</a></li><li class="pagination-current"><span>7</span></li><li><a href="viewtopic.php%3Fid=46606&amp;p=8.html">8</a></li><li><a href="viewtopic.php%3Fid=46606&amp;p=9.html">9</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=46606&amp;p=13.html">13</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>