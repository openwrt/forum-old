<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> About Bcm4708 router, initramfs and nand flash driver</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p343185">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						7 Nov 2016, 11:14					</div>
				</div>
				<div class="post-content content">
					<p>Can anyone help me?</p><p>1. I know the initramfs is a very importand tool for debugging. How to use it after compiling ramdisk? Is there any initramfs example for Broadcom chip router?</p><br /><p>2. The netgear r6300v2 has 128MB nand flash -- K9F1G08U0D, made by samsung. My BCM4708 router has same source design with r6300v2, but use Spansion 128MB nand flash -- S34ML01G100TFI00, instead of samsung one. I think this diffrence make my router failed to boot, but I don&#039;t know how to change the driver.</p><div class="codebox"><pre><code>CFE version 6.37.14.62 (r436032) based on BBP 1.0.37 for BCM947XX (32bit,SP,)
Copyright (C) 2000-2008 Broadcom Corporation.

Init Arena
Init Devs.
Boot partition size = 262144(0x40000)
DDR Clock: 400 MHz
Info: DDR frequency set from clkfreq=800,*400*
et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 6.37.14.62 (r436032)
CPU type 0x0: 800MHz
Tot mem: 131072 KBytes

CFE mem:    0x00F00000 - 0x01791D54 (8985940)
Data:       0x00F4A3CC - 0x00F4A88C (1216)
BSS:        0x00F4A898 - 0x00F8FD54 (283836)
Heap:       0x00F8FD54 - 0x0178FD54 (8388608)
Stack:      0x0178FD54 - 0x01791D54 (8192)
Text:       0x00F00000 - 0x00F416F8 (268024)

Device eth0:  hwaddr 00-90-4C-0F-F4-6C, ipaddr 192.168.1.1, mask 255.255.255.0
        gateway not set, nameserver not set
Loader:raw Filesys:tftp Dev:eth0 File:: Options:(null)
Loading: Failed.
Could not load :: Timeout occured
Loader:raw Filesys:raw Dev:nflash0.os File: Options:(null)
Loading: .. 1539871 bytes read
Entry at 0x00008000
Closing network.
Starting program at 0x00008000
Uncompressing Linux... done, booting the kernel.
[    0.000000] Booting Linux on physical CPU 0x0
[    0.000000] Linux version 4.4.27 (wangfeng@software) (gcc version 5.4.0 (LEDE GCC 5.4.0 r1967) ) #0 SMP Mon Oct 24 20:52:44 2016
[    0.000000] CPU: ARMv7 Processor [413fc090] revision 0 (ARMv7), cr=10c5387d
[    0.000000] CPU: PIPT / VIPT nonaliasing data cache, VIPT aliasing instruction cache
[    0.000000] Machine model: Netgear R6300 V2 (BCM4708)
[    0.000000] Memory policy: Data cache writealloc
[    0.000000] PERCPU: Embedded 11 pages/cpu @c6dce000 s12928 r8192 d23936 u45056
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 65280
[    0.000000] Kernel command line: console=ttyS0,115200
[    0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)
[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Memory: 254748K/262144K available (3202K kernel code, 102K rwdata, 1208K rodata, 220K init, 280K bss, 7396K reserved, 0K cma-reserved, 131072K highmem)
[    0.000000] Virtual kernel memory layout:
[    0.000000]     vector  : 0xffff0000 - 0xffff1000   (   4 kB)
[    0.000000]     fixmap  : 0xffc00000 - 0xfff00000   (3072 kB)
[    0.000000]     vmalloc : 0xc8800000 - 0xff800000   ( 880 MB)
[    0.000000]     lowmem  : 0xc0000000 - 0xc8000000   ( 128 MB)
[    0.000000]     pkmap   : 0xbfe00000 - 0xc0000000   (   2 MB)
[    0.000000]     modules : 0xbf000000 - 0xbfe00000   (  14 MB)
[    0.000000]       .text : 0xc0008000 - 0xc0456e44   (4412 kB)
[    0.000000]       .init : 0xc0457000 - 0xc048e000   ( 220 kB)
[    0.000000]       .data : 0xc048e000 - 0xc04a7b2c   ( 103 kB)
[    0.000000]        .bss : 0xc04a7b2c - 0xc04eddec   ( 281 kB)
[    0.000000] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=2, Nodes=1
[    0.000000] Hierarchical RCU implementation.
[    0.000000] NR_IRQS:16 nr_irqs:16 16
[    0.000000] L2C: DT/platform modifies aux control register: 0x0a130000 -&gt; 0x0a530000
[    0.000000] L2C-310 enabling early BRESP for Cortex-A9
[    0.000000] L2C-310 full line of zeros enabled for Cortex-A9
[    0.000000] L2C-310 ID prefetch enabled, offset 1 lines
[    0.000000] L2C-310 dynamic clock gating enabled, standby mode enabled
[    0.000000] L2C-310 cache controller enabled, 16 ways, 256 kB
[    0.000000] L2C-310: CACHE_ID 0x410000c8, AUX_CTRL 0x7e530001
[    0.000015] sched_clock: 64 bits at 400MHz, resolution 2ns, wraps every 4398046511103ns
[    0.000039] clocksource: arm_global_timer: mask: 0xffffffffffffffff max_cycles: 0x5c4093a7d1, max_idle_ns: 440795210635 ns
[    0.000255] Calibrating delay loop... 1594.16 BogoMIPS (lpj=7970816)
[    0.090144] pid_max: default: 32768 minimum: 301
[    0.090235] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.090247] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.090792] CPU: Testing write buffer coherency: ok
[    0.091089] CPU0: thread -1, cpu 0, socket 0, mpidr 80000000
[    0.091181] Setting up static identity map for 0x82a0 - 0x82d4
[    0.130139] CPU1: thread -1, cpu 1, socket 0, mpidr 80000001
[    0.130228] Brought up 2 CPUs
[    0.130249] SMP: Total of 2 processors activated (3188.32 BogoMIPS).
[    0.130259] CPU: WARNING: CPU(s) started in wrong/inconsistent modes (primary CPU mode 0x13)
[    0.130266] CPU: This may indicate a broken bootloader or firmware.
[    0.132571] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns
[    0.132696] pinctrl core: initialized pinctrl subsystem
[    0.133182] NET: Registered protocol family 16
[    0.133956] DMA: preallocated 256 KiB pool for atomic coherent allocations
[    0.162509] clocksource: Switched to clocksource arm_global_timer
[    0.163864] NET: Registered protocol family 2
[    0.164536] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.164569] TCP bind hash table entries: 1024 (order: 1, 8192 bytes)
[    0.164595] TCP: Hash tables configured (established 1024 bind 1024)
[    0.164692] UDP hash table entries: 256 (order: 1, 8192 bytes)
[    0.164727] UDP-Lite hash table entries: 256 (order: 1, 8192 bytes)
[    0.164971] NET: Registered protocol family 1
[    0.166253] futex hash table entries: 512 (order: 3, 32768 bytes)
[    0.166456] Crashlog allocated RAM at address 0x3f00000
[    0.172506] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.172541] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.174483] bounce: pool size: 64 pages
[    0.174510] io scheduler noop registered
[    0.174525] io scheduler deadline registered (default)
[    0.175048] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
[    0.175810] console [ttyS0] disabled
[    0.175871] 18000300.serial: ttyS0 at MMIO 0x18000300 (irq = 18, base_baud = 6250000) is a 16550
[    0.607329] console [ttyS0] enabled
[b][    0.612470] nand: Could not find valid ONFI parameter page; aborting
[    0.618823] nand: device found, Manufacturer ID: 0x01, Chip ID: 0xf1
[    0.625179] nand: AMD/Spansion NAND 128MiB 3,3V 8-bit
[    0.630216] nand: 128 MiB, SLC, erase size: 128 KiB, page size: 2048, OOB size: 64
[    0.637769] iproc_nand 18028000.nand: detected 128MiB total, 128KiB blocks, 2KiB pages, 16B OOB, 8-bit, BCH-8
[    0.647655] Scanning device for bad blocks
[    0.752255] Bad eraseblock 123 at 0x000000f60000
[    1.314718] Bad eraseblock 865 at 0x000006c20000
[    1.393633] Bad eraseblock 965 at 0x0000078a0000
[    1.442035] mtd_read error while parsing (offset: 0x0): -74
[    1.448041] mtd_read error while parsing (offset: 0x20000): -74
[    1.456032] mtd_read error while parsing (offset: 0x80000): -74
[    1.466141] random: nonblocking pool is initialized
[    1.476237] mtd_read error while parsing (offset: 0x200000): -74
[    1.482679] mtd_read error while parsing (offset: 0x220000): -74
[    1.489110] mtd_read error while parsing (offset: 0x240000): -74[/b]
[    1.495551] mtd_read error while parsing (offset: 0x260000): -74
[    1.501997] mtd_read error while parsing (offset: 0x280000): -74
[    1.508430] mtd_read error while parsing (offset: 0x2A0000): -74
[    1.514870] mtd_read error while parsing (offset: 0x2C0000): -74
[    1.521313] mtd_read error while parsing (offset: 0x2E0000): -74
[    1.527740] mtd_read error while parsing (offset: 0x300000): -74
[    1.534180] mtd_read error while parsing (offset: 0x320000): -74

...

[    7.562264] mtd_read error while parsing (offset: 0x7F60000): -74
[    7.568751] mtd_read error while parsing (offset: 0x7F80000): -74
[    7.575244] mtd_read error while parsing (offset: 0x7FA0000): -74
[    7.581739] mtd_read error while parsing (offset: 0x7FC0000): -74
[    7.588227] mtd_read error while parsing (offset: 0x7FE0000): -74
[    7.597346] libphy: Fixed MDIO Bus: probed
[    7.601564] bgmac_bcma: Broadcom 47xx GBit MAC driver loaded</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343412">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						10 Nov 2016, 11:55					</div>
				</div>
				<div class="post-content content">
					<p>Maybe lede doesn&#039;t support my nand flash? <br />If I want it support Spansion 128MB nand flash S34ML01G100TFI00, how to change the code? <br />Add something to nand_flash_ids[] ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343965">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						17 Nov 2016, 11:42					</div>
				</div>
				<div class="post-content content">
					<p>I flash my new device with chaos calmer firmware for netgear r6300v2, nand flash error disapears. But it still failed to boot. Who can help me?</p><div class="codebox"><pre><code>Digital core power voltage set to 0.9375V
Decompressing...done


CFE version 6.37.14.62 (r436032) based on BBP 1.0.37 for BCM947XX (32bit,SP,)
Build Date: Tue Jun 21 15:42:09 CST 2016 (li@software)
Copyright (C) 2000-2008 Broadcom Corporation.

Init Arena
Init Devs.
Boot partition size = 262144(0x40000)
DDR Clock: 400 MHz
Info: DDR frequency set from clkfreq=800,*400*
et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 6.37.14.62 (r436032)
CPU type 0x0: 800MHz
Tot mem: 131072 KBytes

CFE mem:    0x00F00000 - 0x01791D54 (8985940)
Data:       0x00F4A3CC - 0x00F4A88C (1216)
BSS:        0x00F4A898 - 0x00F8FD54 (283836)
Heap:       0x00F8FD54 - 0x0178FD54 (8388608)
Stack:      0x0178FD54 - 0x01791D54 (8192)
Text:       0x00F00000 - 0x00F416F8 (268024)

Device eth0:  hwaddr 00-90-4C-0F-F4-6C, ipaddr 192.168.1.1, mask 255.255.255.0
        gateway not set, nameserver not set
Boot program checksum is invalid
flash0.0: Device not found
Loader:raw Filesys:raw Dev:nflash0.os File: Options:(null)
Loading: .. 1393650 bytes read
Entry at 0x00008000
Closing network.
Starting program at 0x00008000
Uncompressing Linux... done, booting the kernel.
[    0.000000] Booting Linux on physical CPU 0x0
[    0.000000] Linux version 3.18.23 (buildbot@builder1) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r47269) ) #1 SMP Sun Jan 31 09:44:04 CET 2016
[    0.000000] CPU: ARMv7 Processor [413fc090] revision 0 (ARMv7), cr=10c5387d
[    0.000000] CPU: PIPT / VIPT nonaliasing data cache, VIPT aliasing instruction cache
[    0.000000] Machine model: Netgear R6300 V2 (BCM4708)
[    0.000000] Memory policy: Data cache writealloc
[    0.000000] PERCPU: Embedded 9 pages/cpu @c6dd4000 s5952 r8192 d22720 u36864
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 65280
[    0.000000] Kernel command line: console=ttyS0,115200
[    0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)
[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Memory: 255604K/262144K available (2854K kernel code, 105K rwdata, 780K rodata, 180K init, 275K bss, 6540K reserved, 131072K highmem)
[    0.000000] Virtual kernel memory layout:
[    0.000000]     vector  : 0xffff0000 - 0xffff1000   (   4 kB)
[    0.000000]     fixmap  : 0xffc00000 - 0xffe00000   (2048 kB)
[    0.000000]     vmalloc : 0xc8800000 - 0xff000000   ( 872 MB)
[    0.000000]     lowmem  : 0xc0000000 - 0xc8000000   ( 128 MB)
[    0.000000]     pkmap   : 0xbfe00000 - 0xc0000000   (   2 MB)
[    0.000000]     modules : 0xbf000000 - 0xbfe00000   (  14 MB)
[    0.000000]       .text : 0xc0008000 - 0xc0394dcc   (3636 kB)
[    0.000000]       .init : 0xc0395000 - 0xc03c2000   ( 180 kB)
[    0.000000]       .data : 0xc03c2000 - 0xc03dc638   ( 106 kB)
[    0.000000]        .bss : 0xc03dc638 - 0xc042160c   ( 276 kB)
[    0.000000] Hierarchical RCU implementation.
[    0.000000]  RCU restricting CPUs from NR_CPUS=4 to nr_cpu_ids=2.
[    0.000000] RCU: Adjusting geometry for rcu_fanout_leaf=16, nr_cpu_ids=2
[    0.000000] NR_IRQS:16 nr_irqs:16 16
[    0.000000] L2C: platform modifies aux control register: 0x0a130000 -&gt; 0x7a530001
[    0.000000] L2C: platform provided aux values permit register corruption.
[    0.000000] L2C: DT/platform modifies aux control register: 0x0a130000 -&gt; 0x7a530001
[    0.000000] L2C-310 erratum 769419 enabled
[    0.000000] L2C-310 enabling early BRESP for Cortex-A9
[    0.000000] L2C-310: enabling full line of zeros but not enabled in Cortex-A9
[    0.000000] L2C-310 ID prefetch enabled, offset 1 lines
[    0.000000] L2C-310 dynamic clock gating enabled, standby mode enabled
[    0.000000] L2C-310 cache controller enabled, 16 ways, 256 kB
[    0.000000] L2C-310: CACHE_ID 0x410000c8, AUX_CTRL 0x7e530001
[    0.000016] sched_clock: 64 bits at 400MHz, resolution 2ns, wraps every 2748779069440ns
[    0.000317] Calibrating delay loop... 1594.16 BogoMIPS (lpj=7970816)
[    0.090124] pid_max: default: 32768 minimum: 301
[    0.090286] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.090299] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.090816] CPU: Testing write buffer coherency: ok
[    0.091075] CPU0: thread -1, cpu 0, socket 0, mpidr 80000000
[    0.091207] Setting up static identity map for 0x11a68 - 0x11a9c
[    0.093141] CPU1: Booted secondary processor
[    0.130112] CPU1: thread -1, cpu 1, socket 0, mpidr 80000001
[    0.130197] Brought up 2 CPUs
[    0.130222] SMP: Total of 2 processors activated (3188.32 BogoMIPS).
[    0.130232] CPU: WARNING: CPU(s) started in wrong/inconsistent modes (primary CPU mode 0x13)
[    0.130238] CPU: This may indicate a broken bootloader or firmware.
[    0.137837] NET: Registered protocol family 16
[    0.138624] DMA: preallocated 256 KiB pool for atomic coherent allocations
[    0.172482] Switched to clocksource arm_global_timer
[    0.173807] NET: Registered protocol family 2
[    0.174710] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.174743] TCP bind hash table entries: 1024 (order: 1, 8192 bytes)
[    0.174770] TCP: Hash tables configured (established 1024 bind 1024)
[    0.174855] TCP: reno registered
[    0.174876] UDP hash table entries: 256 (order: 1, 8192 bytes)
[    0.174909] UDP-Lite hash table entries: 256 (order: 1, 8192 bytes)
[    0.175206] NET: Registered protocol family 1
[    0.176280] futex hash table entries: 512 (order: 3, 32768 bytes)
[    0.177396] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.177424] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.177670] msgmni has been set to 243
[    0.178299] bounce: pool size: 64 pages
[    0.178319] io scheduler noop registered
[    0.178334] io scheduler deadline registered (default)
[    0.178653] Serial: 8250/16550 driver, 16 ports, IRQ sharing enabled
[    0.180772] console [ttyS0] disabled
[    0.180826] 18000300.serial: ttyS0 at MMIO 0x18000300 (irq = 117, base_baud = 6250000) is a 16550
[    0.617153] console [ttyS0] enabled
[    0.621037] 18000400.serial: ttyS1 at MMIO 0x18000400 (irq = 117, base_baud = 6250000) is a 16550
[    0.631455] libphy: Fixed MDIO Bus: probed
[    0.635650] bgmac: Broadcom 47xx GBit MAC driver loaded
[    0.641071] bcma: bus0: Found chip with id 53010, rev 0x00 and package 0x02
[    0.648083] bcma: bus0: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x2A, class 0x0)
[    0.656659] bcma: bus0: Core 1 found: Chipcommon B (manuf 0x4BF, id 0x50B, rev 0x01, class 0x0)
[    0.665407] bcma: bus0: Core 2 found: DMA (manuf 0x4BF, id 0x502, rev 0x01, class 0x0)
[    0.673354] bcma: bus0: Core 3 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x05, class 0x0)
[    0.681735] bcma: bus0: Core 4 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x05, class 0x0)
[    0.690116] bcma: bus0: Core 5 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x05, class 0x0)
[    0.698495] bcma: bus0: Core 6 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x05, class 0x0)
[    0.706845] bcma: bus0: Core 7 found: PCIe Gen 2 (manuf 0x4BF, id 0x501, rev 0x01, class 0x0)
[    0.715372] bcma: bus0: Core 8 found: PCIe Gen 2 (manuf 0x4BF, id 0x501, rev 0x01, class 0x0)
[    0.723908] bcma: bus0: Core 9 found: PCIe Gen 2 (manuf 0x4BF, id 0x501, rev 0x01, class 0x0)
[    0.732470] bcma: bus0: Core 10 found: ARM Cortex A9 core (ihost) (manuf 0x4BF, id 0x510, rev 0x01, class 0x0)
[    0.742483] bcma: bus0: Core 11 found: USB 2.0 (manuf 0x4BF, id 0x504, rev 0x01, class 0x0)
[    0.750868] bcma: bus0: Core 12 found: USB 3.0 (manuf 0x4BF, id 0x505, rev 0x01, class 0x0)
[    0.759271] bcma: bus0: Core 13 found: SDIO3 (manuf 0x4BF, id 0x503, rev 0x01, class 0x0)
[    0.767494] bcma: bus0: Core 14 found: ARM Cortex A9 JTAG (manuf 0x4BF, id 0x506, rev 0x01, class 0x0)
[    0.776843] bcma: bus0: Core 15 found: Denali DDR2/DDR3 memory controller (manuf 0x4BF, id 0x507, rev 0x01, class 0x0)
[    0.787581] bcma: bus0: Core 16 found: ROM (manuf 0x4BF, id 0x508, rev 0x01, class 0x0)
[    0.795620] bcma: bus0: Core 17 found: NAND flash controller (manuf 0x4BF, id 0x509, rev 0x01, class 0x0)
[    0.805224] bcma: bus0: Core 18 found: SPI flash controller (manuf 0x4BF, id 0x50A, rev 0x01, class 0x0)
[    0.833430] bcm_nand bcma0:17: NAND Controller rev 6.01
[    0.873263] nand: device found, Manufacturer ID: 0x01, Chip ID: 0xf1
[    0.879590] nand: AMD/Spansion NAND 128MiB 3,3V 8-bit
[    0.884629] nand: 128MiB, SLC, page size: 2048, OOB size: 64
[    2.028104] random: nonblocking pool is initialized
[    2.237621] 5 bcm47xxpart partitions found on MTD device bcm_nand
[    2.243701] Creating 5 MTD partitions on &quot;bcm_nand&quot;:
[    2.248647] 0x000000000000-0x000000080000 : &quot;boot&quot;
[    2.255202] 0x000000080000-0x000000200000 : &quot;nvram&quot;
[    2.263706] 0x000000200000-0x000008000000 : &quot;firmware&quot;
[    2.509033] 0x00000020001c-0x000000600000 : &quot;linux&quot;
[    2.522267] 0x000000600000-0x000008000000 : &quot;ubi&quot;
[    2.760408] bcm53xxspiflash spi32766.0: unrecognized JEDEC id bytes: ff, ff, ff
[    2.767723] bcm53xxspiflash: probe of spi32766.0 failed with error -2
[    2.787471] bgmac bcma0:3: Found PHY addr: 30 (NOREGS)
[    2.792997] bgmac bcma0:3: Support for Roboswitch not implemented
[    2.800696] b53_common: found switch: BCM53011, rev 5
[    2.806506] bgmac bcma0:4: Invalid MAC addr: 00:00:00:00:00:00
[    2.812388] bgmac bcma0:4: Using random MAC: 36:b0:95:ec:8d:ca
[    2.818259] bgmac bcma0:4: Found PHY addr: 0
[    2.823912] bgmac: Timeout waiting for reg 0x180
[    2.828511] bgmac bcma0:4: Writing to PHY 0 register 0x0 failed
[    2.835537] bgmac: Timeout waiting for reg 0x180
[    2.840153] bgmac bcma0:4: Reading PHY 0 register 0x0 failed
[    2.845787] bgmac bcma0:4: PHY reset failed
[    2.849951] bgmac bcma0:4: Support for Roboswitch not implemented
[    2.857147] bgmac bcma0:5: Invalid MAC addr: 00:00:00:00:00:00
[    2.863026] bgmac bcma0:5: Using random MAC: 3e:45:8a:9a:cb:be
[    2.868885] bgmac bcma0:5: Found PHY addr: 0
[    2.874554] bgmac: Timeout waiting for reg 0x180
[    2.879159] bgmac bcma0:5: Writing to PHY 0 register 0x0 failed
[    2.886187] bgmac: Timeout waiting for reg 0x180
[    2.890793] bgmac bcma0:5: Reading PHY 0 register 0x0 failed
[    2.896427] bgmac bcma0:5: PHY reset failed
[    2.900600] bgmac bcma0:5: Support for Roboswitch not implemented
[    2.907744] bgmac: Unsupported core_unit 3
[    2.911885] bgmac: probe of bcma0:6 failed with error -524
[    2.917466] pci_host_bcm5301x bcma0:7: initializing PCIe controller
[    3.200140] pci_host_bcm5301x bcma0:7: link: UP
[    3.204797] pci_host_bcm5301x bcma0:7: PCI host bridge to bus 0000:00
[    3.211251] pci_bus 0000:00: root bus resource [mem 0x08000000-0x0fffffff]
[    3.218096] pci_bus 0000:00: root bus resource [io  0x0000]
[    3.223656] pci_bus 0000:00: No busn resource found for root bus, will use [bus 00-ff]
[    3.231849] PCI: bus0: Fast back to back transfers disabled
[    3.237894] PCI: bus1: Fast back to back transfers disabled
[    3.243601] pci 0000:00:00.0: BAR 8: assigned [mem 0x08000000-0x080fffff]
[    3.250376] pci 0000:01:00.0: BAR 0: assigned [mem 0x08000000-0x08003fff 64bit]
[    3.257662] pci 0000:00:00.0: PCI bridge to [bus 01]
[    3.262624] pci 0000:00:00.0:   bridge window [mem 0x08000000-0x080fffff]
[    3.269559] pci_host_bcm5301x bcma0:8: initializing PCIe controller
[    3.550133] pci_host_bcm5301x bcma0:8: link: UP
[    3.554774] pci_host_bcm5301x bcma0:8: PCI host bridge to bus 0001:00
[    3.561217] pci_bus 0001:00: root bus resource [mem 0x40000000-0x47ffffff]
[    3.568067] pci_bus 0001:00: root bus resource [io  0x0000]
[    3.573627] pci_bus 0001:00: No busn resource found for root bus, will use [bus 00-ff]
[    3.581795] PCI: bus0: Fast back to back transfers disabled
[    3.587807] PCI: bus1: Fast back to back transfers disabled
[    3.593561] pci 0001:00:00.0: BAR 8: assigned [mem 0x40000000-0x400fffff]
[    3.600340] pci 0001:01:00.0: BAR 0: assigned [mem 0x40000000-0x40007fff 64bit]
[    3.607623] pci 0001:00:00.0: PCI bridge to [bus 01]
[    3.612578] pci 0001:00:00.0:   bridge window [mem 0x40000000-0x400fffff]
[    3.619485] pci_host_bcm5301x bcma0:9: initializing PCIe controller
[    4.010130] pci_host_bcm5301x bcma0:9: link: DOWN
[    4.015915] bcm47xx-wdt bcm47xx-wdt.0: BCM47xx Watchdog Timer enabled (30 seconds, Software Timer)
[    4.024875] bcma: bus0: Bus registered
[    4.028741] bcma-pci-bridge 0000:01:00.0: enabling device (0140 -&gt; 0142)
[    4.035488] bcma: bus1: Found chip with id 0x4331, rev 0x02 and package 0x08
[    4.042557] bcma: bus1: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x25, class 0x0)
[    4.051074] bcma: bus1: Core 1 found: IEEE 802.11 (manuf 0x4BF, id 0x812, rev 0x1D, class 0x0)
[    4.059680] bcma: bus1: Core 2 found: PCIe (manuf 0x4BF, id 0x820, rev 0x13, class 0x0)
[    4.191519] bcma: bus1: Invalid SPROM read from the PCIe card, trying to use fallback SPROM
[    4.260336] bcma: bus1: Bus registered
[    4.264137] bcma-pci-bridge 0001:01:00.0: enabling device (0140 -&gt; 0142)
[    4.270870] bcma: bus2: Found chip with id 0x4360, rev 0x03 and package 0x01
[    4.277911] bcma: bus2: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x2B, class 0x0)
[    4.286422] bcma: bus2: Core 1 found: IEEE 802.11 (manuf 0x4BF, id 0x812, rev 0x2A, class 0x0)
[    4.295031] bcma: bus2: Core 2 found: ARM CR4 (manuf 0x4BF, id 0x83E, rev 0x02, class 0x0)
[    4.303295] bcma: bus2: Core 3 found: PCIe Gen2 (manuf 0x4BF, id 0x83C, rev 0x01, class 0x0)
[    4.311715] bcma: bus2: Core 4 found: USB 2.0 Device (manuf 0x4BF, id 0x81A, rev 0x11, class 0x0)
[    4.352038] bcma: bus2: Invalid SPROM read from the PCIe card, trying to use fallback SPROM
[    4.364797] bcma: bus2: Bus registered
[    4.368893] TCP: cubic registered
[    4.372244] NET: Registered protocol family 17
[    4.376768] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    4.389362] Bridge firewalling registered
[    4.393374] 8021q: 802.1Q VLAN Support v1.8
[    4.397617] Registering SWP/SWPB emulation handler
[    4.404723] UBI: auto-attach mtd4
[    4.408041] UBI: attaching mtd4 to ubi0
[    5.717205] UBI: scanning is finished
[    5.738502] UBI: attached mtd4 (name &quot;ubi&quot;, size 122 MiB) to ubi0
[    5.744608] UBI: PEB size: 131072 bytes (128 KiB), LEB size: 126976 bytes
[    5.751375] UBI: min./max. I/O unit sizes: 2048/2048, sub-page size 2048
[    5.758046] UBI: VID header offset: 2048 (aligned 2048), data offset: 4096
[    5.764896] UBI: good PEBs: 973, bad PEBs: 3, corrupted PEBs: 0
[    5.770794] UBI: user volume: 2, internal volumes: 1, max. volumes count: 128
[    5.777892] UBI: max/mean erase counter: 1/0, WL threshold: 4096, image sequence number: 1320822690
[    5.786901] UBI: available PEBs: 0, total reserved PEBs: 973, PEBs reserved for bad PEB handling: 17
[    5.796083] UBI: background thread &quot;ubi_bgt0d&quot; started, PID 256
[    5.803153] UBI: ubiblock0_0 created from ubi0:0(rootfs)
[    5.808466] ubiblock: device ubiblock0_0 (rootfs) set to be root filesystem
[    5.898285] VFS: Mounted root (squashfs filesystem) readonly on device 254:0.
[    5.905655] Freeing unused kernel memory: 180K (c0395000 - c03c2000)
[    6.285010] Unable to handle kernel paging request at virtual address c8800f00
[    6.292215] pgd = c0004000
[    6.294909] [c8800f00] *pgd=07804811, *pte=8a000006, *ppte=e59d2000
[    6.301179] Internal error: Oops: 807 [#1] SMP ARM
[    6.305941] Modules linked in:
[    6.308991] CPU: 0 PID: 1 Comm: swapper/0 Not tainted 3.18.23 #1
[    6.314974] task: c7825b80 ti: c7830000 task.ti: c7830000
[    6.320372] PC is at gic_raise_softirq+0x68/0x88
[    6.324971] LR is at gic_raise_softirq+0x40/0x88
[    6.329567] pc : [&lt;c018a990&gt;]    lr : [&lt;c018a968&gt;]    psr: 20000193
[    6.329567] sp : c7831790  ip : 00000002  fp : c78317b4
[    6.340985] r10: 00000000  r9 : c03c547c  r8 : c033767c
[    6.346187] r7 : c03c5140  r6 : 00000002  r5 : 20000193  r4 : 00020002
[    6.352684] r3 : c8800000  r2 : 00000004  r1 : 00000004  r0 : 00000004
[    6.359184] Flags: nzCv  IRQs off  FIQs on  Mode SVC_32  ISA ARM  Segment kernel
[    6.366544] Control: 10c5387d  Table: 0000404a  DAC: 00000015
[    6.372264] Process swapper/0 (pid: 1, stack limit = 0xc78301b8)
[    6.378243] Stack: (0xc7831790 to 0xc7832000)
[    6.382582] 1780:                                     c79870c0 00000001 c03c0040 06a1e000
[    6.390723] 17a0: c03c5320 c7987404 c78317c4 c78317b8 c0016cd4 c018a934 c78317d4 c78317c8
[    6.398862] 17c0: c0017330 c0016cc8 c783180c c78317d8 c003cb88 c001730c 00000000 80000193
[    6.407000] 17e0: c78317fc c7adc53c c7adc530 00000001 00000003 00000000 00000000 00000001
[    6.415140] 1800: c783181c c7831810 c003cc54 c003c960 c783184c c7831820 c0047a5c c003cc4c
[    6.423278] 1820: 00000000 c7adc538 c7adc534 a0000193 00000000 00000001 c7809c40 c03c8141
[    6.431417] 1840: c7831864 c7831850 c0047aa4 c0047a14 00000000 00000000 c7831884 c7831868
[    6.439556] 1860: c00482b8 c0047a94 c7ab4400 c7adc530 00000f10 00000000 c783189c c7831888
[    6.447695] 1880: c01e45e4 c0048288 c7ad27c0 00000064 c78318d4 c78318a0 c004ec1c c01e4554
[    6.455833] 18a0: 7354abeb 816c5da5 c78318cc c7809c40 c03cf71c 00000000 c780e800 00000001
[    6.463974] 18c0: 000000fe 02c170eb c78318ec c78318d8 c004ed5c c004ebf0 c7809c40 c03cf71c
[    6.472112] 18e0: c7831904 c78318f0 c0051a80 c004ed20 00000064 c03bf894 c783191c c7831908
[    6.480251] 1900: c004e400 c00519e4 00000120 00000000 c7831944 c7831920 c004e6ec c004e3e4
[    6.488390] 1920: c7831968 c8802100 c7831968 c03c547c c783199c 00000600 c7831964 c7831948
[    6.496529] 1940: c0008680 c004e674 00006000 c01809b4 80000113 ffffffff c78319dc c7831968
[    6.504667] 1960: c0009220 c000864c 00000000 00000000 c7b614e4 000000c0 c7b60000 c7b606dc
[    6.512806] 1980: 00000709 00000000 00000600 000000fe 02c170eb c78319dc 000000c0 c78319b0
[    6.520945] 19a0: 00006000 c01809b4 80000113 ffffffff 000003eb c7b60000 c7b54e44 0000002a
[    6.529083] 19c0: c7b66ee8 00000000 00000000 c7b54e44 c7831a04 c78319e0 c0181544 c01806bc
[    6.537222] 19e0: c7b54dc0 c7b54e44 00000390 c7b60000 c7b54de8 00000000 c7831a2c c7831a08
[    6.545361] 1a00: c0181ac8 c0181030 00000001 00000390 00000024 c7af0800 0000006c c7af1000
[    6.553501] 1a20: c7831a7c c7831a30 c017fe98 c0181a18 00000003 00000390 00040000 00000000
[    6.561640] 1a40: 0001ad77 00000000 00008f72 00000000 00000016 c7b54e40 00000024 c7a1ba40
[    6.569779] 1a60: 0000006c c7af1000 00016000 c7a14180 c7831ab4 c7831a80 c00fd52c c017fb4c
[    6.577918] 1a80: c7831ad4 00000000 c000e770 c7a14180 c00fd440 c7af1000 c7af0ffc 0000006e
[    6.586056] 1aa0: c7a14180 c7a1ba40 c7831ae4 c7831ab8 c00fd3ec c00fd44c 00000000 00011a22
[    6.594196] 1ac0: c7a1ba40 0000006e c7831ae4 0000006c c7af11ac 0001adb4 c7831b44 c7831ae8
[    6.602333] 1ae0: c00f9bd4 c00fd3a8 0001adb4 c7a1ba40 00000036 00000001 00000000 c7af1000
[    6.610472] 1b00: 0000006e 00000000 0000006c c7831b18 0000006c 00000000 000200da 00000000
[    6.618611] 1b20: c74155b8 c7a71200 00000040 00000000 00000100 c6dff3e0 c7831b9c c7831b48
[    6.626750] 1b40: c00fcee0 c00f979c 0001adb4 00000000 c7a1ba40 c7831b60 c7a1ba40 c00fa078
[    6.634890] 1b60: 0000006e 00000000 c7a71100 00000040 01ffffff 00000000 c7a14180 00000800
[    6.643029] 1b80: 00000000 c6dff3e0 00000000 c74155b8 c7831c14 c7831ba0 c00fb398 c00fcc58
[    6.651167] 1ba0: 0001adb4 c6dff3e0 c7831bc4 00000001 c008a008 00000800 c7a14180 00000000
[    6.659305] 1bc0: 00000001 00000000 0000006e 00000000 00000063 0000005f 002dabd6 00000000
[    6.667444] 1be0: 0001adb4 00000000 c0076170 00000004 c7415684 c7831c28 00000000 c6dff3e0
[    6.675584] 1c00: 00100100 00200200 c7831c74 c7831c18 c007ede8 c00fadd4 0000011f c7415688
[    6.683723] 1c20: 00000058 c7a26a00 c6dff454 c6dff414 c7831c30 c7831c30 c7831c38 c7831c38
[    6.691860] 1c40: c7831c40 c7831c40 c7407550 c7a26a68 00000020 00000000 00000001 c7415684
[    6.700001] 1c60: c7a26a00 ffffffff c7831cac c7831c78 c007f018 c007ec44 00000003 c016beec
[    6.708139] 1c80: 00000000 0002801d 00000000 c7415684 c7831d64 00000000 c7a26a00 ffffffff
[    6.716277] 1ca0: c7831ccc c7831cb0 c007f1bc c007ee3c 00000000 00000001 c7a26a00 00000000
[    6.724417] 1cc0: c7831d4c c7831cd0 c0076e14 c007f168 00000001 c034974c 00000000 00000000
[    6.732556] 1ce0: c7831d0c 00000001 c7a26a68 00000000 c74155b8 00000001 00000fff c7831d78
[    6.740695] 1d00: 00000000 00000000 c00b16d4 c00c51f4 00000101 c7831d88 c7831d7c c7831d28
[    6.748833] 1d20: c00b604c 00000000 00000000 00000080 c7831e08 c7a26a00 c03cda28 c040688c
[    6.756973] 1d40: c7831dd4 c7831d50 c00a9434 c0076c28 00000080 c034974c 00000001 c7a71200
[    6.765111] 1d60: 00000080 00000002 00000000 00000080 c7831d5c 00000001 c7a26a00 00000000
[    6.773248] 1d80: 00000000 00000000 c7825b80 00000000 00000000 00000000 00000000 00000000
[    6.781388] 1da0: 00000080 00000000 00000000 00000000 c7a71200 c7a26a00 c7a71200 c7831e08
[    6.789528] 1dc0: c040688c 00000001 c7831e04 c7831dd8 c00a9b28 c00a93bc 0000003f ffffffff
[    6.797667] 1de0: c7830000 00000000 c03cddd8 c040688c 00000001 c03cda28 c7831e24 c7831e08
[    6.805806] 1e00: c00aeb70 c00a9aa0 00000000 00000000 c7a71200 c74155b8 c7831e54 c7831e28
[    6.813945] 1e20: c00af740 c00aeb40 c7a71200 00000080 c7831e60 c7a71200 00000000 c03cddd8
[    6.822084] 1e40: c040688c 00000001 c7831ef4 c7831e58 c00e6680 c00af630 00000000 c7a71202
[    6.830223] 1e60: 6e69622f 0068732f c7830000 c032fa01 c7831ea4 c7831e80 c0090ddc c009092c
[    6.838361] 1e80: 00000017 c7831ebc 00000000 00000000 c6dff540 c7830000 c7831edc c7831ea8
[    6.846499] 1ea0: c00ae3bc c00ae264 c6dff540 00000000 00000000 0000000d beffffd0 befff000
[    6.854639] 1ec0: c7831edc c7831ed0 c001bc00 c03aafd0 c7831f24 c7831ee0 c00ae548 c007fc68
[    6.862778] 1ee0: c7a71200 fffffffe c7831f24 c7831ef8 c00aed6c c00e64b0 c03cab68 c7a71200
[    6.870916] 1f00: c7825b80 00000001 c7047558 c7830028 c7046000 c7aa8e78 c7831f64 c7831f28
[    6.879056] 1f20: c00afc74 c00aecdc c03c82b4 c03c8220 00000000 c7825da8 00000000 c03c8220
[    6.887193] 1f40: c032fa01 00000000 00000000 00000000 00000000 00000000 c7831f7c c7831f68
[    6.895333] 1f60: c001238c c00af944 c03c5000 c03dc644 c7831f94 c7831f80 c00123ac c0012374
[    6.903472] 1f80: c03dc644 c000caa8 c7831fac c7831f98 c000cb28 c00123a4 c7830000 00000000
[    6.911610] 1fa0: 00000000 c7831fb0 c00089a0 c000cab4 00000000 00000000 00000000 00000000
[    6.919749] 1fc0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[    6.927888] 1fe0: 00000000 00000000 00000000 00000000 00000013 00000000 c7831ff4 00000000
[    6.936021] Backtrace: 
[    6.938488] [&lt;c018a928&gt;] (gic_raise_softirq) from [&lt;c0016cd4&gt;] (smp_cross_call+0x18/0x20)
[    6.946623]  r9:c7987404 r8:c03c5320 r7:06a1e000 r6:c03c0040 r5:00000001 r4:c79870c0
[    6.954376] [&lt;c0016cbc&gt;] (smp_cross_call) from [&lt;c0017330&gt;] (smp_send_reschedule+0x30/0x38)
[    6.962697] [&lt;c0017300&gt;] (smp_send_reschedule) from [&lt;c003cb88&gt;] (try_to_wake_up+0x234/0x294)
[    6.971186] [&lt;c003c954&gt;] (try_to_wake_up) from [&lt;c003cc54&gt;] (default_wake_function+0x14/0x18)
[    6.979663]  r10:00000001 r9:00000000 r8:00000000 r7:00000003 r6:00000001 r5:c7adc530
[    6.987490]  r4:c7adc53c
[    6.990032] [&lt;c003cc40&gt;] (default_wake_function) from [&lt;c0047a5c&gt;] (__wake_up_common+0x54/0x80)
[    6.998699] [&lt;c0047a08&gt;] (__wake_up_common) from [&lt;c0047aa4&gt;] (__wake_up_locked+0x1c/0x24)
[    7.006921]  r10:c03c8141 r9:c7809c40 r8:00000001 r7:00000000 r6:a0000193 r5:c7adc534
[    7.014749]  r4:c7adc538 r3:00000000
[    7.018327] [&lt;c0047a88&gt;] (__wake_up_locked) from [&lt;c00482b8&gt;] (complete+0x3c/0x4c)
[    7.025873] [&lt;c004827c&gt;] (complete) from [&lt;c01e45e4&gt;] (bcmnand_isr+0x9c/0xa8)
[    7.032971]  r6:00000000 r5:00000f10 r4:c7adc530 r3:c7ab4400
[    7.038648] [&lt;c01e4548&gt;] (bcmnand_isr) from [&lt;c004ec1c&gt;] (handle_irq_event_percpu+0x38/0x130)
[    7.047132]  r5:00000064 r4:c7ad27c0
[    7.050710] [&lt;c004ebe4&gt;] (handle_irq_event_percpu) from [&lt;c004ed5c&gt;] (handle_irq_event+0x48/0x68)
[    7.059539]  r10:02c170eb r9:000000fe r8:00000001 r7:c780e800 r6:00000000 r5:c03cf71c
[    7.067366]  r4:c7809c40
[    7.069904] [&lt;c004ed14&gt;] (handle_irq_event) from [&lt;c0051a80&gt;] (handle_fasteoi_irq+0xa8/0x130)
[    7.078383]  r5:c03cf71c r4:c7809c40
[    7.081962] [&lt;c00519d8&gt;] (handle_fasteoi_irq) from [&lt;c004e400&gt;] (generic_handle_irq+0x28/0x38)
[    7.090531]  r5:c03bf894 r4:00000064
[    7.094109] [&lt;c004e3d8&gt;] (generic_handle_irq) from [&lt;c004e6ec&gt;] (__handle_domain_irq+0x84/0xa8)
[    7.102764]  r4:00000000 r3:00000120
[    7.106343] [&lt;c004e668&gt;] (__handle_domain_irq) from [&lt;c0008680&gt;] (gic_handle_irq+0x40/0x64)
[    7.114653]  r8:00000600 r7:c783199c r6:c03c547c r5:c7831968 r4:c8802100 r3:c7831968
[    7.122403] [&lt;c0008640&gt;] (gic_handle_irq) from [&lt;c0009220&gt;] (__irq_svc+0x40/0x54)
[    7.129853] Exception stack(0xc7831968 to 0xc78319b0)
[    7.134885] 1960:                   00000000 00000000 c7b614e4 000000c0 c7b60000 c7b606dc
[    7.143026] 1980: 00000709 00000000 00000600 000000fe 02c170eb c78319dc 000000c0 c78319b0
[    7.151162] 19a0: 00006000 c01809b4 80000113 ffffffff
[    7.156185]  r6:ffffffff r5:80000113 r4:c01809b4 r3:00006000
[    7.161854] [&lt;c01806b0&gt;] (lzma_main) from [&lt;c0181544&gt;] (xz_dec_lzma2_run+0x520/0x778)
[    7.169647]  r10:c7b54e44 r9:00000000 r8:00000000 r7:c7b66ee8 r6:0000002a r5:c7b54e44
[    7.177475]  r4:c7b60000 r3:000003eb
[    7.181051] [&lt;c0181024&gt;] (xz_dec_lzma2_run) from [&lt;c0181ac8&gt;] (xz_dec_bcj_run+0xbc/0x244)
[    7.189182]  r9:00000000 r8:c7b54de8 r7:c7b60000 r6:00000390 r5:c7b54e44 r4:c7b54dc0
[    7.196931] [&lt;c0181a0c&gt;] (xz_dec_bcj_run) from [&lt;c017fe98&gt;] (xz_dec_run+0x358/0x82c)
[    7.204630]  r8:c7af1000 r7:0000006c r6:c7af0800 r5:00000024 r4:00000390 r3:00000001
[    7.212394] [&lt;c017fb40&gt;] (xz_dec_run) from [&lt;c00fd52c&gt;] (squashfs_xz_uncompress+0xec/0x1a4)
[    7.220700]  r10:c7a14180 r9:00016000 r8:c7af1000 r7:0000006c r6:c7a1ba40 r5:00000024
[    7.228528]  r4:c7b54e40
[    7.231062] [&lt;c00fd440&gt;] (squashfs_xz_uncompress) from [&lt;c00fd3ec&gt;] (squashfs_decompress+0x50/0x7c)
[    7.240063]  r10:c7a1ba40 r9:c7a14180 r8:0000006e r7:c7af0ffc r6:c7af1000 r5:c00fd440
[    7.247890]  r4:c7a14180
[    7.250425] [&lt;c00fd39c&gt;] (squashfs_decompress) from [&lt;c00f9bd4&gt;] (squashfs_read_data+0x444/0x5a0)
[    7.259252]  r6:0001adb4 r5:c7af11ac r4:0000006c
[    7.263877] [&lt;c00f9790&gt;] (squashfs_read_data) from [&lt;c00fcee0&gt;] (squashfs_readpage_block+0x294/0x3a8)
[    7.273050]  r10:c6dff3e0 r9:00000100 r8:00000000 r7:00000040 r6:c7a71200 r5:c74155b8
[    7.280877]  r4:00000000
[    7.283412] [&lt;c00fcc4c&gt;] (squashfs_readpage_block) from [&lt;c00fb398&gt;] (squashfs_readpage+0x5d0/0x6d4)</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344169">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">elektroman</div>
					<div class="post-datetime">
						19 Nov 2016, 21:09					</div>
				</div>
				<div class="post-content content">
					<p>Hi, thanks for the split ...</p><p>As I the this is a little difficult here.</p><p>Netgear R6300 V2 Device Tree is supported by upstream linux.<br />As I can read in<br />arch/arm/boot/dts/bcm4708-netgear-r6300-v2.dts<br />in the linux vanilla sources (1)<br />There is some line that caught my eye here<br /></p><div class="codebox"><pre><code>#include &quot;bcm5301x-nand-cs0-bch8.dtsi&quot;</code></pre></div><p>which is the include file for the hardware error correction done via the <br />BCH code<br /><a href="https://en.wikipedia.org/wiki/BCH_code">https://en.wikipedia.org/wiki/BCH_code</a><br />there is some other include file here<br />bcm5301x-nand-cs0-bch1.dtsi<br />bcm5301x-nand-cs0.dtsi</p><p>I prefer not solve this with LEDE or OpenWRT in the first place, I see some troubles getting this properly fixed due the dependencies here.</p><p>Hmm I must think here ...</p><p>(1)<br />Found on kernel.org</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344295">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						21 Nov 2016, 11:49					</div>
				</div>
				<div class="post-content content">
					<p>Hi, elektroman, did you see my new post?&nbsp; <a href="https://forum.openwrt.org/viewtopic.php?id=68019">https://forum.openwrt.org/viewtopic.php?id=68019</a><br />I copy import information to this page.&nbsp; I used the bcm5301x-nand-cs0-bch1.dtsi file, but still failed.<br />------------------------------------------------------------------------------</p><p>My router is similar to netgear r6300v2 and asus rt68u router. So I compiled the lede code and get firmware for r6300v2 or asus rt68u. I flash the firmware to my router. In another word, I use the dts or physical address for these two types router. Is it a good idea for a new person(like me)? If this is OK, I will make my own dts file. I&#039;m not 100% sure of difference between my router and r6300v2.</p><p>I know r6300v2, rt68u, and my router are BCM4708+ 4360 + 4331 solution, 128MB nand flash( 2KB/page ). They use the same broadcom hardware design. The lede firmware runs OK on r6300v2, but failed on my router.</p><p>You mean start address?<br /></p><div class="codebox"><pre><code>check your physical address.</code></pre></div><p>Is it ?<br /></p><div class="codebox"><pre><code>Starting program at 0x00008000</code></pre></div><p>My router also use 0x00008000 if I flash the broadcom sdk firmware.</p><br /><p>The boot information on r6300v2 is as follows:</p><div class="codebox"><pre><code>Decompressing...done

SHMOO VER 1.13

PKID07DC06011801080000000000001A103F01000000

S300402CF
00002350


RDLYW0 00000004

RDENW0 00000045

RDQSW0 

    0000000000111111111122222222223333333333444444444455555555556666
    0123456789012345678901234567890123456789012345678901234567890123
 00 ----++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++
 01 --------++++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 02 -------++++++++++++++++++++++++++++X++++++++++++++++++++++++++++
 03 -----+++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++
 04 ---++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++
 05 --------++++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 06 -+++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++
 07 -------++++++++++++++++++++++++++++X++++++++++++++++++++++++++++
 08 ---++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++
 09 --------++++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 10 ---++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++
 11 ---------+++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 12 ---++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++
 13 --------++++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 14 ----++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++
 15 --------++++++++++++++++++++++++++++X+++++++++++++++++++++++++++


PW0 

    0000000000111111111122222222223333333333444444444455555555556666
    0123456789012345678901234567890123456789012345678901234567890123
 00 -+++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++
 01 ------+++++++++++++++++++++++++++++X++++++++++++++++++++++++++++
 02 ----++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++
 03 ---++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++
 04 ++++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++
 05 --------++++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 06 ++++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++
 07 -----+++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++
 08 --+++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++
 09 --------++++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 10 -+++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++
 11 ------+++++++++++++++++++++++++++++X++++++++++++++++++++++++++++
 12 -+++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++
 13 -----+++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++
 14 --+++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++
 15 -----+++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++


NW0 

    0000000000111111111122222222223333333333444444444455555555556666
    0123456789012345678901234567890123456789012345678901234567890123
 00 ----++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++
 01 --------++++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 02 -------++++++++++++++++++++++++++++X++++++++++++++++++++++++++++
 03 -----+++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++
 04 ---++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++
 05 ---------+++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 06 -+++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++
 07 -------++++++++++++++++++++++++++++X++++++++++++++++++++++++++++
 08 ----++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++
 09 --------++++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 10 ---++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++
 11 ---------+++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 12 ---++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++
 13 --------++++++++++++++++++++++++++++X+++++++++++++++++++++++++++
 14 ----++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++
 15 ---------+++++++++++++++++++++++++++X+++++++++++++++++++++++++++


WRDQW0 

    0000000000111111111122222222223333333333444444444455555555556666
    0123456789012345678901234567890123456789012345678901234567890123
 00 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 01 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 02 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 03 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 04 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 05 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 06 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 07 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 08 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 09 --++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++-
 10 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 11 --++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++-
 12 +++++++++++++++++++++++++++++++X+++++++++++++++++++++++++++++++-
 13 -+++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++-
 14 -+++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++-
 15 --++++++++++++++++++++++++++++++X++++++++++++++++++++++++++++++-


WRDMW0 00000031
WRDMW0 00000031


ADDR

    0000000000111111111122222222223333333333444444444455555555556666
    0123456789012345678901234567890123456789012345678901234567890123
 00 +++++++++++++++++++++++++++++++X+++S++++++++++++++++++++++++++++

Decompressing...done


CFE for Foxconn Router R6300v2 version: v1.0.15
Build Date: Fri May 24 13:47:09 CST 2013 
Init Arena
Init Devs.
Boot up from NAND flash...
Boot partition size = 262144(0x40000)
DDR Clock: 533 MHz
Info: DDR frequency set from clkfreq=800,*533*
et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 6.30.163.2002 (r382208)
CPU type 0x0: 800MHz
Tot mem: 262144 KBytes

Device eth0:  hwaddr 00-FF-FF-FF-FF-FF, ipaddr 192.168.1.1, mask 255.255.255.0
        gateway not set, nameserver not set
Checking crc...Loader:raw Filesys:raw Dev:nflash0.os File: Options:(null)
Loading: .. 1539871 bytes read
Entry at 0x00008000
Closing network.
Starting program at 0x00008000
Uncompressing Linux... done, booting the kernel.
[    0.000000] Booting Linux on physical CPU 0x0
[    0.000000] Linux version 4.4.27 (wangfeng@software) (gcc version 5.4.0 (LEDE GCC 5.4.0 r1967) ) #0 SMP Mon Oct 24 20:52:44 2016
[    0.000000] CPU: ARMv7 Processor [413fc090] revision 0 (ARMv7), cr=10c5387d
[    0.000000] CPU: PIPT / VIPT nonaliasing data cache, VIPT aliasing instruction cache
[    0.000000] Machine model: Netgear R6300 V2 (BCM4708)
[    0.000000] Memory policy: Data cache writealloc
[    0.000000] Hit pending asynchronous external abort (FSR=0x00001c06) during first unmask, this is most likely caused by a firmware/bootloader bug.
[    0.000000] PERCPU: Embedded 11 pages/cpu @c6dce000 s12928 r8192 d23936 u45056
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 65280
[    0.000000] Kernel command line: console=ttyS0,115200
[    0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)
[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Memory: 254748K/262144K available (3202K kernel code, 102K rwdata, 1208K rodata, 220K init, 280K bss, 7396K reserved, 0K cma-reserved, 131072K highmem)
[    0.000000] Virtual kernel memory layout:
[    0.000000]     vector  : 0xffff0000 - 0xffff1000   (   4 kB)
[    0.000000]     fixmap  : 0xffc00000 - 0xfff00000   (3072 kB)
[    0.000000]     vmalloc : 0xc8800000 - 0xff800000   ( 880 MB)
[    0.000000]     lowmem  : 0xc0000000 - 0xc8000000   ( 128 MB)
[    0.000000]     pkmap   : 0xbfe00000 - 0xc0000000   (   2 MB)
[    0.000000]     modules : 0xbf000000 - 0xbfe00000   (  14 MB)
[    0.000000]       .text : 0xc0008000 - 0xc0456e44   (4412 kB)
[    0.000000]       .init : 0xc0457000 - 0xc048e000   ( 220 kB)
[    0.000000]       .data : 0xc048e000 - 0xc04a7b2c   ( 103 kB)
[    0.000000]        .bss : 0xc04a7b2c - 0xc04eddec   ( 281 kB)
[    0.000000] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=2, Nodes=1
[    0.000000] Hierarchical RCU implementation.
[    0.000000] NR_IRQS:16 nr_irqs:16 16
[    0.000000] L2C: DT/platform modifies aux control register: 0x0a130000 -&gt; 0x0a530000
[    0.000000] L2C-310 enabling early BRESP for Cortex-A9
[    0.000000] L2C-310 full line of zeros enabled for Cortex-A9
[    0.000000] L2C-310 ID prefetch enabled, offset 1 lines
[    0.000000] L2C-310 dynamic clock gating enabled, standby mode enabled
[    0.000000] L2C-310 cache controller enabled, 16 ways, 256 kB
[    0.000000] L2C-310: CACHE_ID 0x410000c8, AUX_CTRL 0x7e530001
[    0.000015] sched_clock: 64 bits at 400MHz, resolution 2ns, wraps every 4398046511103ns
[    0.000040] clocksource: arm_global_timer: mask: 0xffffffffffffffff max_cycles: 0x5c4093a7d1, max_idle_ns: 440795210635 ns
[    0.000254] Calibrating delay loop... 1594.16 BogoMIPS (lpj=7970816)
[    0.090143] pid_max: default: 32768 minimum: 301
[    0.090236] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.090248] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.090798] CPU: Testing write buffer coherency: ok
[    0.091105] CPU0: thread -1, cpu 0, socket 0, mpidr 80000000
[    0.091202] Setting up static identity map for 0x82a0 - 0x82d4
[    0.130138] CPU1: thread -1, cpu 1, socket 0, mpidr 80000001
[    0.130227] Brought up 2 CPUs
[    0.130250] SMP: Total of 2 processors activated (3188.32 BogoMIPS).
[    0.130260] CPU: WARNING: CPU(s) started in wrong/inconsistent modes (primary CPU mode 0x13)
[    0.130266] CPU: This may indicate a broken bootloader or firmware.
[    0.132589] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns
[    0.132715] pinctrl core: initialized pinctrl subsystem
[    0.133207] NET: Registered protocol family 16
[    0.133988] DMA: preallocated 256 KiB pool for atomic coherent allocations
[    0.162541] clocksource: Switched to clocksource arm_global_timer
[    0.163916] NET: Registered protocol family 2
[    0.164584] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.164618] TCP bind hash table entries: 1024 (order: 1, 8192 bytes)
[    0.164643] TCP: Hash tables configured (established 1024 bind 1024)
[    0.164747] UDP hash table entries: 256 (order: 1, 8192 bytes)
[    0.164795] UDP-Lite hash table entries: 256 (order: 1, 8192 bytes)
[    0.165040] NET: Registered protocol family 1
[    0.166353] futex hash table entries: 512 (order: 3, 32768 bytes)
[    0.166562] Crashlog allocated RAM at address 0x3f00000
[    0.172918] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.172960] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.174921] bounce: pool size: 64 pages
[    0.174949] io scheduler noop registered
[    0.174965] io scheduler deadline registered (default)
[    0.175505] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
[    0.176256] console [ttyS0] disabled
[    0.176318] 18000300.serial: ttyS0 at MMIO 0x18000300 (irq = 18, base_baud = 6250000) is a 16550
[    0.620917] console [ttyS0] enabled
[    0.625774] nand: device found, Manufacturer ID: 0xec, Chip ID: 0xf1
[    0.632155] nand: Samsung NAND 128MiB 3,3V 8-bit
[    0.636753] nand: 128 MiB, SLC, erase size: 128 KiB, page size: 2048, OOB size: 64
[    0.644323] iproc_nand 18028000.nand: detected 128MiB total, 128KiB blocks, 2KiB pages, 16B OOB, 8-bit, BCH-8
[    0.654220] Scanning device for bad blocks
[    1.175724] Bad eraseblock 683 at 0x000005560000
[    1.444351] random: nonblocking pool is initialized
[    2.251905] 6 bcm47xxpart partitions found on MTD device brcmnand.0
[    2.258142] Creating 6 MTD partitions on &quot;brcmnand.0&quot;:
[    2.263275] 0x000000000000-0x000000080000 : &quot;boot&quot;
[    2.269064] 0x000000080000-0x0000002a0000 : &quot;nvram&quot;
[    2.274901] 0x0000002a0000-0x000000380000 : &quot;ML&quot;
[    2.280467] 0x000000380000-0x000008000000 : &quot;firmware&quot;
[    2.287183] 0x00000038001c-0x000000780000 : &quot;linux&quot;
[    2.293060] 0x000000780000-0x000008000000 : &quot;ubi&quot;
[    2.299723] libphy: Fixed MDIO Bus: probed
[    2.303953] bgmac_bcma: Broadcom 47xx GBit MAC driver loaded
[    2.309864] bcma: bus0: Found chip with id 53010, rev 0x00 and package 0x02
[    2.316926] bcma: bus0: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x2A, class 0x0)
[    2.325581] bcma: bus0: Core 1 found: Chipcommon B (manuf 0x4BF, id 0x50B, rev 0x01, class 0x0)
[    2.334394] bcma: bus0: Core 2 found: DMA (manuf 0x4BF, id 0x502, rev 0x01, class 0x0)
[    2.342413] bcma: bus0: Core 3 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x04, class 0x0)
[    2.350860] bcma: bus0: Core 4 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x04, class 0x0)
[    2.359298] bcma: bus0: Core 5 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x04, class 0x0)
[    2.367754] bcma: bus0: Core 6 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x04, class 0x0)
[    2.376186] bcma: bus0: Core 7 found: PCIe Gen 2 (manuf 0x4BF, id 0x501, rev 0x01, class 0x0)
[    2.384791] bcma: bus0: Core 8 found: PCIe Gen 2 (manuf 0x4BF, id 0x501, rev 0x01, class 0x0)
[    2.393424] bcma: bus0: Core 9 found: ARM Cortex A9 core (ihost) (manuf 0x4BF, id 0x510, rev 0x01, class 0x0)
[    2.403416] bcma: bus0: Core 10 found: USB 2.0 (manuf 0x4BF, id 0x504, rev 0x01, class 0x0)
[    2.411837] bcma: bus0: Core 11 found: USB 3.0 (manuf 0x4BF, id 0x505, rev 0x01, class 0x0)
[    2.420299] bcma: bus0: Core 12 found: SDIO3 (manuf 0x4BF, id 0x503, rev 0x01, class 0x0)
[    2.428571] bcma: bus0: Core 13 found: ARM Cortex A9 JTAG (manuf 0x4BF, id 0x506, rev 0x01, class 0x0)
[    2.437975] bcma: bus0: Core 14 found: Denali DDR2/DDR3 memory controller (manuf 0x4BF, id 0x507, rev 0x01, class 0x0)
[    2.448764] bcma: bus0: Core 15 found: ROM (manuf 0x4BF, id 0x508, rev 0x01, class 0x0)
[    2.456869] bcma: bus0: Core 16 found: NAND flash controller (manuf 0x4BF, id 0x509, rev 0x01, class 0x0)
[    2.466522] bcma: bus0: Core 17 found: SPI flash controller (manuf 0x4BF, id 0x50A, rev 0x01, class 0x0)
[    2.475985] bcma: bus0: Flash type not supported
[    2.482243] m25p80 spi32766.0: unrecognized JEDEC id bytes: ff, ff, ff
[    2.488948] m25p80 spi32766.0: using Read Manufacturer / Device ID command (0x90) returned ff ff
[    2.497772] m25p80: probe of spi32766.0 failed with error -2
[    2.594044] bgmac_bcma bcma0:3: Found PHY addr: 30 (NOREGS)
[    2.599606] bgmac_bcma bcma0:3: Support for Roboswitch not implemented
[    2.608602] b53_common: found switch: BCM53011, rev 2
[    2.614624] bgmac_bcma bcma0:4: Found PHY addr: 0
[    2.619333] bgmac_bcma bcma0:4: Support for Roboswitch not implemented
[    2.627943] bgmac_bcma bcma0:5: Found PHY addr: 0
[    2.632718] bgmac_bcma bcma0:5: Support for Roboswitch not implemented
[    2.639314] bgmac_bcma bcma0:5: Invalid MAC addr: 00:00:00:00:00:00
[    2.645609] bgmac_bcma bcma0:5: Using random MAC: e2:94:df:48:88:f3
[    2.653843] bgmac_bcma bcma0:6: Unsupported core_unit 3
[    2.659085] bgmac_bcma: probe of bcma0:6 failed with error -524
[    2.770289] pcie_iproc_bcma bcma0:7: PCI host bridge to bus 0000:00
[    2.776551] pci_bus 0000:00: root bus resource [mem 0x08000000-0x0fffffff]
[    2.783434] pcie_iproc_bcma bcma0:7: link: UP
[    2.788056] PCI: bus0: Fast back to back transfers disabled
[    2.793635] pci 0000:00:00.0: bridge configuration invalid ([bus 00-00]), reconfiguring
[    2.802132] PCI: bus1: Fast back to back transfers disabled
[    2.807749] pci 0000:00:00.0: BAR 8: assigned [mem 0x08000000-0x080fffff]
[    2.814541] pci 0000:01:00.0: BAR 0: assigned [mem 0x08000000-0x08003fff 64bit]
[    2.821841] pci 0000:00:00.0: PCI bridge to [bus 01]
[    2.826789] pci 0000:00:00.0:   bridge window [mem 0x08000000-0x080fffff]
[    2.940267] pcie_iproc_bcma bcma0:8: PCI host bridge to bus 0001:00
[    2.946523] pci_bus 0001:00: root bus resource [mem 0x40000000-0x47ffffff]
[    2.953403] pcie_iproc_bcma bcma0:8: link: UP
[    2.958005] PCI: bus0: Fast back to back transfers disabled
[    2.963584] pci 0001:00:00.0: bridge configuration invalid ([bus 00-00]), reconfiguring
[    2.972076] PCI: bus1: Fast back to back transfers disabled
[    2.977695] pci 0001:00:00.0: BAR 8: assigned [mem 0x40000000-0x400fffff]
[    2.984489] pci 0001:01:00.0: BAR 0: assigned [mem 0x40000000-0x40007fff 64bit]
[    2.991785] pci 0001:00:00.0: PCI bridge to [bus 01]
[    2.996730] pci 0001:00:00.0:   bridge window [mem 0x40000000-0x400fffff]
[    3.005109] bcm47xx-wdt bcm47xx-wdt.0: BCM47xx Watchdog Timer enabled (30 seconds, Software Timer)
[    3.014084] bcma: bus0: Bus registered
[    3.017985] pci 0000:00:00.0: enabling device (0140 -&gt; 0142)
[    3.023658] bcma-pci-bridge 0000:01:00.0: enabling device (0140 -&gt; 0142)
[    3.030385] bcma: bus1: Found chip with id 0x4331, rev 0x02 and package 0x08
[    3.037427] bcma: bus1: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x25, class 0x0)
[    3.045944] bcma: bus1: Core 1 found: IEEE 802.11 (manuf 0x4BF, id 0x812, rev 0x1D, class 0x0)
[    3.054560] bcma: bus1: Core 2 found: PCIe (manuf 0x4BF, id 0x820, rev 0x13, class 0x0)
[    3.186481] bcma: bus1: Invalid SPROM read from the PCIe card, trying to use fallback SPROM
[    3.330402] bcma: bus1: Bus registered
[    3.334223] pci 0001:00:00.0: enabling device (0140 -&gt; 0142)
[    3.339873] bcma-pci-bridge 0001:01:00.0: enabling device (0140 -&gt; 0142)
[    3.346612] bcma: bus2: Found chip with id 0x4360, rev 0x03 and package 0x01
[    3.353681] bcma: bus2: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x2B, class 0x0)
[    3.362194] bcma: bus2: Core 1 found: IEEE 802.11 (manuf 0x4BF, id 0x812, rev 0x2A, class 0x0)
[    3.370801] bcma: bus2: Core 2 found: ARM CR4 (manuf 0x4BF, id 0x83E, rev 0x02, class 0x0)
[    3.379051] bcma: bus2: Core 3 found: PCIe Gen2 (manuf 0x4BF, id 0x83C, rev 0x01, class 0x0)
[    3.387476] bcma: bus2: Core 4 found: USB 2.0 Device (manuf 0x4BF, id 0x81A, rev 0x11, class 0x0)
[    3.427865] bcma: bus2: Invalid SPROM read from the PCIe card, trying to use fallback SPROM
[    3.459176] bcma: bus2: Bus registered
[    3.464134] NET: Registered protocol family 10
[    3.469839] NET: Registered protocol family 17
[    3.474409] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    3.486988] 8021q: 802.1Q VLAN Support v1.8
[    3.491257] Registering SWP/SWPB emulation handler
[    3.498462] UBI: auto-attach mtd5
[    3.501672] ubi0: attaching mtd5
[    3.914024] ubi0: scanning is finished
[    3.945811] ubi0: volume 1 (&quot;rootfs_data&quot;) re-sized from 9 to 924 LEBs
[    3.953063] ubi0: attached mtd5 (name &quot;ubi&quot;, size 120 MiB)
[    3.958529] ubi0: PEB size: 131072 bytes (128 KiB), LEB size: 126976 bytes
[    3.965400] ubi0: min./max. I/O unit sizes: 2048/2048, sub-page size 2048
[    3.972163] ubi0: VID header offset: 2048 (aligned 2048), data offset: 4096
[    3.979091] ubi0: good PEBs: 963, bad PEBs: 1, corrupted PEBs: 0
[    3.985079] ubi0: user volume: 2, internal volumes: 1, max. volumes count: 128
[    3.992275] ubi0: max/mean erase counter: 1/0, WL threshold: 4096, image sequence number: 33275472
[    4.001199] ubi0: available PEBs: 0, total reserved PEBs: 963, PEBs reserved for bad PEB handling: 19
[    4.010400] ubi0: background thread &quot;ubi_bgt0d&quot; started, PID 326
[    4.011796] block ubiblock0_0: created from ubi0:0(rootfs)
[    4.011804] ubiblock: device ubiblock0_0 (rootfs) set to be root filesystem
[    4.034852] VFS: Mounted root (squashfs filesystem) readonly on device 254:0.
[    4.042371] Freeing unused kernel memory: 220K (c0457000 - c048e000)
[    4.639996] init: Console is alive
[    4.643692] init: - watchdog -
[    5.177347] usbcore: registered new interface driver usbfs
[    5.183045] usbcore: registered new interface driver hub
[    5.188460] usbcore: registered new device driver usb
[    5.197185] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[    5.204590] ehci-platform: EHCI generic platform driver
[    5.211674] ehci-platform 18021000.ehci: EHCI Host Controller
[    5.212419] bcm_ns_usb3 18105000.usb3-phy: Registered Broadcom Northstar USB 3.0 PHY driver
[    5.213840] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[    5.214566] ohci-platform: OHCI generic platform driver
[    5.214782] ohci-platform 18022000.ohci: Generic Platform OHCI controller
[    5.214815] ohci-platform 18022000.ohci: new USB bus registered, assigned bus number 1
[    5.214972] ohci-platform 18022000.ohci: irq 28, io mem 0x18022000
[    5.258027] ehci-platform 18021000.ehci: new USB bus registered, assigned bus number 2
[    5.266105] ehci-platform 18021000.ehci: irq 28, io mem 0x18021000
[    5.275071] hub 1-0:1.0: USB hub found
[    5.279013] hub 1-0:1.0: 2 ports detected
[    5.289150] xhci-hcd 18023000.xhci: xHCI Host Controller
[    5.294551] xhci-hcd 18023000.xhci: new USB bus registered, assigned bus number 3
[    5.302353] xhci-hcd 18023000.xhci: hcc params 0x02501164 hci version 0x100 quirks 0x01010010
[    5.302990] ehci-platform 18021000.ehci: USB 2.0 started, EHCI 1.00
[    5.303707] hub 2-0:1.0: USB hub found
[    5.303756] hub 2-0:1.0: 2 ports detected
[    5.324967] xhci-hcd 18023000.xhci: irq 29, io mem 0x18023000
[    5.331549] hub 3-0:1.0: USB hub found
[    5.335378] hub 3-0:1.0: config failed, hub doesn&#039;t have any ports! (err -19)
[    5.342772] xhci-hcd 18023000.xhci: xHCI Host Controller
[    5.348100] xhci-hcd 18023000.xhci: new USB bus registered, assigned bus number 4
[    5.370322] usb usb4: We don&#039;t know the algorithms for LPM for this host, disabling LPM.
[    5.379143] hub 4-0:1.0: USB hub found
[    5.383090] hub 4-0:1.0: 1 port detected
[    5.403213] init: - preinit -
[    7.518554] IPv6: ADDRCONF(NETDEV_UP): eth0: link is not ready
[    7.524578] IPv6: ADDRCONF(NETDEV_UP): eth0.1: link is not ready
Press the [f] key and hit [enter] to enter failsafe mode
Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level
[    8.620277] bgmac_bcma bcma0:3 eth0: Link is Up - 1Gbps/Full - flow control off
[    8.627595] IPv6: ADDRCONF(NETDEV_CHANGE): eth0: link becomes ready
[    8.634180] IPv6: ADDRCONF(NETDEV_CHANGE): eth0.1: link becomes ready
[   10.743312] UBIFS (ubi0:1): default file-system created
[   10.749575] UBIFS (ubi0:1): background thread &quot;ubifs_bgt0_1&quot; started, PID 473
[   10.831833] UBIFS (ubi0:1): UBIFS: mounted UBI device 0, volume 1, name &quot;rootfs_data&quot;
[   10.839644] UBIFS (ubi0:1): LEB size: 126976 bytes (124 KiB), min./max. I/O unit sizes: 2048 bytes/2048 bytes
[   10.849554] UBIFS (ubi0:1): FS size: 115929088 bytes (110 MiB, 913 LEBs), journal size 5840896 bytes (5 MiB, 46 LEBs)
[   10.860145] UBIFS (ubi0:1): reserved for root: 4952683 bytes (4836 KiB)
[   10.866733] UBIFS (ubi0:1): media format: w4/r0 (latest is w4/r0), UUID 65E39360-6CCE-4179-BCD2-67294FED1422, small LPT model
[   10.880299] mount_root: overlay filesystem has not been fully initialized yet
[   10.887996] mount_root: switching to ubifs overlay
[   10.896323] urandom-seed: Seed file not found (/etc/urandom.seed)
[   10.998570] procd: - early -
[   11.001668] procd: - watchdog -
[   11.620476] procd: - ubus -
[   11.681837] procd: - init -
Please press Enter to activate this console.
[   11.861680] ip6_tables: (C) 2000-2006 Netfilter Core Team
[   11.875005] Loading modules backported from Linux version wt-2016-10-03-1-g6fcb1a6
[   11.882608] Backport generated by backports.git backports-20160324-9-g0e38f5c
[   11.891454] ip_tables: (C) 2000-2006 Netfilter Core Team
[   11.902105] nf_conntrack version 0.5.0 (3983 buckets, 15932 max)
[   12.012978] xt_time: kernel timezone is -0000
[   12.045654] PPP generic driver version 2.4.2
[   12.051417] NET: Registered protocol family 24
[   12.062114] b43-phy0: Broadcom 4331 WLAN found (core revision 29)
[   12.070207] b43-phy0: Found PHY: Analog 9, Type 7 (HT), Revision 1
[   12.076370] b43-phy0: Found Radio: Manuf 0x17F, ID 0x2059, Revision 0, Version 1
[   12.090335] b43-phy1: Broadcom 4360 WLAN found (core revision 42)
[   12.100458] b43-phy1 ERROR: FOUND UNSUPPORTED PHY (Analog 12, Type 11 (AC), Revision 1)
[   12.108480] b43: probe of bcma2:1 failed with error -95
[   12.113838] Broadcom 43xx driver loaded [ Features: NL ]
[   17.868084] IPv6: ADDRCONF(NETDEV_UP): eth0: link is not ready
[   17.881819] device eth0.1 entered promiscuous mode
[   17.886627] device eth0 entered promiscuous mode
[   17.894572] IPv6: ADDRCONF(NETDEV_UP): br-lan: link is not ready
[   17.931983] IPv6: ADDRCONF(NETDEV_UP): eth0.2: link is not ready
[   18.620220] bgmac_bcma bcma0:3 eth0: Link is Up - 1Gbps/Full - flow control off
[   18.628235] IPv6: ADDRCONF(NETDEV_CHANGE): eth0: link becomes ready
[   18.650690] br-lan: port 1(eth0.1) entered forwarding state
[   18.656330] br-lan: port 1(eth0.1) entered forwarding state
[   18.662098] IPv6: ADDRCONF(NETDEV_CHANGE): eth0.2: link becomes ready
[   18.671149] IPv6: ADDRCONF(NETDEV_CHANGE): br-lan: link becomes ready
[   20.650164] br-lan: port 1(eth0.1) entered forwarding state



BusyBox v1.25.1 () built-in shell (ash)

     _________
    /        /\      _    ___ ___  ___
   /  LE    /  \    | |  | __|   \| __|
  /    DE  /    \   | |__| _|| |) | _|
 /________/  LE  \  |____|___|___/|___|                      lede-project.org
 \        \   DE /
  \    LE  \    /  -----------------------------------------------------------
   \  DE    \  /    Reboot (HEAD, r1967)
    \________\/    -----------------------------------------------------------

=== WARNING! =====================================
There is no root password defined on this device!
Use the &quot;passwd&quot; command to set up a new password
in order to prevent unauthorized SSH logins.
--------------------------------------------------
root@lede:/# 
root@lede:/# 
root@lede:/# 
root@lede:/# ifconfig
br-lan    Link encap:Ethernet  HWaddr 00:FF:FF:FF:FF:FF  
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          inet6 addr: fda4:bcf7:d61d::1/60 Scope:Global
          inet6 addr: fe80::2ff:ffff:feff:ffff/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:59 errors:0 dropped:0 overruns:0 frame:0
          TX packets:36 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:3767 (3.6 KiB)  TX bytes:4043 (3.9 KiB)

eth0      Link encap:Ethernet  HWaddr 00:FF:FF:FF:FF:FF  
          inet6 addr: fe80::2ff:ffff:feff:ffff/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:82 errors:0 dropped:0 overruns:0 frame:0
          TX packets:84 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:7239 (7.0 KiB)  TX bytes:11914 (11.6 KiB)
          Interrupt:22 

eth0.1    Link encap:Ethernet  HWaddr 00:FF:FF:FF:FF:FF  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:71 errors:0 dropped:0 overruns:0 frame:0
          TX packets:38 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:4407 (4.3 KiB)  TX bytes:4135 (4.0 KiB)

eth0.2    Link encap:Ethernet  HWaddr 00:FF:FF:FF:FF:FF  
          inet6 addr: fe80::2ff:ffff:feff:ffff/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:26 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:5595 (5.4 KiB)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:32 errors:0 dropped:0 overruns:0 frame:0
          TX packets:32 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1 
          RX bytes:2192 (2.1 KiB)  TX bytes:2192 (2.1 KiB)

root@lede:/# </code></pre></div><br /><br /><p>My own router failed:<br /></p><div class="codebox"><pre><code>Decompressing...done


CFE version 6.37.14.62 (r436032) based on BBP 1.0.37 for BCM947XX (32bit,SP,)
Build Date: Tue Jun 21 15:42:09 CST 2016 (li@software)
Copyright (C) 2000-2008 Broadcom Corporation.

Init Arena
Init Devs.
Boot partition size = 262144(0x40000)
DDR Clock: 400 MHz
Info: DDR frequency set from clkfreq=800,*400*
et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 6.37.14.62 (r436032)
CPU type 0x0: 800MHz
Tot mem: 131072 KBytes

CFE mem:    0x00F00000 - 0x01791D54 (8985940)
Data:       0x00F4A3CC - 0x00F4A88C (1216)
BSS:        0x00F4A898 - 0x00F8FD54 (283836)
Heap:       0x00F8FD54 - 0x0178FD54 (8388608)
Stack:      0x0178FD54 - 0x01791D54 (8192)
Text:       0x00F00000 - 0x00F416F8 (268024)

Committing NVRAM...done
Waiting for reset button release...donDigital core power voltage set to 0.9375V
Decompressing...done


CFE version 6.37.14.62 (r436032) based on BBP 1.0.37 for BCM947XX (32bit,SP,)
Build Date: Tue Jun 21 15:42:09 CST 2016 (li@software)
Copyright (C) 2000-2008 Broadcom Corporation.

Init Arena
Init Devs.
Boot partition size = 262144(0x40000)
DDR Clock: 400 MHz
Info: DDR frequency set from clkfreq=800,*400*
et0: Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller 6.37.14.62 (r436032)
CPU type 0x0: 800MHz
Tot mem: 131072 KBytes

CFE mem:    0x00F00000 - 0x01791D54 (8985940)
Data:       0x00F4A3CC - 0x00F4A88C (1216)
BSS:        0x00F4A898 - 0x00F8FD54 (283836)
Heap:       0x00F8FD54 - 0x0178FD54 (8388608)
Stack:      0x0178FD54 - 0x01791D54 (8192)
Text:       0x00F00000 - 0x00F416F8 (268024)

Device eth0:  hwaddr 00-90-4C-0F-F4-6C, ipaddr 192.168.1.1, mask 255.255.255.0
        gateway not set, nameserver not set
Loader:raw Filesys:tftp Dev:eth0 File:: Options:(null)
Loading: Failed.
Could not load :: Timeout occured
Loader:raw Filesys:raw Dev:nflash0.os File: Options:(null)
Loading: .. 1539871 bytes read
Entry at 0x00008000
Closing network.
Starting program at 0x00008000
Uncompressing Linux... done, booting the kernel.
[    0.000000] Booting Linux on physical CPU 0x0
[    0.000000] Linux version 4.4.27 (wangfeng@software) (gcc version 5.4.0 (LEDE GCC 5.4.0 r1967) ) #0 SMP Mon Oct 24 20:52:44 2016
[    0.000000] CPU: ARMv7 Processor [413fc090] revision 0 (ARMv7), cr=10c5387d
[    0.000000] CPU: PIPT / VIPT nonaliasing data cache, VIPT aliasing instruction cache
[    0.000000] Machine model: Netgear R6300 V2 (BCM4708)
[    0.000000] Memory policy: Data cache writealloc
[    0.000000] PERCPU: Embedded 11 pages/cpu @c6dce000 s12928 r8192 d23936 u45056
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 65280
[    0.000000] Kernel command line: console=ttyS0,115200
[    0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)
[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Memory: 254748K/262144K available (3202K kernel code, 102K rwdata, 1208K rodata, 220K init, 280K bss, 7396K reserved, 0K cma-reserved, 131072K highmem)
[    0.000000] Virtual kernel memory layout:
[    0.000000]     vector  : 0xffff0000 - 0xffff1000   (   4 kB)
[    0.000000]     fixmap  : 0xffc00000 - 0xfff00000   (3072 kB)
[    0.000000]     vmalloc : 0xc8800000 - 0xff800000   ( 880 MB)
[    0.000000]     lowmem  : 0xc0000000 - 0xc8000000   ( 128 MB)
[    0.000000]     pkmap   : 0xbfe00000 - 0xc0000000   (   2 MB)
[    0.000000]     modules : 0xbf000000 - 0xbfe00000   (  14 MB)
[    0.000000]       .text : 0xc0008000 - 0xc0456e44   (4412 kB)
[    0.000000]       .init : 0xc0457000 - 0xc048e000   ( 220 kB)
[    0.000000]       .data : 0xc048e000 - 0xc04a7b2c   ( 103 kB)
[    0.000000]        .bss : 0xc04a7b2c - 0xc04eddec   ( 281 kB)
[    0.000000] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=2, Nodes=1
[    0.000000] Hierarchical RCU implementation.
[    0.000000] NR_IRQS:16 nr_irqs:16 16
[    0.000000] L2C: DT/platform modifies aux control register: 0x0a130000 -&gt; 0x0a530000
[    0.000000] L2C-310 enabling early BRESP for Cortex-A9
[    0.000000] L2C-310 full line of zeros enabled for Cortex-A9
[    0.000000] L2C-310 ID prefetch enabled, offset 1 lines
[    0.000000] L2C-310 dynamic clock gating enabled, standby mode enabled
[    0.000000] L2C-310 cache controller enabled, 16 ways, 256 kB
[    0.000000] L2C-310: CACHE_ID 0x410000c8, AUX_CTRL 0x7e530001
[    0.000015] sched_clock: 64 bits at 400MHz, resolution 2ns, wraps every 4398046511103ns
[    0.000039] clocksource: arm_global_timer: mask: 0xffffffffffffffff max_cycles: 0x5c4093a7d1, max_idle_ns: 440795210635 ns
[    0.000255] Calibrating delay loop... 1594.16 BogoMIPS (lpj=7970816)
[    0.090144] pid_max: default: 32768 minimum: 301
[    0.090235] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.090247] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.090792] CPU: Testing write buffer coherency: ok
[    0.091089] CPU0: thread -1, cpu 0, socket 0, mpidr 80000000
[    0.091181] Setting up static identity map for 0x82a0 - 0x82d4
[    0.130139] CPU1: thread -1, cpu 1, socket 0, mpidr 80000001
[    0.130228] Brought up 2 CPUs
[    0.130249] SMP: Total of 2 processors activated (3188.32 BogoMIPS).
[    0.130259] CPU: WARNING: CPU(s) started in wrong/inconsistent modes (primary CPU mode 0x13)
[    0.130266] CPU: This may indicate a broken bootloader or firmware.
[    0.132571] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns
[    0.132696] pinctrl core: initialized pinctrl subsystem
[    0.133182] NET: Registered protocol family 16
[    0.133956] DMA: preallocated 256 KiB pool for atomic coherent allocations
[    0.162509] clocksource: Switched to clocksource arm_global_timer
[    0.163864] NET: Registered protocol family 2
[    0.164536] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.164569] TCP bind hash table entries: 1024 (order: 1, 8192 bytes)
[    0.164595] TCP: Hash tables configured (established 1024 bind 1024)
[    0.164692] UDP hash table entries: 256 (order: 1, 8192 bytes)
[    0.164727] UDP-Lite hash table entries: 256 (order: 1, 8192 bytes)
[    0.164971] NET: Registered protocol family 1
[    0.166253] futex hash table entries: 512 (order: 3, 32768 bytes)
[    0.166456] Crashlog allocated RAM at address 0x3f00000
[    0.172506] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.172541] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.174483] bounce: pool size: 64 pages
[    0.174510] io scheduler noop registered
[    0.174525] io scheduler deadline registered (default)
[    0.175048] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
[    0.175810] console [ttyS0] disabled
[    0.175871] 18000300.serial: ttyS0 at MMIO 0x18000300 (irq = 18, base_baud = 6250000) is a 16550
[    0.607329] console [ttyS0] enabled
[    0.612470] nand: Could not find valid ONFI parameter page; aborting
[    0.618823] nand: device found, Manufacturer ID: 0x01, Chip ID: 0xf1
[    0.625179] nand: AMD/Spansion NAND 128MiB 3,3V 8-bit
[    0.630216] nand: 128 MiB, SLC, erase size: 128 KiB, page size: 2048, OOB size: 64
[    0.637769] iproc_nand 18028000.nand: detected 128MiB total, 128KiB blocks, 2KiB pages, 16B OOB, 8-bit, BCH-8
[    0.647655] Scanning device for bad blocks
[    0.752255] Bad eraseblock 123 at 0x000000f60000
[    1.314718] Bad eraseblock 865 at 0x000006c20000
[    1.393633] Bad eraseblock 965 at 0x0000078a0000
[    1.442035] mtd_read error while parsing (offset: 0x0): -74
[    1.448041] mtd_read error while parsing (offset: 0x20000): -74
[    1.456032] mtd_read error while parsing (offset: 0x80000): -74
[    1.466141] random: nonblocking pool is initialized
[    1.476237] mtd_read error while parsing (offset: 0x200000): -74
[    1.482679] mtd_read error while parsing (offset: 0x220000): -74
[    1.489110] mtd_read error while parsing (offset: 0x240000): -74
[    1.495551] mtd_read error while parsing (offset: 0x260000): -74
[    1.501997] mtd_read error while parsing (offset: 0x280000): -74
[    1.508430] mtd_read error while parsing (offset: 0x2A0000): -74
[    1.514870] mtd_read error while parsing (offset: 0x2C0000): -74
[    1.521313] mtd_read error while parsing (offset: 0x2E0000): -74
[    1.527740] mtd_read error while parsing (offset: 0x300000): -74
[    1.534180] mtd_read error while parsing (offset: 0x320000): -74
[    1.540624] mtd_read error while parsing (offset: 0x340000): -74
[    1.547049] mtd_read error while parsing (offset: 0x360000): -74
[    1.553490] mtd_read error while parsing (offset: 0x380000): -74
[    1.559924] mtd_read error while parsing (offset: 0x3A0000): -74
[    1.566364] mtd_read error while parsing (offset: 0x3C0000): -74



[    7.542791] mtd_read error while parsing (offset: 0x7F00000): -74
[    7.549277] mtd_read error while parsing (offset: 0x7F20000): -74
[    7.555771] mtd_read error while parsing (offset: 0x7F40000): -74
[    7.562264] mtd_read error while parsing (offset: 0x7F60000): -74
[    7.568751] mtd_read error while parsing (offset: 0x7F80000): -74
[    7.575244] mtd_read error while parsing (offset: 0x7FA0000): -74
[    7.581739] mtd_read error while parsing (offset: 0x7FC0000): -74
[    7.588227] mtd_read error while parsing (offset: 0x7FE0000): -74
[    7.597346] libphy: Fixed MDIO Bus: probed
[    7.601564] bgmac_bcma: Broadcom 47xx GBit MAC driver loaded
[    7.607461] bcma: bus0: Found chip with id 53010, rev 0x00 and package 0x02
[    7.614489] bcma: bus0: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x2A, class 0x0)
[    7.623136] bcma: bus0: Core 1 found: Chipcommon B (manuf 0x4BF, id 0x50B, rev 0x01, class 0x0)
[    7.631943] bcma: bus0: Core 2 found: DMA (manuf 0x4BF, id 0x502, rev 0x01, class 0x0)
[    7.639954] bcma: bus0: Core 3 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x05, class 0x0)
[    7.648413] bcma: bus0: Core 4 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x05, class 0x0)
[    7.656870] bcma: bus0: Core 5 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x05, class 0x0)
[    7.665318] bcma: bus0: Core 6 found: GBit MAC (manuf 0x4BF, id 0x82D, rev 0x05, class 0x0)
[    7.673745] bcma: bus0: Core 7 found: PCIe Gen 2 (manuf 0x4BF, id 0x501, rev 0x01, class 0x0)
[    7.682348] bcma: bus0: Core 8 found: PCIe Gen 2 (manuf 0x4BF, id 0x501, rev 0x01, class 0x0)
[    7.690953] bcma: bus0: Core 9 found: PCIe Gen 2 (manuf 0x4BF, id 0x501, rev 0x01, class 0x0)
[    7.699574] bcma: bus0: Core 10 found: ARM Cortex A9 core (ihost) (manuf 0x4BF, id 0x510, rev 0x01, class 0x0)
[    7.709653] bcma: bus0: Core 11 found: USB 2.0 (manuf 0x4BF, id 0x504, rev 0x01, class 0x0)
[    7.718083] bcma: bus0: Core 12 found: USB 3.0 (manuf 0x4BF, id 0x505, rev 0x01, class 0x0)
[    7.726543] bcma: bus0: Core 13 found: SDIO3 (manuf 0x4BF, id 0x503, rev 0x01, class 0x0)
[    7.734825] bcma: bus0: Core 14 found: ARM Cortex A9 JTAG (manuf 0x4BF, id 0x506, rev 0x01, class 0x0)
[    7.744234] bcma: bus0: Core 15 found: Denali DDR2/DDR3 memory controller (manuf 0x4BF, id 0x507, rev 0x01, class 0x0)
[    7.755025] bcma: bus0: Core 16 found: ROM (manuf 0x4BF, id 0x508, rev 0x01, class 0x0)
[    7.763130] bcma: bus0: Core 17 found: NAND flash controller (manuf 0x4BF, id 0x509, rev 0x01, class 0x0)
[    7.772789] bcma: bus0: Core 18 found: SPI flash controller (manuf 0x4BF, id 0x50A, rev 0x01, class 0x0)
[    7.782255] bcma: bus0: Flash type not supported
[    7.788459] m25p80 spi32766.0: unrecognized JEDEC id bytes: ff, ff, ff
[    7.795213] m25p80 spi32766.0: using Read Manufacturer / Device ID command (0x90) returned ff ff
[    7.803995] m25p80: probe of spi32766.0 failed with error -2
[    7.810235] bgmac_bcma bcma0:3: Found PHY addr: 0
[    7.815011] bgmac_bcma bcma0:3: Invalid MAC addr: 00:00:00:00:00:00
[    7.821306] bgmac_bcma bcma0:3: Using random MAC: 56:84:cf:0a:5e:9a
[    7.829466] b53_common: found switch: BCM53011, rev 5
[    7.835453] bgmac_bcma bcma0:4: Found PHY addr: 0
[    7.840304] bgmac_bcma bcma0:4: Invalid MAC addr: 00:00:00:00:00:00
[    7.846574] bgmac_bcma bcma0:4: Using random MAC: 52:c4:a1:d7:ea:1f
[    7.854333] bgmac_bcma bcma0:5: Found PHY addr: 0
[    7.859119] bgmac_bcma bcma0:5: Invalid MAC addr: 00:00:00:00:00:00
[    7.865440] bgmac_bcma bcma0:5: Using random MAC: be:d9:aa:8a:83:83
[    7.873208] bgmac_bcma bcma0:6: Unsupported core_unit 3
[    7.878453] bgmac_bcma: probe of bcma0:6 failed with error -524
[    7.990287] pcie_iproc_bcma bcma0:7: PCI host bridge to bus 0000:00
[    7.996548] pci_bus 0000:00: root bus resource [mem 0x08000000-0x0fffffff]
[    8.003431] pcie_iproc_bcma bcma0:7: link: UP
[    8.008059] PCI: bus0: Fast back to back transfers disabled
[    8.013639] pci 0000:00:00.0: bridge configuration invalid ([bus 00-00]), reconfiguring
[    8.022137] PCI: bus1: Fast back to back transfers disabled
[    8.027754] pci 0000:00:00.0: BAR 8: assigned [mem 0x08000000-0x080fffff]
[    8.034546] pci 0000:01:00.0: BAR 0: assigned [mem 0x08000000-0x08003fff 64bit]
[    8.041846] pci 0000:00:00.0: PCI bridge to [bus 01]
[    8.046796] pci 0000:00:00.0:   bridge window [mem 0x08000000-0x080fffff]
[    8.160272] pcie_iproc_bcma bcma0:8: PCI host bridge to bus 0001:00
[    8.166531] pci_bus 0001:00: root bus resource [mem 0x40000000-0x47ffffff]
[    8.173409] pcie_iproc_bcma bcma0:8: link: UP
[    8.178037] PCI: bus0: Fast back to back transfers disabled
[    8.183616] pci 0001:00:00.0: bridge configuration invalid ([bus 00-00]), reconfiguring
[    8.192094] PCI: bus1: Fast back to back transfers disabled
[    8.197709] pci 0001:00:00.0: BAR 8: assigned [mem 0x40000000-0x400fffff]
[    8.204500] pci 0001:01:00.0: BAR 0: assigned [mem 0x40000000-0x40007fff 64bit]
[    8.211801] pci 0001:00:00.0: PCI bridge to [bus 01]
[    8.216744] pci 0001:00:00.0:   bridge window [mem 0x40000000-0x400fffff]
[    8.330288] pcie_iproc_bcma bcma0:9: PCI host bridge to bus 0002:00
[    8.336539] pci_bus 0002:00: root bus resource [mem 0x48000000-0x4fffffff]
[    8.343410] pcie_iproc_bcma bcma0:9: PHY or data link is INACTIVE!
[    8.349562] pcie_iproc_bcma bcma0:9: no PCIe EP device detected
[    8.355551] pcie_iproc_bcma bcma0:9: PCIe controller setup failed
[    8.362902] bcm47xx-wdt bcm47xx-wdt.0: BCM47xx Watchdog Timer enabled (30 seconds, Software Timer)
[    8.371880] bcma: bus0: Bus registered
[    8.375785] pci 0000:00:00.0: enabling device (0140 -&gt; 0142)
[    8.381469] bcma-pci-bridge 0000:01:00.0: enabling device (0140 -&gt; 0142)
[    8.388179] bcma: bus1: Found chip with id 0x4331, rev 0x02 and package 0x08
[    8.395239] bcma: bus1: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x25, class 0x0)
[    8.403757] bcma: bus1: Core 1 found: IEEE 802.11 (manuf 0x4BF, id 0x812, rev 0x1D, class 0x0)
[    8.412373] bcma: bus1: Core 2 found: PCIe (manuf 0x4BF, id 0x820, rev 0x13, class 0x0)
[    8.544268] bcma: bus1: Invalid SPROM read from the PCIe card, trying to use fallback SPROM
[    8.590411] bcma: bus1: Bus registered
[    8.594219] pci 0001:00:00.0: enabling device (0140 -&gt; 0142)
[    8.599866] bcma-pci-bridge 0001:01:00.0: enabling device (0140 -&gt; 0142)
[    8.606598] bcma: bus2: Found chip with id 0x4360, rev 0x03 and package 0x01
[    8.613659] bcma: bus2: Core 0 found: ChipCommon (manuf 0x4BF, id 0x800, rev 0x2B, class 0x0)
[    8.622170] bcma: bus2: Core 1 found: IEEE 802.11 (manuf 0x4BF, id 0x812, rev 0x2A, class 0x0)
[    8.630777] bcma: bus2: Core 2 found: ARM CR4 (manuf 0x4BF, id 0x83E, rev 0x02, class 0x0)
[    8.639025] bcma: bus2: Core 3 found: PCIe Gen2 (manuf 0x4BF, id 0x83C, rev 0x01, class 0x0)
[    8.647450] bcma: bus2: Core 4 found: USB 2.0 Device (manuf 0x4BF, id 0x81A, rev 0x11, class 0x0)
[    8.687832] bcma: bus2: Invalid SPROM read from the PCIe card, trying to use fallback SPROM
[    8.698786] bcma: bus2: Bus registered
[    8.703744] NET: Registered protocol family 10
[    8.709438] NET: Registered protocol family 17
[    8.714009] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    8.726595] 8021q: 802.1Q VLAN Support v1.8
[    8.730857] Registering SWP/SWPB emulation handler
[    8.738938] VFS: Cannot open root device &quot;(null)&quot; or unknown-block(0,0): error -6
[    8.746455] Please append a correct &quot;root=&quot; boot option; here are the available partitions:
[    8.754797] 1f00          131072 mtdblock0  (driver?)
[    8.759836] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)
[    8.768060] CPU1: stopping
[    8.770768] CPU: 1 PID: 0 Comm: swapper/1 Not tainted 4.4.27 #0
[    8.776660] Hardware name: BCM5301X
[    8.780135] Backtrace: 
[    8.782606] [&lt;c0017074&gt;] (dump_backtrace) from [&lt;c0017270&gt;] (show_stack+0x18/0x1c)
[    8.790139]  r7:c7859f60 r6:00000000 r5:60000193 r4:00000000
[    8.795827] [&lt;c0017258&gt;] (show_stack) from [&lt;c017d218&gt;] (dump_stack+0x84/0xa4)
[    8.803024] [&lt;c017d194&gt;] (dump_stack) from [&lt;c0018a58&gt;] (handle_IPI+0xf4/0x19c)
[    8.810295]  r5:00000001 r4:c04a7ca8
[    8.813871] [&lt;c0018964&gt;] (handle_IPI) from [&lt;c000948c&gt;] (gic_handle_irq+0x80/0x9c)
[    8.821399]  r7:c049aeec r6:c7859f60 r5:c0490708 r4:c8802100
[    8.827067] [&lt;c000940c&gt;] (gic_handle_irq) from [&lt;c000a074&gt;] (__irq_svc+0x54/0x70)
[    8.834516] Exception stack(0xc7859f60 to 0xc7859fa8)
[    8.839550] 9f60: 00000000 000012ec c6dd9254 c000ae40 c048a224 c0490498 10c0387d c04a7cb0
[    8.847689] 9f80: 0000406a 413fc090 00000000 c7859fbc c7859fc0 c7859fb0 c0014560 c0014564
[    8.855822] 9fa0: 60000013 ffffffff
[    8.859292]  r9:413fc090 r8:0000406a r7:c7859f94 r6:ffffffff r5:60000013 r4:c0014564
[    8.867050] [&lt;c0014530&gt;] (arch_cpu_idle) from [&lt;c004fc34&gt;] (default_idle_call+0x30/0x34)
[    8.875104] [&lt;c004fc04&gt;] (default_idle_call) from [&lt;c004fd68&gt;] (cpu_startup_entry+0x130/0x194)
[    8.883674] [&lt;c004fc38&gt;] (cpu_startup_entry) from [&lt;c0018764&gt;] (secondary_start_kernel+0x10c/0x128)
[    8.892677] [&lt;c0018658&gt;] (secondary_start_kernel) from [&lt;0000954c&gt;] (0x954c)
[    8.899685]  r5:00000051 r4:0784006a
[    8.906260] Rebooting in 1 seconds..Digital core power voltage set to 0.9375V</code></pre></div><br /><br /><p>I change the kernel config: support software BCH ECC, nand ECC SMart Media Byte Order. <br />But it still failed to boot.</p><p>I can see, brcmnand_read_by_pio() function returns&nbsp; -74 when read oob data. Sometimes OK, and sometimes failed when nand_do_read_oob() called.</p><br /><br /><p>After flashing broadcom sdk firmware, my router print :</p><div class="codebox"><pre><code>Northstar brcmnand NAND Flash Controller driver, Version 0.1 (c) Broadcom Inc. 2012
NAND device: Manufacturer ID: 0x01, Chip ID: 0xf1 (AMD NAND 128MiB 3,3V 8-bit)
Spare area=64 eccbytes 8, ecc bytes located at:
 14 15 30 31 46 47 62 63
Available 55 bytes at (off,len):
(1,13) (16,14) (32,14) (48,14) (0,0) (0,0) (0,0) (0,0) 
Scanning device for bad blocks</code></pre></div><p>The brcmnand.c file is very different between chaos calmer and lede.&nbsp; Both two open source code can boot the netgear r6300v2, but not my new BCM4708 device.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344296">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						21 Nov 2016, 11:54					</div>
				</div>
				<div class="post-content content">
					<p>Another question, if I have broadcom 4360 wireless driver, how to add to LEDE source code? Do you have any advice?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344569">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">elektroman</div>
					<div class="post-datetime">
						23 Nov 2016, 12:23					</div>
				</div>
				<div class="post-content content">
					<p>HI currently busy writing my driver/work/lazy <br />Take your pick of excuse</p><p>Who do you patched the DTS ??<br />In the build_dir of OpenWRT/LEDE ??<br />build_dir/target ...??</p><p>This may/will possibly not work ..<br />The problem the buildsystem may not recognize the change and doesn&#039;t use this.<br />I prefer following solution :<br />git clone linux-master <br />from kernel.org</p><p>Create a new branch on master and do the change in<br /></p><div class="codebox"><pre><code>arch/arm/boot/dts/bcm4708-netgear-r6300-v2.dts</code></pre></div><p>or better way is to create a new DTS in<br /></p><div class="codebox"><pre><code>arch/arm/boot/dts</code></pre></div><p>with your platform/device</p><p>Some side note :<br />a quick grep here discovers this device uses BCH1 from broadcom<br /></p><div class="codebox"><pre><code>arch/arm/boot/dts/bcm47094-dlink-dir-885l.dts</code></pre></div><p>Another thing you might not understand here :<br />The NAND is attached to the SoC, Linux uses the the hardware from this SoC to access this NAND and all of the ECC handling is done with the hardware inside this SoC.<br />So only this Linus does here to enable this NAND controller and does error handling.</p><p>.. not really true but this helps for a beginner.<br />There is also some locking issues here and other things.</p><p>The NAND manufacturer guaranties only the first page of the flash is not broken. This is also why on the USB thumb drives and/or SD card is an controller.</p><p>For wifi driver:<br />Inside linux-master and/or there is a b43 driver maybe you can use this ..<br />I don&#039;t know the status here aka which of the 802.11 standards are used here.<br />As I said I&#039;m currently busy (re)writing some driver in these area</p><p>For the other topic in the other thread I will have look</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344573">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						23 Nov 2016, 12:37					</div>
				</div>
				<div class="post-content content">
					<p>I changed the dts files in this path: <br />build_dir/target-arm_cortex-a9_musl-1.1.15_eabi/linux-bcm53xx/linux-4.4.27/arch/arm/boot/dts/bcm4708-netgear-r6300-v2.dts</p><p>I think, I am not familiar with LEDE, so I use the dts for netgear r6300v2 first. If it&#039;s OK, then I will create my own dts files.</p><p>I will try the linux-master. It support the bcm4360 chip? There is an article : <a href="https://wiki.openwrt.org/toh/netgear/netgear_r6300_v2">https://wiki.openwrt.org/toh/netgear/netgear_r6300_v2</a><br />It says BCM4630 is not OK.</p><p>Thank you for your advice.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344637">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">elektroman</div>
					<div class="post-datetime">
						23 Nov 2016, 23:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>liveonlinux wrote:</cite><blockquote><p>I changed the dts files in this path: <br />build_dir/target-arm_cortex-a9_musl-1.1.15_eabi/linux-bcm53xx/linux-4.4.27/arch/arm/boot/dts/bcm4708-netgear-r6300-v2.dts</p><p>I think, I am not familiar with LEDE, so I use the dts for netgear r6300v2 first. If it&#039;s OK, then I will create my own dts files.</p></blockquote></div><p>As I said it might be changed with a new build, or not used.</p><p>The files which OpenWRT/LEDE are using for the build are either from the the git repository of from their own build.<br />Don&#039;t count on file changes inside build_dir, staging_dir<br />This is true for every build system aka linux-mater or buildroot or so.<br /></p><div class="quotebox"><cite>liveonlinux wrote:</cite><blockquote><p>I will try the linux-master. It support the bcm4360 chip? There is an article : <a href="https://wiki.openwrt.org/toh/netgear/netgear_r6300_v2">https://wiki.openwrt.org/toh/netgear/netgear_r6300_v2</a><br />It says BCM4630 is not OK.</p></blockquote></div><p>Broadcom is known for this</p><p>The (big) problem with drivers is which kernel version is used.<br />Outside the kernel the world is &quot;stable&quot; aka stable API<br />Inside the kernel *nothing* is stable it can be changed in any time for better (simpler) code.<br />i.e. for wireless driver the API have changed<br />wireless-ext -&gt; cfg80211 -&gt; mac80211 </p><p>wirelss-ext was a fast, dirty addon to get wifi working without design principles. cfg80211 is slightly better. <br />And with mac80211 there is only one place inside the kernel where the crypto is done for wifi, instead in every driver.<br />New drivers in mainline must use mac80211 or will go in staging.</p><div class="quotebox"><cite>liveonlinux wrote:</cite><blockquote><p>Thank you for your advice.</p></blockquote></div><p>Not needed ;-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344649">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						24 Nov 2016, 03:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>elektroman wrote:</cite><blockquote><p>i.e. for wireless driver the API have changed<br />wireless-ext -&gt; cfg80211 -&gt; mac80211 </p><p>wirelss-ext was a fast, dirty addon to get wifi working without design principles. cfg80211 is slightly better.</p></blockquote></div><p>You mean here?</p><div class="codebox"><pre><code> .config - Linux/arm 4.4.27 Kernel Configuration
 &gt; Networking support &gt; Wireless 
                          --- Wireless                                                                                       
                         [*]   Wireless extensions                                                                          
                         [*]   WEXT_SPY                                                                                     
                         [*]   WEXT_PRIV                                                                                    
                         &lt;*&gt;   cfg80211 - wireless configuration API                                                        
                         [ ]     nl80211 testmode command (NEW)                                                             
                         [ ]     enable developer warnings (NEW)                                                            
                         [ ]     cfg80211 regulatory debugging (NEW)                                                        
                         [ ]     cfg80211 certification onus                                                                
                         [*]     enable powersave by default (NEW)                                                          
                         [ ]     cfg80211 DebugFS entries (NEW)                                                             
                         [ ]     use statically compiled regulatory rules database (NEW)                                    
                         [*]     cfg80211 wireless extensions compatibility                                      &lt;-----  here ?                                 
                              &lt; &gt;   LIB80211                                                                                     
                              &lt; &gt;   LIB80211_CRYPT_WEP                                                                           
                              &lt; &gt;   LIB80211_CRYPT_CCMP                                                                          
                              &lt; &gt;   LIB80211_CRYPT_TKIP                                                                          
                              &lt; &gt;   Generic IEEE 802.11 Networking Stack (mac80211)</code></pre></div><p>And you tell me:<br /></p><div class="quotebox"><blockquote><p>Hi some simple question here<br />Did you use here the *initramfs.bin file here<br />.<br />Normally RootFS is build into this image and can&#039;t be removed !<br />So this error happens only when you use flash not load the <br />*initramfs.bin <br />file via TFTP into your router.</p></blockquote></div><p>Hi, elektroman, I used the initramfs.bin file, but it failed. Could you tell me the command?</p><div class="quotebox"><blockquote><p>liveonlinux wrote:<br />On netgear r6300v2, I tried the boot by initramfs, but still failed.<br />CFE&gt; boot -tftp -elf 192.168.1.2:/lede-bcm53xx-netgear-r6300-v2-initramfs-kernel.bin<br />Loader:elf Filesys:tftp Dev:eth0 File:192.168.1.2:/lede-bcm53xx-netgear-r6300-v2-initramfs-kernel.bin Options:(null)<br />Loading: Failed.<br />Could not load 192.168.1.2:/lede-bcm53xx-netgear-r6300-v2-initramfs-kernel.bin: Loader is not available<br />*** command status = -35<br />CFE&gt; boot -tftp -elf 192.168.1.2:lede-bcm53xx-netgear-r6300-v2-initramfs-kernel.bin<br />Loader:elf Filesys:tftp Dev:eth0 File:192.168.1.2:lede-bcm53xx-netgear-r6300-v2-initramfs-kernel.bin Options:(null)<br />Loading: Failed.<br />Could not load 192.168.1.2:lede-bcm53xx-netgear-r6300-v2-initramfs-kernel.bin: Loader is not available<br />*** command status = -35<br />CFE&gt; <br />CFE&gt; <br />CFE&gt; <br />CFE&gt; <br />CFE&gt; boot -tftp 192.168.1.2:lede-bcm53xx-netgear-r6300-v2-initramfs-kernel.bin<br />Loader:raw Filesys:tftp Dev:eth0 File:192.168.1.2:lede-bcm53xx-netgear-r6300-v2-initramfs-kernel.bin Options:(null)<br />Loading: ........... 262144 bytes read<br />Entry at 0x20000000<br />Closing network.<br />Starting program at 0x20000000</p></blockquote></div><p>Then failed.</p>											<p class="post-edited">(Last edited by <strong>liveonlinux</strong> on 24 Nov 2016, 03:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344879">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">elektroman</div>
					<div class="post-datetime">
						26 Nov 2016, 17:50					</div>
				</div>
				<div class="post-content content">
					<p>With wireless-ext, cfg80211<br />yes</p><p>For the &quot;missing&quot; bootlog<br /></p><div class="codebox"><pre><code>bootargs = &quot;console=ttyS0,115200 earlycon&quot;;</code></pre></div><p>add earlycon in bootargs for your DTS file may help here.</p><p>This is not enabled in bootargs of the Netgear router<br />I recommend using/creating some branch on LEDE master and copy a changed/renamed<br /></p><div class="codebox"><pre><code>bcm4708-netgear-r6300-v2.dts</code></pre></div><p>from linux master&nbsp; as a patch to <br />target/linux/bcm53xx/patches-4.4/<br />in LEDE</p><p>Some small advice here</p><p>in linux-master<br />create a branch in git<br />copy the DTS file and change it.<br />add this into git and comit.<br />do git format-patch to create a patch.<br />add this into<br />target/linux/bcm53xx/patches-4.4/</p><p><a href="https://wiki.openwrt.org/doc/devel/patches">https://wiki.openwrt.org/doc/devel/patches</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345070">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						28 Nov 2016, 05:23					</div>
				</div>
				<div class="post-content content">
					<p>I tried to google documents about &quot;CONFIG_WIRELESS_EXT&quot;,&nbsp; but nothing available found.<br />Then I &quot;grep&quot; in the kernel source code. I still don&#039;t understand how to use it.</p><p>I have brcm sdk, and I copy the drivers/net/wireless/ to openwrt/lede. Compile it, flash to the router, but BCM 4360 is still not work. Brcm sdk also have b43 directory.</p><p>I wanted to cp wl.ko from compiled brcm sdk, but maybe it&#039;s wrong.<br />Do you have any more document or example about adding bcm4360 driver to openwrt/lede?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345126">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">elektroman</div>
					<div class="post-datetime">
						28 Nov 2016, 17:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>liveonlinux wrote:</cite><blockquote><p>I tried to google documents about &quot;CONFIG_WIRELESS_EXT&quot;,&nbsp; but nothing available found.<br />Then I &quot;grep&quot; in the kernel source code. I still don&#039;t understand how to use it.</p></blockquote></div><p>Look under include in the kernel sources<br />The is the API.<br />Userland speaks nl80211, but you don&#039;t have to think about.<br />The kernel does the translation<br /></p><div class="quotebox"><cite>liveonlinux wrote:</cite><blockquote><p>I have brcm sdk, and I copy the drivers/net/wireless/ to openwrt/lede. Compile it, flash to the router, but BCM 4360 is still not work. Brcm sdk also have b43 directory.</p><p>I wanted to cp wl.ko from compiled brcm sdk, but maybe it&#039;s wrong.<br />Do you have any more document or example about adding bcm4360 driver to openwrt/lede?</p></blockquote></div><p>First do the bootloader thing here.<br />You will wear out the flash or get&nbsp; running system in flash.<br />So you can start develop on a stable branch.</p><p>For the wireless driver check <br />drivers/net/wireless/broadcom/brcm80211<br />This driver can support VHTaka 802.11ac</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345467">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						2 Dec 2016, 09:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi, elektroman, my router(BCM4709 + BCM4360 + BCM4360) is successful to boot. But the wireless(2.4G + 5G) both do not work because of lack of BCM4360 driver. </p><p>1.You mean, I have to change the bootloader?&nbsp; And could you give more details? In fact, this bcm4709 router can boot ok.<br /></p><div class="quotebox"><cite>elektroman wrote:</cite><blockquote><p>First do the bootloader thing here.<br />You will wear out the flash or get&nbsp; running system in flash.<br />So you can start develop on a stable branch.</p></blockquote></div><p>2.I find the brcm80211 path, both in chaos calmer and LEDE, drivers/net/wireless/brcm80211/ . <br />You mean, it&#039;s OK for BCM4360? <br />I use &quot;make kernel_menuconfig&quot;, but I find nothing about brcm80211. How to add it?<br /></p><div class="quotebox"><cite>elektroman wrote:</cite><blockquote><p>For the wireless driver check <br />drivers/net/wireless/broadcom/brcm80211<br />This driver can support VHT aka 802.11ac</p></blockquote></div><p>Maybe this is the only way for me.</p><br /><p>3.Before I see your last reply, I have another try. I download the DD-WRT source code. It supports the BCM4360 chip. I copy the linux-2.6.36/arch/arm/plat-brcm and linux-2.6.36/brcm from dd-wrt to chaos calmer, and change the makefile &amp; Kconfig files, solve the compiling error. <br />At last, I get the firmware. Flashing my router, the router stops booting after print &quot;Memory policy: Data cache writealloc&quot;.&nbsp; So I failed.</p>											<p class="post-edited">(Last edited by <strong>liveonlinux</strong> on 7 Dec 2016, 08:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346133">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">liveonlinux</div>
					<div class="post-datetime">
						9 Dec 2016, 07:08					</div>
				</div>
				<div class="post-content content">
					<p>Hi, elektroman, any advice?</p><div class="quotebox"><cite>liveonlinux wrote:</cite><blockquote><p>Hi, elektroman, my router(BCM4709 + BCM4360 + BCM4360) is successful to boot. But the wireless(2.4G + 5G) both do not work because of lack of BCM4360 driver. </p><p>1.You mean, I have to change the bootloader?&nbsp; And could you give more details? In fact, this bcm4709 router can boot ok.<br /></p><div class="quotebox"><cite>elektroman wrote:</cite><blockquote><p>First do the bootloader thing here.<br />You will wear out the flash or get&nbsp; running system in flash.<br />So you can start develop on a stable branch.</p></blockquote></div><p>2.I find the brcm80211 path, both in chaos calmer and LEDE, drivers/net/wireless/brcm80211/ . <br />You mean, it&#039;s OK for BCM4360? <br />I use &quot;make kernel_menuconfig&quot;, but I find nothing about brcm80211. How to add it?<br /></p><div class="quotebox"><cite>elektroman wrote:</cite><blockquote><p>For the wireless driver check <br />drivers/net/wireless/broadcom/brcm80211<br />This driver can support VHT aka 802.11ac</p></blockquote></div><p>Maybe this is the only way for me.</p><br /><p>3.Before I see your last reply, I have another try. I download the DD-WRT source code. It supports the BCM4360 chip. I copy the linux-2.6.36/arch/arm/plat-brcm and linux-2.6.36/brcm from dd-wrt to chaos calmer, and change the makefile &amp; Kconfig files, solve the compiling error. <br />At last, I get the firmware. Flashing my router, the router stops booting after print &quot;Memory policy: Data cache writealloc&quot;.&nbsp; So I failed.</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346285">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">elektroman</div>
					<div class="post-datetime">
						10 Dec 2016, 23:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>liveonlinux wrote:</cite><blockquote><p>3.Before I see your last reply, I have another try. I download the DD-WRT source code. It supports the BCM4360 chip. I copy the linux-2.6.36/arch/arm/plat-brcm and linux-2.6.36/brcm from dd-wrt to chaos calmer, and change the makefile &amp; Kconfig files, solve the compiling error. <br />At last, I get the firmware. Flashing my router, the router stops booting after print &quot;Memory policy: Data cache writealloc&quot;.&nbsp; So I failed.</p></blockquote></div><p>I would try this with try this with a more simpler method.<br />Build with buildroot <a href="https://buildroot.org/">https://buildroot.org/</a> some rootfs as cpio and embed this into a linux kernel build.</p><p>The problem for this approach you must have some *valid* cross toolchain to build the kernel. With some tricks you can use either the buildroot or crosstool-ng <a href="http://crosstool-ng.org/">http://crosstool-ng.org/</a></p><p>With this approach you control all the builds in some finer granularity.<br />For *all* ARM, X86, X86_64 platform this a good way</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>