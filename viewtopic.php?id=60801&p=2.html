<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Luci - internet access schedule</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 24 Apr 2018 and 2 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=60801&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p319424">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">smiths73v3</div>
					<div class="post-datetime">
						13 Apr 2016, 05:22					</div>
				</div>
				<div class="post-content content">
					<p>Perfect! Exactly what I was looking for. I agree when can we see this in the standard package list????</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335972">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">repherb</div>
					<div class="post-datetime">
						26 Aug 2016, 01:33					</div>
				</div>
				<div class="post-content content">
					<p>Hi everyone,</p><p>when I try to install this under 15.05 CC, it says it&#039;s unable to find the control file and nothing I have found online is helping. I would love to have this to protect my daughter from... ahem... unsavoury minecraft users and promote her going to bed at a proper time (which is why I want to implement this as a deterrent).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335997">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">Tony322</div>
					<div class="post-datetime">
						26 Aug 2016, 12:14					</div>
				</div>
				<div class="post-content content">
					<p>Hello </p><p>I tried this tools and have some experimental:<br />- we need to restart router after copy all necessary file to router for settings appeared in Network menu<br />- restriction works for web service only in my case (android 4.4 wifi connection), youtube, playstore still accessible.<br />- after I install/enable Privoxy it seems it messed up firewall rule and have no restriction at all to clients.</p><p>Hope other can fix and further develop this idea. thank you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336098">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">Srini</div>
					<div class="post-datetime">
						27 Aug 2016, 08:29					</div>
				</div>
				<div class="post-content content">
					<p>One flaw with this is that it fails to stop any connections that are already established when you reach the stop_time. Check the following thread for possible solutions.</p><p><a href="http://forum.openwrt.org/viewtopic.php?id=65807">forum.openwrt.org/viewtopic.php?id=65807</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336832">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">wally345</div>
					<div class="post-datetime">
						1 Sep 2016, 11:34					</div>
				</div>
				<div class="post-content content">
					<p>@k.szuster1</p><p>luci-access-control works nice on TP WR1043ND V3, thank you!</p><p>One question:</p><p>what is the difference between &#039;<strong>enable</strong>&#039; and &#039;<strong>ac_enable</strong>&#039; in the <em>firewall</em> configuration file ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336834">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						1 Sep 2016, 11:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>wally345 wrote:</cite><blockquote><p>what is the difference between &#039;<strong>enable</strong>&#039; and &#039;<strong>ac_enable</strong>&#039; in the <em>firewall</em> configuration file ?</p></blockquote></div><p>&quot;enable&quot; is the actual toggle switch that the firewall init script reads.</p><p>&quot;ac_enable&quot; is internal to this package and firewall knows nothing about it. It is subject to the &quot;general&quot; switch in /etc/config/access_control (that is the global on/off for this package). This Luci package sets &quot;enable&quot; for each host based on &quot;general&quot; and &quot;ac_enable&quot;.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 1 Sep 2016, 11:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336838">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">wally345</div>
					<div class="post-datetime">
						1 Sep 2016, 11:56					</div>
				</div>
				<div class="post-content content">
					<p>thank you, now it&#039;s clear</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337306">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">ThermoDyn</div>
					<div class="post-datetime">
						6 Sep 2016, 03:05					</div>
				</div>
				<div class="post-content content">
					<p>Exactly what i wanted - Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337375">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">gilleslajoie</div>
					<div class="post-datetime">
						6 Sep 2016, 14:23					</div>
				</div>
				<div class="post-content content">
					<p>HI everyone, this is my first post.&nbsp; I&#039;ve just changed my firmware on my Linksys AC1900 (v1) to OpenWrt without bricking it (Yaaay!).</p><p>The feature I used the most on the stock firmware are the parental controls and it is something I need in order to keep using OpenWrt, hence my interest in installing internet-access-schedule.</p><p>I can&#039;t find it in the available packages when searching via the router.&nbsp; How would I go about manually installing the ipk file?&nbsp; </p><p>Thanks for your help to my probably obvious question</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343054">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">k.szuster1</div>
					<div class="post-datetime">
						4 Nov 2016, 22:52					</div>
				</div>
				<div class="post-content content">
					<p>NEW VERSION AVAILABLE</p><p>New feature: you can issue a &quot;ticket&quot; for any user, who is subject to the internet restrictions. If a user needs extra time to access the internet, you can give him a ticket. The internet is not blocked for a specified amount of time and then the access is blocked automatically.<br />A ticket validity is 60 minutes by default, but you may change it as required.</p><p>It looks like this now:<br /><span class="postimg"><img src="https://github.com/k-szuster/luci-access-control-package/raw/master/snapshot1.png?raw=true" alt="https://github.com/k-szuster/luci-access-control-package/raw/master/snapshot1.png?raw=true" /></span></p><p>The software should work on any platform without need of recompiling.<br />Tested with OpenWrt BB and CC.<br />Note: due to a bug in CC, all times must be set in UTC. On BB - use your local time</p><p>Package ready to install on all platforms:<br /><a href="https://github.com/k-szuster/luci-access-control-package/releases/download/0.4/luci-app-access-control_0.4_all.ipk">https://github.com/k-szuster/luci-acces … .4_all.ipk</a></p><p>Source repository:<br /><a href="http://k-szuster.github.io/luci-access-control">http://k-szuster.github.io/luci-access-control</a><br />as a Luci app, and:<br /><a href="http://k-szuster.github.io/luci-access-control-package">http://k-szuster.github.io/luci-access-control-package</a><br />as a standalone package.<br />Both contain the same code.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344199">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">iceberg9992004</div>
					<div class="post-datetime">
						20 Nov 2016, 08:38					</div>
				</div>
				<div class="post-content content">
					<p>I installed the Ipk via opkg. Its not showing up in Luci.</p>											<p class="post-edited">(Last edited by <strong>iceberg9992004</strong> on 20 Nov 2016, 09:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344250">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">bouwew</div>
					<div class="post-datetime">
						20 Nov 2016, 20:44					</div>
				</div>
				<div class="post-content content">
					<p>@iceberg...<br />After installation a reboot is needed...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344255">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">iceberg9992004</div>
					<div class="post-datetime">
						20 Nov 2016, 22:16					</div>
				</div>
				<div class="post-content content">
					<p>Sorry i ended up rebooting last night and i see it now. When i set the mac i want the box goes red.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344321">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">bouwew</div>
					<div class="post-datetime">
						21 Nov 2016, 17:23					</div>
				</div>
				<div class="post-content content">
					<p>MIA (Mom&#039;s Internet Access Helper) source-code is here:</p><p><a href="https://drive.google.com/folderview?id=0BwhvHRyRV5PlYkp2YlJ6Y3M5Ync&amp;usp=sharing">https://drive.google.com/folderview?id= … sp=sharing</a></p><p>If anyone wants to play with it...</p><p>Credits to @raversnet for making the code available on google drive.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344367">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">klaberte</div>
					<div class="post-datetime">
						21 Nov 2016, 22:40					</div>
				</div>
				<div class="post-content content">
					<p>Having some issues.&nbsp; </p><p>First, here is my config:<br />System<br />Hostname&nbsp; &nbsp; GL-AR150<br />Model&nbsp; &nbsp; GL AR150<br />Firmware Version&nbsp; &nbsp; OpenWrt Chaos Calmer 15.05 / LuCI 15.05-54-gfd60055 Release (git-15.363.78009-956be55)<br />Kernel Version&nbsp; &nbsp; 3.18.23<br />Local Time&nbsp; &nbsp; Mon Nov 21 20:28:21 2016</p><p>I have set my Router time to UTC, based on the note about CC requiring use of UTC.</p><p>Q1: Are the rule dates and times supposed to determine when access is blocked, or access is enabled?&nbsp; I have tried to test for myself, but my results are inconclusive.</p><p>Q2: Which config file or script should be changed when I make a change to the LuCi for Access Control?&nbsp; Should the firewall rules change?</p><p>Q3: Does a 60 min ticket simply open up access for the following 60 min after which it is created?&nbsp; Does the countdown begin even if that user is not currently connected?</p>											<p class="post-edited">(Last edited by <strong>klaberte</strong> on 21 Nov 2016, 23:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347615">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">k.szuster1</div>
					<div class="post-datetime">
						24 Dec 2016, 23:04					</div>
				</div>
				<div class="post-content content">
					<p>Sorry for not responding. I don&#039;t get notification about new posts from this forum.<br /></p><div class="quotebox"><cite>klaberte wrote:</cite><blockquote><p>Q1: Are the rule dates and times supposed to determine when access is blocked, or access is enabled?&nbsp; I have tried to test for myself, but my results are inconclusive.</p></blockquote></div><p>A rule specifies when access is blocked.<br />If a rule is not enabled, then access is not blocked.</p><div class="quotebox"><cite>klaberte wrote:</cite><blockquote><p>Q2: Which config file or script should be changed when I make a change to the LuCi for Access Control?&nbsp; Should the firewall rules change?</p></blockquote></div><p>The config files are: firewall and access_control. Firewall rules do change (actually new rules appear).</p><div class="quotebox"><cite>klaberte wrote:</cite><blockquote><p>Q3: Does a 60 min ticket simply open up access for the following 60 min after which it is created?&nbsp; Does the countdown begin even if that user is not currently connected?</p></blockquote></div><p>Exactly. The countdown begins at the moment of issuing a ticket.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348439">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">wayne1958</div>
					<div class="post-datetime">
						4 Jan 2017, 22:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>k.szuster1 wrote:</cite><blockquote><p>I&#039;ve made a Luci module, which allows to restrict the access to the internet for specific hosts. </p><p><a href="http://k-szuster.github.io/luci-access-control/">http://k-szuster.github.io/luci-access-control/</a></p><p>You can block internet access for any single host. The hosts are&nbsp; chosen<br />by MAC found on a simple&nbsp; pop-up list.<br />Every host may be blocked permanently or have it&#039;s own&quot;From time&quot; - &quot;To time&quot; rule. You cam switch on/off each&nbsp; individual rule or the whole filter by single click..</p><p>The existing solutions were not satisfactory for me (although inspiring):<br /> - wifischedule blocks all wifi, bot specific hosts, and not wired LAN ethernet connection<br />- Mom&#039;s Internet Access is close to my needs, but too complicated to build for non-hackers and not integrated with Luci.<br />- Gargoyle has got sophisticated filtering, but... too sophisticated for every mummy. After all, not every platform supports Gargoyle (mine not).<br />- Manual editing of iptables&#039; ruless - not for everyday use.</p><p>Simple installation: don&#039;t build ipk if you don&#039;t wish to, just copy a few files to your router. No scripts and&nbsp; daemons to be cross-compiled. It just makes use of the standard OpenWrt firewall.</p><p>Enjoy</p></blockquote></div><p>Integration with LuCI is excellent! But will this terminate an existing connection once shutdown time is reached?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348769">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">k.szuster1</div>
					<div class="post-datetime">
						8 Jan 2017, 19:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>wayne1958 wrote:</cite><blockquote><p>Integration with LuCI is excellent! But will this terminate an existing connection once shutdown time is reached?</p></blockquote></div><p>No.<br />This issue was mentioned several times. See <a href="https://forum.openwrt.org/viewtopic.php?id=65807">https://forum.openwrt.org/viewtopic.php?id=65807</a> for possible colutions.</p><p>In short: iptables does NOT break existing connection whet a rule becomes active. Only newly opened connections are subject to iptables&#039; rules.<br />You could restart/flush the firewall but this would kill all open&nbsp; connections.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361613">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">AndreyS</div>
					<div class="post-datetime">
						7 Jul 2017, 00:29					</div>
				</div>
				<div class="post-content content">
					<p>Hi, what if i want to restrict all connections, not a specific MAC address, is it possible to create a rule with wildcard in field &quot;MAC address&quot;, like asterisk etc?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=60801&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>