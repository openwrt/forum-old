<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Firmware upgrade for TP-Link TL-WR1043ND Version 2.1</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 15 Apr 2018 and 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=47675&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p219164">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">haliltekin56</div>
					<div class="post-datetime">
						4 Dec 2013, 12:04					</div>
				</div>
				<div class="post-content content">
					<p>Hello I&#039;ve got a question.<br />I used often the router &quot;TP-Link TL-WR1043ND Version 1.9&quot;, and it was able to make a Firmwareupgrade with Openwrt.<br />But I cannot do the same on &quot;TP-Link TL-WR1043ND Version 2.1&quot;. <br />I get the following Error message:</p><p>Error code: 18005</p><p>Upgrade unsuccessfully because the version of the upgraded file was incorrect.<br />Please check the file name.</p><br /><p>Although it worked on the same Router V.1.9<br />Can Anyone help me?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219169">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						4 Dec 2013, 12:38					</div>
				</div>
				<div class="post-content content">
					<p>Well I guess the routers webinterface saved you from bricking your router.<br /><a href="http://nl.tp-link.com/Article/?id=46">The 1043nd v1.x is very different from the version 2</a></p><p>But thanks to Juhosg the 1043ndv2 is now supported under <a href="http://wiki.openwrt.org/about/latest#bleeding.edge">Barrier breaker</a></p><p>But the Trunk images don&#039;t include a WebGui (luci) by default, but you can install it of course.<br />This also means that you initially have to use the <a href="http://wiki.openwrt.org/doc/howto/user.beginner.cli">cli</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219177">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">haliltekin56</div>
					<div class="post-datetime">
						4 Dec 2013, 14:20					</div>
				</div>
				<div class="post-content content">
					<p>Could you send me the URL for the download please?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219186">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						4 Dec 2013, 15:42					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-tl-wr1043nd-v2-squashfs-factory.bin">http://downloads.openwrt.org/snapshots/ … actory.bin</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219188">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">haliltekin56</div>
					<div class="post-datetime">
						4 Dec 2013, 16:02					</div>
				</div>
				<div class="post-content content">
					<p>Thank you very much <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219192">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">haliltekin56</div>
					<div class="post-datetime">
						4 Dec 2013, 16:24					</div>
				</div>
				<div class="post-content content">
					<p>Execuse me please but I have a another question.<br />The upgrade was successfully, but I cannot connect me with the router via the Linux Terminal.<br />I didn&#039;t change the password, and it is usual that the password is admin.<br />How can I find out what&#039;s my password is?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219197">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						4 Dec 2013, 17:17					</div>
				</div>
				<div class="post-content content">
					<p>If there isn&#039;t a password set yet, you have to login via telnet.<br />After setting the password, you can login with the username root via ssh. (also telnet will not work anymore).</p>											<p class="post-edited">(Last edited by <strong>FriedZombie</strong> on 4 Dec 2013, 17:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220122">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">updated</div>
					<div class="post-datetime">
						16 Dec 2013, 17:09					</div>
				</div>
				<div class="post-content content">
					<p>I also can&#039;t login, telnet are closed and i haven&#039;t credentical for the ssh login.<br />Ports open: 22, 111, 443, 902<br />The reset button didn&#039;t helped</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220125">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">dexy.31337</div>
					<div class="post-datetime">
						16 Dec 2013, 18:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>updated wrote:</cite><blockquote><p>I also can&#039;t login, telnet are closed and i haven&#039;t credentical for the ssh login.<br />Ports open: 22, 111, 443, 902<br />The reset button didn&#039;t helped</p></blockquote></div><p>443 port is for https - try web browser with https://&lt;ip&gt;:443</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220126">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						16 Dec 2013, 18:10					</div>
				</div>
				<div class="post-content content">
					<p>wiki:failsafe mode</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220181">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Zanzani</div>
					<div class="post-datetime">
						17 Dec 2013, 09:09					</div>
				</div>
				<div class="post-content content">
					<p>I got me a few of these v2&#039;s too last week. I was somewhat disappointed after I opened the box en especially because there was no AA-firmware available. <br />However, the trunk version works well. And yes, you should add Luci yourself if you want a web-if. The most I had to struggle with was the different and not well described setup of the switch as I need vlan-stuff for my purposes.<br />This new type might even have better performance and more possibilities.</p><p>I believe that there hasn&#039;t been much discussion about this new version of the 1043 yet. I could write a small post about my way to flash and configure if someone would like.</p><p>Cheers,</p><p>Erik</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222331">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">gbi</div>
					<div class="post-datetime">
						10 Jan 2014, 19:20					</div>
				</div>
				<div class="post-content content">
					<p>Hi Erik and Others,</p><p>I have also got a v2 and I like to use it with OpenWrt. I&#039;m also a little disappointed cause I haven&#039;t known that ther is a v2 of the 1043 (but thats my fault).</p><p>It would be very kind if you can post a detailled description what you did to get OpenWrt up and running, and about the difficulties or problems you had, and how you solved them</p><p>Cheers, Gerd</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222401">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Zanzani</div>
					<div class="post-datetime">
						11 Jan 2014, 13:08					</div>
				</div>
				<div class="post-content content">
					<p>Hello Gerd,</p><p>I can do that. Maybe today I can give a short list of commands to do an install. The details (like changing switch-config) will take some more days.</p><p>Regards,</p><p>Erik</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222528">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Zanzani</div>
					<div class="post-datetime">
						13 Jan 2014, 00:31					</div>
				</div>
				<div class="post-content content">
					<p>Okay, here we go.</p><p>I suppose you know how to telnet and to use ssh. Starting-point is an original TP-Link TL-WR1043ND Ver2.1 and you get into its webinterface.<br />Get the trunk version of OpenWrt from <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/">http://downloads.openwrt.org/snapshots/trunk/ar71xx/</a>&nbsp; called&nbsp; openwrt-ar71xx-generic-tl-wr1043nd-v2-squashfs-factory.bin<br />Flash your router using this file. After a while the device reboots. The router is now on 192.168.1.1 . Make sure that your PC gets a new dhcp-lease or at least make it able to communicate to the router. Also have the router connected to the Internet to let it download additional packages.</p><p>Now for initial purposes you are able to telnet to the device and even get in without using a password:<br />telnet 192.168.1.1</p><p>First thing might be setting a new password:<br />passwd</p><p>While you are still connected install the packages you need. Probably it&#039;s only Luci that you miss. I like the ip-package as well:<br />opkg update <br />opkg install luci ip</p><p>To be able to use the webinterface we need to start the http-server:<br />/etc/init.d/uhttpd enable<br />/etc/init.d/uhttpd start</p><p>Now you can continue configuring by using the webinterface the way you were used to. However, the GUI is changed and you see a lot of IPv6-stuff that you did not see in the AA-releases.</p><p>Take care of the fact that you are using a development-version and things might change over night. I noticed this when I experienced package incompatibilities when I wanted to add a package a few weeks after flashing. I had to update to the current trunk version (using ...sysupgrade.bin) to install what I wanted (and I had to reinstall the additional packages).</p><p>One big difference between this version 2.1 and the previous (white-case) model is the ethernet-switching. From what I understand, the old one had only one ethernetport (eth0) connected to the switch-silicon. Separation between WAN and LAN was done by VLAN-tagging. The new one seems to have an eth0 and eth1, both connected to a VLAN-switch.<br />I drew a sketch of how I think the CPU and the Swich-chip are interconnected and defined by default BB:</p><p><span class="postimg"><img src="http://mlf.home.xs4all.nl/openwrt/TPL1043v2_swich_diagram_sketch1.jpg" alt="Sketch_Switch1043v2 bbcode test" /></span></p><p>The default config does not make use of VLANs but it can be done if you need this (like I do very much). Its GUI just is not as clear as it should. Here is a part of the graphical config of the switch in which I wrote the denotiations that corespond with the labels on the outside to make it more clear.</p><br /><p><span class="postimg"><img src="http://mlf.home.xs4all.nl/openwrt/TPL1043v2_luci-switchconfig_edit3.png" alt="GUI_Switch1043v2 bbcode test" /></span></p><br /><p>One hint on adding vlan&#039;s that might save you lots of frustration: If you add a new vlan, it is presented as an eth0.xx in the GUI. So, if you choose this one when you add a new interface this is mostly not the one you meant as eth0 is used as WAN-port by default.<br />Under the interfaces Physical Settings, don&#039;t select the new pre-defined vlan but just fill in the Custom Interface&nbsp; eth1.xx</p><br /><p>As I&#039;m not an OpenWrt-guru, please post your comments and corrections to this topic and I will add them to this post. Also, maybe someone might add this to the 1043&#039;s wiki-page.</p><p>Good luck!</p><p>Erik</p>											<p class="post-edited">(Last edited by <strong>Zanzani</strong> on 24 Feb 2014, 00:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222939">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">risa2000</div>
					<div class="post-datetime">
						16 Jan 2014, 23:17					</div>
				</div>
				<div class="post-content content">
					<p>For switch configuration see my reply here: <a href="https://forum.openwrt.org/viewtopic.php?pid=222938#p222938">https://forum.openwrt.org/viewtopic.php … 38#p222938</a></p>											<p class="post-edited">(Last edited by <strong>risa2000</strong> on 16 Jan 2014, 23:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222948">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">umrzyk</div>
					<div class="post-datetime">
						17 Jan 2014, 01:45					</div>
				</div>
				<div class="post-content content">
					<p>Thanks very much Zanzani, that was enough to get me started! - complete newbie with openwrt <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>For &quot;offline&quot; install of luci and uhttpd <a href="http://wiki.openwrt.org/doc/howto/luci.essentials">http://wiki.openwrt.org/doc/howto/luci.essentials</a> look at Minimalistic offline installation and also here <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/">http://downloads.openwrt.org/snapshots/ … /packages/</a> (my net provider fixes mac adress and I really don&#039;t know how to change it on linux! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />)<br />For problems with starting uhttpd <a href="https://forum.openwrt.org/viewtopic.php?id=34406">https://forum.openwrt.org/viewtopic.php?id=34406</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225990">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">gbi</div>
					<div class="post-datetime">
						22 Feb 2014, 12:54					</div>
				</div>
				<div class="post-content content">
					<p>Hi Erik,</p><p>thanks a lot for the detailled instructions. I&#039;ll perform the installation of BB soon, maybe this weekend, and with your recipe I&#039;m in good mood that it will work well :-). </p><p>cheers, Gerd</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p226122">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">Zanzani</div>
					<div class="post-datetime">
						24 Feb 2014, 01:01					</div>
				</div>
				<div class="post-content content">
					<p>I just extended my previous post with some pictures. Maybe it can help you.</p><p>Erik</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227013">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">arincm</div>
					<div class="post-datetime">
						8 Mar 2014, 09:56					</div>
				</div>
				<div class="post-content content">
					<p>I have a tp-link wr1043nd v2.1, and am using a macbook pro with mac os x and version 10.9.1. <br />I followed the instructions on: <br /><a href="http://wiki.openwrt.org/toh/tp-link/tl-wr1043nd">http://wiki.openwrt.org/toh/tp-link/tl-wr1043nd</a> </p><p>Specifically: <br />a) Hard reset 30-30-30 <br />b) flash <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-tl-wr1043nd-v2-squashfs-factory.bin">http://downloads.openwrt.org/snapshots/ … actory.bin</a> <br />c) reset <br />d) hard reset 30-30-30 </p><p>After doing this, the router does not respond via firefox or safari at 192.168.1.1. </p><p>So I went searching and found this forum chain, specifically FriedZombie&#039;s comment &quot;the Trunk images don&#039;t include a WebGui (luci) by default, but you can install it of course. <br />This also means that you initially have to use the cli&quot; </p><br /><p>So I went to the command line. The router will respond to pings with ttl=64, and it responds to ssh but I don&#039;t know the password, but does not respond to telnet (telnet just hangs). I would normally use telnet to set the default ssh password, right? </p><p>My questions: <br />1) Any idea why it doesn&#039;t respond to telnet but will respond to pings? Do I need a separate serial line for telnet? Is there a port I need to specify in the command line?<br />2) What is the default password for ssh? Is there a default password or a way to reset the router&#039;s default root password for ssh? <br />3) After 1&amp;2 are solved, how do I configure the router so that I can use the web gui at 192.168.1.1? </p><p>Thank you!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227089">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">Zanzani</div>
					<div class="post-datetime">
						9 Mar 2014, 11:37					</div>
				</div>
				<div class="post-content content">
					<p>Hello Arincm,</p><p>After flashing you should be able to access the device using telnet. At least as long as you do not set a password. Afterwards telnet will be disabled and you cannot start a new telnet session. Only your current connection keeps up until you end it.</p><p>As you tell us that you able to ssh to the device on 192.168.1.1 I&#039;m sure that you are on the LAN-side (access from WAN is blocked by the firewall for all services).<br />Just to make sure that your telnet client-program is working, try telnetting to the ssh-port by:<br />telnet 192.168.1.1 22</p><p>You should at least see something like this:<br />SSH-2.0-dropbear_2013.59</p><p>A serial cable is always a good idea if you&#039;re in to OpenWrt. That is mostly the only way to peek in the device when it is locked for some reason or in case you don&#039;t know the password.</p><p>Good luck, keep us informed,</p><p>Erik</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227098">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">risa2000</div>
					<div class="post-datetime">
						9 Mar 2014, 12:57					</div>
				</div>
				<div class="post-content content">
					<p>@Zanzani</p><p>Do you know, how exactly is switch from (default) telnet to (secured) ssh implemented? What exactly are the conditions for having telnet available and then having only ssh available (or for having available both)?</p><p>For example, on my boxes, I always build the image with authorized_keys (in /etc/dropbear/authorized_keys) and I can connect with ssh right after I flash the image without telneting (or changing root password). In fact I never care about root password or telnet.</p>											<p class="post-edited">(Last edited by <strong>risa2000</strong> on 9 Mar 2014, 12:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227153">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">Zanzani</div>
					<div class="post-datetime">
						10 Mar 2014, 00:18					</div>
				</div>
				<div class="post-content content">
					<p>Hi Risa2000,</p><p>It&#039;s just experience, I did no research on this. But I just tested the procedure on some other TP-link router. I found out that the telnetd is still running after setting the root-password but it refuses to get connected the next time you try. You get disconnected immediately. No chance of entering a username:</p><p>$ telnet 192.168.1.1<br />Trying 192.168.1.1...<br />Connected to 192.168.1.1.<br />Escape character is &#039;^]&#039;.<br />Login failed.<br />Connection closed by foreign host.</p><p>About the authorized_key-login: I know about it but I&#039;ve never used it. Sounds interesting. Can you point me to some articles where it is described?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227155">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">risa2000</div>
					<div class="post-datetime">
						10 Mar 2014, 00:29					</div>
				</div>
				<div class="post-content content">
					<p>@Zanzani</p><p>For how to use dropbear with authorized_keys you can have a look here:<br /><a href="http://wiki.openwrt.org/doku.php?id=oldwiki:dropbearpublickeyauthenticationhowto">http://wiki.openwrt.org/doku.php?id=old … ationhowto</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p228981">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">ikostadinoff</div>
					<div class="post-datetime">
						1 Apr 2014, 19:00					</div>
				</div>
				<div class="post-content content">
					<p>I get new 1043 v2 and flash with BB from trunk. Im linux user and all was simple <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> thanks to OpenWRT team <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />I need LAMP server and instal lighttpd + php5 and all works in minutes but then I try to instal misql-server package and ... bump - dont have space in /observer - have 2.1MB but need 2.4MB.</p><p>What can I do now?</p><p>And second - where will be stored DB files in OpenWRT filesystem structure, will be small but where <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>ikostadinoff</strong> on 1 Apr 2014, 19:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232864">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">dm.mineralka</div>
					<div class="post-datetime">
						9 May 2014, 10:18					</div>
				</div>
				<div class="post-content content">
					<p>hi,</p><p>am installed BB on my new 1043v2, but problem is that on WIFI configuration i see and i can only use y 801.11b and 802.11g modes. Is current limitation of openwrt for this model, or have i something wrong?</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=47675&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>