<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Buffalo WMR-300 installation proceedure</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p256536">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">frauhottelmann</div>
					<div class="post-datetime">
						4 Dec 2014, 16:46					</div>
				</div>
				<div class="post-content content">
					<p>I just got a Buffalo WMR-300 and it&#039;s apparently supported (<a href="http://wiki.openwrt.org/toh/buffalo/wmr-300">http://wiki.openwrt.org/toh/buffalo/wmr-300</a>).<br />My question now is, how to install OpenWrt on it. The wiki doesn&#039;t say anything and I would like to avoid cracking the thing open for serial access... <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261989">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">FreeCodeVN</div>
					<div class="post-datetime">
						18 Jan 2015, 23:53					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Did you find any way to flash your router?</p><p>I&#039;ve just get a WMR-300 too and I am also very new to OpenWrt. I searched around and got that you can upload the firmware on such wiki page via serial port, which means you have to open the case, do some work for connecting some serial port to the board.</p><p>To upload the firmware via TFTP, you have to download some firmware with &quot;tftp&quot; in or at the end of its name.</p><p>Can someone confirm my knowledge?</p>											<p class="post-edited">(Last edited by <strong>FreeCodeVN</strong> on 18 Jan 2015, 23:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262263">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">*++p</div>
					<div class="post-datetime">
						21 Jan 2015, 09:46					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m also interested, the WMR-300 is very inexpensive and quite capable! <br />8 MB of Flash, 64 MB of RAM.... plus the signal strength is stronger than advertised!</p><p>The OpenWRT <a href="http://wiki.openwrt.org/toh/buffalo/wmr-300">page</a>, while providing the BIN and showing the bootlogs, does not mention much more</p><p>So, was it via </p><ul><li><p>Serial?</p></li><li><p>TFTP?</p></li><li><p>the original Buffalo web page?</p></li></ul><p>Do we know the </p><ul><li><p>TFTP address?</p></li><li><p>Header size and bytes?</p></li></ul><p><strong>Edit</strong>: the firmware was very likely injected from serial (57600N8), so it seems we have enough info to flash it... <br />However the case does not open easily, so I&#039;ll keep that option last...</p><p>Other info gathered</p><p>- the header size is 0x74 (116 dec), <br />- the size of fw post-header is written at 0x40 in header (4 bytes, beware it&#039;s big-endian) </p><p>Tried to add a header to the new no-header fw (changing the size of fw inside the header), but the interface (despite no message) doesn&#039;t accept it.</p><p>That&#039;s all for today!</p>											<p class="post-edited">(Last edited by <strong>*++p</strong> on 22 Jan 2015, 14:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262760">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">*++p</div>
					<div class="post-datetime">
						25 Jan 2015, 10:25					</div>
				</div>
				<div class="post-content content">
					<p>Thanks to @ldpinney&#039;s work, the router WMR-300 is openwrt-flashed!</p><p>The <a href="http://wiki.openwrt.org/toh/buffalo/wmr-300">WIKI</a> has been updated.</p><p>Edit: just tested the TFTP server with the ramdisk generated version: works great! No serial needed if flash works from LuCI directly. Doc updated again.</p>											<p class="post-edited">(Last edited by <strong>*++p</strong> on 25 Jan 2015, 17:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264827">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">frauhottelmann</div>
					<div class="post-datetime">
						9 Feb 2015, 23:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>*++p wrote:</cite><blockquote><p>Thanks to @ldpinney&#039;s work, the router WMR-300 is openwrt-flashed!</p><p>The <a href="http://wiki.openwrt.org/toh/buffalo/wmr-300">WIKI</a> has been updated.</p><p>Edit: just tested the TFTP server with the ramdisk generated version: works great! No serial needed if flash works from LuCI directly. Doc updated again.</p></blockquote></div><p>Awesome! Thanks! Could someone upload a ramdisk version? And once I am at the LuCI stage, do I flash the squashfs version or the ramdisk version?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264854">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">*++p</div>
					<div class="post-datetime">
						10 Feb 2015, 03:01					</div>
				</div>
				<div class="post-content content">
					<p>Once in Luci use the squashfs version to flash openwrt for good!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p265144">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">frauhottelmann</div>
					<div class="post-datetime">
						11 Feb 2015, 17:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>*++p wrote:</cite><blockquote><p>Once in Luci use the squashfs version to flash openwrt for good!</p></blockquote></div><p>Could you upload a ramdisk version? With the internet speed here I really don&#039;t want to download all sources...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p265169">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">*++p</div>
					<div class="post-datetime">
						11 Feb 2015, 21:25					</div>
				</div>
				<div class="post-content content">
					<p>Made a initramfs version, added LuCI (an old song) in it - then flash from <a href="http://192.168.1.1">http://192.168.1.1</a> should be straightforward.</p><p>Edit: problem with wikisend ... the part below is likely not working<br /><span style="color: #aaaaaa">The file is on &quot;wikisend&quot;<br /><a href="http://wikisend.com/download/786340/openwrt-ramips-mt7620n-wmr-300-initramfs-uImage.bin">http://wikisend.com/download/786340/ope … uImage.bin</a></span><br /></p><div class="codebox"><pre><code>Size   3176354 bytes
md5sum 2797b343cb17e93fd26789de99e13e3b</code></pre></div><p>The doc is updated (wait 1~2 seconds after plugging USB or you may miss the tftp window [doc said 2-3])<br /><a href="http://wiki.openwrt.org/toh/buffalo/wmr-300">http://wiki.openwrt.org/toh/buffalo/wmr-300</a></p><p>Basically <br /> - install a tftp server on your pc (debian: &quot;apt-get install tftpd-hpa&quot;)<br /> - copy the file in your tftp server directory (debian: /var/lib/tftpboot/ )<br /> - rename it &quot;firmware_WMR-300.ram&quot; and ensure it&#039;s readable by everyone (chmod 644 file)<br /> - connect the NIC of the PC to the router one, PC IPv4 is 192.168.11.168 / 24 (note the .11., not .1.) (then restart NIC, debian: ifdown ethX ; ifup ethX)<br /> - plug USB to router, after 1~2 seconds press AOSS for ~5 seconds. Release and wait.</p><p>Nothing should &quot;move&quot; - LEDs are stuck, ON. </p><p>So, I&#039;d advise you to set a verbose mode for your tftp server. <br />These are my options on Ubuntu (debian)</p><div class="codebox"><pre><code>TFTP_USERNAME=&quot;tftp&quot;
TFTP_DIRECTORY=&quot;/var/lib/tftpboot&quot;
TFTP_ADDRESS=&quot;0.0.0.0:69&quot;
TFTP_OPTIONS=&quot;-4 -v --secure --create&quot;</code></pre></div><p>Note the &quot;-v&quot; for verbose.<br />So you can</p><div class="codebox"><pre><code>tail -f /var/log/syslog</code></pre></div><p> to see when/if the router requests the file, like</p><div class="codebox"><pre><code>Feb 12 00:01:02 dearestlinux in.tftpd[14202]: RRQ from 192.168.11.1 filename firmware_WMR-300.ram</code></pre></div><p>and maybe errors...</p><p>Ok, so... disclaimer:<br />I just added LuCI (+LuCI failsafe) to the modules, and generated the ramfs version.<br />But I&#039;m just a member, like you. In other words that&#039;s not an official OpenWRT version...</p><p>Anyway, if that seems to go well, change your PC NIC network to 192.168.<strong>1</strong>.168 / 24.<br />And after you could load the initramfs version into the router, do <a href="http://192.168.1.1">http://192.168.1.1</a> and dear LuCI will immediately offer you to upload a firmware. Take the official<br />&quot;openwrt-ramips-mt7620n-wmr-300-squashfs-sysupgrade.bin&quot; from<br /><a href="https://downloads.openwrt.org/barrier_breaker/14.07/ramips/mt7620n/">https://downloads.openwrt.org/barrier_b … s/mt7620n/</a></p><p>Reboot after 5 minutes ... and do open the same URL - <br />Enjoy :-)</p>											<p class="post-edited">(Last edited by <strong>*++p</strong> on 24 Nov 2015, 15:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301045">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">felixdd</div>
					<div class="post-datetime">
						24 Nov 2015, 15:41					</div>
				</div>
				<div class="post-content content">
					<p>So I bought a Japanese version of WMR-300 (it converted to $19 USD so it was a GOOD deal).</p><p>However, I can&#039;t flash the US version of the firmware onto it. Digging a bit, it seems that the US firmware is 36 bytes larger. Furthermore, I found out that other routers by Buffalo are region locked. </p><p>Region-lock workarounds for other routers (<a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?p=745189">http://www.dd-wrt.com/phpBB2/viewtopic.php?p=745189</a>) were unsuccessful for me. I think the only recourse left for me is to tftp into it.</p><p>My questions:<br />1) My understanding is that factory-released firmwares are NOT the same as ramfs versions, and that one needs to make the latter in some way. Is this correct?<br />2) If (1) is correct, is there a ramfs-generated version of a US factory firmware? My strategy at this point is to flash to ANY US version through tftp, then use the web-based interface to get to the latest (2.0) firmware. Of course if someone has a ramfs v2.0 firmware that&#039;d be great!<br />3) I don&#039;t really have the time to learn how to decrypt and compile my own ramfs version of the factory firmware, unless someone can point me to a clearly-written set of instructions. Life&#039;s been busy lately and this is my first foray into dd/OpenWRT so I&#039;m a bit apprehensive<br />4) My other recourse is to keep screencaps of the English Router Configuration Pages on my tablet so that I can access them when I travel. So yeah I don&#039;t REALLY need to convert to English but...it&#039;d be nice!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301050">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">*++p</div>
					<div class="post-datetime">
						24 Nov 2015, 16:00					</div>
				</div>
				<div class="post-content content">
					<p>Please read the doc<br /><a href="http://wiki.openwrt.org/toh/buffalo/wmr-300">http://wiki.openwrt.org/toh/buffalo/wmr-300</a></p><p>You should have no problem flashing a wmr-300 with openwrt.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301085">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">felixdd</div>
					<div class="post-datetime">
						24 Nov 2015, 20:37					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve seen that site already. I&#039;m not interested in flashing to OpenWRT though; I&#039;m interested in applying the method to flash to a US factory firmware.</p><p>I&#039;m asking whether I can just flash the encrypted Buffalo firmware directly through tftp, and if not whether someone has a ramfs-enabled factory firmware that I can flash thru tftp</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p304191">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">seapigangel</div>
					<div class="post-datetime">
						19 Dec 2015, 01:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi *++p,</p><p>Many thanks for your kind efforts in making this. It seems that the download link on Wikisend is no longer available. Would you please help to make a update? Thanks! </p><div class="quotebox"><cite>*++p wrote:</cite><blockquote><p>Made a initramfs version, added LuCI (an old song) in it - then flash from <a href="http://192.168.1.1">http://192.168.1.1</a> should be straightforward.</p><p>Edit: problem with wikisend ... the part below is likely not working<br /><span style="color: #aaaaaa">The file is on &quot;wikisend&quot;<br /><a href="http://wikisend.com/download/786340/openwrt-ramips-mt7620n-wmr-300-initramfs-uImage.bin">http://wikisend.com/download/786340/ope … uImage.bin</a></span><br /></p><div class="codebox"><pre><code>Size   3176354 bytes
md5sum 2797b343cb17e93fd26789de99e13e3b</code></pre></div><p>The doc is updated (wait 1~2 seconds after plugging USB or you may miss the tftp window [doc said 2-3])<br /><a href="http://wiki.openwrt.org/toh/buffalo/wmr-300">http://wiki.openwrt.org/toh/buffalo/wmr-300</a></p><p>Basically <br /> - install a tftp server on your pc (debian: &quot;apt-get install tftpd-hpa&quot;)<br /> - copy the file in your tftp server directory (debian: /var/lib/tftpboot/ )<br /> - rename it &quot;firmware_WMR-300.ram&quot; and ensure it&#039;s readable by everyone (chmod 644 file)<br /> - connect the NIC of the PC to the router one, PC IPv4 is 192.168.11.168 / 24 (note the .11., not .1.) (then restart NIC, debian: ifdown ethX ; ifup ethX)<br /> - plug USB to router, after 1~2 seconds press AOSS for ~5 seconds. Release and wait.</p><p>Nothing should &quot;move&quot; - LEDs are stuck, ON. </p><p>So, I&#039;d advise you to set a verbose mode for your tftp server. <br />These are my options on Ubuntu (debian)</p><div class="codebox"><pre><code>TFTP_USERNAME=&quot;tftp&quot;
TFTP_DIRECTORY=&quot;/var/lib/tftpboot&quot;
TFTP_ADDRESS=&quot;0.0.0.0:69&quot;
TFTP_OPTIONS=&quot;-4 -v --secure --create&quot;</code></pre></div><p>Note the &quot;-v&quot; for verbose.<br />So you can</p><div class="codebox"><pre><code>tail -f /var/log/syslog</code></pre></div><p> to see when/if the router requests the file, like</p><div class="codebox"><pre><code>Feb 12 00:01:02 dearestlinux in.tftpd[14202]: RRQ from 192.168.11.1 filename firmware_WMR-300.ram</code></pre></div><p>and maybe errors...</p><p>Ok, so... disclaimer:<br />I just added LuCI (+LuCI failsafe) to the modules, and generated the ramfs version.<br />But I&#039;m just a member, like you. In other words that&#039;s not an official OpenWRT version...</p><p>Anyway, if that seems to go well, change your PC NIC network to 192.168.<strong>1</strong>.168 / 24.<br />And after you could load the initramfs version into the router, do <a href="http://192.168.1.1">http://192.168.1.1</a> and dear LuCI will immediately offer you to upload a firmware. Take the official<br />&quot;openwrt-ramips-mt7620n-wmr-300-squashfs-sysupgrade.bin&quot; from<br /><a href="https://downloads.openwrt.org/barrier_breaker/14.07/ramips/mt7620n/">https://downloads.openwrt.org/barrier_b … s/mt7620n/</a></p><p>Reboot after 5 minutes ... and do open the same URL - <br />Enjoy :-)</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p318526">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">scallywags</div>
					<div class="post-datetime">
						7 Apr 2016, 14:27					</div>
				</div>
				<div class="post-content content">
					<p>Hello, thanks for your great work!<br />Could somebody reup the first firmware uimage, please?<br />Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p334863">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">tlaanemagi</div>
					<div class="post-datetime">
						18 Aug 2016, 00:44					</div>
				</div>
				<div class="post-content content">
					<p>Hello, Good job</p><p>Can someone help me compile the initramfs version with luci for booting from tftp.</p><p>other question is that is it possible to write the right .bin file directly to flash using programmer, or it wont work?</p><p>Best Regards</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>