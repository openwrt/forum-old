<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> OpenWRT on a Dlink DIR-506L</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p203386">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">asteed</div>
					<div class="post-datetime">
						1 Jun 2013, 00:18					</div>
				</div>
				<div class="post-content content">
					<p>I just picked up a router off newegg (<a href="http://www.newegg.com/Product/Product.aspx?Item=N82E16833127459&amp;Tpk=dir-506l&amp;IsVirtualParent=1">http://www.newegg.com/Product/Product.a ‚Ä¶ alParent=1</a>) with the intent of installing openwrt. Before I purchased the router, i checked the hardware list and noticed that the DIR-505 was on the list and I imagined that the 506 would be very similar in terms of compatibility chipset etc. however, when i got the router in and opened it up, i noticed that it had a different chip inside than the 505. I tried to look up some other routers with the same chip in them, but when i read the information on the wiki about these devices, its all jargon to me. I would try to just upload a pre-built openwrt image, but i was very confused on which i needed. I went to follow the steps on compiling my own version of openwrt, but soon was lost in menus, and not sure what to select.</p><p>So i have come to this forum to ask for guidance in which version of openwrt i can install (if any) and if not what my options are at that point.</p><p>images:<br /><a href="http://i.imgur.com/G6yx0qA.jpg">http://i.imgur.com/G6yx0qA.jpg</a><br /><a href="http://i.imgur.com/fD0ZMZ5.jpg">http://i.imgur.com/fD0ZMZ5.jpg</a></p><p>Thank you for your time.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211524">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">sophitus</div>
					<div class="post-datetime">
						3 Sep 2013, 16:14					</div>
				</div>
				<div class="post-content content">
					<p>the device is similar to TP-Link MR3040 but has 8M flash. Which makes it more appealing to use it with OpenWrt than MR3040 with only 4M</p><p>However it is not yet supported by OpenWrt</p>											<p class="post-edited">(Last edited by <strong>sophitus</strong> on 3 Sep 2013, 16:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220982">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">SjB</div>
					<div class="post-datetime">
						27 Dec 2013, 05:25					</div>
				</div>
				<div class="post-content content">
					<p>I just purchased this device&nbsp; and I&#039;ve been able to get serial connection to it.</p><div class="codebox"><pre><code>CDM530DL_U02 Jboot B608
JRecovery Version R1.2 2012/07/27 10:46
SPI FLASH: MX25l6405d 8M
CSID 6E20-&gt;6E21
................
Starting kernel @80000000...

LINUX started...

 THIS IS ASIC
Linux version 2.6.21 (tja@dot7) (gcc version 3.4.2) #7 Wed Aug 8 11:17:31 CST 2012

 The CPU feqenuce set to 360 MHz
CPU revision is: 0001964c
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Built 1 zonelists.  Total pages: 8128
Kernel command line: console=ttyS1,57600n8 root=/dev/mtdblock3
Primary instruction cache 32kB, physically tagged, 4-way, linesize 32 bytes.
Primary data cache 16kB, 4-way, linesize 32 bytes.
Synthesized TLB refill handler (20 instructions).
Synthesized TLB load handler fastpath (32 instructions).
Synthesized TLB store handler fastpath (32 instructions).
Synthesized TLB modify handler fastpath (31 instructions).
Cache parity protection disabled
cause = 60808020, status = 11000000
PID hash table entries: 128 (order: 7, 512 bytes)
calculating r4koff... 0015f900(1440000)
CPU frequency 360.00 MHz
Using 180.000 MHz high precision timer.
Console: colour dummy device 80x25
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Memory: 29280k/32768k available (2387k kernel code, 3488k reserved, 580k data, 116k init, 0k highmem)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
SCSI subsystem initialized
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
NET: Registered protocol family 2
Time: MIPS clocksource has been installed.
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
RT3xxx EHCI/OHCI init.
squashfs: version 3.2-r2 (2007/01/15) Phillip Lougher
squashfs: LZMA suppport for slax.org by jro
io scheduler noop registered (default)

------------------GPIO--------------------------
 GPIOMODE:42df
SLIC INTR ==&gt; gpio 1
Ralink gpio driver initialized
HDLC line discipline: version $Revision: 1.1.1.1 $, maxframe=4096
N_HDLC line discipline registered.
Serial: 8250/16550 driver $Revision: 1.7 $ 4 ports, IRQ sharing disabled
serial8250: ttyS0 at I/O 0xb0000500 (irq = 37) is a 16550A
serial8250: ttyS1 at I/O 0xb0000c00 (irq = 12) is a 16550A
loop: loaded (max 8 devices)
rdm_major = 254
net_speed proc file Create 
MAC_ADRH -- : 0x00000000
MAC_ADRL -- : 0x00000000

eth2 mii.o query= phy_id:0, address:1 retval:7849
Ralink APSoC Ethernet Driver Initilization. v2.0  256 rx/tx descriptors allocated, mtu = 1500!
MAC_ADRH -- : 0x0000000c
MAC_ADRL -- : 0x432880bd
PROC INIT OK!
=== 0xB0100004 = 00000000 
Insmod eth_ping skb_diy module.
driver loaded
PPP generic driver version 2.4.2
PPP Deflate Compression module registered
PPP BSD Compression module registered
NET: Registered protocol family 24
block2mtd: version $Revision: 1.1.1.1 $
deice id : c2 20 17 c2 20 (2017c220)
MX25L6405D(c2 2017c220) (8192 Kbytes)
mtd .name = raspi, .size = 0x00800000 (8M) .erasesize = 0x00001000 (4K) .numeraseregions = 0
Creating 7 MTD partitions on &quot;raspi&quot;:
0x00000000-0x00800000 : &quot;Whole&quot;
0x00000000-0x00010000 : &quot;Bootloader&quot;
0x00010000-0x00150000 : &quot;Kernel&quot;
0x00150000-0x00690000 : &quot;RootFS&quot;
0x00690000-0x00710000 : &quot;MyDLink&quot;
0x00710010-0x007f0000 : &quot;UI&quot;
mtd: partition &quot;UI&quot; doesn&#039;t start on an erase block boundary -- force read-only
0x007f0000-0x00800000 : &quot;Config&quot;
rt3xxx-ehci rt3xxx-ehci: Ralink EHCI Host Controller
rt3xxx-ehci rt3xxx-ehci: new USB bus registered, assigned bus number 1
rt3xxx-ehci rt3xxx-ehci: irq 18, io mem 0x101c0000
rt3xxx-ehci rt3xxx-ehci: USB 0.0 started, EHCI 1.00, driver 10 Dec 2004
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
rt3xxx-ohci rt3xxx-ohci: RT3xxx OHCI Controller
rt3xxx-ohci rt3xxx-ohci: new USB bus registered, assigned bus number 2
rt3xxx-ohci rt3xxx-ohci: irq 18, io mem 0x101c1000
usb usb2: configuration #1 chosen from 1 choice
hub 2-0:1.0: USB hub found
hub 2-0:1.0: 1 port detected
Netfilter messages via NETLINK v0.30.
nf_conntrack version 0.5.0 (256 buckets, 2048 max)
Register conntrack protocol helper for ESP...
Init IP_nat_proto_esp register. 
ip_tables: (C) 2000-2006 Netfilter Core Team, Type=Restricted Cone
TCP cubic registered
NET: Registered protocol family 1
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly.
Freeing unused kernel memory: 116k freed
Algorithmics/MIPS FPU Emulator v1.5
Inter-|   Receive                                                |  Transmit
 face |bytes    packets errs drop fifo frame compressed multicast|bytes    packets errs drop fifo colls carrier compred
  eth2:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0       0
    lo:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0       0
switch reg write offset=168, value=17

phy_tx_ring = 0x01c8b000, tx_ring = 0xa1c8b000

phy_rx_ring0 = 0x01c8c000, rx_ring0 = 0xa1c8c000
 flash_open: flash_fd=3
Mount D Section.
mount: /dev/mtdblock5 is write-protected, mounting read-only
Mount MyDlink Section.
mount: mounting /dev/mtdblock4 on /usr/mydlink failed
 flash_open: flash_fd=9
phy 0, reg 0, val 0x3900
Set: phy[0].reg[0] = 3900
phy 0, reg 0, val 0x3900
Set: phy[0].reg[0] = 3900
Set gpio_range = gpio2300, dir = 8c0300
switch register base addr to system register 0xb0000000
write offset 0x60, value 0x4042dd
switch reg write offset=168, value=17
switch register base addr to 0xb0181000
write offset 0x2c, value 0xc500000
switch register base addr to system register 0xb0000000
switch reg write offset=14, value=405555
switch reg write offset=50, value=2001
switch reg write offset=98, value=7f3f
switch reg write offset=e4, value=3f
switch reg write offset=40, value=1002
switch reg write offset=44, value=1001
switch reg write offset=48, value=1001
switch reg write offset=70, value=ffff417e
phy 1, reg 0, val 0x3900
Set: phy[1].reg[0] = 3900
phy 2, reg 0, val 0x3900
Set: phy[2].reg[0] = 3900
phy 3, reg 0, val 0x3900
Set: phy[3].reg[0] = 3900
phy 4, reg 0, val 0x3900
Set: phy[4].reg[0] = 3900
phy 0, reg 0, val 0x3100
Set: phy[0].reg[0] = 3100
phy 0, reg 0, val 0x3100
Set: phy[0].reg[0] = 3100
eth2.2: Setting MAC address to  90 94 e4 e9 16 2f.
device eth2 entered promiscuous mode
VLAN (eth2.2):  Setting underlying device (eth2) to promiscious mode.
Init handler: lan
Init handler: dhcpsrv
Failure parsing line 12 of /etc/udhcpd.conf
server_config.pool_check = 1

 start = 192.168.0, end = 192.168.0, lan_ip = 192.168.0, interface=br0, ifindex=0

Unable to open /var/run/udhcpd.leases for reading
udhcpd (v0.9.9-pre) started
Unable to open /var/run/udhcpd.leases for reading
Init handler: stp
Init handler: reset_btn
Init handler: watchdog
Init handler: wireless_mode
Init handler: wlanap
Init handler: wan
Init handler: ondemand
Init handler: nat
==== NAT START (WAN:ALL Func:ALL) ====
==== Reset ICMP Timeout ====
Init handler: dnsrelay
Init handler: time
timezone:-480
dsttime:0
Init handler: schedule
Init handler: telnet
Init handler: wps_btn
Init handler: ddns
Init handler: routing
Init handler: autobak
Init handler: keepalive
Init handler: mupnpd
Init handler: hotplug
Init handler: disk_util
Init handler: usb_alert
Init handler: pptp
Init handler: l2tp
Init handler: mydlink
sh: /mydlink/opt.local: not found
Init handler: igmp
Init handler: user
Init handler: pwr_saving
Init handler: dlna
Init handler: rbydom
Init handler: rbyip
Init handler: qos
Init handler: snmp
Init handler: spap
Init handler: ftp_alg
Init handler: sip_alg
Init handler: bty_led
Init handler: ate
Init handler: shareport
Init handler: bonjour
Init handler: host_resolution
Init handler: wps_status
Init handler: reboot
sh: lltd-action: not found
/usr/bin/telnetd-action: Starting telnetd...

 flash_open: flash_fd=7
 flash_open: flash_fd=7
/usr/bin/telnetd-action start ok
 flash_open: flash_fd=7
switch register base addr to 0xb0181000
write offset 0x2c, value 0x0
switch register base addr to system register 0xb0000000
# switch register base addr to 0xb0181000
write offset 0x2c, value 0x40000000
switch register base addr to system register 0xb0000000
switch register base addr to system register 0xb0000000
write offset 0x48, value 0x10010003
Ralink APSoC Hardware Watchdog Timer
Started WatchDog Timer. LoadVlaue: 36600 sysclk: 120000000 TIMEOUT: 60
Stopped WatchDog Timer.
Disable Kernel Mode Watchdog
Started WatchDog Timer. LoadVlaue: 36600 sysclk: 120000000 TIMEOUT: 60
rt2860v2_ap: module license &#039;unspecified&#039; taints kernel.
Length of MAC:6
 mac:90:94:e4:e9:16:30:
----


=== pAd = c0082000, size = 802656 ===

&lt;-- RTMPAllocAdapterBlock, Status=0
RX DESC a1402000  size = 2048
&lt;-- RTMPAllocTxRxRingMemory, Status=0
2a:55:44:e4:05:1a:cb:eb:01:93:83:88:b2:c3:4f:8f:
50:b2:65:62:c1:a3:cb:f9:52:8e:b0:b1:79:c9:b6:97:

1. Phy Mode = 9
2. Phy Mode = 9
3. Phy Mode = 9
RTMPSetPhyMode: channel is out of range, use first channel=0 
MCS Set = ff 00 00 00 01
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
Main bssid = 90:94:e4:e9:16:30
&lt;==== rt28xx_init, Status=0
0x1300 = 00064380
device ra0 entered promiscuous mode
br0: port 1(ra0) entering learning state
br0: topology change detected, propagating
br0: port 1(ra0) entering forwarding state</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220994">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Lennong</div>
					<div class="post-datetime">
						27 Dec 2013, 10:45					</div>
				</div>
				<div class="post-content content">
					<p>Well, if you have serial I would try out the firmware for D-Link DIR-320 H/W Ver.: B1. It uses the same chip and flashsize so I guess it could be tried. The RT5350 is a router-on-a-chip that ncludes an 802.11n MAC, a 2.4GHz radio, and a 5-port 10/100 Ethernet MAC/PHY all on the chip, so it &quot;should&quot; communicate if you have support for the chip itself. You would quite possibly need to do some gpio hockey with it but thats only time consuming. The only thing that I would take careful detail to is the jboot, learn the commands (if they differ from uboot).</p><p><a href="http://wiki.openwrt.org/toh/d-link/dir-320_revb1">http://wiki.openwrt.org/toh/d-link/dir-320_revb1</a></p>											<p class="post-edited">(Last edited by <strong>Lennong</strong> on 27 Dec 2013, 10:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221075">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">djduxx</div>
					<div class="post-datetime">
						28 Dec 2013, 18:57					</div>
				</div>
				<div class="post-content content">
					<p>I guess a better candidate for the job is Hame MPR-a2. The problem is that the device does some additional check before flashing (hash check or something). It is going to be preaty hard to bypass that. I&#039;m working in the dark here due to my lack of knowledge.&nbsp; If anyone has any ideas please share and I&#039;ll be more than glad to experiment. I don&#039;t care about the device since I bought it exactly for that (experimenting).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230349">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Tiago.ac</div>
					<div class="post-datetime">
						15 Apr 2014, 21:16					</div>
				</div>
				<div class="post-content content">
					<p>Hello, I bought a DIR-506L also wondering what could be open WRT firmware installed, but found that it is not possible. I do not have enough knowledge to do it, but if someone with knowledge could do this i would be glad to help in the way i can.</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268659">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						13 Mar 2015, 21:20					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I am also interested in this. I compiled a sysupgrad eimage for HAME mpr-a2. Then, while pressing the reset button I powered on the device. The device has the IP 192.168.123.254 and dhcp active. I acessed the failsafe webinterface there and tried to flash the firmware. It gave an error message; that&#039;s it, ERROR.<br />I tried also from the router&#039;s official webinterface ticking the box saying &quot;allow unofficial firmware&quot; and it gave ERROR 101 and some chinese writing.</p><p>So how could we write the compiled image to the device?</p><p>Edit: the google translate of the error message from chinese to english says:<br /></p><div class="codebox"><pre><code>Reboot the router
Invalid upgrade file !
Make sure you have the correct file
(Error code: -101)
This device is rebooting ...
Do not use this device off.
Please wait to wait 55 seconds ...</code></pre></div>											<p class="post-edited">(Last edited by <strong>fratzicu</strong> on 13 Mar 2015, 21:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268662">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						13 Mar 2015, 21:42					</div>
				</div>
				<div class="post-content content">
					<p>I noticed that the hex view of the official image starts with &quot;DLK6E2114001&quot;</p><div class="codebox"><pre><code>DLK6E2114001  U√™           l√•4         √ì¬¶                 BH       !n9‚Ç¨√ø$+l√•4√É¬¶ Z√©T$!   ‚Ç¨‚Ä∫¬¶ ~¬∂c¬Å   ‚Ç¨  ¬ø √ÄG F√ël√´¬°√Ç|(   ]   @≈æ0       o√Ω√ø√ø¬£¬∑¬Å^√ì√àNF`√ó‚Ä¢g≈Ω√∫B√àAb¬∞`=@¬∂√®(*√åAA√í&gt;¬¨2√£]mdb{K(¬∏¬≤e5√°K¬†√Ø√é I≈Ωs2√≠6‚Ç¨g#√øu </code></pre></div><p>while the openwrt build of HAME mpr-A2 not:<br /></p><div class="codebox"><pre><code>&#039;VuT√ºg¬æ ¬∏‚Ç¨   ‚Ç¨   ¬êi√º√èLinux Kernel Image              m  ‚Ç¨ ,√∏0       o√Ω√ø√ø¬£¬∑pP¬ùx√çq~¬™wY√Ç!J‚Äö≈∏√ö√ª√Ö√ï¬¨\1T%H¬∑x‚Äì    ≈í√∂j‚Ç¨√õ+@≈†√ë
¬§√É√™@≈ì¬Ω¬¥o,{‚Ä†√åMd‚Äò√±√•¬•}*‚Äî_‚Ä∞‚Äö¬±¬•#A=√øs√âC‚ÄòRE∆í√â√∫P,_P)‚Ä°3√µ√î¬∂3}√Æ√Å&amp;√Ñ¬Æ‚Äö¬∏r‚Ä†√Ü√ã√ì√≥≈ìWz∆í</code></pre></div><br /><p>Also, while the official firmware image ends in a lot of 00, the openwrt firmware ends in a lot of ff</p>											<p class="post-edited">(Last edited by <strong>fratzicu</strong> on 13 Mar 2015, 21:45)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>