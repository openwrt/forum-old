<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link Archer C2 AC750 support</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 30 Mar 2018 and 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 14</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=52625&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=52625&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=52625&amp;p=14.html">14</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p246395">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">nuclon</div>
					<div class="post-datetime">
						8 Sep 2014, 09:52					</div>
				</div>
				<div class="post-content content">
					<p>Are there any plans for support TP-Link Archer C2 AC750? I know that C5 and C7 are already supported, but what&#039;s about C2?</p><p>According to the page <a href="https://wikidevi.com/wiki/TP-LINK_Archer_C2_v1.x">https://wikidevi.com/wiki/TP-LINK_Archer_C2_v1.x</a> it has MediaTek MT7620A as main CPU.<br />And looks like the CPU is supported <a href="http://wiki.openwrt.org/doc/hardware/soc/soc.ralink">http://wiki.openwrt.org/doc/hardware/soc/soc.ralink</a><br />Any ideas if it&#039;s possible to add support for C2?</p><br /><p>Thank you very much for all your work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248655">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nuclon</div>
					<div class="post-datetime">
						1 Oct 2014, 14:30					</div>
				</div>
				<div class="post-content content">
					<p>Okay, now I really have the C2 here.<br />I would like to add support for this router to OpenWRT. Where should I start?<br />It looks like for start supporting I should create a file target/linux/ramips/dts/archer_c2.dts and put there some data.</p><p>At the moment I&#039;m reading about adding new device (openwrt does support platform already, right?).</p><p>Any tips and hints are really appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248739">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						2 Oct 2014, 01:50					</div>
				</div>
				<div class="post-content content">
					<p>from the wiki: <a href="http://wiki.openwrt.org/doc/devel/add.new.device">http://wiki.openwrt.org/doc/devel/add.new.device</a></p><p>Sorry I can&#039;t help beyond that.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249361">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nuclon</div>
					<div class="post-datetime">
						6 Oct 2014, 11:35					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m trying to create a page at wiki with data I got (I connected to console, so I&#039;ve got OEM boot output).<br /><a href="http://wiki.openwrt.org/toh/tp-link/ac750?do=edit&amp;rev=">http://wiki.openwrt.org/toh/tp-link/ac7 … t&amp;rev=</a><br />But I can&#039;t save the page. Any ideas, what can be wrong?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249363">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">nuclon</div>
					<div class="post-datetime">
						6 Oct 2014, 12:30					</div>
				</div>
				<div class="post-content content">
					<p>Okay, Here is bootlog:</p><p><a href="http://pastebin.com/7LZTBmLX">http://pastebin.com/7LZTBmLX</a></p><p>What can I do next? create a generic image and try to put it into the router?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249418">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">att15</div>
					<div class="post-datetime">
						6 Oct 2014, 20:10					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>thanks for trying to support this device. But I am really curious why&nbsp; geizhals.at&nbsp; already list this device &quot;openwrt-ready&quot; .....:&nbsp; <br />&lt;<a href="http://geizhals.de/eu/tp-link-archer-c20i-a1153574.html">http://geizhals.de/eu/tp-link-archer-c20i-a1153574.html</a>&gt;</p><p>Did tp-link sponsored a box of c2 devices to the openwrt community for free? :-) Would be very nice of then, though:-)</p><p>Cheers,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249419">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">nuclon</div>
					<div class="post-datetime">
						6 Oct 2014, 20:17					</div>
				</div>
				<div class="post-content content">
					<p>Nor Archer C2 neither c20i are supported by OpenWRT. Probably it is just a error in description?<br />nope, tp-link didn&#039;t sponsored it. Unfortunately</p><p>Still need some help - just an idea - what to do next.<br />I&#039;m going to build kernel and initramfs image for mt7620a_mt7610e and upload it to the device via TFTP. Not sure if it will brick the device.</p><p>Any help is very appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249523">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">nuclon</div>
					<div class="post-datetime">
						7 Oct 2014, 12:08					</div>
				</div>
				<div class="post-content content">
					<p>I logged into OEM firmware (admin /1234). But I&#039;m not sure what it can give me. There are no /sys/class/gpio (for getting GPIO info).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249698">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">nuclon</div>
					<div class="post-datetime">
						8 Oct 2014, 11:24					</div>
				</div>
				<div class="post-content content">
					<p>Is it possible to load a kernel into memory (from bootloader) and try to start it without flashing it into chip?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249869">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">nuclon</div>
					<div class="post-datetime">
						9 Oct 2014, 17:51					</div>
				</div>
				<div class="post-content content">
					<p>Today I tried to flash openwrt uimage.bin file with commands</p><p>tftp 81000000 uimage.bin<br />cp.linux 81000000 </p><p>and now I see only</p><p>## Booting image at bc020000 ...<br />&nbsp; &nbsp;Uncompressing Kernel Image ... LZMA ERROR 1 - must RESET board to recover </p><p>and then the router reboots.</p><p>Any ideas what can be wrong here?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249962">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">nuclon</div>
					<div class="post-datetime">
						10 Oct 2014, 11:24					</div>
				</div>
				<div class="post-content content">
					<p>Do we have a manual somewhere about creating target/linux/ramips/dts/ files?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251773">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">bd03E</div>
					<div class="post-datetime">
						23 Oct 2014, 16:00					</div>
				</div>
				<div class="post-content content">
					<p>Is there progress in the topic? I have the Archer C20i here and stuck at the same point.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251866">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">nuclon</div>
					<div class="post-datetime">
						24 Oct 2014, 09:46					</div>
				</div>
				<div class="post-content content">
					<p>No news. At the moment I&#039;m waiting for new C2 router as I killed previous one <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I would be glad to hear something new from you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251939">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">gepdr</div>
					<div class="post-datetime">
						24 Oct 2014, 18:40					</div>
				</div>
				<div class="post-content content">
					<p>iam also interested to get this device when its running with openwrt.</p><p>a quick search revealed that the router has MediaTek MT7620A + MediaTek MT7610E</p><p>with that i found <a href="http://www.vonets.com//download/OpenWrt/MTK-OpenWrt-2.6.36.1-SDK-Release%20Notes.pdf">http://www.vonets.com//download/OpenWrt … 0Notes.pdf</a></p><p>which seams like a way to get openwrt on devices with that chipset.<br />the sdk can be downloaded at <a href="http://www.vonets.com/ProductViews.asp?D_ID=73#">http://www.vonets.com/ProductViews.asp?D_ID=73#</a><br /><a href="http://www.vonets.com/download/OpenWrt/vonets_openwrt_7620_SDK_2.6.36.1.rar">http://www.vonets.com/download/OpenWrt/ … 6.36.1.rar</a></p><p>i hope this can help.<br />thx for your effort</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252239">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">bd03E</div>
					<div class="post-datetime">
						27 Oct 2014, 22:00					</div>
				</div>
				<div class="post-content content">
					<p>I have tested several images with booting from flash or from memory. <br />But every time I only got this message:</p><p>Uncompressing Kernel Image ... LZMA ERROR 1 - must RESET board to recover</p><p>It&#039;s the same if I use the MTK SDK. I guess it&#039;s a problem with the TP-Link bootloader.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252543">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Naitachal</div>
					<div class="post-datetime">
						30 Oct 2014, 18:40					</div>
				</div>
				<div class="post-content content">
					<p>Can someone please post the serial port assignment of the J2 header for the Archer C2 AC750?</p><p>I just recieved one of these and hope to get openwrt on it.</p><p>Thank you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252615">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">bd03E</div>
					<div class="post-datetime">
						31 Oct 2014, 11:32					</div>
				</div>
				<div class="post-content content">
					<p>You should can see it on the board. The square pad is VCC. (You don&#039;t need this one.) The next is GND. The both other are RX/TX. Baud rate is 115200.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252617">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">Naitachal</div>
					<div class="post-datetime">
						31 Oct 2014, 13:06					</div>
				</div>
				<div class="post-content content">
					<p>Thanks bd03E</p><p>I see a four pin header without any silk screening on it. I&#039;ll go for it.</p><p>I have the firmware already compiled for it so this is my next step.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252692">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">bd03E</div>
					<div class="post-datetime">
						1 Nov 2014, 00:28					</div>
				</div>
				<div class="post-content content">
					<p>The LZMA Problem is solved. But the Kernel didn&#039;t start.</p><div class="codebox"><pre><code>U-Boot 1.1.3 (Jun 23 2014 - 15:14:15)

Board: Ralink APSoC DRAM:  64 MB
relocate_code Pointer at: 83fb0000
enable ephy clock...done. rf reg 29 = 5
SSC disabled.
------------------
Archer C20i v1.0.0
------------------
spi_wait_nsec: 29
spi device id: ef 40 17 0 0 (40170000)
find flash: W25Q64BV
============================================
Ralink UBoot Version: 4.1.2.0
--------------------------------------------
ASIC 7620_MP (Port5&lt;-&gt;None)
DRAM component: 512 Mbits DDR, width 16
DRAM bus: 16 bit
Total memory: 64 MBytes
Flash component: SPI Flash
Date:Jun 23 2014  Time:15:14:15
============================================
icache: sets:512, ways:4, linesz:32 ,total:65536
dcache: sets:256, ways:4, linesz:32 ,total:32768

 ##### The CPU freq = 580 MHZ ####
 estimate memory size =64 Mbytes

continue to starting system.                                                                                                                                              0
disableEthForward(1158):disable switch forward...

3: System Boot system code via Flash.(0xbc020000)
do_bootm:argc=2, addr=0xbc020000
## Booting image at bc020000 ...
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 00000000) ...
## Giving linux memsize in MB, 64

Starting kernel ...</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252973">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">Naitachal</div>
					<div class="post-datetime">
						3 Nov 2014, 17:34					</div>
				</div>
				<div class="post-content content">
					<p>yeah I got that LZMA error also. </p><p>Need to find out why the no initrd is in there. seems like it is not passing the command line to the kernel</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252981">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">bd03E</div>
					<div class="post-datetime">
						3 Nov 2014, 19:04					</div>
				</div>
				<div class="post-content content">
					<p>I guess the &#039;No initrd&#039; does not matter. It&#039;s also there with the original TP-Link firmware. </p><p>But why u-boot don&#039;t get the memory address configures in the image?</p><p>## Transferring control to Linux <strong>(at address 00000000)</strong> ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252990">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">Naitachal</div>
					<div class="post-datetime">
						3 Nov 2014, 20:31					</div>
				</div>
				<div class="post-content content">
					<p>have you modified the mktplinkfw to fixup the header for the C2?</p><p>I have also set the kernel compress to LZMA in the kernel config still get that LZMA error</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253025">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">bd03E</div>
					<div class="post-datetime">
						4 Nov 2014, 01:23					</div>
				</div>
				<div class="post-content content">
					<p>The header from the original firmware looks like a version 2 header. But the mktplinkfw2 tool can not read the file...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253114">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">bd03E</div>
					<div class="post-datetime">
						4 Nov 2014, 20:26					</div>
				</div>
				<div class="post-content content">
					<p>3: System Boot system code via Flash.(0xbc020000)<br />do_bootm:argc=2, addr=0xbc020000<br />## Booting image at bc020000 ...<br />&nbsp; &nbsp;Uncompressing Kernel Image ... OK<br />No initrd<br />## Transferring control to Linux (at address 00000000) ...<br />## Giving linux memsize in MB, 64</p><p>Starting kernel ...</p><p>Unhandled kernel unaligned access[#1]:<br />Cpu 0<br />$ 0&nbsp; &nbsp;: 00000000 00000000 0000000a b0000c1c<br />$ 4&nbsp; &nbsp;: 00000001 83f4ffb0 83f503b0 00000000<br />$ 8&nbsp; &nbsp;: 83f4fe90 ffffffff 00000001 00000005<br />$12&nbsp; &nbsp;: 00000000 83f4fdc8 00000002 83fcaa70<br />$16&nbsp; &nbsp;: 83fe0000 83fe0000 83fc69c0 1fffffff<br />$20&nbsp; &nbsp;: 83fe0000 00000000 83fe0000 00000000<br />$24&nbsp; &nbsp;: 00000020 00000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />$28&nbsp; &nbsp;: 83fcc8e0 83f4fe70 83fe0000 83fc7290<br />Hi&nbsp; &nbsp; : 00000008<br />Lo&nbsp; &nbsp; : 00000000<br />epc&nbsp; &nbsp;: abbeb184 0xabbeb184<br />&nbsp; &nbsp; Not tainted<br />ra&nbsp; &nbsp; : 83fc7290 0x83fc7290<br />Status: 00000002&nbsp; &nbsp; KERNEL EXL <br />Cause : 40008014<br />BadVA : 00007eae<br />PrId&nbsp; : 00019650 (MIPS 24Kc)<br />Modules linked in:<br />Process swapper (pid: 1, threadinfo=83c18000, task=83c17958, tls=00000000)<br />*HwTLS: e311cd55<br />Stack : 00000000 80000000 1fffffff fffffff6 83fcc8e0 83f4fe9c 30387830 30303030<br />&nbsp; &nbsp; &nbsp; &nbsp; 00003000 83fcd000 00000000 00000000 00000000 00000000 bc020200 bc020000<br />&nbsp; &nbsp; &nbsp; &nbsp; 00000002 83f4ff50 83fcd03c 00000000 83ffddc4 83fbaa70 83fcd03c 83f4fef0<br />&nbsp; &nbsp; &nbsp; &nbsp; 00000000 00000000 bc020000 00000000 00000000 00000033 83fcc8e0 83fcd03c<br />&nbsp; &nbsp; &nbsp; &nbsp; 00000000 00000000 00000032 00000033 ffffffff 83fcd03c 00000102 00000000<br />&nbsp; &nbsp; &nbsp; &nbsp; ...<br />Call Trace:</p><br /><p>Code: e2ee2e2e&nbsp; ae0a2f6e&nbsp; 2eaa7f2e &lt;aea27eae&gt; aeef6e6e&nbsp; bfea6e2e&nbsp; aeae246e&nbsp; 2aaa2f6e&nbsp; 2aaa2dee <br />Disabling lock debugging due to kernel taint<br />Kernel panic - not syncing: Attempted to kill init!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253549">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">Naitachal</div>
					<div class="post-datetime">
						7 Nov 2014, 21:06					</div>
				</div>
				<div class="post-content content">
					<p>Your further than me I&#039;m stuck at bootup still.</p><p>I might rewrite the bootloader for this damn thing.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 14</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=52625&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=52625&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=52625&amp;p=14.html">14</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>