<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Asus WL700ge and 10.03 Backfire - cannot connect to WAN</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p111631">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">arjo</div>
					<div class="post-datetime">
						21 Jun 2010, 00:19					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve updated my Asus WL700ge from Kamikaze 8.09.2 to Backfire 10.03. <br />Since the ROM size is limited to 2MB I&#039;ve created a minimal image, and use the internal HDD for storing additional packages through extboot.</p><p>Booting from HDD and installing packages works just fine, but in the end I&#039;m stuck: I cannot connect to the internet / wan, either through lan or wlan. I can perform ping or wget directly on the router through ssh. But when I try it on a PC connected on lan port or wlan, it does not work. DNS does seem to work, but no connection can be made.</p><p>I&#039;ve been struggling with this problem for over a week now. Based on other topics I&#039;ve been playing the /etc/config/network file, but it all has no effect.<br />I&#039;m kinda stuck, and since I&#039;m not a Linux guru I don&#039;t know how to find the exact problem.</p><p>8.09.2 seems to work fine but I don&#039;t want to go back since I like to use some of the new packages.</p><p>Any suggestions?</p><p>Installed packages:</p><div class="codebox"><pre><code>base-files - 43.1-r21701
blkid - 1.41.11-1
block-extroot - 0.0.1-2
block-hotplug - 0.1.0-2
block-mount - 0.1.0-2
bridge - 1.0.6-1
busybox - 1.15.3-2
dnsmasq - 2.52-2
dropbear - 0.52-4
e2fsprogs - 1.41.11-1
fdisk - 2.13.0.1-4
firewall - 1-10
hdparm - 9.27-1
hotplug2 - 1.0-beta-2
iptables - 1.4.6-2
iptables-mod-conntrack - 1.4.6-2
iptables-mod-nat - 1.4.6-2
kernel - 2.4.37.9-1
kmod-brcm-57xx - 2.4.37.9-2
kmod-brcm-wl - 2.4.37.9+4.150.10.5.3-6
kmod-diag - 2.4.37.9-7
kmod-fs-ext3 - 2.4.37.9-1
kmod-fs-vfat - 2.4.37.9-1
kmod-ide-aec62xx - 2.4.37.9-1
kmod-ide-core - 2.4.37.9-1
kmod-ipt-conntrack - 2.4.37.9-1
kmod-ipt-core - 2.4.37.9-1
kmod-ipt-nat - 2.4.37.9-1
kmod-rtc-rv5c386a - 2.4.37.9-1
kmod-scsi-core - 2.4.37.9-1
kmod-switch - 2.4.37.9-3
kmod-usb-core - 2.4.37.9-1
kmod-usb-ohci - 2.4.37.9-1
kmod-usb-printer - 2.4.37.9-1
kmod-usb-storage - 2.4.37.9-1
kmod-usb-uhci - 2.4.37.9-1
kmod-usb2 - 2.4.37.9-1
kmod-wlcompat - 2.4.37.9+4.150.10.5.3-6
libblkid - 1.41.11-1
libc - 0.9.30.1-43.1
libext2fs - 1.41.11-1
libgcc - 3.4.6-43.1
libiptc - 1.4.6-2
liblua - 5.1.4-6
libncurses - 5.7-2
libpcap - 1.0.0-2
libpthread - 0.9.30.1-43.1
librt - 0.9.30.1-43.1
libuci - 12012009.5-2
libuci-lua - 12012009.5-1
libuuid - 1.41.11-1
libxtables - 1.4.6-2
lua - 5.1.4-6
luci - 0.9.0-1
luci-admin-core - 0.9.0-1
luci-admin-full - 0.9.0-1
luci-admin-mini - 0.9.0-1
luci-app-firewall - 0.9.0-1
luci-app-initmgr - 0.9.0-1
luci-cbi - 0.9.0-1
luci-core - 0.9.0-1
luci-http - 0.9.0-1
luci-i18n-english - 0.9.0-1
luci-ipkg - 0.9.0-1
luci-lmo - 0.9.0-1
luci-nixio - 0.9.0-1
luci-sgi-cgi - 0.9.0-1
luci-sys - 0.9.0-1
luci-theme-base - 0.9.0-1
luci-theme-openwrt - 0.9.0-1
luci-uci - 0.9.0-1
luci-uvl - 0.9.0-1
luci-web - 0.9.0-1
mtd - 12
nano - 2.2.3-1
nas - 4.150.10.5.3-6
ntpclient - 2007_365-4
nvram - 7
opkg - 513-2
robocfg - 0.01-1
swap-utils - 2.13.0.1-4
tcpdump - 4.0.0-2
tune2fs - 1.41.11-1
uci - 12012009.5-2
uhttpd - 7
wireless-tools - 29-4
wlc - 4.150.10.5.3-6</code></pre></div><p>/etc/config/network:<br /></p><div class="codebox"><pre><code>#### VLAN configuration
config switch eth0
        option enable   1

config switch_vlan eth0_0
        option device   &quot;eth0&quot;
        option vlan     0
        option ports    &quot;1 2 3 4 5*&quot;

config switch_vlan eth0_1
        option device   &quot;eth0&quot;
        option vlan     1
        option ports    &quot;0 5&quot;

#### Loopback configuration
config interface loopback
        option ifname   &quot;lo&quot;
        option proto    static
        option ipaddr   127.0.0.1
        option netmask  255.0.0.0

#### LAN configuration
config interface lan
        option type     bridge
        option ifname   &quot;eth0.0&quot;
        option macaddr  &quot;00:17:31:96:6E:8B&quot;
        option proto    static
        option ipaddr   192.168.1.1
        option netmask  255.255.255.0

#### WAN configuration
config interface        wan
        option ifname   &quot;eth0.1&quot;
        option macaddr  &quot;00:17:31:96:6e:8c&quot;
        option proto    dhcp</code></pre></div><p>ifconfig:<br /></p><div class="codebox"><pre><code>br-lan    Link encap:Ethernet  HWaddr 00:17:31:96:6E:8B  
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:9575 errors:0 dropped:0 overruns:0 frame:0
          TX packets:7304 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:588035 (574.2 KiB)  TX bytes:1781177 (1.6 MiB)

eth0      Link encap:Ethernet  HWaddr 00:17:31:96:6E:8B  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:6542 errors:0 dropped:0 overruns:0 frame:0
          TX packets:6888 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:1064449 (1.0 MiB)  TX bytes:1731517 (1.6 MiB)
          Interrupt:4 

eth0.0    Link encap:Ethernet  HWaddr 00:17:31:96:6E:8B  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:5831 errors:0 dropped:0 overruns:0 frame:0
          TX packets:5859 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:330219 (322.4 KiB)  TX bytes:1617017 (1.5 MiB)

eth0.1    Link encap:Ethernet  HWaddr 00:17:31:96:6E:8C  
          inet addr:172.19.3.3  Bcast:172.19.255.255  Mask:255.255.0.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:711 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1024 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:616474 (602.0 KiB)  TX bytes:79809 (77.9 KiB)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:322 errors:0 dropped:0 overruns:0 frame:0
          TX packets:322 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:27473 (26.8 KiB)  TX bytes:27473 (26.8 KiB)

wl0       Link encap:Ethernet  HWaddr 00:17:31:96:6E:8B  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:3737 errors:0 dropped:0 overruns:0 frame:43142
          TX packets:2477 errors:24 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:332763 (324.9 KiB)  TX bytes:403193 (393.7 KiB)
          Interrupt:2 Base address:0x2000</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p112572">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">bluegold92</div>
					<div class="post-datetime">
						6 Jul 2010, 17:54					</div>
				</div>
				<div class="post-content content">
					<p>This is just my initial answer, but I immediately noticed that you have an error in VLAN 1.&nbsp; There should be a * next to port 5 , I believe:</p><p>config switch_vlan eth0_1<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;&quot;eth0&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option vlan&nbsp; &nbsp; &nbsp;1<br />&nbsp; &nbsp; &nbsp; &nbsp; option ports&nbsp; &nbsp; &quot;0 5*&quot;</p><p>read here:</p><p><a href="http://nuwiki.openwrt.org/oldwiki/OpenWrtDocs/NetworkInterfaces">http://nuwiki.openwrt.org/oldwiki/OpenW … Interfaces</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113179">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">bluegold92</div>
					<div class="post-datetime">
						15 Jul 2010, 22:20					</div>
				</div>
				<div class="post-content content">
					<p>On further review, I don&#039;t think my last post solves your problem.&nbsp; What I had to do was add a static route in the /etc/config/network file:</p><p>config &#039;route&#039; &#039;VZ_Router&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;target&#039; &#039;0.0.0.0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;gateway&#039; &#039;10.95.7.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;netmask&#039; &#039;0.0.0.0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;metric&#039; &#039;20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;interface&#039; &#039;lan&#039;</p><p>Now, keep in mind that I do not have my router set up as a router at the moment, i.e. I am not using the WAN interface at all and am using it as a switch instead.&nbsp; I am guessing that it would have worked correctly if used as a router, i.e. internet traffic would route to the WAN port.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113237">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">arjo</div>
					<div class="post-datetime">
						17 Jul 2010, 04:22					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for trying to help out, but unfortunately both suggestions do not solve my problem.</p><p>In the mean time I&#039;ve built a firmware image using the image builder I downloaded at<br /><a href="http://downloads.openwrt.org/backfire/10.03/brcm-2.4/OpenWrt-ImageBuilder-brcm-2.4-for-Linux-i686.tar.bz2">http://downloads.openwrt.org/backfire/1 … 86.tar.bz2</a></p><p>Using this image I can connect to the wan/internet out-of-the-box, so without changing any configuration files!<br />Compiling the image from sources by svn checkout still gives me an image which cannot connect to the wan/internet.</p><p>The image builder gives me Backfire (10.03, r20728) while the compiled images gives me Backfire (10.03, r22153).<br />When comparing these two images I do not see any differences in /etc/config.</p><p>As I mentioned before my ROM size is quite small (2MB), so I create a minimal image with block-extroot support and install next packages by OPKG after sysupgrade: dropbear dnsmasq firewall bridge nano kmod-brcm-wl nas wlc kmod-wlcompat ntpclient hdparm</p><p>Could the problem be that OPKG installs r20728 packages from <a href="http://downloads.openwrt.org/backfire/10.03/brcm-2.4/packages">http://downloads.openwrt.org/backfire/1 … 4/packages</a> on a r22153 images? I mean, r22153 would be somewhere in between Backfire 10.03 and 10.03.1 and could contain incompatible changes?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113239">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">arjo</div>
					<div class="post-datetime">
						17 Jul 2010, 05:34					</div>
				</div>
				<div class="post-content content">
					<p>Solved! :-)</p><p>I compiled the modules I want to install as package so the firmware image is small.<br />After sysupgrade I install my self-compiled packages and all seems to work now!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113283">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">bluegold92</div>
					<div class="post-datetime">
						17 Jul 2010, 21:00					</div>
				</div>
				<div class="post-content content">
					<p>Educate me on &quot;sysupgrade&quot; would you?&nbsp; I am trying to figure out how to get a 2.6 kernel image on my box and all attempts have ended in failure so far.&nbsp; Could you give me a more detailed explanation of how you are using sysupgrade?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113352">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">arjo</div>
					<div class="post-datetime">
						19 Jul 2010, 02:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bluegold92 wrote:</cite><blockquote><p>Educate me on &quot;sysupgrade&quot; would you?&nbsp; I am trying to figure out how to get a 2.6 kernel image on my box and all attempts have ended in failure so far.&nbsp; Could you give me a more detailed explanation of how you are using sysupgrade?</p></blockquote></div><p>Connect to the router using telnet or ssh. Then download the image to (for example) /tmp using wget. When complete use the sysupgrade command and specify the image, so something like &quot;sysupgrade openwrt-brcm-2.4-squashfs.trx&quot;. There are some command switches, using sysupgrade without specifying the image to show the list. When complete the router will reboot with new image.</p><p>Usually this is how I upgrade my router. I never had any problems except when the image was too large to fit the ROM. But then you&#039;d get an error message. Note that I only have experience with 2.4 kernel images. One time I compiled a 2.6 image but it was larger than 2MB so I did not bother to try and upload it to the router.</p>											<p class="post-edited">(Last edited by <strong>arjo</strong> on 19 Jul 2010, 02:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113356">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">rahul1023</div>
					<div class="post-datetime">
						19 Jul 2010, 02:39					</div>
				</div>
				<div class="post-content content">
					<p>would you mind posting your minimal image for the 700ge so that I may use it to flash my router?&nbsp; Also, does your wifi work?&nbsp; Can you also mount your image to a USB flash drive and boot from there?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113428">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">arjo</div>
					<div class="post-datetime">
						20 Jul 2010, 02:07					</div>
				</div>
				<div class="post-content content">
					<p>Here is my minimal OpenWRT 10.03 Backfire image: <a href="http://www.arjandejong.com/imb-openwrt-brcm-2.4-squashfs.trx">http://www.arjandejong.com/imb-openwrt- … uashfs.trx</a><br />I created this image using the Image Builder, not by compiling it. This image allows installing packages like Samba3 using opkg through the online repository.</p><p>Note that because of the 2MB limit it contains <strong>only</strong> the bare essentials to boot the router, fdisk to patition the hdd, and boot-extroot to initialize the hdd partitions and use it as additional space for installing packages.<br />It does <strong>not</strong> contain USB, Wireless, bridge, switch, firewall, dhc, etc. However, this can all be installed after flasking the router.</p><p>This image requires 3 partitions. You can create them using fdisk.<br />(partition sizes are not important, but partition numbers are!)<br /></p><div class="codebox"><pre><code>                                Device Boot      Start         End      Blocks   Id  System
/dev/ide/host0/bus0/target0/lun0/part1               1         250     2008093+  83  Linux
/dev/ide/host0/bus0/target0/lun0/part2             251         375     1004062+  82  Linux swap / Solaris
/dev/ide/host0/bus0/target0/lun0/part3             376       60801   485371845   83  Linux</code></pre></div><p>The image contains next /etc/config/fstab to describe how the partitions will be mounted through boot-extroot:<br />Note that I use /storage instead of /hdd.<br /></p><div class="codebox"><pre><code>config global automount
        option from_fstab 1
        option anon_mount 1

config global autoswap
        option from_fstab 1
        option anon_swap 0

config mount
        option target   /mnt/extroot
        option device   /dev/ide/host0/bus0/target0/lun0/part1
        option fstype   ext3
        option options  rw,sync
        option enabled  1
        option enabled_fsck 0
        option is_rootfs 1
config mount
        option target   /storage
        option device   /dev/ide/host0/bus0/target0/lun0/part3
        option fstype   ext3
        option options  rw,sync
        option enabled  1
        option enabled_fsck 0

config swap
        option device   /dev/ide/host0/bus0/target0/lun0/part2
        option enabled  1</code></pre></div><p>Flashing and configuring is all described here: <a href="https://forum.openwrt.org/viewtopic.php?id=25699">https://forum.openwrt.org/viewtopic.php?id=25699</a><br />After flashing, telnet to 192.168.1.1 and use &quot;df -h&quot;, it should list:</p><div class="codebox"><pre><code>Filesystem                Size      Used Available Use% Mounted on
/dev/root                 1.0M      1.0M         0 100% /rom
tmpfs                    30.7M    120.0K     30.6M   0% /tmp
/dev/mtdblock/4         192.0K    192.0K         0 100% /tmp/overlay
/dev/ide/host0/bus0/target0/lun0/part1
                          1.9G     53.8M      1.7G   3% /overlay
mini_fo:/overlay          1.0M      1.0M         0 100% /
/dev/ide/host0/bus0/target0/lun0/part3
                        455.6G    232.8M    455.4G   0% /storage</code></pre></div><p>If this is the case you can install packages. What I did myself:<br /></p><div class="codebox"><pre><code>opkg update
opkg install dropbear dnsmasq firewall bridge nano kmod-brcm-wl nas wlc kmod-wlcompat ntpclient hdparm --force-overwrite
opkg install kmod-usb-core kmod-usb-ohci kmod-usb-uhci kmod-usb2 kmod-usb-storage --force-overwrite
opkg install samba3

/etc/init.d/dropbear enable
/etc/init.d/firewall enable
/etc/init.d/dnsmasq enable
/etc/init.d/samba enable</code></pre></div><p>After that configure wireless, samba, etc through the config files in /etc/config and reboot.</p><p>Hope this helps.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113429">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">arjo</div>
					<div class="post-datetime">
						20 Jul 2010, 02:15					</div>
				</div>
				<div class="post-content content">
					<p>To answer your question regarding USB: I did not try that, but <a href="https://forum.openwrt.org/viewtopic.php?id=25699">https://forum.openwrt.org/viewtopic.php?id=25699</a> mentions that if USB is included the image becomes too large, so I suppose it would not be possible. In my example I created a 2GB partition for system/packages and 1GB swap as suggested in the <a href="http://wl700g.homelinux.net">http://wl700g.homelinux.net</a>/ tutorials. But you can make the system and swap partitions smaller if you want more space for your data partition.</p>											<p class="post-edited">(Last edited by <strong>arjo</strong> on 20 Jul 2010, 02:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113433">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">bluegold92</div>
					<div class="post-datetime">
						20 Jul 2010, 05:26					</div>
				</div>
				<div class="post-content content">
					<p>What is the option &quot;-force overwrite&quot; for?</p><p>Also, when I tried to install kmod-brcm-wl, I received:<br /></p><div class="codebox"><pre><code>Configuring kmod-brcm-wl.
Warning: loading wl will taint the kernel: non-GPL license - Proprietary
  See http://www.tux.org/lkml/#export-tainted for information about tainted modules</code></pre></div><p>How do I override that?</p>											<p class="post-edited">(Last edited by <strong>bluegold92</strong> on 20 Jul 2010, 05:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113766">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">rahul1023</div>
					<div class="post-datetime">
						26 Jul 2010, 16:56					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the file... Do you happen to know if the script on the homelinux site can be used to pivot root to USB?&nbsp; I was hoping this was possible as I don&#039;t want to tie up the HDD with the OS... I am having alot of issues with reliability on the 7.09 build.&nbsp; Does the proprietary broadcom drivers work on this build?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113802">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">rahul1023</div>
					<div class="post-datetime">
						27 Jul 2010, 03:57					</div>
				</div>
				<div class="post-content content">
					<p>arjo, between your file, instructions and the steps provided by bluegold; I was able to successfully install backfire 10.03 on my router.&nbsp; I was able to get everything working except for 1 thing.&nbsp; I can&#039;t seem to configure samba to allow me to access the share.&nbsp; It maps fine, but I think I hosed something up because it keeps saying access denied in Windows.&nbsp; Any tips?&nbsp; I am having a hard time setting up my /etc/config/samba file...</p><p>Also, at some point my winscp client stopped working to get to the router&#039;s files...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127525">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">hcc23</div>
					<div class="post-datetime">
						7 Feb 2011, 01:57					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I am trying to get a comprehensive picture of the WL-700gE situation and made quite some progress. I followed this thread as well as the post by bluegold92 (at <a href="https://forum.openwrt.org/viewtopic.php?id=25699)">https://forum.openwrt.org/viewtopic.php?id=25699)</a>.</p><p>I managed to get a 10.3 image from the posted .trx file, however I can&#039;t reproduce the steps to get such a small (&lt;1.8MB) image. When I use the image builder <a href="http://downloads.openwrt.org/backfire/10.03/brcm-2.4/OpenWrt-ImageBuilder-brcm-2.4-for-Linux-i686.tar.bz2">http://downloads.openwrt.org/backfire/1 … 86.tar.bz2</a>, and call it with </p><div class="codebox"><pre><code>make image PROFILE=WL700GE</code></pre></div><p>I get an image of 2494464 bytes... Well, and that is to big <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>That raises two questions of mine:<br /><strong>1) So arjo, could you post the configuration that you used to get that 1.6MB image?</strong><br /><strong>2) Arjo, you mentioned something about compiling the packages you wanted as modules. Why? (See below for backgrond...)</strong></p><p>Related to question 2): Compiling as modules:<br />I know abou the option to compile something into a module (i.e. an .ipkg package) when using the regular build process, i.e. make menuconfig, by selecting the package to be marked as &quot;M&quot;. Once these packages are then compiled, one can use the image builder to use them. However, all that the image builder does is using these packages because the location where these packages are is mentioned in <br /></p><div class="codebox"><pre><code>.../bin/OpenWrt-ImageBuilder-brcm-2.4-for-Linux-i686/repositories.conf</code></pre></div><p>So, instead of building the packages with the make system, I &quot;just&quot; use the default .conf, and build the image builder. Once this is done, I change the image builder&#039;s repositories.conf file to include</p><div class="codebox"><pre><code>src/gz backfire_10.3 http://downloads.openwrt.org/backfire/10.03/brcm-2.4/packages/</code></pre></div><p>which results in packages that are not present (but needed) to be downloaded.</p><p>Shouldn&#039;t that work also?</p><p>(Well, clearly it doesn&#039;t as I am getting 2.4MB images <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> But where is my logic flawed???)</p><p>Thanks for taking the time to answer. And double thanks to arjo for posting that 1.6MB image, which made my life much simpler <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>