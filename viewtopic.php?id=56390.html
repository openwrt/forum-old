<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> White screen with mjpg-streamer</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 31 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p269430">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">trnase</div>
					<div class="post-datetime">
						20 Mar 2015, 23:40					</div>
				</div>
				<div class="post-content content">
					<p>Heey all,</p><p>I&#039;ve been working a few days now on getting my webcam to work, and it should be working, but I just get a white screen.</p><p>My info.</p><p>Webcam(s):&nbsp; &nbsp; &nbsp;Different basic cams, being installed in windows as: USB 2.0 Camera <br />Router:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Netgear wndr3700 with OpenWrt Barrier Breaker 14.07<br />Steps done:&nbsp; &nbsp; &nbsp; <a href="http://wiki.openwrt.org/doc/howto/webcam">http://wiki.openwrt.org/doc/howto/webcam</a> &amp; <a href="http://wiki.openwrt.org/doc/howto/usb.video">http://wiki.openwrt.org/doc/howto/usb.video</a><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Also installed more opkg drivers to be sure.</p><br /><p>What happens:</p><p>- Plug in the webcam and gets recognized:</p><p>Fri Mar 20 22:22:12 2015 kern.info kernel: [ 3314.960000] usb 1-1: new high-speed USB device number 8 using ehci-platform<br />Fri Mar 20 22:22:13 2015 kern.info kernel: [ 3315.120000] uvcvideo: Found UVC 1.00 device USB 2.0 PC Cam (090c:71b3)<br />Fri Mar 20 22:22:13 2015 kern.info kernel: [ 3315.130000] input: USB 2.0 PC Cam as /devices/platform/ehci-platform/usb1/1-1/1-1:1.0/input/input5</p><p>-&nbsp; /dev/video0 is being created</p><p>- I give the command: </p><p>mjpg_streamer -i &quot;input_uvc.so -d /dev/video0 -r 640x480&quot; -o &quot;output_http.so -p 8080 -w /www/webcam&quot;&amp;</p><p>- In processes It&#039;s verified:</p><p>2562&nbsp; root&nbsp; &nbsp;mjpg_streamer -i input_uvc.so -d /dev/video0 -r 640x480 -o output_http.so -p 8080 -w /www/webcam&nbsp; 25%&nbsp; 16%</p><p>- I go to my routers ip: <a href="http://192.168.0.3:8080">http://192.168.0.3:8080</a> with google chrome</p><p>The page changes to: MJPG-Streamer - Stream Example and is loaded but completly white<br />When I open it in IE I get a small icon where the image should be.</p><p>I also killed the streamer and the website doesn&#039;t work anymore, so mjpeg_streamer works.<br />The drivers work, because it gets recognized.<br />The command is typed in correctly, no mistakes<br />Only thing is that I don&#039;t see any images placed in www/webcam folder</p><p>What is the problem here???</p>											<p class="post-edited">(Last edited by <strong>trnase</strong> on 21 Mar 2015, 22:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269519">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">johnny2222</div>
					<div class="post-datetime">
						21 Mar 2015, 22:55					</div>
				</div>
				<div class="post-content content">
					<p>Sounds like it&#039;s working for the most part. Are you able up try out another Webcam to see if it&#039;s perhaps an issue of the Webcam itself?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269533">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						22 Mar 2015, 01:22					</div>
				</div>
				<div class="post-content content">
					<p>You can try <a href="http://192.168.0.3:8080/?action=snapshot">http://192.168.0.3:8080/?action=snapshot</a> to get just a still JPG image with no web page or frames around it.&nbsp; This should be compatible with any browser.</p><p>If you cover the lens, does it go to all black?&nbsp; This may be that the exposure is not set correctly.&nbsp; I have one camera that goes all white when the light is too bright, such as pointing it out a window while the sun is out.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 22 Mar 2015, 01:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269594">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">trnase</div>
					<div class="post-datetime">
						22 Mar 2015, 20:35					</div>
				</div>
				<div class="post-content content">
					<p>I also tried that a few times but without effect. Should you see any webcam frames in the mainlink? </p><p>The Webcam itseld shows a normal image when connected to pc. Also there is no image on the side to right click on. it seems like there isn&#039;t an image captured.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269598">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						22 Mar 2015, 21:07					</div>
				</div>
				<div class="post-content content">
					<p>Does your webcam work with fswebcam?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269621">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">trnase</div>
					<div class="post-datetime">
						23 Mar 2015, 04:21					</div>
				</div>
				<div class="post-content content">
					<p>I installed it.<br />then typed:<br />fswebcam -d /dev/video0 /tmp/output.jpeg<br />and I DO get a picture clearly, so it is capturing.. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>But how to get it to work with mjpeg player, I did install it all over again and without any extras </p><p>reset router<br />loged in<br />opkg update<br />opkg install kmod-video-uvc mjpg-streamer<br />reboot</p><p>plugged in cam.<br />checked if it was recognized</p><p>mjpg_streamer -i &quot;input_uvc.so -d /dev/video0&quot; -o &quot;output_http.so -p 8080 -w /www/webcam&quot;</p><p>When going to: http://IPADRESS:8080/webcam&nbsp; &nbsp; it says: 400: Not Found! No file extension found <br />When going to: http://IPADRESS:8080/&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; the page gets the name MJPG-Streamer, but is still completly white.</p><p>Is it possible it saves the images on a different location and that&#039;s why I don&#039;t see nothing?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269809">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">trnase</div>
					<div class="post-datetime">
						24 Mar 2015, 15:19					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve installed an older version of openwrt and tested it out, now I got the Unable to set format: invalid argument&nbsp; error.<br />I put the -Y in the input mode to change it to yuv format and it works suddenly.</p><p>To bad I can&#039;t use mjpeg because my cpu load is high.</p><p>My goals is actually to just use the router for connecting webcam&#039;s and taking a still image, then having a server getting these files and stream them. So the server can do the converting. Is there a way to do that, for example with fswebcam?</p><br /><br /><p>Was looking around and I think that usbip is more the thing that I need to have. Working on that now.</p>											<p class="post-edited">(Last edited by <strong>trnase</strong> on 24 Mar 2015, 16:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269832">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						24 Mar 2015, 20:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>trnase wrote:</cite><blockquote><p>My goals is actually to just use the router for connecting webcam&#039;s and taking a still image</p></blockquote></div><p>I&#039;m doing just that with 15 webcams attached to a DIR-505, taking one picture every 10mins with fswebcam (15webcams need time...). With only one cam attached, you can take a picture every minute.</p><p>What intervall do you have in mind?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269882">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">trnase</div>
					<div class="post-datetime">
						25 Mar 2015, 11:41					</div>
				</div>
				<div class="post-content content">
					<p>I am planning to hang cameras outside and about 2-3 inside, i tried extending the usb wires with cat cables. problem is that the distance is to much and they aren&#039;t recognized anymore.</p><p>I don&#039;t need like 20fps but at least 3-4fps will be enough, and even 3-4fps with 4 cams will be to much cpuload</p><p>So I was looking for a usb extender, and a router is the easiest option. So I&#039;m going to hang a router where I want the cams, use a cat cable to give ethernet signal and power (share the cable wires, so I don&#039;t need to be blose to a powersocket)</p><p>And I found a second wndr3700 router for just 5 euro secondhand <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" />, so I can also connect it wireless with my internal network for more flexibility.</p><p>Then using a hub I will plug in 4 cams and then use usbib-protocol to forward these to a server to stream it.</p><p>mjpg-streamer was already doing that, and would be a fun option if the cams ware mjpeg supported. but with 1 cam on yuv it went to 80% straight away.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269891">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						25 Mar 2015, 13:05					</div>
				</div>
				<div class="post-content content">
					<p>Be aware: Even with webcams that support mjpeg, you might run out of USB bandwidth when connecting multiple cams to your router, e.g. Logitech C270 -&gt; impossible to stream two C270 simultaneously on the same USB. Some webcams behave nice in regards to bandwidth, others behave nasty.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269939">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">trnase</div>
					<div class="post-datetime">
						25 Mar 2015, 19:08					</div>
				</div>
				<div class="post-content content">
					<p>I tried it yesterday and when I used webcamxp to get the second stream from a uspip camera it disonnected in the command interface. When i switch there is not a problem. So i think you&#039;re right with the maximum bandwith issue. </p><p>Perhaps forcing them to use a 1.1 usb method so they will use less bandwith? Is it possible to lower the bandwith of the connected devices to get it work. </p><p>I really think it&#039;s a weird issue that nowadays there is no such thing as a extended usb device that works normally. Especially because usb stuff is easy to control/setup/change/add to routers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269956">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						25 Mar 2015, 20:31					</div>
				</div>
				<div class="post-content content">
					<p>Some more detailed info on bandwidth from my own notes:</p><p>==== USB bandwidth ====</p><p>When streaming multiple webcams simultaneously (e.g. with mjpg_streamer), you have to keep in mind, that the bandwidth of your USB is limited to 480mbit/s (or more strict: 80% of 480 = 384mbit/s). This can become a problem, if you exceed the bandwidth-limit<br />&nbsp; * by too high resolution of your streams -&gt; lower the resolution of at least one cam<br />&nbsp; * by nasty cams that even at comparably low resolutions like 800x600 request the max bandwith (e.g. C270) -&gt; take at least one different (=not &quot;nasty&quot;) cam</p><p>When this happens, you will most likely get an error message from mjpg_streamer like &quot;no space left on device&quot;.</p><p>To get the bandwidth the camera requires, search &#039;&#039;lsusb -v&#039;&#039; for </p><div class="codebox"><pre><code>   wWidth                  640
   wHeight                 480
   dwMinBitRate       24576000
   dwMaxBitRate      147456000

   wWidth                  800
   wHeight                 600
   dwMinBitRate       38400000
   dwMaxBitRate      230400000

Note: Same values for C270 and Pro 9000!</code></pre></div><p>Alternatively, look at &#039;&#039;/sys/kernel/debug/usb/devices&#039;&#039; and search for something like &#039;&#039;B:&nbsp; Alloc=485/800 us (61%)&#039;&#039; while the camera is connected and transmitting video.</p><p><strong>Example:</strong></p><p>&nbsp; * Pro 9000 = not nasty = requests less than max. bandwidth of 230,4mbit/s @ 800x600<br />&nbsp; * C270 = nasty = <span class="bbu">always</span> requests max. bandwidth of 230,4mbit/s @ 800x600</p><p>&nbsp; * 2x Pro 9000 + 1x C270 @ 800x600 -&gt; works<br />&nbsp; * 0x Pro 9000 + 2x C270 @ 800x600 -&gt; doesn&#039;t work; Error: **no space left on device**, since 2x 230,4mbit/s &gt; 384mbit/s<br />&nbsp; * 0x Pro 9000 + 2x C270 @ 640x480 -&gt; works</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269958">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						25 Mar 2015, 20:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>trnase wrote:</cite><blockquote><p>Perhaps forcing them to use a 1.1 usb method so they will use less bandwith?</p></blockquote></div><p>Streaming pictures @$yourchosenresolution results in a certain bandwidth requirement (see my previous posting).</p><p>If you want to lessen bandwidth requirements, then lessen your requirements to the resolution of the streamed pictures.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p276966">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">jmomo</div>
					<div class="post-datetime">
						21 May 2015, 05:47					</div>
				</div>
				<div class="post-content content">
					<p>EDIT: Disregard my post below. I got my webcam working. It was just an issue that I had to actually set the FPS config to 30, where the default was 5. Funny thing is that I probably get 5 now that it&#039;s set to 30!</p><p>--</p><p>I suspect I may be having a similar problem, and I&#039;ve found at least one reported bug against mjpg-streamer which is similar.</p><p>My webcam can capture images with fswebcam just fine, but mjpg-streamer isn&#039;t giving any snapshot or stream output. I have no errors. Everything looks like it&#039;s working okay.</p><p>Note that I&#039;m not getting a white screen. I&#039;m getting no screen, no stream, no image, no nothing. The network port opens and then no data appears to be sent.</p><p>I suspect there may be a problem with recent mjpg-streamer builds?</p>											<p class="post-edited">(Last edited by <strong>jmomo</strong> on 21 May 2015, 08:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p281787">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">xwx</div>
					<div class="post-datetime">
						29 Jun 2015, 19:27					</div>
				</div>
				<div class="post-content content">
					<p>I have same problem only for me it wasn&#039;t fixed with fps, on 12.09 everything is working fine ... Is there any solution to fix it ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p281887">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">xwx</div>
					<div class="post-datetime">
						30 Jun 2015, 15:34					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m answering my question myself maybe this will help someone, to make mjpg-streamer working simply use r148 build<br />to do this execute working good on 14.07 <br />opkg install <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/mjpg-streamer_r148-4_ar71xx.ipk">http://downloads.openwrt.org/attitude_a â€¦ ar71xx.ipk</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p281911">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						30 Jun 2015, 19:52					</div>
				</div>
				<div class="post-content content">
					<p>Contrary to your experience, mjpg-streamer r182-1 is runnung under 14.07 here on a DIR-505.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>