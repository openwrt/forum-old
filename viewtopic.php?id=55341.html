<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link TL-WR710N v2</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 6 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p262736">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">cr0nite</div>
					<div class="post-datetime">
						25 Jan 2015, 02:06					</div>
				</div>
				<div class="post-content content">
					<p>Hi everyone,</p><p>There is a new version (v2) of the TP-Link TL-WR710N that I so far didn&#039;t manage to flash with OpenWRT.</p><p>I&#039;ve used the v1 (EU) version for a project before with 8 MB Flash and 32 MB RAM, which could easily be flashed using the TP-Link web interface.<br />Now, for a new project, I bought a new WR710N that shows v2 on the packaging and on the firmware update screen:<br />Firmware Version: 3.15.12 Build 140114 Rel.55132n<br />Hardware Version: WR710N v2 00000000</p><p>Flashing the <a href="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr710n-v1-squashfs-factory.bin">regular OpenWRT firmware for the WR710N v1</a> fails with error 18001: &quot;Upgrade unsuccessfully because the length of the upgraded file is incorrect. Please check the file name.&quot;<br />After trying out different file names, I cut the firmware from 8126464 bytes to 3932160 bytes (most of the trailing FFs), as I figured that the v2 might no longer have 8 MB Flash, but only 4 MB instead.<br />When uploading this file through the web interface, I now got an error 18005: &quot;Upgrade unsuccessfully because the version of the upgraded file was incorrect. Please check the file name.&quot;</p><p>Any idea how I should continue? Build a custom file (I&#039;ve never done that)? Change headers of the firmware (where, how)?<br />Your help would be much appreciated <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>cr0nite</strong> on 25 Jan 2015, 02:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262757">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">J1mbo</div>
					<div class="post-datetime">
						25 Jan 2015, 09:47					</div>
				</div>
				<div class="post-content content">
					<p>Shame if they&#039;ve gone down to 4MB. I bought a couple of extra v1.1&#039;s (at £15 each) as these are such useful devices. One odd thing is that the LAN port reports connection at Gb in dmesg (though it&#039;s only 100Mbps of course).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262771">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						25 Jan 2015, 12:23					</div>
				</div>
				<div class="post-content content">
					<p>there are 2 ways:</p><p>- GUESS that the components inside are the same as 710 v1, adjust header, and try to flash (risky).</p><p>- open it, connect a TTL serial adapter, and see bootlog.</p><p>it would also be nice to have a backup of the stock firmware, since i cannot find it in any tp-link website ATM.</p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 25 Jan 2015, 12:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262919">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">bl1skn3r</div>
					<div class="post-datetime">
						26 Jan 2015, 11:22					</div>
				</div>
				<div class="post-content content">
					<p>hi there,</p><p>same problem here,<br />its now officially confirmed that the tplink wr-710n (V2) does have only 4mb of flash.</p><p>i managed to wire up the serial, here is the boot log</p><div class="codebox"><pre><code>U-Boot 1.1.4 (Jan 14 2014 - 15:03:18)

AP121 (ar9330) U-boot

DRAM:  32 MB
led turning on for 1s...
id read 0x100000ff
flash size 4194304, sector count = 64
Flash:  4 MB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag7240_enet_initialize...
No valid address in Flash. Using fixed address
No valid address in Flash. Using fixed address
: cfg1 0x5 cfg2 0x7114
eth0: 00:03:7f:09:0b:ad
ag7240_phy_setup 
eth0 up
: cfg1 0xf cfg2 0x7214
eth1: 00:03:7f:09:0b:ad
athrs26_reg_init_lan
ATHRS26: resetting s26
ATHRS26: s26 reset done
ag7240_phy_setup 
eth1 up
eth0, eth1
Autobooting in 1 seconds
## Booting image at 9f020000 ...
   Uncompressing Kernel Image ... OK

Starting kernel ...

Booting AR9330(Hornet)...
Linux version 2.6.31--LSDK-9.2.0.312 (tplink@localhost.localdomain) (gcc version 4.3.3 (GCC) ) #1 Tue Jan 14 15:07:55 CST 2014
flash_size passed from bootloader = 4
CPU revision is: 00019374 (MIPS 24Kc)
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
User-defined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00002000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00002000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
Kernel command line: console=ttyS0,115200 root=31:02 rootfstype=squashfs init=/sbin/init mtdparts=ar7240-nor0:128k(u-boot),1024k(kernel),2816k(rootfs),64k(config),64k(ART) mem=32M
PID hash table entries: 128 (order: 7, 512 bytes)
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
Writing ErrCtl register=00000000
Readback ErrCtl register=00000000
Memory: 29744k/32768k available (1968k kernel code, 3024k reserved, 565k data, 116k init, 0k highmem)
Hierarchical RCU implementation.
NR_IRQS:128
plat_time_init: plat time init done
Calibrating delay loop... 266.24 BogoMIPS (lpj=532480)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
===== ar7240_platform_init: 0


Whoops! This kernel is for product wr703 v1.0!

bio: create slab &lt;bio-0&gt; at 0
SCSI subsystem initialized
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
NET: Registered protocol family 1
AR7240 GPIOC major 0
squashfs: version 4.0 (2009/01/31) Phillip Lougher
fuse init (API version 7.12)
msgmni has been set to 58
alg: No test for lzma (lzma-generic)
alg: No test for stdrng (krng)
io scheduler noop registered
io scheduler anticipatory registered
io scheduler deadline registered
io scheduler cfq registered (default)
Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
ttyS0: detected caps 00000000 should be 00000100
serial8250.0: ttyS0 at MMIO 0xb8020000 (irq = 19) is a 16550A
console [ttyS0] enabled
PPP generic driver version 2.4.2
NET: Registered protocol family 24
5 cmdlinepart partitions found on MTD device ar7240-nor0
Creating 5 MTD partitions on &quot;ar7240-nor0&quot;:
0x000000000000-0x000000020000 : &quot;u-boot&quot;
0x000000020000-0x000000120000 : &quot;kernel&quot;
0x000000120000-0x0000003e0000 : &quot;rootfs&quot;
0x0000003e0000-0x0000003f0000 : &quot;config&quot;
0x0000003f0000-0x000000400000 : &quot;ART&quot;
-&gt;Oops: flash id 0x10215 . 
ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
Port Status 1c000004 
ar7240-ehci ar7240-ehci.0: ATH EHCI
ar7240-ehci ar7240-ehci.0: new USB bus registered, assigned bus number 1
ehci_reset Intialize USB CONTROLLER in host mode: 3
ehci_reset Port Status 1c000000 
ar7240-ehci ar7240-ehci.0: irq 3, io mem 0x1b000000
ehci_reset Intialize USB CONTROLLER in host mode: 3
ehci_reset Port Status 1c000000 
ar7240-ehci ar7240-ehci.0: USB 2.0 started, EHCI 1.00
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
Initializing USB Mass Storage driver...
usbcore: registered new interface driver usb-storage
USB Mass Storage support registered.
usbcore: registered new interface driver usbhid
usbhid: v2.6:USB HID core driver
Ooops, why the devices couldn&#039;t been initialed?
TCP cubic registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
ar7240wdt_init: Registering WDT success
watch dog proc create successfully.
VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
Freeing unused kernel memory: 116k freed
init started:  BusyBox v1.01 (2012.11.26-07:26+0000) multi-call binary
This Board use 2.6.31
xt_time: kernel timezone is -0000
nf_conntrack version 0.5.0 (512 buckets, 5120 max)
ip_tables: (C) 2000-2006 Netfilter Core Team
PPPoL2TP kernel driver, V1.0
PPTP driver version 0.8.3

 (none) mips #1 Tue Jan 14 15:07:55 CST 2014 (none)
(none) login: Now flash open!
Now flash open!
ATHR_GMAC: Length per segment 1536
ATHR_GMAC: fifo cfg 3 01f00140
2
ATHR_GMAC: Max segments per packet :   1
ATHR_GMAC: Max tx descriptor count :   40
ATHR_GMAC: Max rx descriptor count :   96
ATHR_GMAC: Mac capability flags    :   4D83
1
ATHR_GMAC: Max segments per packet :   1
ATHR_GMAC: Max tx descriptor count :   40
ATHR_GMAC: Max rx descriptor count :   252
ATHR_GMAC: Mac capability flags    :   4403
athr_gmac_ring_alloc Allocated 640 at 0x81e77800
athr_gmac_ring_alloc Allocated 4032 at 0x81d62000
Setting Drop CRC Errors, Pause Frames and Length Error frames 
Setting PHY...mac 0
athr_gmac_ring_alloc Allocated 640 at 0x81e77400
athr_gmac_ring_alloc Allocated 1536 at 0x81f2e000
athr_gmac_mii_setup: MDC check failed
Setting Drop CRC Errors, Pause Frames and Length Error frames 
ATHRS26: resetting s26
ATHRS26: s26 reset done
++++ athrs26_igmp_setup once
vtable vid: 0x00000002, bitmap 0x00000003
vtable vid: 0x00000004, bitmap 0x00000005
vtable vid: 0x00000006, bitmap 0x00000007
vtable vid: 0x00000008, bitmap 0x00000009
vtable vid: 0x0000000a, bitmap 0x0000000b
vtable vid: 0x0000000c, bitmap 0x0000000d
vtable vid: 0x0000000e, bitmap 0x0000000f
vtable vid: 0x00000010, bitmap 0x00000011
vtable vid: 0x00000012, bitmap 0x00000013
vtable vid: 0x00000014, bitmap 0x00000015
vtable vid: 0x00000016, bitmap 0x00000017
vtable vid: 0x00000018, bitmap 0x00000019
vtable vid: 0x0000001a, bitmap 0x0000001b
vtable vid: 0x0000001c, bitmap 0x0000001d
vtable vid: 0x0000001e, bitmap 0x0000001f
vtable vid: 0x00000020, bitmap 0x00000021
++ PVID: 0x0000001a, bitmap: 0x0000001f
++ PVID: 0x0000001a, bitmap: 0x0000001f
++ PVID: 0x0000001c, bitmap: 0x0000001f
++ PVID: 0x0000001e, bitmap: 0x0000001f
++ PVID: 0x00000020, bitmap: 0x0000001f
Setting PHY...mac 1
device eth0 entered promiscuous mode
athr_gmac_ring_free Freeing at 0x81e77800
athr_gmac_ring_free Freeing at 0x81d62000
athr_gmac_ring_alloc Allocated 640 at 0x81e77800
athr_gmac_ring_alloc Allocated 4032 at 0x81d62000
Setting Drop CRC Errors, Pause Frames and Length Error frames 
Setting PHY...mac 0
Now flash open!
athr_gmac_ring_free Freeing at 0x81e77400
athr_gmac_ring_free Freeing at 0x81f2e000
athr_gmac_ring_alloc Allocated 640 at 0x81e77400
athr_gmac_ring_alloc Allocated 1536 at 0x81f2e000
athr_gmac_mii_setup: MDC check failed
Setting Drop CRC Errors, Pause Frames and Length Error frames 
Setting PHY...mac 1
nf_conntrack_rtsp v0.6.21 loading
nf_nat_rtsp v0.6.21 loading
asf: module license &#039;Proprietary&#039; taints kernel.
Disabling lock debugging due to kernel taint
ath_hal: 0.9.17.1 (AR9380, DEBUG, REGOPS_FUNC, WRITE_EEPROM, 11D)
ath_rate_atheros: Copyright (c) 2001-2005 Atheros Communications, Inc, All Rights Reserved
ath_dev: Copyright (c) 2001-2007 Atheros Communications, Inc, All Rights Reserved
ath_ahb: 9.2.0_U5.508 (Atheros/multi-bss)
Boostrap clock 25MHz
ar9300RadioAttach: Need analog access recipe!!
Restoring Cal data from Flash
ath_get_caps[4749] rx chainmask mismatch actual 1 sc_chainmak 0
ath_get_caps[4724] tx chainmask mismatch actual 1 sc_chainmak 0
wifi0: Atheros 9380: mem=0xb8100000, irq=2
====&gt;&gt;&gt;&gt;SystemMode : Normal Router 
wlan_vap_create : enter. devhandle=0x80c082c0, opmode=IEEE80211_M_HOSTAP, flags=0x1
wlan_vap_create : exit. devhandle=0x80c082c0, opmode=IEEE80211_M_HOSTAP, flags=0x1.
VAP device ath0 created 
====&gt;&gt;&gt;&gt;wlan: rand channel 1
 
 
 DES SSID SET=TP-LINK_9672D8 
 ieee80211_ioctl_siwmode: imr.ifm_active=131712, new mode=3, valid=1 
athr_gmac_ring_free Freeing at 0x81e77400
athr_gmac_ring_free Freeing at 0x81f2e000
br0: port 1(eth0) entering disabled state
athr_gmac_ring_alloc Allocated 640 at 0x81e77400
athr_gmac_ring_alloc Allocated 1536 at 0x81f2e000
athr_gmac_mii_setup: MDC check failed
Setting Drop CRC Errors, Pause Frames and Length Error frames 
Setting PHY...mac 1
ath_apply_paprd_table 64, paprd cal success in channl 2412
device ath0 entered promiscuous mode
br0: port 2(ath0) entering forwarding state
 ieee80211_ioctl_siwmode: imr.ifm_active=918144, new mode=3, valid=1 
br0: port 2(ath0) entering disabled state
 
 DES SSID SET=TP-LINK_9672D8 
br0: port 2(ath0) entering forwarding state
====&gt;&gt;&gt;&gt;cmdCtrl open success 
====&gt;&gt;&gt;&gt;eventCtrl open success 
====&gt;&gt;&gt;&gt;eventCtrl attach success 
====&gt;&gt;&gt;&gt;
######send req to media server: 2
 
ath_apply_paprd_table 64, paprd cal success in channl 2412</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262967">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						26 Jan 2015, 20:35					</div>
				</div>
				<div class="post-content content">
					<p>can you try login from serial with usual</p><p>user:root<br />pass:5up</p><p>?</p><p>if you do not find another way to backup stock fw..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262973">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">bl1skn3r</div>
					<div class="post-datetime">
						26 Jan 2015, 22:17					</div>
				</div>
				<div class="post-content content">
					<p>yep that works, what should i do then to extract the original firmware?<br />from what i could see thats a realy tiny size optimized environment (you dont even have ln, or cp)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262974">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						26 Jan 2015, 22:27					</div>
				</div>
				<div class="post-content content">
					<p>tftp</p><p><a href="https://forum.openwrt.org/viewtopic.php?pid=190708#p190708">https://forum.openwrt.org/viewtopic.php … 08#p190708</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268325">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">filipeaguiar.22</div>
					<div class="post-datetime">
						11 Mar 2015, 05:06					</div>
				</div>
				<div class="post-content content">
					<p>Do you have an working firmware with openwrt 4MB? Can you share?<br />I bough one and want to flash it!<br />don&#039;t have a 64bits machine... so I can t use BB.<br />Thanks,</p><p>Filipe</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p283765">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">c.monty</div>
					<div class="post-datetime">
						16 Jul 2015, 21:53					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have installed &quot;openwrt-ar71xx-generic-tl-wr710n-v2-squashfs-factory.bin&quot; from original WebUI.<br />The installation finished w/o error.</p><p>I can connect to the router via ssh.<br />However, I cannot install LuCi because &quot;no space left on device&quot;.</p><p>Question:<br />Is there any workaround to solve this issue?<br />How can I go back to original TP-Link Firmware?</p><p>THX</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p288657">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">adgrex</div>
					<div class="post-datetime">
						21 Aug 2015, 10:20					</div>
				</div>
				<div class="post-content content">
					<p>Today I received:<br />Hardware Version: <strong>WR710N v2.1</strong></p><p>See here:<br /><a href="https://forum.openwrt.org/viewtopic.php?pid=288658#p288658">https://forum.openwrt.org/viewtopic.php … 58#p288658</a></p><p>Its officially confirmed that the WR710N v2.1 does have <strong>8 MB</strong> of flash....</p>											<p class="post-edited">(Last edited by <strong>adgrex</strong> on 21 Aug 2015, 10:45)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>