<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> OpenWrt on WRAP board by pcengines</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p19432">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">whitespirit</div>
					<div class="post-datetime">
						20 Jan 2006, 16:51					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>has anyone had any success in installing OpenWrt on&nbsp; the WRAP boards from pcengines (<a href="http://www.pcengines.ch">www.pcengines.ch</a>)?</p><p>I tried following the SoekrisPort wiki here:&nbsp; <a href="http://wiki.openwrt.org/SoekrisPort">http://wiki.openwrt.org/SoekrisPort</a> <br />which does have reference to using WRAP, but without success (serial terminal displays nothing when powered up).</p><p>If someone has got a system to work, could they either post a howto or even better an image file to blow to a CF?</p><p>thanks in advance...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p19435">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Nico</div>
					<div class="post-datetime">
						20 Jan 2006, 17:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>I tried following the SoekrisPort wiki here:&nbsp; <a href="http://wiki.openwrt.org/SoekrisPort">http://wiki.openwrt.org/SoekrisPort</a><br />which does have reference to using WRAP, but without success (serial terminal displays nothing when powered up).</p></blockquote></div><p>I made the HowTo and someone else added references and fixups for WRAPs. I am currently lacking such a board (and money to buy one) to check images are working correctly on it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p19438">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">whitespirit</div>
					<div class="post-datetime">
						20 Jan 2006, 17:42					</div>
				</div>
				<div class="post-content content">
					<p>cheers Nico,</p><p>I&#039;m currently trying to compile my own build using BuildRoot, but haven&#039;t got a clue as to what I am doing :-) so have no idea of it will work yet...&nbsp; just building as we speak...</p><p>Looking at my screen there are a lot of references to mipsel which i&#039;m guessing is indicating the processor that the OS is compiling for.&nbsp; the WRAP website specs that the processor is:&nbsp; 266 MHz AMD Geode SC1100 CPU (fast 486 core)</p><p>Does anyone know if this means I need to compile a 386 processor version rather than mipsel?&nbsp; and if so where in the make menuconfig would I need to start looking (couldn&#039;t see a reference for it at first glance)?</p>											<p class="post-edited">(Last edited by <strong>whitespirit</strong> on 20 Jan 2006, 17:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p19443">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">whitespirit</div>
					<div class="post-datetime">
						20 Jan 2006, 19:23					</div>
				</div>
				<div class="post-content content">
					<p>ok, so all the build gave me was a series of images for wrt54g etc etc, no x86 images...&nbsp; So my next question is maybe the image that Nico has built is ok, but the grub loader is setup wrong...&nbsp; </p><p>Can anyone advice me as to what would be required to setup a booting CF (Compact Flash) image - guess it&#039;s just like a booting harddisk?&nbsp; </p><p>What would happen if I was to create one large linux filesytem on the CF and extract the openwrt-x86-2.4-rootfs.tar.gz to it.&nbsp; Can I then just install grub on it, and if so how should the menu.lst be setup?</p><p>Sorry if these are idiot questions, but im at the stage of &quot;just having enough knowledge to be dangerous&quot; with these systems at the moment :-S</p><br /><p>Thanks in advance for any info.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p19476">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Setsquare</div>
					<div class="post-datetime">
						21 Jan 2006, 11:10					</div>
				</div>
				<div class="post-content content">
					<p>I followed the Soekris howto to the word and got it running fine on my WRAP 1E</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p19536">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">gerd</div>
					<div class="post-datetime">
						22 Jan 2006, 16:06					</div>
				</div>
				<div class="post-content content">
					<p>is it somehow possible to get an image file for writing it to CF card ?<br />I don&#039;t have a reader in my linux boox but i&#039;d like to test it also...</p><p>Ciao Gerd</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p19551">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">whitespirit</div>
					<div class="post-datetime">
						22 Jan 2006, 22:34					</div>
				</div>
				<div class="post-content content">
					<p>the board I have is the WRAP.1E-2 (3 LAN ports) but it just won&#039;t boot after following the guide.&nbsp; The only thing I can think of is that I have a 128M card not a 256M as per the original HowTo <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /> (but I can figure out why that should have any effect since the starting image is 8M and I did make sure I had a 1M boot partition). </p><p>Any guru&#039;s out there willing to have a go at creating a bootable CF image of OpenWrt?&nbsp; I&#039;ve tried but without success (will try again in the office tomorow), If successful I&#039;ll post what I create (but dont hold your breath). <img src="https://forum.openwrt.org/img/smilies/neutral.png" width="15" height="15" alt="neutral" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p19568">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Setsquare</div>
					<div class="post-datetime">
						23 Jan 2006, 01:26					</div>
				</div>
				<div class="post-content content">
					<p>whitespirit I used a 32mb cf card</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p19602">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">whitespirit</div>
					<div class="post-datetime">
						23 Jan 2006, 15:34					</div>
				</div>
				<div class="post-content content">
					<p>hmm, tried going through the guide again, couple of things I wouldn&#039;t mind a bit of advice on ( Nico ) ;-)</p><p>1.&nbsp; My CF is detected as sdb so i refence sdb1 and sdb2 in replace of sda1 and sda2.&nbsp; Will that have an effect?<br />2.&nbsp; When I tried&nbsp; &quot; grub-install --no-floppy --root-directory=/mnt/cf /dev/sdb &quot;&nbsp; I get the grub help list as if it is indicating that --no-floppy is not a valid command, does this sound right to you?<br />3.&nbsp; I then edited the /mnt/cf/boot/grub/device.map file to read:<br /></p><div class="quotebox"><blockquote><p>(hd0)&nbsp; &nbsp;/dev/sda<br />(hd1)&nbsp; &nbsp;/dev/sdb</p></blockquote></div><p>i.e. deleted&nbsp; (fd0) reference - is this needed?</p><p>would any of the above be the reason why the unit doesn&#039;t boot?</p><p>Thanks again, I really appreciate any help anyone can offer at this stage.&nbsp; <br />BTW:&nbsp; Would LILO be an alternative option?&nbsp; &nbsp;I have pebble linux on a different CF and that boots fine and I think that might using LILO as I can&#039;t see any grub references in the /boot folder.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p19775">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">whitespirit</div>
					<div class="post-datetime">
						26 Jan 2006, 19:46					</div>
				</div>
				<div class="post-content content">
					<p>Hey Nico, </p><p><strong>Firstly:</strong>&nbsp; I love the how-to and I completely realise I am trying to apply this guide to a piece of hardware it was not written for so if you do not wish to respond then I do understand :-)</p><p>however... another quick question for you.&nbsp; looking at the HowTo,&nbsp; you have a download link for the kernel as: <a href="http://downloads.openwrt.org/people/nico/testing/x86-2.4/openwrt-x86-2.4-vmlinuz">http://downloads.openwrt.org/people/nic â€¦ .4-vmlinuz</a> </p><p>i..e the kernel name is &quot;openwrt-x86-2.4-vmlinuz&quot; </p><p>however in the grub menu.lst file you have:<br /> </p><div class="quotebox"><blockquote><p>kernel&nbsp; /boot/openwrt-soekris-2.4-vmlinuz blkmtd_device=/dev/hda2 blkmtd_sync=1 root=/dev/mtdblock0 rootfstype=jffs2 init=/etc/preinit noinitrd console=ttyS0,19200n8</p></blockquote></div><p>i.e. you are referencing a different kernel name, is this correct (I have changed the name in my menu.lst to be openwrt-x86-2.4-vmlinuz&nbsp; but still wont boot :-(</p><p>Also using fdisk i flagged the first partition (boot partition) as bootable, is this needed (it is not mentioned as necassary in the howto)?</p><p>If you have a copy of the original document you wrote I wouldn&#039;t mind a copy of it (just in case it has been subtly edited and no longer works for the WRAP unit).&nbsp; </p><br /><p>PS.. to any lilo/grub experts out there... in the pebble version of linux that I have that does boot, it seems to use linux and has a reference in the lilo.pebble.conf file of bios=0x80 does nayone know what this does and where there is a grub equivelent?</p><p>Thanks lots.</p>											<p class="post-edited">(Last edited by <strong>whitespirit</strong> on 26 Jan 2006, 19:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p19830">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Nico</div>
					<div class="post-datetime">
						27 Jan 2006, 17:36					</div>
				</div>
				<div class="post-content content">
					<p>We decided to use a more generic name (x86) instead of soekris, since the port worked on other non-soekris based boards. I&#039;ll fix the wiki.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p19868">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">whitespirit</div>
					<div class="post-datetime">
						28 Jan 2006, 15:05					</div>
				</div>
				<div class="post-content content">
					<p>yee-haa!&nbsp; I put the CF reader into a different PC (one without SCSI hard disk in it). Re-followed the wiki and I managed to get it working.. sweet.</p><p>For a while it was hanging at the Grub Bootloader stage 1.5.</p><p>To fix it I had to edit /mnt/cf/boot/grub/device.map to read:<br /></p><div class="codebox"><pre><code>(hd0) /dev/sda</code></pre></div><p>and the re-run<br /></p><div class="codebox"><pre><code>grub-install --no-floppy --root-directory=/mnt/cf /dev/sda</code></pre></div><p>May not be linked, but i also deleted any files in the /mnt/cf/boot/grub folder that were not listed on your example &quot;find . -ls&quot; reference.&nbsp; However I suspect they were probably re-installed once the grub-install command had been re-issued.</p><br /><p>My next task is to figure out how difficult would it be to get the system upgraded to latest (RC4) from (bleeding edge, r2392). </p><p>thanks for a cool port to x86.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20808">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">markozve</div>
					<div class="post-datetime">
						13 Feb 2006, 21:33					</div>
				</div>
				<div class="post-content content">
					<p>Does anyone have some helpfile how to set up networking on PCengines WRAP ain OpenWrt ? I managed to install it on CF but can not figure out how to set up networking <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20827">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">whitespirit</div>
					<div class="post-datetime">
						14 Feb 2006, 10:50					</div>
				</div>
				<div class="post-content content">
					<p>For me I had to edit a couple of files.</p><p>firstly /etc/config/network<br /></p><div class="codebox"><pre><code># Network configuration file

## LAN configuration
lan_ifname=&quot;br0&quot;
lan_ifnames=&quot;eth1 eth2&quot;
lan_proto=&quot;static&quot;
lan_ipaddr=&quot;172.16.2.1&quot;
lan_netmask=&quot;255.255.0.0&quot;

## WAN configuration
wan_ifname=&quot;eth0&quot;
##wan_proto=&quot;dhcp&quot;
wan_proto=&quot;static&quot;
wan_ipaddr=&quot;83.71.55.182&quot;
wan_netmask=&quot;255.255.255.240&quot;
wan_gateway=&quot;83.71.55.190&quot;

##SPARE WAN2 if
wan2_ifname=&quot;eth0:1&quot;
wan2_proto=&quot;static&quot;
wan2_ipaddr=&quot;192.168.1.26&quot;
wan2_netmask=&quot;255.255.255.0&quot;
wan2_gateway=&quot;192.168.1.254&quot;</code></pre></div><p>And to bring up the interfaces at boot I made sure the relevent ifup lines were in the /etc/init.d/S40network file...<br />&nbsp; &nbsp; ifup lan<br />&nbsp; &nbsp; ifup wan<br /> ifup wan2<br />&nbsp; &nbsp; ifup wifi<br />&nbsp; &nbsp; wifi up</p><p>What I couldn&#039;t figure out, is how to make the WAN work on DHCP. The wan_proto=&quot;dhcp&quot; line didn&#039;t seem to work for me. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Also I think you can call the &quot;wan2&quot; interface anything you want (e.g. lan2) as long as that is how you refer to it in your scripts.. e.g. use the lines:</p><p>lan2_ifname=&quot;eth0:1&quot;<br />lan2_proto=&quot;static&quot;<br />lan2_ipaddr=&quot;192.168.1.26&quot;<br />etc..</p><p>and &quot;ifup lan2&quot; in the /etc/init.d/S40network file</p>											<p class="post-edited">(Last edited by <strong>whitespirit</strong> on 14 Feb 2006, 10:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p22373">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">ksm</div>
					<div class="post-datetime">
						8 Mar 2006, 17:05					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;d be interested in finding out from nico what he had to change in the buildroot to make it compile for x86.<br />I&#039;ve already told the buildroot to compile for i386, and the kernel too.<br />What else needs to be done?</p><p>I&#039;m getting all the packages, but no jffs2 images anywhere *puzzled*</p><p>Can someone help? Perhaps a diff against a given snapshot?</p><p>Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p22374">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">whitespirit</div>
					<div class="post-datetime">
						8 Mar 2006, 17:26					</div>
				</div>
				<div class="post-content content">
					<p>Make sure you grab the latest development release:</p><p>You can get the source from Subversion. See the OpenWrt Development center <a href="https://dev.openwrt.org/">https://dev.openwrt.org/</a>. Check out the development branch.</p><p>I was able to create my own x86 release from this version dead-easy! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&nbsp; Although I had to remove a number of packages that I didn&#039;t have the right dependencies etc for on my version of linux, plus I couldn&#039;t get it to build on redhat for some reason... but still&nbsp; dead-easy! ahem.. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>When you run &quot;make menuconfig&quot; there is a choice of what platform you want to compile for, and then the images appear in the bin folder if memory serves.&nbsp; It&#039;s all in the docs, not too difficult.</p>											<p class="post-edited">(Last edited by <strong>whitespirit</strong> on 8 Mar 2006, 17:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p22418">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">ksm</div>
					<div class="post-datetime">
						9 Mar 2006, 09:59					</div>
				</div>
				<div class="post-content content">
					<p>Thanks!<br />This seems to be working!</p><p>And to think I&#039;ve been fighting with whiterussian for the last few weeks <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p46108">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">Marek</div>
					<div class="post-datetime">
						8 Apr 2007, 20:29					</div>
				</div>
				<div class="post-content content">
					<p>Maybe it should be moved to kamikaze forum, but I don&#039;t want to create new thread...</p><p>Today I tried Kamikaze R6889 on my WRAP2C and it works but I cannot bridge eth0 (the only one ethernet port) with ath0&nbsp; &nbsp;(atheros wlan card)</p><p>my config:</p><p>/etc/config/wireless<br /></p><div class="codebox"><pre><code>config wifi-device      wifi0
        option type     atheros
        option channel  5
        option disabled 0

config wifi-iface
        option device   wifi0
        option mode     ap
        option ssid     XR2WRAP
        option hidden   0
        option network lan
        option encryption none</code></pre></div><p>/etc/config/network<br /></p><div class="codebox"><pre><code># Copyright (C) 2006 OpenWrt.org

config interface loopback
    option ifname    lo
    option proto    static
    option ipaddr    127.0.0.1
    option netmask    255.0.0.0

config interface lan
    option ifname    eth0
    option proto    &#039;static&#039;
    option ipaddr    &#039;192.168.1.2&#039;
    option netmask    &#039;255.255.255.0&#039;</code></pre></div><p>there are no bridge shown by &#039;brctrl show&#039;. What should I do to create bridge between eth0 and ath0 an use my WRAP as AP?</p>											<p class="post-edited">(Last edited by <strong>Marek</strong> on 8 Apr 2007, 20:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p46111">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						8 Apr 2007, 20:55					</div>
				</div>
				<div class="post-content content">
					<p>Easy.</p><p>- In /etc/config/network add &#039;option type bridge&#039; to the &#039;config interface lan&#039; section.</p><p>- In /etc/config/wireless add &#039;option network lan&#039; to the &#039;config wifi-iface&#039; section.</p>											<p class="post-edited">(Last edited by <strong>forum2006</strong> on 8 Apr 2007, 20:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p46112">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">Marek</div>
					<div class="post-datetime">
						8 Apr 2007, 21:10					</div>
				</div>
				<div class="post-content content">
					<p>Oh, I forgot the &#039;option type bridge&#039;. Ofcourse it did the trick.</p><p>Thank you.</p><p>Is this possible to configure two wireless cards (WRAP has 2xminiPCI slot) via /etc/config/wireless or it is nessesary to make some workaround?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p46114">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						8 Apr 2007, 21:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Marek wrote:</cite><blockquote><p>Is this possible to configure two wireless cards (WRAP has 2xminiPCI slot) via /etc/config/wireless or it is nessesary to make some workaround?</p></blockquote></div><p>Should be possible. No idea if it works. Try to change your /etc/config/wireless to something like this:<br /></p><div class="codebox"><pre><code>config wifi-device      wifi0
        option type     atheros
        ...

config wifi-iface
        option device   wifi0
        option mode     ap
        ...

config wifi-device      wifi1
        option type     atheros
        ...

config wifi-iface
        option device   wifi1
        option mode     ap
        ...</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p46115">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">Marek</div>
					<div class="post-datetime">
						8 Apr 2007, 21:29					</div>
				</div>
				<div class="post-content content">
					<p>I tried it before but it didnt&nbsp; work, BUT I tried it again and SUCCESS! (maybe I made some mistake last time)</p><p>I think this 266MHz cpu present on WRAP is much faster than broadcom 4704@ 264MHz from ASUS WL-500gP The FTP transfer rate from WRAP CF card is about 4,1MB/s, but with ASUS transfer from USB stick about 2,5MB/s, both with ~100% cpu usage. I know this test isn&#039;t fully fair but I think it shows that Geode is faster than broadcom @ the same MHz.</p>											<p class="post-edited">(Last edited by <strong>Marek</strong> on 8 Apr 2007, 21:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p52736">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">burntbog</div>
					<div class="post-datetime">
						25 Jul 2007, 00:48					</div>
				</div>
				<div class="post-content content">
					<p>anyone kave a preferred config file for use with a WRAP 2E AND kamikaze 7.06 and above?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>