<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Strange: Timeout &quot;www.postbank.de&quot;, other pages no problem</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p27010">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mcmurphy120</div>
					<div class="post-datetime">
						12 May 2006, 08:39					</div>
				</div>
				<div class="post-content content">
					<p>Hello everybody,</p><p>could you please try to get the webpage &quot;<a href="http://www.postbank.de">www.postbank.de</a>&quot;? </p><p>My Asus WL-500GDeluxe works generally fine, but this page will not come! The browser ends with a timeout. But if I try it with my other router (3com), I have no problems receiving this page! So the webserver is not down what I thought in the first step.</p><p>This makes me feel really strange and I wonder if there are other pages which will not work .... What could be the reason??</p><p>Bernd</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27013">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">TemplaraPhoenix</div>
					<div class="post-datetime">
						12 May 2006, 09:07					</div>
				</div>
				<div class="post-content content">
					<p>This could be a known issue with the NAT and MTU. Since the packets coming out from your host machine are generally 1500 (the MTU of 100Mbit ethernet) and they are then NATed by the WRT adding some bytes, they become fragmented. Some sites are paranoid and refuse such fragmented packets. Try reducing the MTU to 1300.</p>											<p class="post-edited">(Last edited by <strong>TemplaraPhoenix</strong> on 12 May 2006, 09:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27014">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">sioux</div>
					<div class="post-datetime">
						12 May 2006, 09:20					</div>
				</div>
				<div class="post-content content">
					<p>what about TCPMSS which is defaultly use in S45firewall script ? are there situations in which TCPMSS does&#039;n work ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27023">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mcmurphy120</div>
					<div class="post-datetime">
						12 May 2006, 11:38					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your awnsers.</p><p>Setting MTU to 1300 didn&#039;t change anything :-(</p><p>I don&#039;t know what TCPMSS is, but I found this line in my S45firewall script:</p><p>&nbsp; iptables -A FORWARD -p tcp --tcp-flags SYN,RST SYN -j TCPMSS --clamp-mss-to-pmtu</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27084">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Timo Beil</div>
					<div class="post-datetime">
						13 May 2006, 01:34					</div>
				</div>
				<div class="post-content content">
					<p>check if your PCs &quot;hosts&quot; file has an entry &quot;postbank.de&quot; ^^</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27097">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mcmurphy120</div>
					<div class="post-datetime">
						13 May 2006, 08:21					</div>
				</div>
				<div class="post-content content">
					<p>No, there is no entry in the hosts file - neither on my PC neither on the router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27102">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">mcmurphy120</div>
					<div class="post-datetime">
						13 May 2006, 11:47					</div>
				</div>
				<div class="post-content content">
					<p>Strange: I found some more pages, could you please check if you can receive them?</p><p><a href="http://www.gulp.de">www.gulp.de</a><br /><a href="http://www.pinnaclesys.de">www.pinnaclesys.de</a></p><p>Thank you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27107">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Kasei</div>
					<div class="post-datetime">
						13 May 2006, 13:10					</div>
				</div>
				<div class="post-content content">
					<p>They work fine for me (Linksys WRT54GS with RC5).<br />Does one of theese websites work: <a href="http://www.genie.de">www.genie.de</a>&nbsp; <a href="http://www.wallstreet-online.de">www.wallstreet-online.de</a> <a href="http://www.gmx.de">www.gmx.de</a> ?<br />If not it is an MTU Problem. Try reducing the MTU from 1500 to 1492 &quot;nvram set ppp_mtu=1492; nvram commit&quot; and check the mtu after reboot &quot;nvram show | grep mtu&quot; aswell as &quot;ifconfig ppp0&quot;.<br />Is your ISP Arcor? I think they use a lower standard MTU. Try &quot;ping -f -l 1464 heise.de&quot; on a windows machine. (1464+28=)1492 so you shouldnt get an fragmentation flag message, in case you do reduce the value untill you dont receive the message anymore, add 28 and set that value as MTU on your Router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27119">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">mcmurphy120</div>
					<div class="post-datetime">
						13 May 2006, 15:32					</div>
				</div>
				<div class="post-content content">
					<p>Hi Kasei, </p><p>you must be a real network crack! Thank you :-)</p><p>By the way, how do you find out about the maximum allowed MTU for a special website like gmx.de?</p><p><a href="http://www.gmx.de">www.gmx.de</a> works for me, but <a href="http://www.wallstreet">www.wallstreet</a>-online and <a href="http://www.genie.de">www.genie.de</a> don&#039;t work. I tried the ping on heise de and reduced the packet size to 1272, then I got ping-awnser from heise.de. So I entered 1300 for the ppp_mtu, but it didn&#039;t help. I even tried to set ppp_mtu=200. Still the pages postbank.de, genie.de, wallstree-online.de don&#039;t work. Then I tried the other flag, wan_pppoe_mtu to set on 1300 (it was also 1492) - no result.</p><p>Even my provider-site <a href="http://www.congster.de">www.congster.de</a> doesn&#039;t come up!<br />The bizzare thing also is that I have another router (3com), and there I have MTU=1492 configured. And I do not have a problem receiving the pages...</p><p>I hope you have some more hints for me....</p><p>Thanks,<br />Bernd</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27120">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">mcmurphy120</div>
					<div class="post-datetime">
						13 May 2006, 15:45					</div>
				</div>
				<div class="post-content content">
					<p>Sorry, it&#039;s a bit different: The ping -f -l xxxx <a href="http://www.heise.de">www.heise.de</a> gives me this:</p><p>0&nbsp; &nbsp; &nbsp; - 1272&nbsp; &nbsp; &nbsp; normal ping awnser<br />1273 - 1464&nbsp; &nbsp; &nbsp; ping timeout<br />1465 - max&nbsp; &nbsp; &nbsp; &nbsp;fragmentation flag message</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27122">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Kasei</div>
					<div class="post-datetime">
						13 May 2006, 16:22					</div>
				</div>
				<div class="post-content content">
					<p>Well i guess the problem is that your Asus router fragments your packets <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /> Some websites simply drop fragmented packets because there are several attacks that use fragmentated packets.<br />Try opening the regeditor and find HKEY_LOCAL_MACHINE\ SYSTEM\CurrentControlSet\ Services\Tcpip\Parameters\Interfaces<br />you should see several folders. Browse trough them and look for an entry that matches your local ip-adress(cmd ipconfig). Right click in that folder and press add new dword-value. Name it &quot;MTU&quot; and set the decimal value to 1300. Restart your computer and try to reach thoose sites again(remove that entry after you are finished with testing!).<br />Are you using the white russian RC5 on that router?<br />Please post your MTU value from <a href="http://www.speedguide.net/analyzer.php">http://www.speedguide.net/analyzer.php</a> before and after adding the registry key.</p>											<p class="post-edited">(Last edited by <strong>Kasei</strong> on 13 May 2006, 16:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27124">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">gunni</div>
					<div class="post-datetime">
						13 May 2006, 17:24					</div>
				</div>
				<div class="post-content content">
					<p>Hi, sorry for highjacking this thread, but seems to fit good in here:</p><p>The Speedguide gives me (for my 2M/192k line):</p><div class="quotebox"><blockquote><p>Default TCP Receive Window (RWIN) = 5840<br />RWIN Scaling (RFC1323) = 2 bits (scale factor of 4)<br />Unscaled TCP Receive Window = 1460</p><p>RWIN seems to be set to a very small number. If you&#039;re on a broadband connection, consider using a larger value.<br />For optimum performance, consider changing RWIN to a multiple of MSS.<br />Other RWIN values that might work well with your current MTU/MSS:<br />511104 (MSS x 44 * scale factor of 8)<br />255552 (MSS x 44 * scale factor of 4)<br />127776 (MSS x 44 * scale factor of 2)<br /> 63888 (MSS x 44)</p></blockquote></div><p>But my connection seems quite good. Should i change the rwin setting? <br />And if, where do i change it, in my router or my pc?<br />How do i change my rwin on Linux, a quick google search did not give me an answer?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27129">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Kasei</div>
					<div class="post-datetime">
						13 May 2006, 17:54					</div>
				</div>
				<div class="post-content content">
					<p>It doesnÂ´t fit in here <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /><br />I think the site cant detect the values correctly on a linux os. If you would have started a download with that setting youd know there was something wrong <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> (something &lt;60kbyte/s)<br />cat /proc/sys/net/core/rmem_max should tell you the correct value. To change it simply &quot;echo XXXXX &gt; /proc/sys/net/core/rmem_max&quot; default should be 109568. I dont think it would affect your pc if the router value was wrong so you need to change it on your pc if you feel like you need to.<br />Check out <a href="http://www.psc.edu/networking/projects/tcptune/#Linux">http://www.psc.edu/networking/projects/tcptune/#Linux</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27131">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">gunni</div>
					<div class="post-datetime">
						13 May 2006, 18:03					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>gunni@gunnidesktop:~$ cat /proc/sys/net/core/rmem_max
131071</code></pre></div><p>Thanks for your answer. Downloads work properly and a bandwidth check gives me 1.986 kbps/184 kbps (<a href="http://www.wieistmeineip.de/speedtest/">http://www.wieistmeineip.de/speedtest/</a>) so everything seems to be fine.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27132">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">mcmurphy120</div>
					<div class="post-datetime">
						13 May 2006, 18:05					</div>
				</div>
				<div class="post-content content">
					<p>Hi Kasei!</p><p>Now it works for me! I made the registry entry with MTU=1300 and I receive postbank.de and wallstreet-journal.de. genie.de does not work yet...</p><p>The speedGuide analysis is:</p><p>TCP options string = 020405ac01010402<br />&nbsp; &nbsp; <br />MTU = 1492<br />MTU is optimized for PPoE DSL broadband. If not, consider raising MTU to 1500 for optimal throughput.<br />&nbsp; &nbsp; <br />MSS = 1452<br />MSS is optimized for PPPoE DSL broadband. If not, consider raising your MTU value.<br />&nbsp; &nbsp; <br />Default TCP Receive Window (RWIN) = 65340 <br />RWIN Scaling (RFC1323) = 0 bits <br />Unscaled TCP Receive Window = 65340 </p><p>RWIN is a multiple of MSS<br />Other RWIN values that might work well with your current MTU/MSS: <br />511104 (MSS x 44 * scale factor of 8)<br />255552 (MSS x 44 * scale factor of 4)<br />127776 (MSS x 44 * scale factor of 2)<br /> 63888 (MSS x 44)<br />&nbsp; &nbsp; <br />bandwidth * delay product (Note this is not a speed test):</p><p>Your TCP Window limits you to: 2613.6 kbps (326.7 KBytes/s) @ 200ms<br />Your TCP Window limits you to: 1045.44 kbps (130.68 KBytes/s) @ 500ms<br />&nbsp; &nbsp; <br />MTU Discovery (RFC1191) = ON<br />&nbsp; &nbsp; <br />Time to live left = 119 hops<br />TTL value is ok.<br />&nbsp; &nbsp; <br />Timestamps (RFC1323) = OFF&nbsp; &nbsp; <br />Selective Acknowledgements (RFC2018) = ON<br />&nbsp; &nbsp; <br />IP type of service field (RFC1349) = 00000000 (0)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27136">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Kasei</div>
					<div class="post-datetime">
						13 May 2006, 18:53					</div>
				</div>
				<div class="post-content content">
					<p>In that case i hope someone else has another idea <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />If not i would pray, reset the nvram values &quot;mtd -r erase nvram&quot; and re-flash the router with an actual release(dont forget to backup all the stuff you need).<br />I had strange problems with the older RCs (like randomly added weird iptable rules). The workaround was to overclock the router <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> But i think thoose things got fixed in RC4 or 5 so give it a try if no one comes up with a better solution.<br />Genie.de doesnt work for me either right now ... seems to be down.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27150">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">doddel</div>
					<div class="post-datetime">
						14 May 2006, 00:44					</div>
				</div>
				<div class="post-content content">
					<p>see my entry in this thread:<br /><a href="http://forum.openwrt.org/viewtopic.php?id=5554">http://forum.openwrt.org/viewtopic.php?id=5554</a></p><p>Apart from introducing and setting MTU to some lower value in windows, also the variable TCPWindowSize was added and set to a high value. That solved the problem here with identical symptoms.<br />Am still puzzled as to what is causing this. In the other thread it was suggested that it may be certain icmp packets that contain error messages not making it back (firewall ?), thus breaking the automatic adjustment of these TCP/IP variables via trial and error.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63266">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">timjordan</div>
					<div class="post-datetime">
						12 Feb 2008, 05:33					</div>
				</div>
				<div class="post-content content">
					<p>is there anyway to post the RWIN to 65536 in the white russian router itself. I need this setting for my wireless verizon card that fits in the top of my wrt54g3g router</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63311">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">rustamabd</div>
					<div class="post-datetime">
						12 Feb 2008, 21:58					</div>
				</div>
				<div class="post-content content">
					<p>Sorry, have to ask - why does NATing add bytes to the packet? Shouldn&#039;t it simply rewrite the source IP/port ? My original Motorola image seems to work without fragmenting packets.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>