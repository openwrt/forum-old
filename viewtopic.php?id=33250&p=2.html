<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> 3G / HSPA Router with SIM CARD slot</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 6 Apr 2018 and 20 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 3</div><nav><ul><li><a href="viewtopic.php%3Fid=33250&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=33250&amp;p=3.html">3</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p215331">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">Kyklas</div>
					<div class="post-datetime">
						21 Oct 2013, 17:59					</div>
				</div>
				<div class="post-content content">
					<p>I tried changing GPIO states, i got 2 LED lighting up but i can&#039;t turn them off afterwards.</p><p>I look for documentation on GTM661 and on the Option website download section there is a Linux driver : <a href="http://www.option.com/support/986/downloads">http://www.option.com/support/986/downloads</a></p><p>I&#039;ll try to build it, will see.</p><p>I look for the card chip and found the documentation for another card : <a href="http://anydatatw.com/workAdmin/UpLoad/RAR/20130620153704.pdf">http://anydatatw.com/workAdmin/UpLoad/R … 153704.pdf</a></p><p>Would the pinout be the same on the GTM661 ? I should be able to talk the card through its UART port ?</p><p>How could i get more information ? Option Support Helpdesk ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215450">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">Kyklas</div>
					<div class="post-datetime">
						22 Oct 2013, 23:52					</div>
				</div>
				<div class="post-content content">
					<p>By Toggling GPIO 4 and 5, 3 or 5 times, the LEDs light up one after the other and after the red and before the blue i get :</p><div class="codebox"><pre><code>[  135.592000] usb 1-1.1: new high-speed USB device number 3 using ehci-platform

Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 001 Device 002: ID 0424:2412 Standard Microsystems Corp. 
Bus 001 Device 003: ID 0af0:9000 Option 

T:  Bus=01 Lev=02 Prnt=02 Port=00 Cnt=01 Dev#=  3 Spd=480  MxCh= 0
D:  Ver= 2.00 Cls=ff(vend.) Sub=ff Prot=ff MxPS=64 #Cfgs=  1
P:  Vendor=0af0 ProdID=9000 Rev= 0.00
S:  Manufacturer=Option N.V.
S:  Product=Globetrotter HSUPA Modem</code></pre></div><p>Dialogue with the modem is good </p><div class="codebox"><pre><code>root@OpenWrt:~# comgt -d /dev/ttyHS1
SIM ready
Waiting for Registration..(120 sec max)
Registered on Home network: &quot;Orange F&quot;,2
Signal Quality: 2,99

root@OpenWrt:~# comgt -d /dev/ttyHS1 info
##### Wireless WAN Modem Configuration #####
Product text:
====

Manufacturer: Option N.V.
Model: GTM661
Revision: 1.8.4.6 (Date: Jan 29 2013, Time: 15:18:57)
OK
====
Manufacturer:           Option N.V.
IMEI and Serial Number: #######################
Manufacturer&#039;s Revision: 
1.8.4.6 (Date: Jan 29 2013, Time: 15:18:5
Hardware Revision:      3.1
Network Locked:         0
Customisation:          

Band settings:          (
)
APN:                    1,&quot;IP&quot;,&quot;orange&quot;,&quot;0.0.0.0&quot;,0,0
##### END #####</code></pre></div><p> </p><p>I configured /etc/config/network with </p><div class="codebox"><pre><code>#### WWAN Configuration
config interface wwan
        option ifname  ppp0
        option proto   3g
        option service umts
        option device  /dev/ttyHS1
        option apn     orange
        option pincode ####</code></pre></div><p>The device /dev/ttyHS1 work better than /dev/ttyHS2 which return an ALARM before Failing </p><div class="codebox"><pre><code>Oct 22 20:48:19 OpenWrt daemon.notice netifd: wwan (7990): SIM ready
Oct 22 20:48:19 OpenWrt daemon.notice netifd: wwan (7990): PIN set successfully
Oct 22 20:48:19 OpenWrt daemon.notice netifd: wwan (7990): Trying to set mode
Oct 22 20:48:20 OpenWrt daemon.notice pppd[8002]: pppd 2.4.5 started by root, uid 0
Oct 22 20:48:28 OpenWrt local2.info chat[8055]: abort on (BUSY)
Oct 22 20:48:28 OpenWrt local2.info chat[8055]: abort on (NO CARRIER)
Oct 22 20:48:28 OpenWrt local2.info chat[8055]: abort on (ERROR)
Oct 22 20:48:28 OpenWrt local2.info chat[8055]: report (CONNECT)
Oct 22 20:48:28 OpenWrt local2.info chat[8055]: timeout set to 10 seconds
Oct 22 20:48:28 OpenWrt local2.info chat[8055]: send (AT&amp;F^M)
Oct 22 20:48:28 OpenWrt local2.info chat[8055]: expect (OK)
Oct 22 20:48:28 OpenWrt local2.info chat[8055]: AT&amp;F^M^M
Oct 22 20:48:28 OpenWrt local2.info chat[8055]: OK
Oct 22 20:48:28 OpenWrt local2.info chat[8055]:  -- got it
Oct 22 20:48:28 OpenWrt local2.info chat[8055]: send (ATE1^M)
Oct 22 20:48:28 OpenWrt local2.info chat[8055]: expect (OK)
Oct 22 20:48:28 OpenWrt local2.info chat[8055]: ^M
Oct 22 20:48:28 OpenWrt local2.info chat[8055]: ATE1^M^M
Oct 22 20:48:28 OpenWrt local2.info chat[8055]: OK
Oct 22 20:48:28 OpenWrt local2.info chat[8055]:  -- got it
Oct 22 20:48:28 OpenWrt local2.info chat[8055]: send (AT+CGDCONT=1,&quot;IP&quot;,&quot;orange&quot;^M)
Oct 22 20:48:29 OpenWrt local2.info chat[8055]: timeout set to 30 seconds
Oct 22 20:48:29 OpenWrt local2.info chat[8055]: expect (OK)
Oct 22 20:48:29 OpenWrt local2.info chat[8055]: ^M
Oct 22 20:48:29 OpenWrt local2.info chat[8055]: AT+CGDCONT=1,&quot;IP&quot;,&quot;orange&quot;^M^M
Oct 22 20:48:29 OpenWrt local2.info chat[8055]: OK
Oct 22 20:48:29 OpenWrt local2.info chat[8055]:  -- got it
Oct 22 20:48:29 OpenWrt local2.info chat[8055]: send (ATD*99***1#^M)
Oct 22 20:48:29 OpenWrt local2.info chat[8055]: expect (CONNECT)
Oct 22 20:48:29 OpenWrt local2.info chat[8055]: ^M
Oct 22 20:48:29 OpenWrt local2.info chat[8055]: ATD*99***1#^M^M
Oct 22 20:48:29 OpenWrt local2.info chat[8055]: ERROR
Oct 22 20:48:29 OpenWrt local2.info chat[8055]:  -- failed
Oct 22 20:48:29 OpenWrt local2.info chat[8055]: Failed (ERROR)</code></pre></div><p>I need to try some option to get it to work</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215521">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">Kyklas</div>
					<div class="post-datetime">
						23 Oct 2013, 23:25					</div>
				</div>
				<div class="post-content content">
					<p>I used the orange APN orange.fr with user and password orange, no better result.</p><p>With option device &#039;/dev/ttyHS2&#039;<br /></p><div class="codebox"><pre><code>OpenWrt local2.info chat[2206]: send (ATD*99***1#^M)
OpenWrt local2.info chat[2206]: expect (CONNECT)
OpenWrt local2.info chat[2206]: ^M
OpenWrt local2.info chat[2206]: alarm
OpenWrt local2.info chat[2206]: Failed</code></pre></div><p>Trying again with &#039;/dev/ttyHS2&#039; gives the folowing status on interface<br /></p><div class="codebox"><pre><code>&quot;up&quot;: false,
&quot;pending&quot;: true,
&quot;available&quot;: true,
&quot;autostart&quot;: false,
&quot;proto&quot;: &quot;3g&quot;,
&quot;data&quot;: {
 },
&quot;errors&quot;: [
  {
        &quot;subsystem&quot;: &quot;3g&quot;,
        &quot;code&quot;: &quot;PIN_FAILED&quot;
   }
]</code></pre></div><p>Same for &#039;/dev/ttyHS0&#039;</p><br /><p>With option device &#039;/dev/ttyHS3&#039;<br /></p><div class="codebox"><pre><code>OpenWrt local2.info chat[2951]: send (ATD*99***1#^M)
OpenWrt local2.info chat[2951]: expect (CONNECT)
OpenWrt local2.info chat[2951]: ^M
OpenWrt local2.info chat[2951]: ATD*99***1#^M^M
OpenWrt local2.info chat[2951]: NO CARRIER
OpenWrt local2.info chat[2951]:  -- failed
OpenWrt local2.info chat[2951]: Failed (NO CARRIER)</code></pre></div><p>But on this tty i&#039;m getting a kernel warning&nbsp; usb 1-1.1: hso received invalid serial state notification</p><br /><p>With option device &#039;/dev/ttyHS1&#039;<br /></p><div class="codebox"><pre><code>OpenWrt local2.info chat[2432]: send (ATD*99***1#^M)
OpenWrt local2.info chat[2432]: expect (CONNECT)
OpenWrt local2.info chat[2432]: ^M
OpenWrt local2.info chat[2432]: ATD*99***1#^M^M
OpenWrt local2.info chat[2432]: ERROR</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215548">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">Kyklas</div>
					<div class="post-datetime">
						24 Oct 2013, 10:41					</div>
				</div>
				<div class="post-content content">
					<p>I found a description on debian with a 3G Dongle connecting to orange. I&#039;ll try to do it manually.</p><p>The ^M character is ctrl m and send a return to validate the command ( part of VT100 terminal emulation ). I wrote the same commands with minicom to the tty and getting same fail or error result.</p>											<p class="post-edited">(Last edited by <strong>Kyklas</strong> on 24 Oct 2013, 10:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215585">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">Kyklas</div>
					<div class="post-datetime">
						24 Oct 2013, 20:05					</div>
				</div>
				<div class="post-content content">
					<p>Alright, 3G working with 336 ms ping to google.fr.</p><div class="codebox"><pre><code>OpenWrt local2.info chat[1354]: AT+CGDCONT=1,&quot;IP&quot;,&quot;websfr&quot;^M^M
OpenWrt local2.info chat[1354]: OK
OpenWrt local2.info chat[1354]:  -- got it
OpenWrt local2.info chat[1354]: send (ATD*99***1#^M)
OpenWrt local2.info chat[1354]: expect (CONNECT)
OpenWrt local2.info chat[1354]: ^M
OpenWrt local2.info chat[1354]: ATD*99***1#^M^M
OpenWrt local2.info chat[1354]: CONNECT</code></pre></div><p>I switched to the SFR 3G SIM that will be used with the router. I think my cell phone SIM card doesn&#039;t allow internet connection in the same way as the 3G SIM.</p><p>The /dev/ttyHS1 is not meant to connect. <br /></p><div class="codebox"><pre><code>OpenWrt local2.info chat[3039]: ATD*99***1#^M^M
OpenWrt local2.info chat[3039]: ERROR</code></pre></div><p>The /dev/ttyHS2 fails. And HS0 give PIN_FAILED.</p><br /><p>I have the warning with HS3 : hso received invalid serial state notification, perhaps look at Option Linux Driver.</p><p>When testing ttyHSx, the modem return NO CARRIER when turning up interface. After a reboot, up &amp; down works. Perhaps try again with my Orange SIM.</p><p>I&#039;ll try making a lighter OpenWRT Image for the router.</p><p>Adding the init script for GTM661<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# cat /etc/init.d/gtm661
#!/bin/sh /etc/rc.common

START=11

cd /sys/class/gpio

echo 4 &gt; export
echo 5 &gt; export

cd

echo out &gt;  /sys/devices/virtual/gpio/gpio4/direction
echo 1 &gt; /sys/devices/virtual/gpio/gpio4/value

echo out &gt;  /sys/devices/virtual/gpio/gpio5/direction
echo 1 &gt; /sys/devices/virtual/gpio/gpio5/value

echo out &gt;  /sys/devices/virtual/gpio/gpio4/direction
echo 1 &gt; /sys/devices/virtual/gpio/gpio4/value

echo out &gt;  /sys/devices/virtual/gpio/gpio5/direction
echo 1 &gt; /sys/devices/virtual/gpio/gpio5/value

echo out &gt;  /sys/devices/virtual/gpio/gpio4/direction
echo 1 &gt; /sys/devices/virtual/gpio/gpio4/value

echo out &gt;  /sys/devices/virtual/gpio/gpio5/direction
echo 1 &gt; /sys/devices/virtual/gpio/gpio5/value

echo out &gt;  /sys/devices/virtual/gpio/gpio4/direction
echo 1 &gt; /sys/devices/virtual/gpio/gpio4/value

echo out &gt;  /sys/devices/virtual/gpio/gpio5/direction
echo 1 &gt; /sys/devices/virtual/gpio/gpio5/value</code></pre></div><p>2 LED lights up, toggling one more time lights up the 3rd but from there to use the LED i don&#039;t know.</p>											<p class="post-edited">(Last edited by <strong>Kyklas</strong> on 24 Oct 2013, 20:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215648">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">Kyklas</div>
					<div class="post-datetime">
						25 Oct 2013, 14:15					</div>
				</div>
				<div class="post-content content">
					<p>I test download with OpenWRT and got a 2MB/s download which compare to my 512KB/s home connection is great.</p><p>I&#039;ll test with GS when i get another device.</p><p>To create a OpenWRT image, when i clone git repository, i&#039;m looking for the trunk directory but can&#039;t find it. Or is the git directory the trunk, i&#039;m looking for and the build directory ?</p><p>I&#039;ll try the patch you gave me and the Linux driver for GTM661W from Option.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215728">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">Kyklas</div>
					<div class="post-datetime">
						26 Oct 2013, 16:21					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I downloaded the Attitude Adjustment trunk and build it.<br />I got binaries for brcm47xx default device.</p><p>How can I create a image openwrt-#MyDeviceName#_squashfs.bin ?<br />I compared the default image with the on i got from pcekspert.com and i&#039;m missing the firmware header which may cause CFE Boot Failure.</p><p>How can i specified the device i want to build an image for and the correct firmware header ?</p><p>The patch given on pcekspert.com has firmware header information but i&#039;m not sur how to apply it and if it will add a new platform to menuconfig.</p>											<p class="post-edited">(Last edited by <strong>Kyklas</strong> on 26 Oct 2013, 18:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216026">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">Kyklas</div>
					<div class="post-datetime">
						29 Oct 2013, 13:27					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I compile and flash successfully a custom image. The header need to be manually created so CFE will boot on it.<br />I&#039;ll make a light image available for folks.</p><p>Is there a way to have openwrt build root create the header for us ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216671">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">Kyklas</div>
					<div class="post-datetime">
						4 Nov 2013, 10:25					</div>
				</div>
				<div class="post-content content">
					<p>While testing 3G connection speeds, i notice the device rebooting on it&#039;s own, no information on serial link.</p><p>I&#039;m wondering how to solve this, probably a driver issue. Kernel warning with invalid serial state. I tested with my image, the image I got from internet same result.<br />The device is stable is original firmware. </p><p>Did someone tested a device with the GTM382 modem ? Is the device stable ?</p><p>The driver available on the option site are up to kernel 3.2, so i try doing something with backfire but a default backfire image is not booting on the device. No much is shown on serial. I look if the same file are present to apply the patch but patch 025 is not in the patch directory.</p><p>I don&#039;t have a another device with a suitable PCIE port but even then the SIM would be missing.</p><p>Any tips on how to improve the driver with the option patches. Would there be a big difference between kernel 3.2 and 3.3 ?</p><br /><p>Adding console at reboot :<br /></p><div class="codebox"><pre><code>root@OpenWrt:/#
root@OpenWrt:/# Decompressing...............done

CFE version 1.0.37 for BCM947XX (32bit,SP,LE)</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:/# Nov  4 18:52:04 OpenWrt daemon.info dnsmasq-dhcp[935]: DHCPINFORM(br-lan) 192.168.1                           .156 48:5b:39:e7:e6:f8
Nov  4 18:52:04 OpenWrt daemon.info dnsmasq-dhcp[935]: DHCPACK(br-lan) 192.168.1.156 48:5b:39:e7:e6                           :f8 STANAS2
Decompressing...............done

CFE version 1.0.37 for BCM947XX (32bit,SP,LE)</code></pre></div>											<p class="post-edited">(Last edited by <strong>Kyklas</strong> on 4 Nov 2013, 23:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216834">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">Kyklas</div>
					<div class="post-datetime">
						6 Nov 2013, 00:47					</div>
				</div>
				<div class="post-content content">
					<p>anarchy99,</p><p>Do you have a patch to add comgt hso support in AA ? The patch on the dev ticket does not correspond with the makefile.</p><p>Some file are no longer used, probaly combine i suppose, and some directories have changed.</p><br /><p>For the reboot problem, the cause is not identified but probably related to the modem/3g connection. I used the hso driver from Option website, there is a v3.3 version. The reboot took place twice when requesting a Luci page, I didn&#039;t manage to reboot the device another time this way. The device seems stable othewise, 1h 45m without reboot ( but 3g is not on ).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217908">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">Kyklas</div>
					<div class="post-datetime">
						19 Nov 2013, 00:09					</div>
				</div>
				<div class="post-content content">
					<p>I did more testing, the device still reboots unexpectedly with the Openwrt HSO driver or the Option HSO driver. Multiple connection seems to be a problem. I need to confirm it.</p><p>I looked at the HSO patch for comgt but hso proto doesn&#039;t seem to be found. Furthermore the scipts don&#039;t use ppp so how encapsulation is handled or is it because that scripts uses the application tty from the 3G card ?</p><p>I&#039;m a little lost with the different modem mode and scripts, could anyone give me a lead on this ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219553">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">Kyklas</div>
					<div class="post-datetime">
						9 Dec 2013, 23:48					</div>
				</div>
				<div class="post-content content">
					<p>Are you using the hso patch for comgt ? What is your configuration ?</p><p>I bought the GTM382 and i have connectivity with it but same issue of reboot.<br />Could you test if you have the instability problem that makes the device reboot. I described the way to test in <a href="https://forum.openwrt.org/viewtopic.php?id=47750">https://forum.openwrt.org/viewtopic.php?id=47750</a> But if you don&#039;t have connectivity the test is not the same.</p><p>How come you don&#039;t have connectivity ? No ping ?</p><div class="codebox"><pre><code>Dec  9 21:07:53 OpenWrt kern.warn kernel: [  285.884000] usb 1-1.1: hso received invalid serial state notification
Dec  9 21:07:56 OpenWrt daemon.notice netifd: wwan (1382): SIM ready
Dec  9 21:07:56 OpenWrt daemon.notice netifd: wwan (1382): PIN set successfully
Dec  9 21:07:57 OpenWrt daemon.notice netifd: wwan (1382): Trying to set mode
Dec  9 21:07:57 OpenWrt daemon.notice pppd[1398]: pppd 2.4.5 started by root, uid 0
Dec  9 21:07:57 OpenWrt kern.warn kernel: [  290.096000] usb 1-1.1: hso received invalid serial state notification
Dec  9 21:07:58 OpenWrt kern.warn kernel: [  291.096000] usb 1-1.1: hso received invalid serial state notification
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: abort on (BUSY)
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: abort on (NO CARRIER)
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: abort on (ERROR)
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: report (CONNECT)
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: timeout set to 10 seconds
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: send (AT&amp;F^M)
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: expect (OK)
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: AT&amp;F^M^M
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: OK
Dec  9 21:07:59 OpenWrt local2.info chat[1402]:  -- got it
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: send (ATE1^M)
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: expect (OK)
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: ^M
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: ATE1^M^M
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: OK
Dec  9 21:07:59 OpenWrt local2.info chat[1402]:  -- got it
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: send (AT+CGDCONT=1,&quot;IP&quot;,&quot;websfr&quot;^M)
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: timeout set to 30 seconds
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: expect (OK)
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: ^M
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: AT+CGDCONT=1,&quot;IP&quot;,&quot;websfr&quot;^M^M
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: OK
Dec  9 21:07:59 OpenWrt local2.info chat[1402]:  -- got it
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: send (ATD*99***1#^M)
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: expect (CONNECT)
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: ^M
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: ATD*99***1#^M^M
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: CONNECT
Dec  9 21:07:59 OpenWrt local2.info chat[1402]:  -- got it
Dec  9 21:07:59 OpenWrt local2.info chat[1402]: send ( ^M)
Dec  9 21:07:59 OpenWrt daemon.debug pppd[1398]: Script USE_APN=websfr /usr/sbin/chat -t5 -v -E -f /etc/chatscripts/3g.chat finished (pid 1401), status = 0x0
Dec  9 21:07:59 OpenWrt daemon.info pppd[1398]: Serial connection established.
Dec  9 21:07:59 OpenWrt daemon.debug pppd[1398]: using channel 2
Dec  9 21:07:59 OpenWrt kern.debug kernel: [  291.712000] device: &#039;ppp0&#039;: device_add
Dec  9 21:07:59 OpenWrt kern.warn kernel: [  291.716000] usb 1-1.1: hso received invalid serial state notification
Dec  9 21:07:59 OpenWrt kern.debug kernel: [  291.736000] device: &#039;ppp0&#039;: device_rename: renaming to &#039;3g-wwan&#039;
Dec  9 21:07:59 OpenWrt daemon.info pppd[1398]: Using interface 3g-wwan
Dec  9 21:07:59 OpenWrt daemon.notice pppd[1398]: Connect: 3g-wwan &lt;--&gt; /dev/ttyHS0
Dec  9 21:08:00 OpenWrt daemon.debug pppd[1398]: sent [LCP ConfReq id=0x1 &lt;asyncmap 0x0&gt; &lt;magic 0x409144c2&gt;]
Dec  9 21:08:00 OpenWrt daemon.debug pppd[1398]: rcvd [LCP ConfReq id=0x3 &lt;asyncmap 0x0&gt; &lt;auth chap MD5&gt; &lt;magic 0x19d793f&gt; &lt;pcomp&gt; &lt;accomp&gt;]
Dec  9 21:08:00 OpenWrt daemon.debug pppd[1398]: No auth is possible
Dec  9 21:08:00 OpenWrt daemon.debug pppd[1398]: sent [LCP ConfRej id=0x3 &lt;auth chap MD5&gt; &lt;pcomp&gt; &lt;accomp&gt;]
Dec  9 21:08:00 OpenWrt daemon.debug pppd[1398]: rcvd [LCP ConfAck id=0x1 &lt;asyncmap 0x0&gt; &lt;magic 0x409144c2&gt;]
Dec  9 21:08:00 OpenWrt daemon.debug pppd[1398]: rcvd [LCP ConfReq id=0x4 &lt;asyncmap 0x0&gt; &lt;magic 0x19d793f&gt;]
Dec  9 21:08:00 OpenWrt daemon.debug pppd[1398]: sent [LCP ConfAck id=0x4 &lt;asyncmap 0x0&gt; &lt;magic 0x19d793f&gt;]
Dec  9 21:08:00 OpenWrt daemon.debug pppd[1398]: sent [LCP EchoReq id=0x0 magic=0x409144c2]
Dec  9 21:08:00 OpenWrt daemon.debug pppd[1398]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns2 0.0.0.0&gt;]
Dec  9 21:08:00 OpenWrt daemon.debug pppd[1398]: rcvd [LCP DiscReq id=0x5 magic=0x19d793f]
Dec  9 21:08:00 OpenWrt daemon.debug pppd[1398]: rcvd [LCP EchoRep id=0x0 magic=0x19d793f 40 91 44 c2]
Dec  9 21:08:01 OpenWrt daemon.debug pppd[1398]: sent [LCP EchoReq id=0x1 magic=0x409144c2]
Dec  9 21:08:01 OpenWrt daemon.debug pppd[1398]: rcvd [LCP EchoRep id=0x1 magic=0x19d793f 40 91 44 c2]
Dec  9 21:08:01 OpenWrt daemon.debug pppd[1398]: rcvd [IPCP ConfNak id=0x1 &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns2 10.11.12.14&gt; &lt;ms-wins 10.11.12.13&gt; &lt;ms-wins 10.11.12.14&gt;]
Dec  9 21:08:01 OpenWrt daemon.debug pppd[1398]: sent [IPCP ConfReq id=0x2 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns2 10.11.12.14&gt; &lt;ms-wins 10.11.12.13&gt; &lt;ms-wins 10.11.12.14&gt;]
Dec  9 21:08:02 OpenWrt daemon.debug pppd[1398]: sent [LCP EchoReq id=0x2 magic=0x409144c2]
Dec  9 21:08:02 OpenWrt daemon.debug pppd[1398]: rcvd [LCP EchoRep id=0x2 magic=0x19d793f 40 91 44 c2]
Dec  9 21:08:02 OpenWrt daemon.debug pppd[1398]: rcvd [IPCP ConfNak id=0x2 &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns2 10.11.12.14&gt; &lt;ms-wins 10.11.12.13&gt; &lt;ms-wins 10.11.12.14&gt;]
Dec  9 21:08:02 OpenWrt daemon.debug pppd[1398]: sent [IPCP ConfReq id=0x3 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns2 10.11.12.14&gt; &lt;ms-wins 10.11.12.13&gt; &lt;ms-wins 10.11.12.14&gt;]
Dec  9 21:08:03 OpenWrt daemon.debug pppd[1398]: sent [LCP EchoReq id=0x3 magic=0x409144c2]
Dec  9 21:08:03 OpenWrt daemon.debug pppd[1398]: rcvd [LCP EchoRep id=0x3 magic=0x19d793f 40 91 44 c2]
Dec  9 21:08:03 OpenWrt daemon.debug pppd[1398]: rcvd [IPCP ConfNak id=0x3 &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns2 10.11.12.14&gt; &lt;ms-wins 10.11.12.13&gt; &lt;ms-wins 10.11.12.14&gt;]
Dec  9 21:08:03 OpenWrt daemon.debug pppd[1398]: sent [IPCP ConfReq id=0x4 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns2 10.11.12.14&gt; &lt;ms-wins 10.11.12.13&gt; &lt;ms-wins 10.11.12.14&gt;]
Dec  9 21:08:04 OpenWrt daemon.debug pppd[1398]: sent [LCP EchoReq id=0x4 magic=0x409144c2]
Dec  9 21:08:04 OpenWrt daemon.debug pppd[1398]: rcvd [LCP EchoRep id=0x4 magic=0x19d793f 40 91 44 c2]
Dec  9 21:08:04 OpenWrt daemon.debug pppd[1398]: rcvd [IPCP ConfNak id=0x4 &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns2 10.11.12.14&gt; &lt;ms-wins 10.11.12.13&gt; &lt;ms-wins 10.11.12.14&gt;]
Dec  9 21:08:04 OpenWrt daemon.debug pppd[1398]: sent [IPCP ConfReq id=0x5 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns2 10.11.12.14&gt; &lt;ms-wins 10.11.12.13&gt; &lt;ms-wins 10.11.12.14&gt;]
Dec  9 21:08:05 OpenWrt daemon.debug pppd[1398]: rcvd [IPCP ConfReq id=0x2]
Dec  9 21:08:05 OpenWrt daemon.debug pppd[1398]: sent [IPCP ConfNak id=0x2 &lt;addr 0.0.0.0&gt;]
Dec  9 21:08:05 OpenWrt daemon.debug pppd[1398]: rcvd [IPCP ConfRej id=0x5 &lt;ms-wins 10.11.12.13&gt; &lt;ms-wins 10.11.12.14&gt;]
Dec  9 21:08:05 OpenWrt daemon.debug pppd[1398]: sent [IPCP ConfReq id=0x6 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 10.11.12.13&gt; &lt;ms-dns2 10.11.12.14&gt;]
Dec  9 21:08:05 OpenWrt daemon.debug pppd[1398]: rcvd [IPCP ConfReq id=0x3]
Dec  9 21:08:05 OpenWrt daemon.debug pppd[1398]: sent [IPCP ConfAck id=0x3]
Dec  9 21:08:05 OpenWrt daemon.debug pppd[1398]: rcvd [IPCP ConfNak id=0x6 &lt;addr 100.112.136.234&gt; &lt;ms-dns1 172.20.2.10&gt; &lt;ms-dns2 172.20.2.39&gt;]
Dec  9 21:08:05 OpenWrt daemon.debug pppd[1398]: sent [IPCP ConfReq id=0x7 &lt;addr 100.112.136.234&gt; &lt;ms-dns1 172.20.2.10&gt; &lt;ms-dns2 172.20.2.39&gt;]
Dec  9 21:08:05 OpenWrt daemon.debug pppd[1398]: rcvd [IPCP ConfAck id=0x7 &lt;addr 100.112.136.234&gt; &lt;ms-dns1 172.20.2.10&gt; &lt;ms-dns2 172.20.2.39&gt;]
Dec  9 21:08:05 OpenWrt daemon.warn pppd[1398]: Could not determine remote IP address: defaulting to 10.64.64.64
Dec  9 21:08:05 OpenWrt daemon.notice pppd[1398]: local  IP address 100.112.136.234
Dec  9 21:08:05 OpenWrt daemon.notice pppd[1398]: remote IP address 10.64.64.64
Dec  9 21:08:05 OpenWrt daemon.notice pppd[1398]: primary   DNS address 172.20.2.10
Dec  9 21:08:05 OpenWrt daemon.notice pppd[1398]: secondary DNS address 172.20.2.39
Dec  9 21:08:05 OpenWrt daemon.debug pppd[1398]: Script /lib/netifd/ppp-up started (pid 1418)
Dec  9 21:08:05 OpenWrt daemon.notice netifd: Interface &#039;wwan&#039; is now up</code></pre></div><p>Can you ping the DNS servers, should be a local ping withing the provider network ? I can&#039;t locate mine but i can for yours.</p>											<p class="post-edited">(Last edited by <strong>Kyklas</strong> on 9 Dec 2013, 23:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219758">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">Kyklas</div>
					<div class="post-datetime">
						12 Dec 2013, 00:14					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Since the port from neryba on the topic <a href="https://forum.openwrt.org/viewtopic.php?id=47750">https://forum.openwrt.org/viewtopic.php?id=47750</a> . I looked at AT commands of the modem and it&#039;s usb interfaces. I realized that i focused on the ttyHSx interfaced form the modem but missed interface 1.3 or interface descriptor 4. With the kernel debug enabled, I noticed that interface was linked to a network interface hso0. Once i noticed that i looked back at the hso patch form comgt and work to port it for AA. Using the network interface has advantages, the router runs better, no ppp deamon running and my issue of the device rebooting with lsusb is no longer there. I flashed an old image with Luci on it. I got the device to reboot with the old configuration ( using the modem tty interface) but no bug with the hso0 network interface so far.</p><p>I&#039;ll make a comgt patch file for AA. I made a little utility that makes the image header for me and adds a image description after the 20 bytes of header, useful to track images. I&#039;ll post the patch file to use on firmware-mod-kit.</p><p>Hopefully now i&#039;ll manage to use that device !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219817">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">Kyklas</div>
					<div class="post-datetime">
						12 Dec 2013, 20:23					</div>
				</div>
				<div class="post-content content">
					<p>The patch for firmware-mod-kit</p><div class="codebox"><pre><code>diff --git a/src/crcalc/Makefile b/src/crcalc/Makefile
index 0670388..7e567c8 100644
--- a/src/crcalc/Makefile
+++ b/src/crcalc/Makefile
@@ -2,11 +2,14 @@ CC=gcc
 CFLAGS=-Wall
 TARGET=crcalc
 
-all: $(TARGET) crc32
+all: $(TARGET) crc32 cfeheader
 
 $(TARGET): common.o patch.o
     $(CC) $(CFLAGS) $(LDFLAGS) $(TARGET).c *.o -o $(TARGET)
 
+cfeheader:
+    $(CC) $(CFLAGS) $(LDFLAGS) cfeheader.c *.o -o cfeheader
+
 crc32: crc.o
     $(CC) $(CFLAGS) $(LDFLAGS) crc32.c crc.o -o crc32 
 
diff --git a/src/crcalc/cfeheader.c b/src/crcalc/cfeheader.c
new file mode 100644
index 0000000..e4995e0
--- /dev/null
+++ b/src/crcalc/cfeheader.c
@@ -0,0 +1,151 @@
+/*
+ * Utility for calculating and patching checksums in various files.
+ */
+
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
+#include &lt;sys/types.h&gt;
+#include &lt;sys/stat.h&gt;
+#include &lt;unistd.h&gt;
+#include &lt;fcntl.h&gt;
+#include &quot;common.h&quot;
+#include &quot;cfeheader.h&quot;
+#include &quot;patch.h&quot;
+
+#define CFE_HEADER_SIZE        148
+
+int main(int argc, char *argv[])
+{
+    int retval = EXIT_FAILURE, ok = 0, fail = 1,index = 0,cks = 0;
+    char *buf = NULL, *fname = NULL, *desc = NULL, *oname = NULL, *output = NULL, header[CFE_HEADER_SIZE];
+    size_t size = 0;
+
+    /* Check usage */
+    if(argc &lt; 3 || argv[1][0] == &#039;-&#039;)
+    {
+        fprintf(stderr, USAGE, argv[0]);
+        goto end;
+    }
+    else
+    {
+        fname = argv[1];
+        oname = argv[2];
+        if(argc == 4)
+            desc = argv[3];
+    }
+    /* Creating header space 148 octets space */
+
+    /* Read in target file */
+    buf = file_read(fname, &amp;size);
+    /*  Finding the first DEADC0DE */
+    for(; (index&lt;(size-4) &amp;&amp; *((int*)(buf+index)) != 0xDEC0ADDE);index++);
+    fprintf(stderr,&quot;First DEADC0DE @ 0x%08X\n&quot;, index);
+    if(index&gt;CFE_HEADER_SIZE &amp;&amp; index&lt;(size-4))
+    {
+        /* Saving data before first DEADC0DE */
+        memcpy(header,(buf+index-CFE_HEADER_SIZE),CFE_HEADER_SIZE);    
+    }
+    else
+        goto end;
+    
+    /* Moving data at the end */
+    memcpy((buf+index-CFE_HEADER_SIZE),(buf+index),CFE_HEADER_SIZE);
+    /* Copying the data back at the end */
+    memcpy((buf+size-CFE_HEADER_SIZE),header,CFE_HEADER_SIZE);
+
+    /* Computing Image CRC */
+    
+    if(buf &amp;&amp; size &gt; MIN_FILE_SIZE)
+    {
+        ok = 0;
+
+        fprintf(stderr, &quot;Processing header...&quot;);
+
+        /* Identify and patch the header at each offset */
+        switch(identify_header(buf))
+        {
+            case TRX:
+                ok = patch_trx(buf, size);
+                break;
+            case UIMAGE:
+                ok = patch_uimage(buf, size);
+                break;
+            case DLOB:
+                ok = patch_dlob(buf, size);
+                break;
+            default:
+                fprintf(stderr, &quot;sorry, this file type is not supported.\n&quot;);
+                break;
+        }
+
+        if(ok)
+        {
+            fail = 0;
+            fprintf(stderr, &quot;CRC updated OK.\n&quot;);
+        }
+        else
+        {
+            fprintf(stderr, &quot;CRC update failed!\n&quot;);
+            goto end;
+        }
+    
+    }
+
+    /* Creating Header */
+
+    output = malloc(size+CFE_HEADER_SIZE);
+    if(!output)
+    {
+        perror(&quot;malloc&quot;);
+        goto end;
+    }
+
+    memset(output,0,size+CFE_HEADER_SIZE);
+
+    cks=0xBEBAEDFE;
+    memcpy(output,&amp;cks,4);
+
+    cks = ((size&gt;&gt;24)&amp;0xff) | // move byte 3 to byte 0
+                    ((size&lt;&lt;8)&amp;0xff0000) | // move byte 1 to byte 2
+                    ((size&gt;&gt;8)&amp;0xff00) | // move byte 2 to byte 1
+                    ((size&lt;&lt;24)&amp;0xff000000); // byte 0 to byte 3    
+
+    memcpy(output+4,&amp;cks,4);
+    memcpy(output+CFE_HEADER_SIZE,buf,size);
+    if(desc)
+        memcpy(output+20,desc,(strlen(desc)&gt;(CFE_HEADER_SIZE-20))?CFE_HEADER_SIZE-20:strlen(desc));
+    cks=0;
+    for(index=0;index&lt;size+CFE_HEADER_SIZE;index++)
+    {
+        cks+=(unsigned char)output[index];
+    }
+
+    fprintf(stderr,&quot;Checksum 32 : 0x%08X\n&quot;, cks);
+
+    index = ((cks&gt;&gt;24)&amp;0xff) | // move byte 3 to byte 0
+            ((cks&lt;&lt;8)&amp;0xff0000) | // move byte 1 to byte 2
+            ((cks&gt;&gt;8)&amp;0xff00) | // move byte 2 to byte 1
+            ((cks&lt;&lt;24)&amp;0xff000000); // byte 0 to byte 3
+    memcpy(output+8,&amp;index,4);
+
+
+    if(!fail)
+    {
+        if(!file_write(oname, output, size+CFE_HEADER_SIZE))
+        {
+            fprintf(stderr, &quot;Failed to save data to file &#039;%s&#039;\n&quot;, oname);
+        }
+        else
+        {
+            fprintf(stderr, &quot;%s successfully created.\n&quot;,oname);
+            retval = EXIT_SUCCESS;
+        }
+    }
+
+end:
+    if(buf) free(buf);
+    if(output) free(output);    
+    return retval;
+}
+
diff --git a/src/crcalc/cfeheader.h b/src/crcalc/cfeheader.h
new file mode 100644
index 0000000..4e48533
--- /dev/null
+++ b/src/crcalc/cfeheader.h
@@ -0,0 +1,12 @@
+#ifndef _CFEHEAEDER_H_
+#define _CFEHEADER_H_
+
+#define USAGE &quot;\n\
+CFE Header \r\n\
+Create CFE Header for the firmware file ( GlobeSurfer3/3+ ). \n\
+Re-calculates firmware header checksusm and CRC.\n\
+\n\
+Usage: %s &lt;firmware image&gt; &lt;CFE firmware image&gt; [Description]\n\
+\n&quot;
+
+#endif</code></pre></div><p>I&#039;ll write a mail to firmware-mod-kit owners to see if they are interested to add this to their kit ( and correct what i did if necessary )</p>											<p class="post-edited">(Last edited by <strong>Kyklas</strong> on 12 Dec 2013, 20:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219824">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">Kyklas</div>
					<div class="post-datetime">
						12 Dec 2013, 21:09					</div>
				</div>
				<div class="post-content content">
					<p>Posted my comgt hso patch : <a href="https://dev.openwrt.org/attachment/ticket/6995/002-comgt_hso.patch">https://dev.openwrt.org/attachment/tick … _hso.patch</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220097">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">Kyklas</div>
					<div class="post-datetime">
						16 Dec 2013, 10:25					</div>
				</div>
				<div class="post-content content">
					<p>Image for GlobeSurfer3/3+ with option.c update, hso-dkms hso driver, hso proto support, gtm661 (default), gtm382 detect script.</p><p><a href="http://www41.zippyshare.com/v/54275862/file.html">http://www41.zippyshare.com/v/54275862/file.html</a></p><p>Tell me how it works for you !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220998">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">Kyklas</div>
					<div class="post-datetime">
						27 Dec 2013, 12:07					</div>
				</div>
				<div class="post-content content">
					<p>I wanted to compare how GlobeSurfer is handling the modem with OpenWRT.</p><p>GlobeSurfer is using hso driver.<br /></p><div class="codebox"><pre><code>/proc/hso/devices # lsmod
Module                  Size  Used by
hso                    36784   1

/proc/hso # cat options
Version: 1.3
debug: 0x00
procfs: 0x01
tty_major: 0x00
disable_net: 0x00

/proc/hso/devices # ls
eth1    ttyHS0  ttyHS1  ttyHS2  ttyHS3</code></pre></div><p>Using hso driver and hso protocol on OpenWRT is the same way as GlobeSurfer.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223291">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">Kyklas</div>
					<div class="post-datetime">
						20 Jan 2014, 21:20					</div>
				</div>
				<div class="post-content content">
					<p>For the high-speed usb, it&#039;s probably because i don&#039;t have kmod-usb2, I think.</p><p>Your right about the modem init script, GS3 script lights up 2 leds on GS3+ and a extra toggle of GPIO 4 &amp; 5 is missing to enable the modem on GS3+.</p><p>About the modem network interface, there the conf i use :</p><div class="codebox"><pre><code>config interface &#039;wwan&#039;
    option ifname &#039;hso0&#039;
    option proto &#039;hso&#039;
    option apn &#039;&lt;your apn&gt;&#039;
    option pincode &#039;&lt;your pin&gt;&#039;
    option device &#039;/dev/ttyHS2&#039;</code></pre></div><p>The /dev/ttyHS2 is the modem application interface serial : cat /sys/class/tty/ttyHSx/hsotype </p><p>and then you can use my patch for AA to have hso protocol support ( user identification not tested )<br /><a href="https://dev.openwrt.org/ticket/6995">https://dev.openwrt.org/ticket/6995</a></p><p>Thanks for the feedback</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p234529">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">Kyklas</div>
					<div class="post-datetime">
						25 May 2014, 03:21					</div>
				</div>
				<div class="post-content content">
					<p>I have been working on other projects some of which kind a link back to this topic.</p><p>I looked for a similar device to GlobeSurfer 3+ and i bought a RouterBoard 411uahr. <a href="http://routerboard.com/RB411UAHR">http://routerboard.com/RB411UAHR</a></p><p>I customized it with a additional Wifi card ( RouterBaord R52n-M ) and a GTM382 3G card that i bought for testing).<br /><a href="http://postimage.org/image/70o1mpdsb/"><span class="postimg"><img src="http://s25.postimage.org/70o1mpdsb/IMG_0010.jpg" alt="http://s25.postimage.org/70o1mpdsb/IMG_0010.jpg" /></span></a><br />I attached 9dbi antenna the result is pretty insane ( 2 antenna for the additional WiFi card, 1 antenna for the integrated card and 2 quad band gsm antenna).<br /><a href="http://postimage.org/image/45ayfu9sb/"><span class="postimg"><img src="http://s25.postimage.org/45ayfu9sb/09032014032.jpg" alt="http://s25.postimage.org/45ayfu9sb/09032014032.jpg" /></span></a></p><p>the RB411 has a lot more power than the GS3+ as well as more memory. The specs say 64 mb of flash and ram but my board boot loader say 64 mb of ram and 128 mb of flash which is pretty nice.</p><p>The GTM382 card run nicely with hso driver and patch for AA.<br />The RS232 port is nice for communicating with the device.</p><p>The only draw back from my point of view is the only ethernet port and the unpowered usb port. The solution is an power converter inside (DC step down to 5v) and an external usb to ethernet adapter.</p><p>The original os is nice but i&#039;m not familiar to it. It has support for hso driver but from there to get the 3G connection i didn&#039;t look to do it.</p><p>One interesting thing about Option 3G card is their GPS support. I enable GPS on the GTM382 and got a fix. I use the device in the car and was able to have a record of my driving.</p><p>I&#039;m planning to do a luci configuration interface for the hso driver.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p234883">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">RPi</div>
					<div class="post-datetime">
						28 May 2014, 17:44					</div>
				</div>
				<div class="post-content content">
					<p>Hi Guys,<br />with interest I red your work with adding openwrt support on the Globesurfer.</p><p>I have a GS III, but still with stock firmware.<br />After a wrong firewall rule, I bricked mine, I think.<br />Do you have tips how to proceed....?</p><p>It says &#039;Initializing&#039;. So it looks like the reset procedure to go to factory defaults doesn&#039;t work yet, because reset only works after the box is fully loaded?</p><p>Strange enough the box doesn&#039;t support a reset-when-powering-up?<br />Well, all tips are welcome.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p244462">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">manny_intelli</div>
					<div class="post-datetime">
						21 Aug 2014, 05:21					</div>
				</div>
				<div class="post-content content">
					<p>Hi, you may be interested to know about a recent addition to supported hardware platforms. The HYRAX PCP100 from <a href="http://www.IntelliDesign.com.au">www.IntelliDesign.com.au</a>&nbsp; support a 3G (or 4G) Cinterion Module. <a href="http://wiki.openwrt.org/toh/intellidesign/hyrax">http://wiki.openwrt.org/toh/intellidesign/hyrax</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245437">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">Kyklas</div>
					<div class="post-datetime">
						31 Aug 2014, 02:38					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have a LuCI configuration interface to HSO along with new connection scripts.<br />I have worked with the GPS interface of the GTM382. I have A-GPS working. The new connection script support A-GPS, UMTS/GPS mode selection.</p><p>I&#039;m testing this on a WR710n :</p><p>TP-Link TL-WR710N v1<br />OpenWrt Chaos Calmer r42165 / LuCI Trunk (svn-r10520)</p><p>I&#039;m facing an issue with the modem connection with this new 3.10.49 kernel.<br />For some unknown reason I am not able to use the connection created on hso0.</p><p>It seems that OpenWrt has modified some package and dependencies. kmod-rfkill now depends on input-core. rfkill is not enable by default on wr710n configuration. The modinfo output is short compared to other system.</p><p>WR710n output :<br /></p><div class="codebox"><pre><code>module:         /lib/modules/3.10.49/hso.ko
license:        GPL
depends:        usbcore,rfkill</code></pre></div><p>Raspberry PI output :<br /></p><div class="codebox"><pre><code>filename:       /lib/modules/3.12.20+/kernel/drivers/net/usb/hso.ko
license:        GPL
description:    USB High Speed Option driver
author:         Option Wireless
srcversion:     92514817C60828D0122B334
alias:          usb:v0AF0pC100d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0pD058d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0pD357d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0pD257d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0pD157d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0pD057d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0pD255d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0pD155d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0pD055d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0pD035d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p9000d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p8900d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p8800d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p8600d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p8400d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p8304d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p8302d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p8300d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p8201d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p8200d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7A05d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7A01d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7901d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7801d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7706d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7701d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7601d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7501d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7401d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7381d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7361d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7301d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0pD033d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0pD031d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0pD013d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0pC031d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7311d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7271d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7251d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7211d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7111d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7071d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7051d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7031d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p7011d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p6971d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p6951d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p6911d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p6811d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p6791d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p6771d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p6751d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p6731d*dc*dsc*dp*ic*isc*ip*in*
alias:          usb:v0AF0p6711d*dc*dsc*dp*ic*isc*ip*in*
depends:        rfkill
intree:         Y
vermagic:       3.12.20+ preempt mod_unload modversions ARMv6
parm:           debug:Level of debug [0x01 | 0x02 | 0x04 | 0x08 | 0x10] (int)
parm:           tty_major:Set the major tty number (int)
parm:           disable_net:Disable the network interface (int)</code></pre></div><p>The modem and GPS works on Raspberry PI with kernel 3.12.20 so it should also work on 3.10.49.</p><p>Edit :</p><p>WR710n :<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# ifconfig hso0
hso0      Link encap:UNSPEC  HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00
          inet addr:33.191.46.170  P-t-P:33.191.46.170  Mask:255.255.255.255
          UP POINTOPOINT RUNNING NOARP MULTICAST  MTU:1486  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:176 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:10
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)</code></pre></div><p>R-Pi<br /></p><div class="codebox"><pre><code>pi@raspberrypi:~/GPS$ ifconfig hso0
hso0      Link encap:UNSPEC  HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00
          inet addr:33.190.228.244  P-t-P:33.190.228.244  Mask:255.255.255.255
          UP POINTOPOINT RUNNING NOARP MULTICAST  MTU:1486  Metric:1
          RX packets:73 errors:0 dropped:0 overruns:0 frame:0
          TX packets:73 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:10
          RX bytes:6340 (6.1 KiB)  TX bytes:5527 (5.3 KiB)</code></pre></div><p>It seems that data is not being sent or received. Despite the 176 packet sent the TX bytes is null and nothing is received.</p><p>The modem works on the BealgeBone Black with kernel 3.8.13.</p><p>Is any one having that kind of issue ?<br />Does anyone know what modification kmod-input-core implies ?</p>											<p class="post-edited">(Last edited by <strong>Kyklas</strong> on 31 Aug 2014, 05:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248795">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">paolo.ulm</div>
					<div class="post-datetime">
						2 Oct 2014, 12:00					</div>
				</div>
				<div class="post-content content">
					<p>After having googled for 5 days I think this is the only place where someone can help me.</p><p>my mistake: I have a globesurfer III+ (GS0361) . It had some problems (probably firewall part). I tried to reinstall the firmware (the latest). I succeded with the reinstallation but it did not fix the problem. I decided to install an old firmware I found somewhere (big mistake) on internet. The firmware downgrade worked but now it does not connect any more to internet. I can still access the globesurfer with the web interface and with the telnet. It responds to the telnet commands like &quot;flash&quot; &quot;layout&quot; &quot;load&quot;. Now, If I try to upgrade the firmware (with telnet and with web-interface) it reboots immedialely (probably I installed a firmware that locks the globesurfer to a specific carrier).<br />Now the globesurfer is totally useless and I am stuck.</p><p>I am very new to this environment. <br />Is there a way I can try to flash my globesurfer III+ with something (a bin file or something like that) in order It can come back to life?</p><p>I tried already the following command:</p><p>flash load -u tftp://192.168.1.1/FW_GS3_R1N89.rmt -r 0x00040000</p><p>but it said something like &quot;rmt&quot; file are not accepted.</p><br /><br /><p>Please advice . I am in your hands.<br />Thanks in advance to whom answer.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248834">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">paolo.ulm</div>
					<div class="post-datetime">
						2 Oct 2014, 17:18					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the advice. I will try to run from telnet : system restore_factory_settings.<br />I have already tried the reset with the button but nothing changed.</p><p>1) Do you know where I could find a backed-up bin image from a globesurfer iii+ which is running openwrt ?<br />2) would it be enough to have it runnig openwrt?<br />3) is the syntax correct? (&nbsp; flash load -u tftp://192.168.1.1/FW_GS3_R1N89.rmt -r 0x00040000 )</p><p>thanks again</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248880">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">paolo.ulm</div>
					<div class="post-datetime">
						2 Oct 2014, 21:58					</div>
				</div>
				<div class="post-content content">
					<p>bad news... I have been fighting with my globesurfer for 3 hour. I tried what you suggested but unfortunately was not enough.</p><p>I tried:<br />restore_factory_settings<br />restore_factory_settings &lt;all possible flags&gt;</p><p>but still no news: the web interface works, telnet works but globesurfer does not connect to internet, everytime I try to update the firmware ( using the web interface or the telnet firmware_update ) globesurfer reboots and does not update.</p><p>now it is totally useless. I can still connect to globesurf (web or telnet) do you have any other trick?&nbsp; thank</p><p>paolo</p>											<p class="post-edited">(Last edited by <strong>paolo.ulm</strong> on 2 Oct 2014, 22:16)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 2 of 3</div><nav><ul><li><a href="viewtopic.php%3Fid=33250&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=33250&amp;p=3.html">3</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>