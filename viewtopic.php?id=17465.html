<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WGT634U - USB automount hard disk problem</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 17 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p75388">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">DarrenD</div>
					<div class="post-datetime">
						25 Oct 2008, 22:48					</div>
				</div>
				<div class="post-content content">
					<p>I have a WGT634U and have finally taken the plunge into OpenWRT via a serial cable. OK - I am a Linux noob so I went for X-WRT, please don&#039;t hold that against me <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>When I get this all working I intend to write up what I did, partly for others and partly for myself if I need to re-install (or back-track a bit).</p><p>I have finally got the print server working so I now no longer need my main PC turned on for my daughter&#039;s laptop to print to the Epson R200 printer. That&#039;s great news for me. Something the Netgear firmware never had.</p><p>I am now turning my attention to the USB hard disks and memory sticks. I have installed lots of packages based on other people&#039;s posts (thanks Dennis from 2006). I can manually mount a disk but wonder why it will not auto-mount like the Netgear firmware did. The part where I think something is not right is the line in my syslog which says</p><p>&nbsp; &nbsp;Oct 25 20:39:50 (none) user.info : /sbin/hotplug-call: /etc/hotplug.d/usb/10-usb-storage: 12: /sbin/usb-storage: Permission denied</p><p>Does someone know what is going wrong?<br />Thanks<br />Darren</p><br /><br /><br /><br /><br /><br /><p>Here is /sbin/hotplug-call</p><p>&nbsp; &nbsp;#!/bin/sh<br />&nbsp; &nbsp;# Copyright (C) 2006 OpenWrt.org</p><p>&nbsp; &nbsp;export HOTPLUG_TYPE=&quot;$1&quot;</p><p>&nbsp; &nbsp;# bypass the normal hotplug path for firmware loading<br />&nbsp; &nbsp;# would otherwise cause problems with drivers like bcm43xx<br />&nbsp; &nbsp;[ &quot;firmware&quot; = &quot;$HOTPLUG_TYPE&quot; -a &quot;add&quot; = &quot;$ACTION&quot; ] &amp;&amp; {<br />&nbsp; &nbsp;&nbsp; &nbsp; [ -f &quot;/lib/firmware/$FIRMWARE&quot; ] &amp;&amp; {<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; echo 1 &gt; &quot;/sys$DEVPATH/loading&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; cp &quot;/lib/firmware/$FIRMWARE&quot; &quot;/sys$DEVPATH/data&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; echo 0 &gt; &quot;/sys$DEVPATH/loading&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp; }<br />&nbsp; &nbsp;&nbsp; &nbsp; exit 0<br />&nbsp; &nbsp;}</p><p>&nbsp; &nbsp;. /etc/functions.sh</p><p>&nbsp; &nbsp;PATH=/bin:/sbin:/usr/bin:/usr/sbin<br />&nbsp; &nbsp;LOGNAME=root<br />&nbsp; &nbsp;USER=root<br />&nbsp; &nbsp;export PATH LOGNAME USER</p><p>&nbsp; &nbsp;[ \! -z &quot;$1&quot; -a -d /etc/hotplug.d/$1 ] &amp;&amp; {<br />&nbsp; &nbsp;&nbsp; &nbsp; for script in $(ls /etc/hotplug.d/$1/* 2&gt;&amp;-); do (<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; [ -f $script ] &amp;&amp; . $script<br />&nbsp; &nbsp;&nbsp; &nbsp; ); done<br />&nbsp; &nbsp;}</p><p>Here is /etc/hotplug.d/usb/10-usb-storage</p><p>&nbsp; &nbsp;#!/bin/sh</p><p>&nbsp; &nbsp;# Copyright (C) 2006 OpenWrt.org</p><p>&nbsp; &nbsp;case &quot;$ACTION&quot; in<br />&nbsp; &nbsp;&nbsp; &nbsp; add)<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; [ -n &quot;${INTERFACE}&quot; ] &amp;&amp;<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; [ &quot;$(expr substr ${INTERFACE} 1 2)&quot; == &quot;8/&quot; ]&nbsp; &amp;&amp; {<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /sbin/usb-storage &amp;<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; ;;<br />&nbsp; &nbsp;esac</p><p>Here is /sbin/usb-storage</p><p>&nbsp; &nbsp;#!/bin/sh<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;# Copyright (C) 2006 OpenWrt.org<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;logger &quot;usb device is mass storage&quot;<br />&nbsp; &nbsp;i=0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp;while [ $i -le 10 ]; do<br />&nbsp; &nbsp;&nbsp; &nbsp; logger &quot;waiting on usb drive $i ...&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp;&nbsp; &nbsp; i=$(($i+1))<br />&nbsp; &nbsp;&nbsp; &nbsp; cd /sys${DEVPATH}<br />&nbsp; &nbsp;&nbsp; &nbsp; for blk in `find host* -type d`; do<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; cd /sys/${DEVPATH}/${blk}<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; BLK=$(find block* -type l 2&gt; /dev/null)<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; [ -n &quot;${BLK}&quot; ] &amp;&amp; {<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cd /sys${DEVPATH}/${blk}/${BLK}<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ls /dev/ &gt; /tmp/d<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sleep 2<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for node in `find sd* -type d | grep -v &quot;/&quot;`; do<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo &quot;mounting /dev/${node} on /mnt/usbdrive&quot;<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mkdir -p /mnt/usbdrive<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mount /dev/${node} /mnt/usbdrive<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; exit 0<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; done<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp;&nbsp; &nbsp; done<br />&nbsp; &nbsp;&nbsp; &nbsp; sleep 1<br />&nbsp; &nbsp;done <br />&nbsp; &nbsp;</p><p>Extract from my syslog</p><p>&nbsp; &nbsp;Oct 25 20:39:50 (none) user.info kernel: usb 3-1.4: new high speed USB device using ehci_hcd and address 9<br />&nbsp; &nbsp;Oct 25 20:39:50 (none) user.info kernel: usb 3-1.4: configuration #1 chosen from 1 choice<br />&nbsp; &nbsp;Oct 25 20:39:50 (none) user.info kernel: scsi5 : SCSI emulation for USB Mass Storage devices<br />&nbsp; &nbsp;Oct 25 20:39:50 (none) user.debug kernel: usb-storage: device found at 9<br />&nbsp; &nbsp;Oct 25 20:39:50 (none) user.debug kernel: usb-storage: waiting for device to settle before scanning<br />&nbsp; &nbsp;Oct 25 20:39:50 (none) user.info : /sbin/hotplug-call: /etc/hotplug.d/usb/10-usb-storage: 12: /sbin/usb-storage: Permission denied<br />&nbsp; &nbsp;Oct 25 20:39:55 (none) user.notice kernel: scsi 5:0:0:0: Direct-Access&nbsp; &nbsp; &nbsp;Generic&nbsp; STORAGE DEVICE&nbsp; &nbsp;9451 PQ: 0 ANSI: 0<br />&nbsp; &nbsp;Oct 25 20:39:56 (none) user.notice kernel: sd 5:0:0:0: [sdc] 3973120 512-byte hardware sectors (2034 MB)<br />&nbsp; &nbsp;Oct 25 20:39:56 (none) user.notice kernel: sd 5:0:0:0: [sdc] Write Protect is off<br />&nbsp; &nbsp;Oct 25 20:39:56 (none) user.debug kernel: sd 5:0:0:0: [sdc] Mode Sense: 03 00 00 00<br />&nbsp; &nbsp;Oct 25 20:39:56 (none) user.err kernel: sd 5:0:0:0: [sdc] Assuming drive cache: write through<br />&nbsp; &nbsp;Oct 25 20:39:56 (none) user.notice kernel: sd 5:0:0:0: [sdc] 3973120 512-byte hardware sectors (2034 MB)<br />&nbsp; &nbsp;Oct 25 20:39:56 (none) user.notice kernel: sd 5:0:0:0: [sdc] Write Protect is off<br />&nbsp; &nbsp;Oct 25 20:39:56 (none) user.debug kernel: sd 5:0:0:0: [sdc] Mode Sense: 03 00 00 00<br />&nbsp; &nbsp;Oct 25 20:39:56 (none) user.err kernel: sd 5:0:0:0: [sdc] Assuming drive cache: write through<br />&nbsp; &nbsp;Oct 25 20:39:56 (none) user.info kernel:&nbsp; sdc1<br />&nbsp; &nbsp;Oct 25 20:39:56 (none) user.notice kernel: sd 5:0:0:0: [sdc] Attached SCSI removable disk<br />&nbsp; &nbsp;Oct 25 20:39:56 (none) user.debug kernel: usb-storage: device scan complete</p><p>Extract from my kernel log</p><p>&nbsp; &nbsp;usb 3-1.4: new high speed USB device using ehci_hcd and address 9<br />&nbsp; &nbsp;usb 3-1.4: configuration #1 chosen from 1 choice<br />&nbsp; &nbsp;scsi5 : SCSI emulation for USB Mass Storage devices<br />&nbsp; &nbsp;usb-storage: device found at 9<br />&nbsp; &nbsp;usb-storage: waiting for device to settle before scanning<br />&nbsp; &nbsp;scsi 5:0:0:0: Direct-Access&nbsp; &nbsp; &nbsp;Generic&nbsp; STORAGE DEVICE&nbsp; &nbsp;9451 PQ: 0 ANSI: 0<br />&nbsp; &nbsp;sd 5:0:0:0: [sdc] 3973120 512-byte hardware sectors (2034 MB)<br />&nbsp; &nbsp;sd 5:0:0:0: [sdc] Write Protect is off<br />&nbsp; &nbsp;sd 5:0:0:0: [sdc] Mode Sense: 03 00 00 00<br />&nbsp; &nbsp;sd 5:0:0:0: [sdc] Assuming drive cache: write through<br />&nbsp; &nbsp;sd 5:0:0:0: [sdc] 3973120 512-byte hardware sectors (2034 MB)<br />&nbsp; &nbsp;sd 5:0:0:0: [sdc] Write Protect is off<br />&nbsp; &nbsp;sd 5:0:0:0: [sdc] Mode Sense: 03 00 00 00<br />&nbsp; &nbsp;sd 5:0:0:0: [sdc] Assuming drive cache: write through<br />&nbsp; &nbsp; sdc: sdc1<br />&nbsp; &nbsp;sd 5:0:0:0: [sdc] Attached SCSI removable disk<br />&nbsp; &nbsp;usb-storage: device scan complete<br />&nbsp; &nbsp; </p><p>Here are my packages (taken from X-WRT page <a href="http://192.168.1.1/cgi-bin/webif/system-ipkg.sh)">http://192.168.1.1/cgi-bin/webif/system-ipkg.sh)</a></p><p>&nbsp; &nbsp;Installed Packages<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;Action&nbsp; &nbsp; Package&nbsp; &nbsp; Version&nbsp; &nbsp; Description<br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; base-files-brcm47xx-2.6&nbsp; &nbsp; 10-12557&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; bridge&nbsp; &nbsp; 1.0.6-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; busybox&nbsp; &nbsp; 1.4.2-2&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; dnsmasq&nbsp; &nbsp; 2.39-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; dosfstools&nbsp; &nbsp; 2.11-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; dropbear&nbsp; &nbsp; 0.50-2&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; fdisk&nbsp; &nbsp; 2.12r-2&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; haserl&nbsp; &nbsp; 0.8.0-2&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; hotplug2&nbsp; &nbsp; 0.9+r102-2&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; iptables&nbsp; &nbsp; 1.3.7-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; iptables-mod-conntrack&nbsp; &nbsp; 1.3.7-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; iptables-mod-filter&nbsp; &nbsp; 1.3.7-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; iptables-mod-imq&nbsp; &nbsp; 1.3.7-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; iptables-mod-ipopt&nbsp; &nbsp; 1.3.7-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; kernel&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; kmod-diag&nbsp; &nbsp; 2+2.6.22-brcm47xx-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; kmod-fs-vfat&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; kmod-ipt-conntrack&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; kmod-ipt-filter&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; kmod-ipt-imq&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; kmod-ipt-ipopt&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; kmod-madwifi&nbsp; &nbsp; 2.6.22+r2568-20070710-brcm47xx-2&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; kmod-nls-base&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; kmod-ppp&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; kmod-pppoe&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; kmod-sched&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; kmod-scsi-core&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; kmod-switch&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; kmod-usb-core&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; kmod-usb-ohci&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; kmod-usb-printer&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; kmod-usb-storage&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; kmod-usb-uhci&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; kmod-usb2&nbsp; &nbsp; 2.6.22-brcm47xx-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; libgcc&nbsp; &nbsp; 4.1.2-10&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; mtd&nbsp; &nbsp; 5&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; ntpclient&nbsp; &nbsp; 2003_194-4&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; p910nd&nbsp; &nbsp; 0.7-3&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; ppp&nbsp; &nbsp; 2.4.3-8&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; ppp-mod-pppoe&nbsp; &nbsp; 2.4.3-8&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; tc&nbsp; &nbsp; 2.6.20-070313-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; uclibc&nbsp; &nbsp; 0.9.28-10&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; udevtrigger&nbsp; &nbsp; 106-1&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; webif&nbsp; &nbsp; 0.3-12&nbsp; &nbsp; <br />&nbsp; &nbsp;Uninstall&nbsp; &nbsp; wireless-tools&nbsp; &nbsp; 29-1&nbsp; &nbsp; </p><p>Here are my kernel modules (taken from X-WRT page <a href="http://192.168.1.1/cgi-bin/webif/status-modules.sh)">http://192.168.1.1/cgi-bin/webif/status-modules.sh)</a></p><p>&nbsp; &nbsp;Kernel Modules<br />&nbsp; &nbsp;Loaded Modules<br />&nbsp; &nbsp;Module &nbsp; &nbsp; Size &nbsp; &nbsp; Count &nbsp; &nbsp; State &nbsp; &nbsp; Address &nbsp; &nbsp; Used by<br />&nbsp; &nbsp;ath_hal &nbsp; &nbsp; 271168 &nbsp; &nbsp; 3 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc018e000 &nbsp; &nbsp; ath_pci, ath_rate_minstrel<br />&nbsp; &nbsp;ath_pci &nbsp; &nbsp; 94384 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00f8000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;ath_rate_minstrel &nbsp; &nbsp; 7840 &nbsp; &nbsp; 1 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00ea000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;crc_ccitt &nbsp; &nbsp; 1024 &nbsp; &nbsp; 1 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc006e000 &nbsp; &nbsp; ppp_async<br />&nbsp; &nbsp;diag &nbsp; &nbsp; 8272 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc005c000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;ehci_hcd &nbsp; &nbsp; 28016 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc0156000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;fat &nbsp; &nbsp; 42448 &nbsp; &nbsp; 1 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc007e000 &nbsp; &nbsp; vfat<br />&nbsp; &nbsp;imq &nbsp; &nbsp; 2192 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc006c000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;ipt_ECN &nbsp; &nbsp; 1472 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00cd000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;ipt_IMQ &nbsp; &nbsp; 672 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00c1000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;ipt_TOS &nbsp; &nbsp; 864 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00db000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;ipt_TTL &nbsp; &nbsp; 928 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00df000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;ipt_ecn &nbsp; &nbsp; 1024 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00cb000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;ipt_ipp2p &nbsp; &nbsp; 6976 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00bc000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;ipt_layer7 &nbsp; &nbsp; 9904 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00b4000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;ipt_recent &nbsp; &nbsp; 4992 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00b9000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;ipt_time &nbsp; &nbsp; 1568 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00c3000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;ipt_tos &nbsp; &nbsp; 544 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00d7000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;ipt_ttl &nbsp; &nbsp; 704 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00dd000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;nbd &nbsp; &nbsp; 17296 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc0071000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;nls_base &nbsp; &nbsp; 4416 &nbsp; &nbsp; 4 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc0066000 &nbsp; &nbsp; vfat, fat, nls_iso8859_1, nls_cp437<br />&nbsp; &nbsp;nls_cp437 &nbsp; &nbsp; 4416 &nbsp; &nbsp; 1 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc0069000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;nls_iso8859_1 &nbsp; &nbsp; 2880 &nbsp; &nbsp; 1 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc005a000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;ohci_hcd &nbsp; &nbsp; 14064 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc0151000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;ppp_async &nbsp; &nbsp; 9664 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc0077000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;ppp_generic &nbsp; &nbsp; 20000 &nbsp; &nbsp; 1 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00ae000 &nbsp; &nbsp; ppp_async<br />&nbsp; &nbsp;scsi_mod &nbsp; &nbsp; 71968 &nbsp; &nbsp; 2 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc016f000 &nbsp; &nbsp; usb_storage, sd_mod<br />&nbsp; &nbsp;sd_mod &nbsp; &nbsp; 18416 &nbsp; &nbsp; 2 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc0165000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;slhc &nbsp; &nbsp; 5408 &nbsp; &nbsp; 1 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc007b000 &nbsp; &nbsp; ppp_generic<br />&nbsp; &nbsp;switch_core &nbsp; &nbsp; 5088 &nbsp; &nbsp; 1 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc0055000 &nbsp; &nbsp; switch_robo<br />&nbsp; &nbsp;switch_robo &nbsp; &nbsp; 4048 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc0058000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;uhci_hcd &nbsp; &nbsp; 19728 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc015f000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;usb_storage &nbsp; &nbsp; 27664 &nbsp; &nbsp; 1 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc0182000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;usbcore &nbsp; &nbsp; 102032 &nbsp; &nbsp; 6 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc0094000 &nbsp; &nbsp; usb_storage, usblp, ehci_hcd, uhci_hcd, ohci_hcd<br />&nbsp; &nbsp;usblp &nbsp; &nbsp; 9248 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc016b000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;vfat &nbsp; &nbsp; 8512 &nbsp; &nbsp; 1 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc0051000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;wlan &nbsp; &nbsp; 146432 &nbsp; &nbsp; 10 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc0118000 &nbsp; &nbsp; ath_pci, wlan_xauth, wlan_wep, wlan_tkip, wlan_ccmp, wlan_acl, ath_rate_minstrel, wlan_scan_sta, wlan_scan_ap<br />&nbsp; &nbsp;wlan_acl &nbsp; &nbsp; 1888 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00e4000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;wlan_ccmp &nbsp; &nbsp; 5408 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00e1000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;wlan_scan_ap &nbsp; &nbsp; 2624 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00d9000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;wlan_scan_sta &nbsp; &nbsp; 8736 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00e6000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;wlan_tkip &nbsp; &nbsp; 9664 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00f2000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;wlan_wep &nbsp; &nbsp; 4000 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00f0000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;wlan_xauth &nbsp; &nbsp; 480 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00f6000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;xt_CLASSIFY &nbsp; &nbsp; 640 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00c5000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;xt_CONNMARK &nbsp; &nbsp; 1120 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc008c000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;xt_DSCP &nbsp; &nbsp; 1120 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00c9000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;xt_MARK &nbsp; &nbsp; 960 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00d5000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;xt_NOTRACK &nbsp; &nbsp; 832 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc0092000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;xt_connbytes &nbsp; &nbsp; 1312 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc0090000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;xt_connmark &nbsp; &nbsp; 800 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc008a000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;xt_dscp &nbsp; &nbsp; 832 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00c7000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;xt_helper &nbsp; &nbsp; 1024 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc008e000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;xt_length &nbsp; &nbsp; 736 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00cf000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;xt_mac &nbsp; &nbsp; 736 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00d1000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;xt_mark &nbsp; &nbsp; 640 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00d3000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;xt_string &nbsp; &nbsp; 896 &nbsp; &nbsp; 0 &nbsp; &nbsp; Live &nbsp; &nbsp; 0xc00bf000 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp;Total &nbsp; &nbsp; 1020720 &nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp; <br />Here are the processes (taken from X-WRT page <a href="http://192.168.1.1/cgi-bin/webif/status-processes.sh?interval=20)">http://192.168.1.1/cgi-bin/webif/status â€¦ terval=20)</a></p><p>&nbsp; &nbsp;Processes Status<br />&nbsp; &nbsp;PID &nbsp; &nbsp; Uid &nbsp; &nbsp; VmSize &nbsp; &nbsp; Stat &nbsp; &nbsp; Command<br />&nbsp; &nbsp;1 &nbsp; &nbsp; root &nbsp; &nbsp; 392 &nbsp; &nbsp; S &nbsp; &nbsp; init<br />&nbsp; &nbsp;2 &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; SW&lt; &nbsp; &nbsp; [kthreadd]<br />&nbsp; &nbsp;3 &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; SWN &nbsp; &nbsp; [ksoftirqd/0]<br />&nbsp; &nbsp;4 &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; SW&lt; &nbsp; &nbsp; [events/0]<br />&nbsp; &nbsp;5 &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; SW&lt; &nbsp; &nbsp; [khelper]<br />&nbsp; &nbsp;14 &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; SW&lt; &nbsp; &nbsp; [kblockd/0]<br />&nbsp; &nbsp;36 &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; SW &nbsp; &nbsp; [pdflush]<br />&nbsp; &nbsp;37 &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; SW &nbsp; &nbsp; [pdflush]<br />&nbsp; &nbsp;38 &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; SW&lt; &nbsp; &nbsp; [kswapd0]<br />&nbsp; &nbsp;39 &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; SW&lt; &nbsp; &nbsp; [aio/0]<br />&nbsp; &nbsp;49 &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; SW&lt; &nbsp; &nbsp; [mtdblockd]<br />&nbsp; &nbsp;201 &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; SWN &nbsp; &nbsp; [jffs2_gcd_mtd3]<br />&nbsp; &nbsp;215 &nbsp; &nbsp; root &nbsp; &nbsp; 400 &nbsp; &nbsp; S &nbsp; &nbsp; logger -s -p 6 -t<br />&nbsp; &nbsp;217 &nbsp; &nbsp; root &nbsp; &nbsp; 228 &nbsp; &nbsp; S &nbsp; &nbsp; init<br />&nbsp; &nbsp;225 &nbsp; &nbsp; root &nbsp; &nbsp; 356 &nbsp; &nbsp; S &nbsp; &nbsp; /sbin/syslogd -C16 -m 0<br />&nbsp; &nbsp;228 &nbsp; &nbsp; root &nbsp; &nbsp; 284 &nbsp; &nbsp; S &nbsp; &nbsp; /sbin/klogd<br />&nbsp; &nbsp;253 &nbsp; &nbsp; root &nbsp; &nbsp; 264 &nbsp; &nbsp; S &nbsp; &nbsp; /sbin/hotplug2 --override --persistent --max-children 1 --no-coldplug<br />&nbsp; &nbsp;350 &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; SW&lt; &nbsp; &nbsp; [khubd]<br />&nbsp; &nbsp;789 &nbsp; &nbsp; root &nbsp; &nbsp; 320 &nbsp; &nbsp; S &nbsp; &nbsp; crond -c /etc/crontabs<br />&nbsp; &nbsp;793 &nbsp; &nbsp; root &nbsp; &nbsp; 336 &nbsp; &nbsp; S &nbsp; &nbsp; /usr/sbin/dropbear -p 22<br />&nbsp; &nbsp;801 &nbsp; &nbsp; root &nbsp; &nbsp; 316 &nbsp; &nbsp; S &nbsp; &nbsp; httpd -p 80 -h /www -r OpenWrt<br />&nbsp; &nbsp;804 &nbsp; &nbsp; root &nbsp; &nbsp; 212 &nbsp; &nbsp; S &nbsp; &nbsp; p9100d -b -f /dev/usb/lp0 0<br />&nbsp; &nbsp;818 &nbsp; &nbsp; nobody &nbsp; &nbsp; 368 &nbsp; &nbsp; S &nbsp; &nbsp; /usr/sbin/dnsmasq -I eth0.0 -I eth0.1<br />&nbsp; &nbsp;1007 &nbsp; &nbsp; root &nbsp; &nbsp; 560 &nbsp; &nbsp; S &nbsp; &nbsp; /usr/sbin/dropbear -p 22<br />&nbsp; &nbsp;1008 &nbsp; &nbsp; root &nbsp; &nbsp; 496 &nbsp; &nbsp; S &nbsp; &nbsp; -ash<br />&nbsp; &nbsp;1230 &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; SW&lt; &nbsp; &nbsp; [scsi_eh_3]<br />&nbsp; &nbsp;1231 &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; SW&lt; &nbsp; &nbsp; [usb-storage]<br />&nbsp; &nbsp;1265 &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; SW&lt; &nbsp; &nbsp; [scsi_eh_4]<br />&nbsp; &nbsp;1266 &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; SW&lt; &nbsp; &nbsp; [usb-storage]<br />&nbsp; &nbsp;1490 &nbsp; &nbsp; root &nbsp; &nbsp; 384 &nbsp; &nbsp; S &nbsp; &nbsp; httpd -p 80 -h /www -r OpenWrt<br />&nbsp; &nbsp;1491 &nbsp; &nbsp; root &nbsp; &nbsp; 256 &nbsp; &nbsp; S &nbsp; &nbsp; /usr/bin/webif-page /www/cgi-bin/webif/status-processes.sh<br />&nbsp; &nbsp;1492 &nbsp; &nbsp; root &nbsp; &nbsp; 400 &nbsp; &nbsp; S &nbsp; &nbsp; sh -c /usr/bin/haserl /www/cgi-bin/webif/status-processes.sh<br />&nbsp; &nbsp;1493 &nbsp; &nbsp; root &nbsp; &nbsp; 260 &nbsp; &nbsp; S &nbsp; &nbsp; /usr/bin/haserl /www/cgi-bin/webif/status-processes.sh<br />&nbsp; &nbsp;1494 &nbsp; &nbsp; root &nbsp; &nbsp; 532 &nbsp; &nbsp; S &nbsp; &nbsp; /bin/sh</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p75461">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">DarrenD</div>
					<div class="post-datetime">
						27 Oct 2008, 20:49					</div>
				</div>
				<div class="post-content content">
					<p>I found the solution - see <a href="http://forum.openwrt.org/viewtopic.php?pid=68490#p68490">http://forum.openwrt.org/viewtopic.php?pid=68490#p68490</a></p><p>Basically the permission denied is because &quot;the /sbin/usb-storage file isn&#039;t executable by default ... you need to chmod it &quot;</p><p>The question now has to be &quot;Why isn&#039;t it executable by default?&quot;</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>