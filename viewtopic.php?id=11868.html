<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Newbie Questions (possible audio streaming, USB, WRTSL54GS)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 17 Feb 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p53087">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">HalNineThousand</div>
					<div class="post-datetime">
						30 Jul 2007, 14:41					</div>
				</div>
				<div class="post-content content">
					<p>I mentioned in another post that I&#039;m quite new to the kind of hacking OpenWRT involves and I&#039;ve also never looked into audio streaming before.&nbsp; For the past 5-6 years I&#039;ve been working my tail off starting a new business (which meant learning a lot of languages that weren&#039;t around in the &#039;80s when I learned to program on an Apple //e) and I&#039;ve finally had time to see what&#039;s going on.&nbsp; I love the idea of being able to put OpenWRT on small devices and have a computer that can fit in a small space and be used for a lot of different things.</p><p>I&#039;ve already been working with OpenWRT on a Linksys WRT54G (I bought a WRT54GS, found it was too new to do anything other than put in a micro version of DD-WRT and traded it for a the WRT54G I am now using).</p><p>I&#039;m using Slimserver with a Squeezebox to listen to my music files by wifi and I was looking at other devices and thought if I got a WRTSL54GS (and it seems, from the support pages, all versions are supported at this point), since it has a USB port, I could put OpenWRT on it, run MPD, and have MPD play the stream from Slimserver and use a USB sound card for audio (or USB speakers).&nbsp; That leads to my questions:</p><p>In devices like these, both Linksys and other brands (especially since it seems Linksys is getting less Linux friendly with some devices), when there is a connection like a USB port, is it generally a full connection?&nbsp; For example, on the WRTSL54GS the USB connector is intended to be used for storage.&nbsp; Is it common for what would seem to be standard connectors to be crippled and usable only for specific purposes?</p><p>I&#039;ve been looking into this and it looks like if I want to turn the WRTSL54GS into a music player (not a stream server, a stream player), it comes down to this:<br />1) Install OpenWRT on the device<br />2) Add either a USB sound card or USB speakers (if they don&#039;t need special drivers)<br />3) Add the MPD and MPC packages ipkg<br />4) Use the USB Audio HOWTO to set up the audio</p><p>And from there it looks like it should work.&nbsp; I know it&#039;s not &quot;that easy,&quot; that there are tons of glitches along the way, but are there any major or known reasons this should not work?&nbsp; I haven&#039;t seen any and I&#039;ve been searching.</p><p>I considered using Linksys&#039;s WMB54G for streaming, but I don&#039;t see that anyone is successfully using it with OpenWRT, there are many complaints about it in a number of forums, I can&#039;t find a source anywhere that specifies what URL it looks to for a stream source, and it seems to cost more.</p><p>If anyone else has suggestions on products they&#039;re using to play back (and not server) audio streams, I&#039;d love to hear what is working.</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53092">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">superkaybee</div>
					<div class="post-datetime">
						30 Jul 2007, 16:00					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve currently got a WRTSL54GS working as an mp3 jukebox and love it.&nbsp; I picked up a $20 USB audio adapter from Radio Shack (or &quot;The Source&quot; nowadays) and followed some of the howtos around the wiki/forum.&nbsp; There are packages available for mpd and the audio drivers.&nbsp; I mostly use my setup for playing mp3s from an NFS share but I&#039;ve also tested a few online radio streams and they seemed to work well too.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53093">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">HalNineThousand</div>
					<div class="post-datetime">
						30 Jul 2007, 16:04					</div>
				</div>
				<div class="post-content content">
					<p>How do you control MPD and the playlist?&nbsp; Through ssh, or do you have another way to do it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53096">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">superkaybee</div>
					<div class="post-datetime">
						30 Jul 2007, 16:16					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve actually got several ways of controlling the box:</p><p>1.&nbsp; &#039;mpc&#039; shell script from Nate True (<a href="http://devices.natetrue.com/musicap">http://devices.natetrue.com/musicap</a>)<br />2.&nbsp; &#039;phpmpd2&#039; web interface running on a separate box<br />3.&nbsp; &#039;gmpc&#039; graphical program on Linux or Win32<br />4.&nbsp; &#039;lirc&#039; to handle USB remote control (<a href="http://www.thinkgeek.com/electronics/mp3/5a20">http://www.thinkgeek.com/electronics/mp3/5a20</a>)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53098">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">HalNineThousand</div>
					<div class="post-datetime">
						30 Jul 2007, 16:24					</div>
				</div>
				<div class="post-content content">
					<p>Are you using any kind of display so you get feedback on what you&#039;re doing with the remote with lirc?</p><p>I was thinking that I&#039;d just have mpd run on start and after it&#039;s running, run mpc and have it add the mp3 stream from Slimserver as the one item in the play list, and controlling it through the interface for Slimserver.&nbsp; (There&#039;s a skin specifically for the Nokia 770, which is a good price for a PDA with wifi, to control Slimserver.)</p><p>I&#039;m open to other ideas, though.&nbsp; I remote would be great, but if it&#039;s used for more than starting or stopping, don&#039;t you need a display to show what you&#039;re doing?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53099">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">superkaybee</div>
					<div class="post-datetime">
						30 Jul 2007, 16:26					</div>
				</div>
				<div class="post-content content">
					<p>That&#039;s my next challenge.&nbsp; <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&nbsp; Currently I don&#039;t have a display on it but I might look into an LCD screen if time/money permits.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53101">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">HalNineThousand</div>
					<div class="post-datetime">
						30 Jul 2007, 16:33					</div>
				</div>
				<div class="post-content content">
					<p>I was thinking of eventually using something like this with an LCD screen, like on the page you linked to, but using the display as a clock so it would work as a clock radio in my bedroom and it wouldn&#039;t take much to add an alarm function to it.&nbsp; I also figured I could add an AM/FM card to the server so it could play local radio as well.</p><p>Of course, then I also have to add two buttons, one to turn the alarm off and one for snooze.&nbsp; When I&#039;m just waking up, figuring out a remote is a bit much. ;-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53103">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">superkaybee</div>
					<div class="post-datetime">
						30 Jul 2007, 16:40					</div>
				</div>
				<div class="post-content content">
					<p>Good idea for the alarm clock.&nbsp; I&#039;ve read some other forum posts discussing LCD screens but most involve attaching a serial port, etc.&nbsp; I would think one could go w/ a USB-based screen on the SL to save the soldering work but I haven&#039;t looked into it that seriously yet.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53105">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">HalNineThousand</div>
					<div class="post-datetime">
						30 Jul 2007, 16:50					</div>
				</div>
				<div class="post-content content">
					<p>I thought there either was a serial port or the pins for one on the WRTSL54GS.&nbsp; I read the hardware hacking page on it and it mentioned some other connections.&nbsp; I figure at the least, it wouldn&#039;t be hard to replace the single USB connector with a twin one.</p><p>Have you tried USB speakers on it?&nbsp; I don&#039;t know what they need in terms of actual signals on the USB speakers, but I found a number of USB speakers for decent prices, especially when you consider that for a small room it could give you a twofer -- speakers and sound card for the price of one.&nbsp; It&#039;d be great if they worked in place of a USB sound card and separate speakers.&nbsp; I know they&#039;re USB powered and don&#039;t know if the WRTSL54GS has enough power to feed them.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53106">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">superkaybee</div>
					<div class="post-datetime">
						30 Jul 2007, 16:53					</div>
				</div>
				<div class="post-content content">
					<p>Hmm.. not sure on the USB speakers but would be interesting to know if they&#039;d work.&nbsp; I know the wiki page for the SL now has good details on the process of adding a serial port -- but my soldering skills ain&#039;t up for it.</p><p>Anyone else have any experience adding an LCD to their SL or other routers?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53108">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">HalNineThousand</div>
					<div class="post-datetime">
						30 Jul 2007, 17:07					</div>
				</div>
				<div class="post-content content">
					<p>Here&#039;s two links I&#039;ve found while searching for info on USB speakers:</p><p><a href="http://www.linux-usb.org/USB-guide/x319.html">http://www.linux-usb.org/USB-guide/x319.html</a></p><p>That one makes me thing there&#039;s enough of a standard for USB sound cards that most would be compatible and my guess is that speakers would be similar.</p><p>Here&#039;s the other one, which is about setting up a specific pair of speakers:</p><p><a href="http://www.theinquirer.net/default.aspx?article=32761">http://www.theinquirer.net/default.aspx?article=32761</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53858">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">HalNineThousand</div>
					<div class="post-datetime">
						14 Aug 2007, 07:30					</div>
				</div>
				<div class="post-content content">
					<p>If superkaybee or anyone else who has done this is still reading, does anyone have the names of the packages to use for USB Audio drivers?&nbsp; And do they have the links to the HOWTOs that would help?&nbsp; I finally had time to flash my router and now I find I can&#039;t get the USBAudio HOWTO (<a href="http://wiki.openwrt.org/UsbAudioHowto?highlight=%28usb%29">http://wiki.openwrt.org/UsbAudioHowto?h â€¦ =%28usb%29</a>) to work since it requires make and two kmod packages that aren&#039;t in White Russian.&nbsp; If it&#039;s possible to do this by just adding packages, then that&#039;s how I&#039;d rather do it.</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53925">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">whbjr</div>
					<div class="post-datetime">
						15 Aug 2007, 05:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>HalNineThousand wrote:</cite><blockquote><p>I can&#039;t get the USBAudio HOWTO to work since it requires make and two kmod packages that aren&#039;t in White Russian.</p></blockquote></div><p>Which two?&nbsp; Not that I&#039;d really be able to help, but still - if it&#039;s only two, let us know, maybe someone&#039;s solved that problem already!</p><p><a href="http://devices.natetrue.com/musicap/">NateTrue</a> says<br />&quot;For USB-audio support, make sure to build the kmod-usb-core, kmod-usb-ohci,kmod-alsa, and kmod-soundcore kernel modules&quot;</p><p>My older kamikaze (r3587) WGT634U says:<br /></p><div class="codebox"><pre><code># lsmod | grep snd
snd_pcm_oss 38784 0 - Live 0xc01c8000
snd_mixer_oss 14464 1 snd_pcm_oss, Live 0xc019d000
snd_usb_audio 53920 0 - Live 0xc018e000
snd_hwdep 5136 1 snd_usb_audio, Live 0xc013f000
snd_usb_lib 11392 1 snd_usb_audio, Live 0xc0167000
snd_rawmidi 16352 1 snd_usb_lib, Live 0xc0189000
snd_pcm 65312 2 snd_pcm_oss,snd_usb_audio, Live 0xc01a6000
snd_timer 16240 1 snd_pcm, Live 0xc0184000
snd 35872 8 snd_pcm_oss,snd_mixer_oss,snd_usb_audio,snd_hwdep,snd_usb_lib,snd_rawmidi,snd_pcm,snd_timer, Live 0xc015d000
snd_page_alloc 5136 1 snd_pcm, Live 0xc007d000
usbcore 106256 9 snd_usb_audio,snd_usb_lib,pl2303,ehci_hcd,uhci_hcd,usb_storage,usbserial,ohci_hcd, Live 0xc0142000
soundcore 4720 1 snd, Live 0xc0073000</code></pre></div><p>That seems rather confusing to me, but there you have it - I believe all the snd modules are in the &quot;alsa&quot; package. good luck!</p><p>By the way, search on eBay for &quot;usb 3d sound&quot; - I just did, and found 277 items (!) which are the cheap little dongle that I&#039;m using, which worked perfectly right out of the box.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53927">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">HalNineThousand</div>
					<div class="post-datetime">
						15 Aug 2007, 05:37					</div>
				</div>
				<div class="post-content content">
					<p>One missing package is kmod_alsa, which seems to be referenced.&nbsp; In one thread (<a href="http://forum.openwrt.org/viewtopic.php?id=6412&amp;p=1">http://forum.openwrt.org/viewtopic.php?id=6412&amp;p=1</a>), which uses RC5 a person gives some good instructions, but some of the packages won&#039;t install without kmod_alsa.&nbsp; While he is working on RC5, I compared the RC5 and 0.9 repositories for White Russian and neither had kmod_alsa.</p><p>Here&#039;s what I get for the modules:<br /></p><div class="codebox"><pre><code>root@gump:~$ lsmod | grep snd
snd-usb-audio          51944   0 (unused)
snd-usb-lib            11380   0 [snd-usb-audio]
snd-pcm-oss            40372   0 (unused)
snd-mixer-oss          14632   0 [snd-pcm-oss]
snd-pcm                67012   0 [snd-usb-audio snd-pcm-oss]
snd-timer              18632   0 [snd-pcm]
snd-hwdep               6008   0 [snd-usb-audio]
snd-rawmidi            17352   0 [snd-usb-lib]
snd                    42840   0 [snd-usb-audio snd-usb-lib snd-pcm-oss snd-mixer-oss snd-pcm snd-timer snd-hwdep snd-rawmidi]
snd-page-alloc          6688   0 [snd-usb-audio snd-mixer-oss snd-pcm snd-timer snd-hwdep snd-rawmidi snd]
soundcore               4048   0 [snd]
usbcore                74808   1 [snd-usb-audio snd-usb-lib ehci-hcd]</code></pre></div><p>The other problem is the USB speakers.&nbsp; They&#039;re Tritton and from everything I can gather, they should be recognized just like a USB sound card.&nbsp; I tested them on an Ubuntu system and that was the case, but they aren&#039;t seen on the router.&nbsp; I have no clue what to look at to track that down, whether it&#039;s a sound issue or a usb issue or if there&#039;s another package I need to add.</p><p>At this point, I&#039;m lost.&nbsp; I&#039;ve tried to follow two sets of directions (removing the packages and restarting from scratch between the two), and I can&#039;t get either to work.&nbsp; I&#039;m hoping this is just a matter of the speakers not being recognized.&nbsp; Yes, I can buy other speakers, but I really don&#039;t want to order new speakers from Amazon or New Egg or somewhere else, wait a week or so for them, then test it out only to find the problem wasn&#039;t the speakers.</p><p>I&#039;ve put up another post related to this (about kmod_alsa).&nbsp; I don&#039;t know if the problem is that there aren&#039;t many people using USB sound on White Russian (I don&#039;t think there&#039;s a Kamikaze version for the WRTSL54GS yet), but it seems quite difficult to get help on this.</p><p>Thanks for the info and thanks to anyone who can help me on this.&nbsp; Once it&#039;s done, I&#039;m blogging it, step by step, so anyone can make sure they can do the same thing easily.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60472">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">cak</div>
					<div class="post-datetime">
						15 Dec 2007, 18:44					</div>
				</div>
				<div class="post-content content">
					<p>At the risk of hijacking your thread, I&#039;d like to ask if anyone has gotten slimserver running on a WRT? I&#039;m interested in using it to drive a squeezebox, just for internet radio...</p><p>I&#039;m currently using an NSLU2 with disk as a slimserver at another installation; it works fine except that the web interface is very slow. Seems like it should be doable on a WRT - especially with an older version of slimserver that doesn&#039;t use sqlite/mysql.</p><p>Thanks.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>